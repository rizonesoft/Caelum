/*! For license information please see taskpane.js.LICENSE.txt */
(()=>{var n={39026(n,e,t){"use strict";const o=t(12935),r=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(n){super(),n instanceof Error?(this.originalError=n,({message:n}=n)):(this.originalError=new Error(n),this.originalError.stack=this.stack),this.name="AbortError",this.message=n}}const a=(n,e)=>new Promise((t,a)=>{e={onFailedAttempt:()=>{},retries:10,...e};const s=o.operation(e);s.attempt(async o=>{try{t(await n(o))}catch(n){if(!(n instanceof Error))return void a(new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`));if(n instanceof i)s.stop(),a(n.originalError);else if(n instanceof TypeError&&(l=n.message,!r.includes(l)))s.stop(),a(n);else{((n,e,t)=>{const o=t.retries-(e-1);n.attemptNumber=e,n.retriesLeft=o})(n,o,e);try{await e.onFailedAttempt(n)}catch(n){return void a(n)}s.retry(n)||a(s.mainError())}}var l})});n.exports=a,n.exports.default=a,n.exports.AbortError=i},12935(n,e,t){n.exports=t(24665)},24665(n,e,t){var o=t(64063);e.operation=function(n){var t=e.timeouts(n);return new o(t,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},e.timeouts=function(n){if(n instanceof Array)return[].concat(n);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var t in n)e[t]=n[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],r=0;r<e.retries;r++)o.push(this.createTimeout(r,e));return n&&n.forever&&!o.length&&o.push(this.createTimeout(r,e)),o.sort(function(n,e){return n-e}),o},e.createTimeout=function(n,e){var t=e.randomize?Math.random()+1:1,o=Math.round(t*Math.max(e.minTimeout,1)*Math.pow(e.factor,n));return Math.min(o,e.maxTimeout)},e.wrap=function(n,t,o){if(t instanceof Array&&(o=t,t=null),!o)for(var r in o=[],n)"function"==typeof n[r]&&o.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=n[a];n[a]=function(o){var r=e.operation(t),i=Array.prototype.slice.call(arguments,1),a=i.pop();i.push(function(n){r.retry(n)||(n&&(arguments[0]=r.mainError()),a.apply(this,arguments))}),r.attempt(function(){o.apply(n,i)})}.bind(n,s),n[a].options=t}}},64063(n){function e(n,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(n)),this._timeouts=n,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}n.exports=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(n){if(this._timeout&&clearTimeout(this._timeout),!n)return!1;var e=(new Date).getTime();if(n&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(n),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(n);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1)}var o=this;return this._timer=setTimeout(function(){o._attempts++,o._operationTimeoutCb&&(o._timeout=setTimeout(function(){o._operationTimeoutCb(o._attempts)},o._operationTimeout),o._options.unref&&o._timeout.unref()),o._fn(o._attempts)},t),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(n,e){this._fn=n,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(n){console.log("Using RetryOperation.try() is deprecated"),this.attempt(n)},e.prototype.start=function(n){console.log("Using RetryOperation.start() is deprecated"),this.attempt(n)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var n={},e=null,t=0,o=0;o<this._errors.length;o++){var r=this._errors[o],i=r.message,a=(n[i]||0)+1;n[i]=a,a>=t&&(e=r,t=a)}return e}},87473(n,e,t){"use strict";t.d(e,{FA:()=>m,Q$:()=>h,Vx:()=>f,aR:()=>g,getEmailContext:()=>u,jt:()=>d,qP:()=>A,yd:()=>p});var o=t(75260),r=t(47336),i=t(43712),a=t(89419);let s=null,l="",c=null;async function A(){const[n,e,t]=await Promise.all([(0,a.k3)(),(0,a.getCurrentEmailSubject)(),(0,a.getOriginalSender)()]);return c={subject:e,body:n,sender:t},c}async function u(){return c||A()}function d(){c=null}async function p(n){if(!n.instructions||!n.instructions.trim())throw new Error("Please enter your reply instructions.");const e=await u();let t=`From: ${e.sender.name} <${e.sender.email}>\n`;t+=`Subject: ${e.subject}\n\n`,t+=e.body,t=(0,r.U6)(t,6e3);const a=n.language&&"auto"!==n.language?n.language:"Reply in the same language as the original email",c=(0,r.fn)(i.Yu,{ORIGINAL_EMAIL:t,REPLY_INSTRUCTIONS:n.instructions,TONE:n.tone||"professional",LANGUAGE:a,REPLY_TO_NAME:e.sender.name||e.sender.email||"the sender"},!0),A=await(0,o.Df)(c,{temperature:.7,maxOutputTokens:2048});return s={...n},l=A,A}async function m(){if(!s)throw new Error("No previous reply to regenerate. Please generate a reply first.");return p(s)}async function h(n){if(!l)throw new Error("No reply to refine. Please generate a reply first.");if(!n||!n.trim())throw new Error("Please enter your refinement instructions.");const e=`You are a professional email assistant.\n\nHere is the current draft reply:\n\n---\n${l}\n---\n\nPlease revise the reply based on these instructions: ${n}\n\nRequirements:\n- Keep the same general format (greeting, body, sign-off)\n- Apply the requested changes while maintaining quality\n- Return only the revised reply, no explanations`,t=await(0,o.Df)(e,{temperature:.6,maxOutputTokens:2048});return l=t,t}function f(n){const e=(0,a.J5)(),t=Office.context.mailbox.item;if("compose"===e){if(!t||!t.body||"function"!=typeof t.body.prependAsync)throw new Error("Cannot insert reply — compose body is not accessible.");t.body.prependAsync(E(n),{coercionType:Office.CoercionType.Html})}else{if(!t||"function"!=typeof t.displayReplyForm)throw new Error("Cannot open reply window. Please make sure an email is selected.");t.displayReplyForm(E(n))}}function g(n){const e=(0,a.J5)(),t=Office.context.mailbox.item;if("compose"===e){if(!t||!t.body||"function"!=typeof t.body.prependAsync)throw new Error("Cannot insert reply — compose body is not accessible.");t.body.prependAsync(E(n),{coercionType:Office.CoercionType.Html})}else{if(!t||"function"!=typeof t.displayReplyAllForm)throw new Error("Cannot open Reply All window. Please make sure an email is selected.");t.displayReplyAllForm(E(n))}}function E(n){return n.split("\n\n").map(n=>`<p>${function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(n).replace(/\n/g,"<br>")}</p>`).join("")}},33422(n,e,t){"use strict";t.r(e),t.d(e,{GOAL_PROMPTS:()=>f,PRESET_RULE_LABELS:()=>m,buildGoalText:()=>g,buildRulesText:()=>h,deleteTemplate:()=>C,getApiKey:()=>A,getSetting:()=>d,getTemplates:()=>v,loadSettings:()=>l,resetSettings:()=>p,saveSettings:()=>c,saveTemplate:()=>y,setApiKey:()=>u});var o=t(75260);const r="ai_compose_settings",i="glide_settings",a={apiKey:"",defaultModel:"gemini-3-flash-preview",defaultTone:"professional",defaultSummaryStyle:"bullets",defaultLanguage:"English",presetRules:{noPlaceholders:!0,noSignature:!0,noSubjectLine:!1,keepShort:!1,useSimpleLanguage:!1},customRules:""};let s=null;function l(){if(s)return{...s};try{let n=localStorage.getItem(r);if(!n){const e=localStorage.getItem(i);e&&(n=e,localStorage.setItem(r,e),localStorage.removeItem(i))}if(n){const e=JSON.parse(n);s={...a,...e}}else s={...a}}catch{s={...a}}return{...s}}function c(n){const e=s?.apiKey||"";s={...n};try{localStorage.setItem(r,JSON.stringify(s))}catch{}if(n.apiKey&&n.apiKey!==e)try{(0,o.HW)(n.apiKey)}catch{}}function A(){return l().apiKey}function u(n){const e=l();e.apiKey=n,c(e)}function d(n){return l()[n]}function p(){s={...a};try{localStorage.removeItem(r)}catch{}}const m={noPlaceholders:"Do not include placeholder tokens like [Your Name], [Company], or [Recipient]. Use real names from context or omit the sign-off entirely instead of using placeholders",noSignature:'Do not add a sign-off or signature (e.g. "Best regards", "Kind regards", "Sincerely") — the email client will add the signature automatically',noSubjectLine:"Do not include a subject line in the output",keepShort:"Keep the output concise — no more than 5 sentences",useSimpleLanguage:"Use simple, easy-to-understand language (avoid jargon)"};function h(){const n=l(),e=[];for(const[t,o]of Object.entries(n.presetRules))o&&m[t]&&e.push(`- ${m[t]}`);return n.customRules.trim()&&e.push(`- ${n.customRules.trim()}`),e.length>0?`\n\nAdditional rules:\n${e.join("\n")}`:""}const f={"close-deal":"Write with the strategic goal of CLOSING A DEAL. Create appropriate urgency, reinforce value and benefits, proactively address potential objections, and end with a clear, specific call to action. Use confident but not pushy language.","get-approval":"Write with the strategic goal of GETTING A QUOTE OR PROPOSAL APPROVED. Summarize key value propositions concisely, address any likely concerns preemptively, create a sense of momentum, and make it easy to say yes with a clear next step.","schedule-meeting":"Write with the strategic goal of SCHEDULING A MEETING. Propose specific times (if context allows), emphasize the value of the meeting, keep it brief and action-oriented, and make it effortless to confirm.","follow-up":"Write with the strategic goal of FOLLOWING UP ON AN OVERDUE ITEM. Be firm but professional, reference the original timeline, express understanding while maintaining urgency, and request a specific response or action by a clear date.","request-intro":"Write with the strategic goal of REQUESTING A FAVOR OR INTRODUCTION. Be respectful of the recipient's time, clearly explain the mutual benefit, make it easy to say yes by providing context they can forward, and express genuine appreciation.","resolve-complaint":"Write with the strategic goal of RESOLVING A COMPLAINT. Acknowledge the issue with empathy, take ownership where appropriate, propose a concrete resolution, and aim to turn a negative experience into a positive one."};function g(n,e){if(!n||"none"===n)return"";if("custom"===n&&e?.trim())return`\n\nStrategic goal: ${e.trim()}. Write the email with this specific outcome in mind — use appropriate persuasion, structure, and a clear call to action.`;const t=f[n];return t?`\n\n${t}`:""}const E="aic_templates";function v(){try{const n=localStorage.getItem(E);return n?JSON.parse(n):[]}catch{return[]}}function y(n){const e=v(),t={...n,id:Date.now().toString(36)+Math.random().toString(36).slice(2,6)};return e.push(t),localStorage.setItem(E,JSON.stringify(e)),t}function C(n){const e=v().filter(e=>e.id!==n);localStorage.setItem(E,JSON.stringify(e))}},47336(n,e,t){"use strict";t.d(e,{U6:()=>i,fn:()=>r});const o="\n\n[Content truncated due to length…]";function r(n,e,o=!1){if(!n)throw new Error("Prompt template cannot be empty.");let r=n;for(const[n,t]of Object.entries(e)){const e=`{{${n}}}`;r=r.split(e).join(t)}if(o)try{const{buildRulesText:n}=t(33422);r+=n()}catch{}return r}function i(n,e){if(!n)return n;if(e<=0)throw new Error("maxTokens must be a positive number.");const t=4*e;if(n.length<=t)return n;const r=t-36;if(r<=0)return o.trim();const i=n.slice(0,r),a=function(n){for(let e=n.length-1;e>=0;e--){const t=n[e];if("."===t||"!"===t||"?"===t)return e+1}return-1}(i);return(a>0?i.slice(0,a):i).trimEnd()+o}},43712(n,e,t){"use strict";t.d(e,{DS:()=>a,Yu:()=>r,fz:()=>s,mH:()=>i,mR:()=>o,uC:()=>l});const o='You are a professional email assistant.\n\nDraft a complete email based on the following instructions:\n\n{{INSTRUCTIONS}}\n\nRequirements:\n- Tone: {{TONE}}\n- Language: {{LANGUAGE}}\n- Include a subject line on the first line prefixed with "Subject: "\n- Use an appropriate greeting\n- Keep the email concise and to the point\n- Do not add any commentary outside the email itself',r="You are a professional email assistant.\n\nHere is the original email you are replying to:\n\n---\n{{ORIGINAL_EMAIL}}\n---\n\nReply instructions: {{REPLY_INSTRUCTIONS}}\n\nRequirements:\n- Tone: {{TONE}}\n- Language: {{LANGUAGE}}\n- Address the reply to: {{REPLY_TO_NAME}} (this is the person you are replying to, NOT the person the original email was addressed to)\n- Write only the reply body (no subject line needed)\n- Reference relevant points from the original email naturally\n- Keep the reply focused and professional\n- Do not add any commentary outside the reply itself",i="You are a professional email assistant.\n\nSummarize the following email thread:\n\n---\n{{EMAIL_THREAD}}\n---\n\nRequirements:\n- Length: {{SUMMARY_LENGTH}} (brief = 2-3 sentences, standard = 1 paragraph, detailed = multiple paragraphs)\n- Identify the key discussion points and decisions made\n- Note any action items or deadlines mentioned\n- List the participants and their main positions\n- Use bullet points for clarity where appropriate\n- Do not add opinions or information not present in the thread",a="You are a professional writing assistant.\n\nImprove the following text:\n\n---\n{{TEXT}}\n---\n\nFocus on: {{IMPROVEMENT_FOCUS}}\n\nRequirements:\n- Fix grammar, spelling, and punctuation errors\n- Improve clarity and readability\n- Maintain the original meaning and intent\n- Keep the same general length unless brevity improves the text\n- Return only the improved text, no explanations or annotations",s='You are a professional email assistant.\n\nExtract all action items, tasks, and deadlines from the following email:\n\n---\n{{EMAIL_CONTENT}}\n---\n\nRequirements:\n- List each action item as a bullet point\n- For each item, identify:\n  - **Task**: What needs to be done\n  - **Owner**: Who is responsible (if mentioned)\n  - **Deadline**: When it\'s due (if mentioned)\n- If no action items are found, respond with "No action items found."\n- Only extract items explicitly stated or clearly implied in the email\n- Do not invent tasks that are not present',l="You are a professional translator.\n\nTranslate the following text to {{TARGET_LANGUAGE}}:\n\n---\n{{TEXT}}\n---\n\nRequirements:\n- Maintain the original formatting (paragraphs, bullet points, etc.)\n- Preserve the original tone and register\n- Use natural, fluent phrasing in the target language (not literal word-for-word)\n- Keep proper nouns, brand names, and technical terms as-is unless they have\n  well-known translations\n- Return only the translated text, no explanations"},75260(n,e,t){"use strict";t.d(e,{t2:()=>pr,ZU:()=>m,mm:()=>Er,Df:()=>gr,HW:()=>hr});var o=t(39026);class r{}function i(n,e){return n.replace(/\{([^}]+)\}/g,(n,t)=>{if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];return null!=n?String(n):""}throw new Error(`Key '${t}' not found in valueMap.`)})}function a(n,e,t){for(let o=0;o<e.length-1;o++){const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in n)){if(!Array.isArray(t))throw new Error(`Value must be a list given an array path ${r}`);n[i]=Array.from({length:t.length},()=>({}))}if(Array.isArray(n[i])){const r=n[i];if(Array.isArray(t))for(let n=0;n<r.length;n++)a(r[n],e.slice(o+1),t[n]);else for(const n of r)a(n,e.slice(o+1),t)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);return i in n||(n[i]=[{}]),void a(n[i][0],e.slice(o+1),t)}n[r]&&"object"==typeof n[r]||(n[r]={}),n=n[r]}const o=e[e.length-1],r=n[o];if(void 0!==r){if(!t||"object"==typeof t&&0===Object.keys(t).length)return;if(t===r)return;if("object"!=typeof r||"object"!=typeof t||null===r||null===t)throw new Error(`Cannot set value for an existing key. Key: ${o}`);Object.assign(r,t)}else if("_self"!==o||"object"!=typeof t||null===t||Array.isArray(t))n[o]=t;else{const e=t;Object.assign(n,e)}}function s(n,e,t=void 0){try{if(1===e.length&&"_self"===e[0])return n;for(let o=0;o<e.length;o++){if("object"!=typeof n||null===n)return t;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const r=n[i];return Array.isArray(r)?r.map(n=>s(n,e.slice(o+1),t)):t}return t}n=n[r]}return n}catch(n){if(n instanceof TypeError)return t;throw n}}function l(n,e,t,o,r){if(o>=e.length)return;if("object"!=typeof n||null===n)return;const i=e[o];if(i.endsWith("[]")){const a=i.slice(0,-2),s=n;if(a in s&&Array.isArray(s[a]))for(const n of s[a])l(n,e,t,o+1,r)}else if("*"===i){if("object"==typeof n&&null!==n&&!Array.isArray(n)){const e=n,i=Object.keys(e).filter(n=>!n.startsWith("_")&&!r.has(n)),s={};for(const n of i)s[n]=e[n];for(const[n,r]of Object.entries(s)){const i=[];for(const e of t.slice(o))"*"===e?i.push(n):i.push(e);a(e,i,r)}for(const n of i)delete e[n]}}else i in n&&l(n[i],e,t,o+1,r)}function c(n){if("string"!=typeof n)throw new Error("fromImageBytes must be a string");return n}function A(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["parent"]);null!=o&&a(e,["parent"],o);const r=s(n,["documentName"]);return null!=r&&a(e,["documentName"],r),e}(l)),e}var u,d,p,m,h,f,g,E,v,y,C,b,B,w,x,_,T,I,S,O,k,R,N,P,D,M,L,U,q,G,j,F,H,V,W,$,J,z,Y,K,X,Q,Z,nn,en,tn,on,rn,an,sn,ln,cn,An,un,dn,pn,mn,hn,fn;!function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(u||(u={})),function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"}(d||(d={})),function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"}(p||(p={})),function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"}(m||(m={})),function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"}(h||(h={})),function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"}(f||(f={})),function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(g||(g={})),function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(E||(E={})),function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"}(v||(v={})),function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"}(y||(y={})),function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"}(C||(C={})),function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"}(b||(b={})),function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(B||(B={})),function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"}(w||(w={})),function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"}(x||(x={})),function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"}(_||(_={})),function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"}(T||(T={})),function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(I||(I={})),function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(S||(S={})),function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"}(O||(O={})),function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(k||(k={})),function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"}(R||(R={})),function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(N||(N={})),function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(P||(P={})),function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(D||(D={})),function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(M||(M={})),function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"}(L||(L={})),function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"}(U||(U={})),function(n){n.COLLECTION="COLLECTION"}(q||(q={})),function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"}(G||(G={})),function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(j||(j={})),function(n){n.PREDICT="PREDICT",n.EMBED_CONTENT="EMBED_CONTENT"}(F||(F={})),function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"}(H||(H={})),function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"}(V||(V={})),function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"}(W||(W={})),function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}($||($={})),function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(J||(J={})),function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(z||(z={})),function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(Y||(Y={})),function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"}(K||(K={})),function(n){n.ASSET="ASSET",n.STYLE="STYLE"}(X||(X={})),function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"}(Q||(Q={})),function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"}(Z||(Z={})),function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"}(nn||(nn={})),function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"}(en||(en={})),function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"}(tn||(tn={})),function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"}(on||(on={})),function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"}(rn||(rn={})),function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"}(an||(an={})),function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"}(sn||(sn={})),function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"}(ln||(ln={})),function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(cn||(cn={})),function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(An||(An={})),function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"}(un||(un={})),function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(dn||(dn={})),function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(pn||(pn={})),function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"}(mn||(mn={})),function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"}(hn||(hn={}));class gn{constructor(n){const e={};for(const t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}}class En{get text(){var n,e,t,o,r,i,a,s;if(0===(null===(o=null===(t=null===(e=null===(n=this.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",c=!1;const A=[];for(const n of null!==(s=null===(a=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(n))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||A.push(e);if("string"==typeof n.text){if("boolean"==typeof n.thought&&n.thought)continue;c=!0,l+=n.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?l:void 0}get data(){var n,e,t,o,r,i,a,s;if(0===(null===(o=null===(t=null===(e=null===(n=this.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const c=[];for(const n of null!==(s=null===(a=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)&&void 0!==s?s:[]){for(const[e,t]of Object.entries(n))"inlineData"===e||null===t&&void 0===t||c.push(e);n.inlineData&&"string"==typeof n.inlineData.data&&(l+=atob(n.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var n,e,t,o,r,i,a,s;if(0===(null===(o=null===(t=null===(e=null===(n=this.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(s=null===(a=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(n=>n.functionCall).map(n=>n.functionCall).filter(n=>void 0!==n);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var n,e,t,o,r,i,a,s,l;if(0===(null===(o=null===(t=null===(e=null===(n=this.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(s=null===(a=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(n=>n.executableCode).map(n=>n.executableCode).filter(n=>void 0!==n);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var n,e,t,o,r,i,a,s,l;if(0===(null===(o=null===(t=null===(e=null===(n=this.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(s=null===(a=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===a?void 0:a.parts)||void 0===s?void 0:s.filter(n=>n.codeExecutionResult).map(n=>n.codeExecutionResult).filter(n=>void 0!==n);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class vn{}class yn{}class Cn{}class bn{}class Bn{}class wn{}class xn{}class _n{}class Tn{}class In{}class Sn{_fromAPIResponse({apiResponse:n,_isVertexAI:e}){const t=new Sn;let o;const r=n;return o=e?function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["videos"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["_self"]);return null!=t&&a(e,["video"],function(n){const e={},t=s(n,["gcsUri"]);null!=t&&a(e,["uri"],t);const o=s(n,["bytesBase64Encoded"]);null!=o&&a(e,["videoBytes"],c(o));const r=s(n,["mimeType"]);return null!=r&&a(e,["mimeType"],r),e}(t)),e}(n))),a(e,["generatedVideos"],n)}const o=s(n,["raiMediaFilteredCount"]);null!=o&&a(e,["raiMediaFilteredCount"],o);const r=s(n,["raiMediaFilteredReasons"]);return null!=r&&a(e,["raiMediaFilteredReasons"],r),e}(l)),e}(r):function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response","generateVideoResponse"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["generatedSamples"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["video"]);return null!=t&&a(e,["video"],function(n){const e={},t=s(n,["uri"]);null!=t&&a(e,["uri"],t);const o=s(n,["encodedVideo"]);null!=o&&a(e,["videoBytes"],c(o));const r=s(n,["encoding"]);return null!=r&&a(e,["mimeType"],r),e}(t)),e}(n))),a(e,["generatedVideos"],n)}const o=s(n,["raiMediaFilteredCount"]);null!=o&&a(e,["raiMediaFilteredCount"],o);const r=s(n,["raiMediaFilteredReasons"]);return null!=r&&a(e,["raiMediaFilteredReasons"],r),e}(l)),e}(r),Object.assign(t,o),t}}class On{}class kn{}class Rn{}class Nn{}class Pn{}class Dn{}class Mn{}class Ln{_fromAPIResponse({apiResponse:n,_isVertexAI:e}){const t=new Ln,o=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["parent"]);null!=o&&a(e,["parent"],o);const r=s(n,["documentName"]);return null!=r&&a(e,["documentName"],r),e}(l)),e}(n);return Object.assign(t,o),t}}class Un{}class qn{}class Gn{}class jn{}class Fn{}class Hn{get text(){var n,e,t;let o="",r=!1;const i=[];for(const a of null!==(t=null===(e=null===(n=this.serverContent)||void 0===n?void 0:n.modelTurn)||void 0===e?void 0:e.parts)&&void 0!==t?t:[]){for(const[n,e]of Object.entries(a))"text"!==n&&"thought"!==n&&null!==e&&i.push(n);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;r=!0,o+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var n,e,t;let o="";const r=[];for(const i of null!==(t=null===(e=null===(n=this.serverContent)||void 0===n?void 0:n.modelTurn)||void 0===e?void 0:e.parts)&&void 0!==t?t:[]){for(const[n,e]of Object.entries(i))"inlineData"!==n&&null!==e&&r.push(n);i.inlineData&&"string"==typeof i.inlineData.data&&(o+=atob(i.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Vn{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wn{_fromAPIResponse({apiResponse:n,_isVertexAI:e}){const t=new Wn,o=A(n);return Object.assign(t,o),t}}function $n(n,e){if(!e||"string"!=typeof e)throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}return`publishers/google/models/${e}`}return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jn(n,e){const t=$n(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zn(n){return Array.isArray(n)?n.map(n=>Yn(n)):[Yn(n)]}function Yn(n){if("object"==typeof n&&null!==n)return n;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof n)}function Kn(n){const e=Yn(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xn(n){const e=Yn(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qn(n){if(null==n)throw new Error("PartUnion is required");if("object"==typeof n)return n;if("string"==typeof n)return{text:n};throw new Error("Unsupported part type: "+typeof n)}function Zn(n){if(null==n||Array.isArray(n)&&0===n.length)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(n=>Qn(n)):[Qn(n)]}function ne(n){return null!=n&&"object"==typeof n&&"parts"in n&&Array.isArray(n.parts)}function ee(n){return null!=n&&"object"==typeof n&&"functionCall"in n}function te(n){return null!=n&&"object"==typeof n&&"functionResponse"in n}function oe(n){if(null==n)throw new Error("ContentUnion is required");return ne(n)?n:{role:"user",parts:Zn(n)}}function re(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const e=oe(n);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]});if(n.isVertexAI()){const n=oe(e);return n.parts&&n.parts.length>0&&void 0!==n.parts[0].text?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>oe(n)):[oe(e)]}function ie(n){if(null==n||Array.isArray(n)&&0===n.length)throw new Error("contents are required");if(!Array.isArray(n)){if(ee(n)||te(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[oe(n)]}const e=[],t=[],o=ne(n[0]);for(const r of n){const n=ne(r);if(n!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(n)e.push(r);else{if(ee(r)||te(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Zn(t)}),e}function ae(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=n.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(e.nullable=!0,n=i[1]):"null"===i[1].type&&(e.nullable=!0,n=i[0])),n.type instanceof Array&&function(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(n=>"null"!==n);if(1===t.length)e.type=Object.values(m).includes(t[0].toUpperCase())?t[0].toUpperCase():m.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(m).includes(n.toUpperCase())?n.toUpperCase():m.TYPE_UNSPECIFIED})}}(n.type,e);for(const[i,a]of Object.entries(n))if(null!=a)if("type"==i){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(m).includes(a.toUpperCase())?a.toUpperCase():m.TYPE_UNSPECIFIED}else if(t.includes(i))e[i]=ae(a);else if(o.includes(i)){const n=[];for(const t of a)"null"!=t.type?n.push(ae(t)):e.nullable=!0;e[i]=n}else if(r.includes(i)){const n={};for(const[e,t]of Object.entries(a))n[e]=ae(t);e[i]=n}else{if("additionalProperties"===i)continue;e[i]=a}return e}function se(n){return ae(n)}function le(n){if("object"==typeof n)return n;if("string"==typeof n)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error("Unsupported speechConfig type: "+typeof n)}function ce(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ae(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ae(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ae(e.response));return n}function ue(n){if(null==n)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function de(n,e){if("string"!=typeof e)throw new Error("name must be a string");return function(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}(n,e,"cachedContents")}function pe(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function me(n){return c(n)}function he(n){var e;let t;var o;if(null!=(o=n)&&"object"==typeof o&&"name"in o&&(t=n.name),!(function(n){return null!=n&&"object"==typeof n&&"uri"in n}(n)&&(t=n.uri,void 0===t)||function(n){return null!=n&&"object"==typeof n&&"video"in n}(n)&&(t=null===(e=n.video)||void 0===e?void 0:e.uri,void 0===t))){if("string"==typeof n&&(t=n),void 0===t)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const n=t.split("files/")[1].match(/[a-z0-9]+/);if(null===n)throw new Error(`Could not extract file name from URI ${t}`);t=n[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function fe(n,e){let t;return t=n.isVertexAI()?e?"publishers/google/models":"models":e?"models":"tunedModels",t}function ge(n){for(const e of["models","tunedModels","publisherModels"])if(Ee(n,e))return n[e];return[]}function Ee(n,e){return null!==n&&"object"==typeof n&&e in n}function ve(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ye(n,e){let t;if("string"==typeof e)if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else{if(!e.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${e}`);t={format:"bigquery",bigqueryUri:e}}else{if(!e.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${e}`);t={fileName:e}}else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||1!==o)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||1!==r)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Ce(n){if("object"!=typeof n||null===n)return{};const e=n,t=e.inlinedResponses;if("object"!=typeof t||null===t)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||0===o.length)return n;let r=!1;for(const n of o){if("object"!=typeof n||null===n)continue;const e=n.response;if("object"==typeof e&&null!==e&&void 0!==e.embedding){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function be(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Be(n){return"BATCH_STATE_UNSPECIFIED"===n?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===n?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===n?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===n?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===n?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===n?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===n?"JOB_STATE_EXPIRED":n}function we(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata","displayName"]);null!=o&&a(e,["displayName"],o);const r=s(n,["metadata","state"]);null!=r&&a(e,["state"],Be(r));const i=s(n,["metadata","createTime"]);null!=i&&a(e,["createTime"],i);const l=s(n,["metadata","endTime"]);null!=l&&a(e,["endTime"],l);const c=s(n,["metadata","updateTime"]);null!=c&&a(e,["updateTime"],c);const A=s(n,["metadata","model"]);null!=A&&a(e,["model"],A);const u=s(n,["metadata","output"]);return null!=u&&a(e,["dest"],function(n){const e={},t=s(n,["responsesFile"]);null!=t&&a(e,["fileName"],t);const o=s(n,["inlinedResponses","inlinedResponses"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["response"]);null!=t&&a(e,["response"],function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["candidates"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["content"]);null!=t&&a(e,["content"],t);const o=s(n,["citationMetadata"]);null!=o&&a(e,["citationMetadata"],function(n){const e={},t=s(n,["citationSources"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["citations"],n)}return e}(o));const r=s(n,["tokenCount"]);null!=r&&a(e,["tokenCount"],r);const i=s(n,["finishReason"]);null!=i&&a(e,["finishReason"],i);const l=s(n,["avgLogprobs"]);null!=l&&a(e,["avgLogprobs"],l);const c=s(n,["groundingMetadata"]);null!=c&&a(e,["groundingMetadata"],c);const A=s(n,["index"]);null!=A&&a(e,["index"],A);const u=s(n,["logprobsResult"]);null!=u&&a(e,["logprobsResult"],u);const d=s(n,["safetyRatings"]);if(null!=d){let n=d;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["safetyRatings"],n)}const p=s(n,["urlContextMetadata"]);return null!=p&&a(e,["urlContextMetadata"],p),e}(n))),a(e,["candidates"],n)}const r=s(n,["modelVersion"]);null!=r&&a(e,["modelVersion"],r);const i=s(n,["promptFeedback"]);null!=i&&a(e,["promptFeedback"],i);const l=s(n,["responseId"]);null!=l&&a(e,["responseId"],l);const c=s(n,["usageMetadata"]);return null!=c&&a(e,["usageMetadata"],c),e}(t));const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["error"]);return null!=r&&a(e,["error"],r),e}(n))),a(e,["inlinedResponses"],n)}const r=s(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["inlinedEmbedContentResponses"],n)}return e}(Ce(u))),e}function xe(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["displayName"]);null!=o&&a(e,["displayName"],o);const r=s(n,["state"]);null!=r&&a(e,["state"],Be(r));const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["createTime"]);null!=l&&a(e,["createTime"],l);const c=s(n,["startTime"]);null!=c&&a(e,["startTime"],c);const A=s(n,["endTime"]);null!=A&&a(e,["endTime"],A);const u=s(n,["updateTime"]);null!=u&&a(e,["updateTime"],u);const d=s(n,["model"]);null!=d&&a(e,["model"],d);const p=s(n,["inputConfig"]);null!=p&&a(e,["src"],function(n){const e={},t=s(n,["instancesFormat"]);null!=t&&a(e,["format"],t);const o=s(n,["gcsSource","uris"]);null!=o&&a(e,["gcsUri"],o);const r=s(n,["bigquerySource","inputUri"]);return null!=r&&a(e,["bigqueryUri"],r),e}(p));const m=s(n,["outputConfig"]);null!=m&&a(e,["dest"],function(n){const e={},t=s(n,["predictionsFormat"]);null!=t&&a(e,["format"],t);const o=s(n,["gcsDestination","outputUriPrefix"]);null!=o&&a(e,["gcsUri"],o);const r=s(n,["bigqueryDestination","outputUri"]);return null!=r&&a(e,["bigqueryUri"],r),e}(Ce(m)));const h=s(n,["completionStats"]);return null!=h&&a(e,["completionStats"],h),e}function _e(n){const e={},t=s(n,["parts"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["mediaResolution"]);null!=t&&a(e,["mediaResolution"],t);const o=s(n,["codeExecutionResult"]);null!=o&&a(e,["codeExecutionResult"],o);const r=s(n,["executableCode"]);null!=r&&a(e,["executableCode"],r);const i=s(n,["fileData"]);null!=i&&a(e,["fileData"],function(n){const e={};if(void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);null!=t&&a(e,["fileUri"],t);const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(i));const l=s(n,["functionCall"]);null!=l&&a(e,["functionCall"],function(n){const e={},t=s(n,["id"]);null!=t&&a(e,["id"],t);const o=s(n,["args"]);null!=o&&a(e,["args"],o);const r=s(n,["name"]);if(null!=r&&a(e,["name"],r),void 0!==s(n,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==s(n,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(l));const c=s(n,["functionResponse"]);null!=c&&a(e,["functionResponse"],c);const A=s(n,["inlineData"]);null!=A&&a(e,["inlineData"],function(n){const e={},t=s(n,["data"]);if(null!=t&&a(e,["data"],t),void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(A));const u=s(n,["text"]);null!=u&&a(e,["text"],u);const d=s(n,["thought"]);null!=d&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);null!=p&&a(e,["thoughtSignature"],p);const m=s(n,["videoMetadata"]);return null!=m&&a(e,["videoMetadata"],m),e}(n))),a(e,["parts"],n)}const o=s(n,["role"]);return null!=o&&a(e,["role"],o),e}function Te(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["src"]);null!=r&&a(t,["batch","inputConfig"],function(n,e){const t={};if(void 0!==s(e,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==s(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==s(e,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=s(e,["fileName"]);null!=o&&a(t,["fileName"],o);const r=s(e,["inlinedRequests"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["request","model"],$n(n,o));const r=s(e,["contents"]);if(null!=r){let n=ie(r);Array.isArray(n)&&(n=n.map(n=>_e(n))),a(t,["request","contents"],n)}const i=s(e,["metadata"]);null!=i&&a(t,["metadata"],i);const l=s(e,["config"]);return null!=l&&a(t,["request","generationConfig"],function(n,e,t){const o={},r=s(e,["systemInstruction"]);void 0!==t&&null!=r&&a(t,["systemInstruction"],_e(oe(r)));const i=s(e,["temperature"]);null!=i&&a(o,["temperature"],i);const l=s(e,["topP"]);null!=l&&a(o,["topP"],l);const c=s(e,["topK"]);null!=c&&a(o,["topK"],c);const A=s(e,["candidateCount"]);null!=A&&a(o,["candidateCount"],A);const u=s(e,["maxOutputTokens"]);null!=u&&a(o,["maxOutputTokens"],u);const d=s(e,["stopSequences"]);null!=d&&a(o,["stopSequences"],d);const p=s(e,["responseLogprobs"]);null!=p&&a(o,["responseLogprobs"],p);const m=s(e,["logprobs"]);null!=m&&a(o,["logprobs"],m);const h=s(e,["presencePenalty"]);null!=h&&a(o,["presencePenalty"],h);const f=s(e,["frequencyPenalty"]);null!=f&&a(o,["frequencyPenalty"],f);const g=s(e,["seed"]);null!=g&&a(o,["seed"],g);const E=s(e,["responseMimeType"]);null!=E&&a(o,["responseMimeType"],E);const v=s(e,["responseSchema"]);null!=v&&a(o,["responseSchema"],se(v));const y=s(e,["responseJsonSchema"]);if(null!=y&&a(o,["responseJsonSchema"],y),void 0!==s(e,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==s(e,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=s(e,["safetySettings"]);if(void 0!==t&&null!=C){let n=C;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["category"]);if(null!=t&&a(e,["category"],t),void 0!==s(n,["method"]))throw new Error("method parameter is not supported in Gemini API.");const o=s(n,["threshold"]);return null!=o&&a(e,["threshold"],o),e}(n))),a(t,["safetySettings"],n)}const b=s(e,["tools"]);if(void 0!==t&&null!=b){let n=ue(b);Array.isArray(n)&&(n=n.map(n=>function(n){const e={};if(void 0!==s(n,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=s(n,["computerUse"]);null!=t&&a(e,["computerUse"],t);const o=s(n,["fileSearch"]);null!=o&&a(e,["fileSearch"],o);const r=s(n,["codeExecution"]);if(null!=r&&a(e,["codeExecution"],r),void 0!==s(n,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["functionDeclarations"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["functionDeclarations"],n)}const l=s(n,["googleMaps"]);null!=l&&a(e,["googleMaps"],function(n){const e={};if(void 0!==s(n,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return null!=t&&a(e,["enableWidget"],t),e}(l));const c=s(n,["googleSearch"]);null!=c&&a(e,["googleSearch"],function(n){const e={};if(void 0!==s(n,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==s(n,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return null!=t&&a(e,["timeRangeFilter"],t),e}(c));const A=s(n,["googleSearchRetrieval"]);null!=A&&a(e,["googleSearchRetrieval"],A);const u=s(n,["urlContext"]);return null!=u&&a(e,["urlContext"],u),e}(Ae(n)))),a(t,["tools"],n)}const B=s(e,["toolConfig"]);if(void 0!==t&&null!=B&&a(t,["toolConfig"],function(n){const e={},t=s(n,["retrievalConfig"]);null!=t&&a(e,["retrievalConfig"],t);const o=s(n,["functionCallingConfig"]);return null!=o&&a(e,["functionCallingConfig"],function(n){const e={},t=s(n,["allowedFunctionNames"]);null!=t&&a(e,["allowedFunctionNames"],t);const o=s(n,["mode"]);if(null!=o&&a(e,["mode"],o),void 0!==s(n,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(o)),e}(B)),void 0!==s(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const w=s(e,["cachedContent"]);void 0!==t&&null!=w&&a(t,["cachedContent"],de(n,w));const x=s(e,["responseModalities"]);null!=x&&a(o,["responseModalities"],x);const _=s(e,["mediaResolution"]);null!=_&&a(o,["mediaResolution"],_);const T=s(e,["speechConfig"]);if(null!=T&&a(o,["speechConfig"],le(T)),void 0!==s(e,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=s(e,["thinkingConfig"]);null!=I&&a(o,["thinkingConfig"],I);const S=s(e,["imageConfig"]);null!=S&&a(o,["imageConfig"],function(n){const e={},t=s(n,["aspectRatio"]);null!=t&&a(e,["aspectRatio"],t);const o=s(n,["imageSize"]);if(null!=o&&a(e,["imageSize"],o),void 0!==s(n,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==s(n,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==s(n,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}(S));const O=s(e,["enableEnhancedCivicAnswers"]);if(null!=O&&a(o,["enableEnhancedCivicAnswers"],O),void 0!==s(e,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}(n,l,s(t,["request"],{}))),t}(n,e))),a(t,["requests","requests"],e)}return t}(n,ye(n,r)));const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["displayName"]);if(void 0!==e&&null!=t&&a(e,["batch","displayName"],t),void 0!==s(n,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,t),t}function Ie(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["model"],$n(n,o));const r=s(e,["src"]);null!=r&&a(t,["inputConfig"],function(n){const e={},t=s(n,["format"]);null!=t&&a(e,["instancesFormat"],t);const o=s(n,["gcsUri"]);null!=o&&a(e,["gcsSource","uris"],o);const r=s(n,["bigqueryUri"]);if(null!=r&&a(e,["bigquerySource","inputUri"],r),void 0!==s(n,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==s(n,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}(ye(n,r)));const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["displayName"]);void 0!==e&&null!=t&&a(e,["displayName"],t);const o=s(n,["dest"]);void 0!==e&&null!=o&&a(e,["outputConfig"],function(n){const e={},t=s(n,["format"]);null!=t&&a(e,["predictionsFormat"],t);const o=s(n,["gcsUri"]);null!=o&&a(e,["gcsDestination","outputUriPrefix"],o);const r=s(n,["bigqueryUri"]);if(null!=r&&a(e,["bigqueryDestination","outputUri"],r),void 0!==s(n,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==s(n,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==s(n,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}(function(n){if("string"!=typeof n)return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}(o)))}(i,t),t}!function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"}(fn||(fn={}));class Se{constructor(n,e,t,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,o)}init(n,e,t){var o,r;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=null==e?void 0:e.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=t&&0!==Object.keys(t).length?"object"==typeof t?Object.assign({},t):t:{config:{}},i.config&&(i.config.pageToken=e.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(r=null===(o=i.config)||void 0===o?void 0:o.pageSize)&&void 0!==r?r:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return void 0!==(null===(n=this.params.config)||void 0===n?void 0:n.pageToken)}}class Oe extends r{constructor(n){super(),this.apiClient=n,this.list=async(n={})=>new Se(fn.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(n){const e=Te(this.apiClient,n),t=i("{model}:batchGenerateContent",e._url),o=e.batch.inputConfig.requests,r=o.requests,a=[];for(const n of r){const e=Object.assign({},n);if(e.systemInstruction){const n=e.systemInstruction;delete e.systemInstruction;const t=e.request;t.systemInstruction=n,e.request=t}a.push(e)}return o.requests=a,delete e.config,delete e._url,delete e._query,{path:t,body:e}}getGcsUri(n){return"string"==typeof n?n.startsWith("gs://")?n:void 0:!Array.isArray(n)&&n.gcsUri&&n.gcsUri.length>0?n.gcsUri[0]:void 0}getBigqueryUri(n){return"string"==typeof n?n.startsWith("bq://")?n:void 0:Array.isArray(n)?void 0:n.bigqueryUri}formatDestination(n,e){const t=e?Object.assign({},e):{},o=Date.now().toString();if(t.displayName||(t.displayName=`genaiBatchJob_${o}`),void 0===t.dest){const e=this.getGcsUri(n),r=this.getBigqueryUri(n);if(e)e.endsWith(".jsonl")?t.dest=`${e.slice(0,-6)}/dest`:t.dest=`${e}_dest_${o}`;else{if(!r)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");t.dest=`${r}_dest_${o}`}}return t}async createInternal(n){var e,t,o,r;let a,s="",l={};if(this.apiClient.isVertexAI()){const o=Ie(this.apiClient,n);return s=i("batchPredictionJobs",o._url),l=o._query,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),a.then(n=>xe(n))}{const e=Te(this.apiClient,n);return s=i("{model}:batchGenerateContent",e._url),l=e._query,delete e._url,delete e._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),a.then(n=>we(n))}}async createEmbeddingsInternal(n){var e,t;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const A=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["src"]);null!=r&&a(t,["batch","inputConfig"],function(n,e){const t={},o=s(e,["fileName"]);null!=o&&a(t,["file_name"],o);const r=s(e,["inlinedRequests"]);return null!=r&&a(t,["requests"],function(n,e){const t={},o=s(e,["contents"]);if(null!=o){let e=re(n,o);Array.isArray(e)&&(e=e.map(n=>n)),a(t,["requests[]","request","content"],e)}const r=s(e,["config"]);return null!=r&&(a(t,["_self"],function(n,e){const t=s(n,["taskType"]);void 0!==e&&null!=t&&a(e,["requests[]","taskType"],t);const o=s(n,["title"]);void 0!==e&&null!=o&&a(e,["requests[]","title"],o);const r=s(n,["outputDimensionality"]);if(void 0!==e&&null!=r&&a(e,["requests[]","outputDimensionality"],r),void 0!==s(n,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==s(n,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,t)),function(n){for(const[e,t]of Object.entries({"requests[].*":"requests[].request.*"})){const o=e.split("."),r=t.split("."),i=new Set;let a=-1;for(let n=0;n<o.length;n++)if("*"===o[n]){a=n;break}if(-1!==a&&r.length>a)for(let n=a;n<r.length;n++){const e=r[n];"*"===e||e.endsWith("[]")||e.endsWith("[0]")||i.add(e)}l(n,o,r,0,i)}}(t)),t}(n,r)),t}(n,r));const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["displayName"]);void 0!==e&&null!=t&&a(e,["batch","displayName"],t)}(i,t),t}(this.apiClient,n);return r=i("{model}:asyncBatchEmbedContent",A._url),c=A._query,delete A._url,delete A._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(A),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>we(n))}}async get(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);return c=i("batchPredictionJobs/{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>xe(n))}{const e=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);return c=i("batches/{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>we(n))}}async cancel(n){var e,t,o,r;let l="",c={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);l=i("batchPredictionJobs/{name}:cancel",o._url),c=o._query,delete o._url,delete o._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal})}else{const e=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);l=i("batches/{name}:cancel",e._url),c=e._query,delete e._url,delete e._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal})}}async listInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o);const r=s(n,["filter"]);void 0!==e&&null!=r&&a(e,["_query","filter"],r)}(t,e),e}(n);return c=i("batchPredictionJobs",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["batchPredictionJobs"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>xe(n))),a(e,["batchJobs"],n)}return e}(n),t=new Fn;return Object.assign(t,e),t})}{const e=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);if(void 0!==e&&null!=o&&a(e,["_query","pageToken"],o),void 0!==s(n,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(t,e),e}(n);return c=i("batches",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["operations"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>we(n))),a(e,["batchJobs"],n)}return e}(n),t=new Fn;return Object.assign(t,e),t})}}async delete(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);return c=i("batchPredictionJobs/{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);return null!=i&&a(e,["error"],i),e}(n))}{const e=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],be(n,o)),t}(this.apiClient,n);return c=i("batches/{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);return null!=i&&a(e,["error"],i),e}(n))}}}function ke(n){const e={},t=s(n,["parts"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["mediaResolution"]);null!=t&&a(e,["mediaResolution"],t);const o=s(n,["codeExecutionResult"]);null!=o&&a(e,["codeExecutionResult"],o);const r=s(n,["executableCode"]);null!=r&&a(e,["executableCode"],r);const i=s(n,["fileData"]);null!=i&&a(e,["fileData"],function(n){const e={};if(void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);null!=t&&a(e,["fileUri"],t);const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(i));const l=s(n,["functionCall"]);null!=l&&a(e,["functionCall"],function(n){const e={},t=s(n,["id"]);null!=t&&a(e,["id"],t);const o=s(n,["args"]);null!=o&&a(e,["args"],o);const r=s(n,["name"]);if(null!=r&&a(e,["name"],r),void 0!==s(n,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==s(n,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(l));const c=s(n,["functionResponse"]);null!=c&&a(e,["functionResponse"],c);const A=s(n,["inlineData"]);null!=A&&a(e,["inlineData"],function(n){const e={},t=s(n,["data"]);if(null!=t&&a(e,["data"],t),void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(A));const u=s(n,["text"]);null!=u&&a(e,["text"],u);const d=s(n,["thought"]);null!=d&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);null!=p&&a(e,["thoughtSignature"],p);const m=s(n,["videoMetadata"]);return null!=m&&a(e,["videoMetadata"],m),e}(n))),a(e,["parts"],n)}const o=s(n,["role"]);return null!=o&&a(e,["role"],o),e}class Re extends r{constructor(n){super(),this.apiClient=n,this.list=async(n={})=>new Se(fn.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(n),n)}async create(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["model"],Jn(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["ttl"]);void 0!==e&&null!=t&&a(e,["ttl"],t);const o=s(n,["expireTime"]);void 0!==e&&null!=o&&a(e,["expireTime"],o);const r=s(n,["displayName"]);void 0!==e&&null!=r&&a(e,["displayName"],r);const i=s(n,["contents"]);if(void 0!==e&&null!=i){let n=ie(i);Array.isArray(n)&&(n=n.map(n=>n)),a(e,["contents"],n)}const l=s(n,["systemInstruction"]);void 0!==e&&null!=l&&a(e,["systemInstruction"],oe(l));const c=s(n,["tools"]);if(void 0!==e&&null!=c){let n=c;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["retrieval"]);null!=t&&a(e,["retrieval"],t);const o=s(n,["computerUse"]);if(null!=o&&a(e,["computerUse"],o),void 0!==s(n,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=s(n,["codeExecution"]);null!=r&&a(e,["codeExecution"],r);const i=s(n,["enterpriseWebSearch"]);null!=i&&a(e,["enterpriseWebSearch"],i);const l=s(n,["functionDeclarations"]);if(null!=l){let n=l;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["description"]);null!=t&&a(e,["description"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["parameters"]);null!=r&&a(e,["parameters"],r);const i=s(n,["parametersJsonSchema"]);null!=i&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);null!=l&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);if(null!=c&&a(e,["responseJsonSchema"],c),void 0!==s(n,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return e}(n))),a(e,["functionDeclarations"],n)}const c=s(n,["googleMaps"]);null!=c&&a(e,["googleMaps"],c);const A=s(n,["googleSearch"]);null!=A&&a(e,["googleSearch"],A);const u=s(n,["googleSearchRetrieval"]);null!=u&&a(e,["googleSearchRetrieval"],u);const d=s(n,["urlContext"]);return null!=d&&a(e,["urlContext"],d),e}(n))),a(e,["tools"],n)}const A=s(n,["toolConfig"]);void 0!==e&&null!=A&&a(e,["toolConfig"],A);const u=s(n,["kmsKeyName"]);void 0!==e&&null!=u&&a(e,["encryption_spec","kmsKeyName"],u)}(r,t),t}(this.apiClient,n);return c=i("cachedContents",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>n)}{const e=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["model"],Jn(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["ttl"]);void 0!==e&&null!=t&&a(e,["ttl"],t);const o=s(n,["expireTime"]);void 0!==e&&null!=o&&a(e,["expireTime"],o);const r=s(n,["displayName"]);void 0!==e&&null!=r&&a(e,["displayName"],r);const i=s(n,["contents"]);if(void 0!==e&&null!=i){let n=ie(i);Array.isArray(n)&&(n=n.map(n=>ke(n))),a(e,["contents"],n)}const l=s(n,["systemInstruction"]);void 0!==e&&null!=l&&a(e,["systemInstruction"],ke(oe(l)));const c=s(n,["tools"]);if(void 0!==e&&null!=c){let n=c;Array.isArray(n)&&(n=n.map(n=>function(n){const e={};if(void 0!==s(n,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=s(n,["computerUse"]);null!=t&&a(e,["computerUse"],t);const o=s(n,["fileSearch"]);null!=o&&a(e,["fileSearch"],o);const r=s(n,["codeExecution"]);if(null!=r&&a(e,["codeExecution"],r),void 0!==s(n,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["functionDeclarations"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["functionDeclarations"],n)}const l=s(n,["googleMaps"]);null!=l&&a(e,["googleMaps"],function(n){const e={};if(void 0!==s(n,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return null!=t&&a(e,["enableWidget"],t),e}(l));const c=s(n,["googleSearch"]);null!=c&&a(e,["googleSearch"],function(n){const e={};if(void 0!==s(n,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==s(n,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return null!=t&&a(e,["timeRangeFilter"],t),e}(c));const A=s(n,["googleSearchRetrieval"]);null!=A&&a(e,["googleSearchRetrieval"],A);const u=s(n,["urlContext"]);return null!=u&&a(e,["urlContext"],u),e}(n))),a(e,["tools"],n)}const A=s(n,["toolConfig"]);if(void 0!==e&&null!=A&&a(e,["toolConfig"],function(n){const e={},t=s(n,["retrievalConfig"]);null!=t&&a(e,["retrievalConfig"],t);const o=s(n,["functionCallingConfig"]);return null!=o&&a(e,["functionCallingConfig"],function(n){const e={},t=s(n,["allowedFunctionNames"]);null!=t&&a(e,["allowedFunctionNames"],t);const o=s(n,["mode"]);if(null!=o&&a(e,["mode"],o),void 0!==s(n,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(o)),e}(A)),void 0!==s(n,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.")}(r,t),t}(this.apiClient,n);return c=i("cachedContents",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>n)}}async get(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],de(n,o)),t}(this.apiClient,n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>n)}{const e=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],de(n,o)),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>n)}}async delete(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],de(n,o)),t}(this.apiClient,n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new Rn;return Object.assign(t,e),t})}{const e=function(n,e){const t={},o=s(e,["name"]);return null!=o&&a(t,["_url","name"],de(n,o)),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new Rn;return Object.assign(t,e),t})}}async update(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["name"]);null!=o&&a(t,["_url","name"],de(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["ttl"]);void 0!==e&&null!=t&&a(e,["ttl"],t);const o=s(n,["expireTime"]);void 0!==e&&null!=o&&a(e,["expireTime"],o)}(r,t),t}(this.apiClient,n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>n)}{const e=function(n,e){const t={},o=s(e,["name"]);null!=o&&a(t,["_url","name"],de(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["ttl"]);void 0!==e&&null!=t&&a(e,["ttl"],t);const o=s(n,["expireTime"]);void 0!==e&&null!=o&&a(e,["expireTime"],o)}(r,t),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"PATCH",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>n)}}async listInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o)}(t,e),e}(n);return c=i("cachedContents",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["cachedContents"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["cachedContents"],n)}return e}(n),t=new Nn;return Object.assign(t,e),t})}{const e=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o)}(t,e),e}(n);return c=i("cachedContents",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["cachedContents"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["cachedContents"],n)}return e}(n),t=new Nn;return Object.assign(t,e),t})}}}function Ne(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]])}return t}function Pe(n){return this instanceof Pe?(this.v=n,this):new Pe(n)}function De(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(n){return function(e){return Promise.resolve(e).then(n,c)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(n,e){r[n]&&(o[n]=function(e){return new Promise(function(t,o){i.push([n,e,t,o])>1||s(n,e)})},e&&(o[n]=e(o[n])))}function s(n,e){try{(t=r[n](e)).value instanceof Pe?Promise.resolve(t.value.v).then(l,c):A(i[0][2],t)}catch(n){A(i[0][3],n)}var t}function l(n){s("next",n)}function c(n){s("throw",n)}function A(n,e){n(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}function Me(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(t){e[t]=n[t]&&function(e){return new Promise(function(o,r){!function(n,e,t,o){Promise.resolve(o).then(function(e){n({value:e,done:t})},e)}(o,r,(e=n[t](e)).done,e.value)})}}}function Le(n){var e;if(null==n.candidates||0===n.candidates.length)return!1;const t=null===(e=n.candidates[0])||void 0===e?void 0:e.content;return void 0!==t&&Ue(t)}function Ue(n){if(void 0===n.parts||0===n.parts.length)return!1;for(const e of n.parts)if(void 0===e||0===Object.keys(e).length)return!1;return!0}function qe(n){if(void 0===n||0===n.length)return[];const e=[],t=n.length;let o=0;for(;o<t;)if("user"===n[o].role)e.push(n[o]),o++;else{const r=[];let i=!0;for(;o<t&&"model"===n[o].role;)r.push(n[o]),i&&!Ue(n[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}"function"==typeof SuppressedError&&SuppressedError;class Ge{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new je(this.apiClient,this.modelsModule,n.model,n.config,structuredClone(n.history))}}class je{constructor(n,e,t,o={},r=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),function(n){if(0!==n.length)for(const e of n)if("user"!==e.role&&"model"!==e.role)throw new Error(`Role must be user or model, but got ${e.role}.`)}(r)}async sendMessage(n){var e;await this.sendPromise;const t=oe(n.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:null!==(e=n.config)&&void 0!==e?e:this.config});return this.sendPromise=(async()=>{var n,e,r;const i=await o,a=null===(e=null===(n=i.candidates)||void 0===n?void 0:n[0])||void 0===e?void 0:e.content,s=i.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=s&&(c=null!==(r=s.slice(l))&&void 0!==r?r:[]);const A=a?[a]:[];this.recordHistory(t,A,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(n){var e;await this.sendPromise;const t=oe(n.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:null!==(e=n.config)&&void 0!==e?e:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,t)}getHistory(n=!1){const e=n?qe(this.history):this.history;return structuredClone(e)}processStreamResponse(n,e){return De(this,arguments,function*(){var t,o,r,i,a,s;const l=[];try{for(var c,A=!0,u=Me(n);!(t=(c=yield Pe(u.next())).done);A=!0){i=c.value,A=!1;const n=i;if(Le(n)){const e=null===(s=null===(a=n.candidates)||void 0===a?void 0:a[0])||void 0===s?void 0:s.content;void 0!==e&&l.push(e)}yield yield Pe(n)}}catch(n){o={error:n}}finally{try{A||t||!(r=u.return)||(yield Pe(r.call(u)))}finally{if(o)throw o.error}}this.recordHistory(e,l)})}recordHistory(n,e,t){let o=[];e.length>0&&e.every(n=>void 0!==n.role)?o=e:o.push({role:"model",parts:[]}),t&&t.length>0?this.history.push(...qe(t)):this.history.push(n),this.history.push(...o)}}class Fe extends Error{constructor(n){super(n.message),this.name="ApiError",this.status=n.status,Object.setPrototypeOf(this,Fe.prototype)}}class He extends r{constructor(n){super(),this.apiClient=n,this.list=async(n={})=>new Se(fn.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(n),n)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(n=>n)}async download(n){await this.apiClient.downloadFile(n)}async registerFiles(n){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(n){return this.registerFilesInternal(n)}async listInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o)}(t,e),e}(n);return r=i("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["files"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["files"],n)}return e}(n),t=new Un;return Object.assign(t,e),t})}}async createInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["file"]);return null!=t&&a(e,["file"],t),e}(n);return r=i("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new qn;return Object.assign(t,e),t})}}async get(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","file"],he(t)),e}(n);return r=i("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>n)}}async delete(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","file"],he(t)),e}(n);return r=i("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new Gn;return Object.assign(t,e),t})}}async registerFilesInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["uris"]);return null!=t&&a(e,["uris"],t),e}(n);return r=i("files:register",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["files"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["files"],n)}return e}(n),t=new jn;return Object.assign(t,e),t})}}}function Ve(n){const e={},t=s(n,["data"]);if(null!=t&&a(e,["data"],t),void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}function We(n,e){const t=s(n,["generationConfig"]);void 0!==e&&null!=t&&a(e,["setup","generationConfig"],t);const o=s(n,["responseModalities"]);void 0!==e&&null!=o&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);void 0!==e&&null!=r&&a(e,["setup","generationConfig","temperature"],r);const i=s(n,["topP"]);void 0!==e&&null!=i&&a(e,["setup","generationConfig","topP"],i);const l=s(n,["topK"]);void 0!==e&&null!=l&&a(e,["setup","generationConfig","topK"],l);const c=s(n,["maxOutputTokens"]);void 0!==e&&null!=c&&a(e,["setup","generationConfig","maxOutputTokens"],c);const A=s(n,["mediaResolution"]);void 0!==e&&null!=A&&a(e,["setup","generationConfig","mediaResolution"],A);const u=s(n,["seed"]);void 0!==e&&null!=u&&a(e,["setup","generationConfig","seed"],u);const d=s(n,["speechConfig"]);void 0!==e&&null!=d&&a(e,["setup","generationConfig","speechConfig"],ce(d));const p=s(n,["thinkingConfig"]);void 0!==e&&null!=p&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=s(n,["enableAffectiveDialog"]);void 0!==e&&null!=m&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=s(n,["systemInstruction"]);void 0!==e&&null!=h&&a(e,["setup","systemInstruction"],function(n){const e={},t=s(n,["parts"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["mediaResolution"]);null!=t&&a(e,["mediaResolution"],t);const o=s(n,["codeExecutionResult"]);null!=o&&a(e,["codeExecutionResult"],o);const r=s(n,["executableCode"]);null!=r&&a(e,["executableCode"],r);const i=s(n,["fileData"]);null!=i&&a(e,["fileData"],function(n){const e={};if(void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);null!=t&&a(e,["fileUri"],t);const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(i));const l=s(n,["functionCall"]);null!=l&&a(e,["functionCall"],function(n){const e={},t=s(n,["id"]);null!=t&&a(e,["id"],t);const o=s(n,["args"]);null!=o&&a(e,["args"],o);const r=s(n,["name"]);if(null!=r&&a(e,["name"],r),void 0!==s(n,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==s(n,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(l));const c=s(n,["functionResponse"]);null!=c&&a(e,["functionResponse"],c);const A=s(n,["inlineData"]);null!=A&&a(e,["inlineData"],Ve(A));const u=s(n,["text"]);null!=u&&a(e,["text"],u);const d=s(n,["thought"]);null!=d&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);null!=p&&a(e,["thoughtSignature"],p);const m=s(n,["videoMetadata"]);return null!=m&&a(e,["videoMetadata"],m),e}(n))),a(e,["parts"],n)}const o=s(n,["role"]);return null!=o&&a(e,["role"],o),e}(oe(h)));const f=s(n,["tools"]);if(void 0!==e&&null!=f){let n=ue(f);Array.isArray(n)&&(n=n.map(n=>function(n){const e={};if(void 0!==s(n,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=s(n,["computerUse"]);null!=t&&a(e,["computerUse"],t);const o=s(n,["fileSearch"]);null!=o&&a(e,["fileSearch"],o);const r=s(n,["codeExecution"]);if(null!=r&&a(e,["codeExecution"],r),void 0!==s(n,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["functionDeclarations"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["functionDeclarations"],n)}const l=s(n,["googleMaps"]);null!=l&&a(e,["googleMaps"],function(n){const e={};if(void 0!==s(n,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return null!=t&&a(e,["enableWidget"],t),e}(l));const c=s(n,["googleSearch"]);null!=c&&a(e,["googleSearch"],function(n){const e={};if(void 0!==s(n,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==s(n,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return null!=t&&a(e,["timeRangeFilter"],t),e}(c));const A=s(n,["googleSearchRetrieval"]);null!=A&&a(e,["googleSearchRetrieval"],A);const u=s(n,["urlContext"]);return null!=u&&a(e,["urlContext"],u),e}(Ae(n)))),a(e,["setup","tools"],n)}const g=s(n,["sessionResumption"]);void 0!==e&&null!=g&&a(e,["setup","sessionResumption"],function(n){const e={},t=s(n,["handle"]);if(null!=t&&a(e,["handle"],t),void 0!==s(n,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return e}(g));const E=s(n,["inputAudioTranscription"]);void 0!==e&&null!=E&&a(e,["setup","inputAudioTranscription"],E);const v=s(n,["outputAudioTranscription"]);void 0!==e&&null!=v&&a(e,["setup","outputAudioTranscription"],v);const y=s(n,["realtimeInputConfig"]);void 0!==e&&null!=y&&a(e,["setup","realtimeInputConfig"],y);const C=s(n,["contextWindowCompression"]);void 0!==e&&null!=C&&a(e,["setup","contextWindowCompression"],C);const b=s(n,["proactivity"]);if(void 0!==e&&null!=b&&a(e,["setup","proactivity"],b),void 0!==s(n,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}function $e(n){const e={},t=s(n,["media"]);if(null!=t){let n=zn(t);Array.isArray(n)&&(n=n.map(n=>Ve(n))),a(e,["mediaChunks"],n)}const o=s(n,["audio"]);null!=o&&a(e,["audio"],Ve(Xn(o)));const r=s(n,["audioStreamEnd"]);null!=r&&a(e,["audioStreamEnd"],r);const i=s(n,["video"]);null!=i&&a(e,["video"],Ve(Kn(i)));const l=s(n,["text"]);null!=l&&a(e,["text"],l);const c=s(n,["activityStart"]);null!=c&&a(e,["activityStart"],c);const A=s(n,["activityEnd"]);return null!=A&&a(e,["activityEnd"],A),e}function Je(n){const e={},t=s(n,["media"]);if(null!=t){let n=zn(t);Array.isArray(n)&&(n=n.map(n=>n)),a(e,["mediaChunks"],n)}const o=s(n,["audio"]);null!=o&&a(e,["audio"],Xn(o));const r=s(n,["audioStreamEnd"]);null!=r&&a(e,["audioStreamEnd"],r);const i=s(n,["video"]);null!=i&&a(e,["video"],Kn(i));const l=s(n,["text"]);null!=l&&a(e,["text"],l);const c=s(n,["activityStart"]);null!=c&&a(e,["activityStart"],c);const A=s(n,["activityEnd"]);return null!=A&&a(e,["activityEnd"],A),e}function ze(n,e){const t={},o=s(n,["parts"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["mediaResolution"]);null!=t&&a(e,["mediaResolution"],t);const o=s(n,["codeExecutionResult"]);null!=o&&a(e,["codeExecutionResult"],o);const r=s(n,["executableCode"]);null!=r&&a(e,["executableCode"],r);const i=s(n,["fileData"]);null!=i&&a(e,["fileData"],function(n){const e={};if(void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);null!=t&&a(e,["fileUri"],t);const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(i));const l=s(n,["functionCall"]);null!=l&&a(e,["functionCall"],function(n){const e={},t=s(n,["id"]);null!=t&&a(e,["id"],t);const o=s(n,["args"]);null!=o&&a(e,["args"],o);const r=s(n,["name"]);if(null!=r&&a(e,["name"],r),void 0!==s(n,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==s(n,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(l));const c=s(n,["functionResponse"]);null!=c&&a(e,["functionResponse"],c);const A=s(n,["inlineData"]);null!=A&&a(e,["inlineData"],function(n){const e={},t=s(n,["data"]);if(null!=t&&a(e,["data"],t),void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(A));const u=s(n,["text"]);null!=u&&a(e,["text"],u);const d=s(n,["thought"]);null!=d&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);null!=p&&a(e,["thoughtSignature"],p);const m=s(n,["videoMetadata"]);return null!=m&&a(e,["videoMetadata"],m),e}(n))),a(t,["parts"],n)}const r=s(n,["role"]);return null!=r&&a(t,["role"],r),t}function Ye(n,e,t){const o={},r=s(e,["model"]);null!=r&&a(o,["_url","model"],$n(n,r));const i=s(e,["contents"]);if(null!=i){let n=ie(i);Array.isArray(n)&&(n=n.map(n=>ze(n))),a(o,["contents"],n)}const l=s(e,["config"]);return null!=l&&a(o,["generationConfig"],function(n,e,t){const o={},r=s(e,["systemInstruction"]);void 0!==t&&null!=r&&a(t,["systemInstruction"],ze(oe(r)));const i=s(e,["temperature"]);null!=i&&a(o,["temperature"],i);const l=s(e,["topP"]);null!=l&&a(o,["topP"],l);const c=s(e,["topK"]);null!=c&&a(o,["topK"],c);const A=s(e,["candidateCount"]);null!=A&&a(o,["candidateCount"],A);const u=s(e,["maxOutputTokens"]);null!=u&&a(o,["maxOutputTokens"],u);const d=s(e,["stopSequences"]);null!=d&&a(o,["stopSequences"],d);const p=s(e,["responseLogprobs"]);null!=p&&a(o,["responseLogprobs"],p);const m=s(e,["logprobs"]);null!=m&&a(o,["logprobs"],m);const h=s(e,["presencePenalty"]);null!=h&&a(o,["presencePenalty"],h);const f=s(e,["frequencyPenalty"]);null!=f&&a(o,["frequencyPenalty"],f);const g=s(e,["seed"]);null!=g&&a(o,["seed"],g);const E=s(e,["responseMimeType"]);null!=E&&a(o,["responseMimeType"],E);const v=s(e,["responseSchema"]);null!=v&&a(o,["responseSchema"],se(v));const y=s(e,["responseJsonSchema"]);if(null!=y&&a(o,["responseJsonSchema"],y),void 0!==s(e,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==s(e,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=s(e,["safetySettings"]);if(void 0!==t&&null!=C){let n=C;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["category"]);if(null!=t&&a(e,["category"],t),void 0!==s(n,["method"]))throw new Error("method parameter is not supported in Gemini API.");const o=s(n,["threshold"]);return null!=o&&a(e,["threshold"],o),e}(n))),a(t,["safetySettings"],n)}const b=s(e,["tools"]);if(void 0!==t&&null!=b){let n=ue(b);Array.isArray(n)&&(n=n.map(n=>function(n){const e={};if(void 0!==s(n,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=s(n,["computerUse"]);null!=t&&a(e,["computerUse"],t);const o=s(n,["fileSearch"]);null!=o&&a(e,["fileSearch"],o);const r=s(n,["codeExecution"]);if(null!=r&&a(e,["codeExecution"],r),void 0!==s(n,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["functionDeclarations"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["functionDeclarations"],n)}const l=s(n,["googleMaps"]);null!=l&&a(e,["googleMaps"],function(n){const e={};if(void 0!==s(n,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return null!=t&&a(e,["enableWidget"],t),e}(l));const c=s(n,["googleSearch"]);null!=c&&a(e,["googleSearch"],function(n){const e={};if(void 0!==s(n,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==s(n,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return null!=t&&a(e,["timeRangeFilter"],t),e}(c));const A=s(n,["googleSearchRetrieval"]);null!=A&&a(e,["googleSearchRetrieval"],A);const u=s(n,["urlContext"]);return null!=u&&a(e,["urlContext"],u),e}(Ae(n)))),a(t,["tools"],n)}const B=s(e,["toolConfig"]);if(void 0!==t&&null!=B&&a(t,["toolConfig"],function(n){const e={},t=s(n,["retrievalConfig"]);null!=t&&a(e,["retrievalConfig"],t);const o=s(n,["functionCallingConfig"]);return null!=o&&a(e,["functionCallingConfig"],function(n){const e={},t=s(n,["allowedFunctionNames"]);null!=t&&a(e,["allowedFunctionNames"],t);const o=s(n,["mode"]);if(null!=o&&a(e,["mode"],o),void 0!==s(n,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}(o)),e}(B)),void 0!==s(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const w=s(e,["cachedContent"]);void 0!==t&&null!=w&&a(t,["cachedContent"],de(n,w));const x=s(e,["responseModalities"]);null!=x&&a(o,["responseModalities"],x);const _=s(e,["mediaResolution"]);null!=_&&a(o,["mediaResolution"],_);const T=s(e,["speechConfig"]);if(null!=T&&a(o,["speechConfig"],le(T)),void 0!==s(e,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=s(e,["thinkingConfig"]);null!=I&&a(o,["thinkingConfig"],I);const S=s(e,["imageConfig"]);null!=S&&a(o,["imageConfig"],function(n){const e={},t=s(n,["aspectRatio"]);null!=t&&a(e,["aspectRatio"],t);const o=s(n,["imageSize"]);if(null!=o&&a(e,["imageSize"],o),void 0!==s(n,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==s(n,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==s(n,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}(S));const O=s(e,["enableEnhancedCivicAnswers"]);if(null!=O&&a(o,["enableEnhancedCivicAnswers"],O),void 0!==s(e,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}(n,l,o)),o}function Ke(n,e,t){const o={},r=s(e,["model"]);null!=r&&a(o,["_url","model"],$n(n,r));const i=s(e,["contents"]);if(null!=i){let n=ie(i);Array.isArray(n)&&(n=n.map(n=>n)),a(o,["contents"],n)}const l=s(e,["config"]);return null!=l&&a(o,["generationConfig"],function(n,e,t){const o={},r=s(e,["systemInstruction"]);void 0!==t&&null!=r&&a(t,["systemInstruction"],oe(r));const i=s(e,["temperature"]);null!=i&&a(o,["temperature"],i);const l=s(e,["topP"]);null!=l&&a(o,["topP"],l);const c=s(e,["topK"]);null!=c&&a(o,["topK"],c);const A=s(e,["candidateCount"]);null!=A&&a(o,["candidateCount"],A);const u=s(e,["maxOutputTokens"]);null!=u&&a(o,["maxOutputTokens"],u);const d=s(e,["stopSequences"]);null!=d&&a(o,["stopSequences"],d);const p=s(e,["responseLogprobs"]);null!=p&&a(o,["responseLogprobs"],p);const m=s(e,["logprobs"]);null!=m&&a(o,["logprobs"],m);const h=s(e,["presencePenalty"]);null!=h&&a(o,["presencePenalty"],h);const f=s(e,["frequencyPenalty"]);null!=f&&a(o,["frequencyPenalty"],f);const g=s(e,["seed"]);null!=g&&a(o,["seed"],g);const E=s(e,["responseMimeType"]);null!=E&&a(o,["responseMimeType"],E);const v=s(e,["responseSchema"]);null!=v&&a(o,["responseSchema"],se(v));const y=s(e,["responseJsonSchema"]);null!=y&&a(o,["responseJsonSchema"],y);const C=s(e,["routingConfig"]);null!=C&&a(o,["routingConfig"],C);const b=s(e,["modelSelectionConfig"]);null!=b&&a(o,["modelConfig"],b);const B=s(e,["safetySettings"]);if(void 0!==t&&null!=B){let n=B;Array.isArray(n)&&(n=n.map(n=>n)),a(t,["safetySettings"],n)}const w=s(e,["tools"]);if(void 0!==t&&null!=w){let n=ue(w);Array.isArray(n)&&(n=n.map(n=>ct(Ae(n)))),a(t,["tools"],n)}const x=s(e,["toolConfig"]);void 0!==t&&null!=x&&a(t,["toolConfig"],x);const _=s(e,["labels"]);void 0!==t&&null!=_&&a(t,["labels"],_);const T=s(e,["cachedContent"]);void 0!==t&&null!=T&&a(t,["cachedContent"],de(n,T));const I=s(e,["responseModalities"]);null!=I&&a(o,["responseModalities"],I);const S=s(e,["mediaResolution"]);null!=S&&a(o,["mediaResolution"],S);const O=s(e,["speechConfig"]);null!=O&&a(o,["speechConfig"],le(O));const k=s(e,["audioTimestamp"]);null!=k&&a(o,["audioTimestamp"],k);const R=s(e,["thinkingConfig"]);null!=R&&a(o,["thinkingConfig"],R);const N=s(e,["imageConfig"]);if(null!=N&&a(o,["imageConfig"],function(n){const e={},t=s(n,["aspectRatio"]);null!=t&&a(e,["aspectRatio"],t);const o=s(n,["imageSize"]);null!=o&&a(e,["imageSize"],o);const r=s(n,["personGeneration"]);null!=r&&a(e,["personGeneration"],r);const i=s(n,["outputMimeType"]);null!=i&&a(e,["imageOutputOptions","mimeType"],i);const l=s(n,["outputCompressionQuality"]);return null!=l&&a(e,["imageOutputOptions","compressionQuality"],l),e}(N)),void 0!==s(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const P=s(e,["modelArmorConfig"]);return void 0!==t&&null!=P&&a(t,["modelArmorConfig"],P),o}(n,l,o)),o}function Xe(n,e){const t={},o=s(n,["sdkHttpResponse"]);null!=o&&a(t,["sdkHttpResponse"],o);const r=s(n,["candidates"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["content"]);null!=t&&a(e,["content"],t);const o=s(n,["citationMetadata"]);null!=o&&a(e,["citationMetadata"],function(n){const e={},t=s(n,["citationSources"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["citations"],n)}return e}(o));const r=s(n,["tokenCount"]);null!=r&&a(e,["tokenCount"],r);const i=s(n,["finishReason"]);null!=i&&a(e,["finishReason"],i);const l=s(n,["avgLogprobs"]);null!=l&&a(e,["avgLogprobs"],l);const c=s(n,["groundingMetadata"]);null!=c&&a(e,["groundingMetadata"],c);const A=s(n,["index"]);null!=A&&a(e,["index"],A);const u=s(n,["logprobsResult"]);null!=u&&a(e,["logprobsResult"],u);const d=s(n,["safetyRatings"]);if(null!=d){let n=d;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["safetyRatings"],n)}const p=s(n,["urlContextMetadata"]);return null!=p&&a(e,["urlContextMetadata"],p),e}(n))),a(t,["candidates"],n)}const i=s(n,["modelVersion"]);null!=i&&a(t,["modelVersion"],i);const l=s(n,["promptFeedback"]);null!=l&&a(t,["promptFeedback"],l);const c=s(n,["responseId"]);null!=c&&a(t,["responseId"],c);const A=s(n,["usageMetadata"]);return null!=A&&a(t,["usageMetadata"],A),t}function Qe(n,e){const t={},o=s(n,["sdkHttpResponse"]);null!=o&&a(t,["sdkHttpResponse"],o);const r=s(n,["candidates"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(t,["candidates"],n)}const i=s(n,["createTime"]);null!=i&&a(t,["createTime"],i);const l=s(n,["modelVersion"]);null!=l&&a(t,["modelVersion"],l);const c=s(n,["promptFeedback"]);null!=c&&a(t,["promptFeedback"],c);const A=s(n,["responseId"]);null!=A&&a(t,["responseId"],A);const u=s(n,["usageMetadata"]);return null!=u&&a(t,["usageMetadata"],u),t}function Ze(n,e,t){const o={},r=s(e,["model"]);null!=r&&a(o,["_url","model"],$n(n,r));const i=s(e,["prompt"]);null!=i&&a(o,["instances[0]","prompt"],i);const l=s(e,["image"]);null!=l&&a(o,["instances[0]","image"],ot(l));const c=s(e,["video"]);null!=c&&a(o,["instances[0]","video"],At(c));const A=s(e,["source"]);null!=A&&function(n,e){const t=s(n,["prompt"]);void 0!==e&&null!=t&&a(e,["instances[0]","prompt"],t);const o=s(n,["image"]);void 0!==e&&null!=o&&a(e,["instances[0]","image"],ot(o));const r=s(n,["video"]);void 0!==e&&null!=r&&a(e,["instances[0]","video"],At(r))}(A,o);const u=s(e,["config"]);return null!=u&&function(n,e){const t=s(n,["numberOfVideos"]);if(void 0!==e&&null!=t&&a(e,["parameters","sampleCount"],t),void 0!==s(n,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==s(n,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const o=s(n,["durationSeconds"]);if(void 0!==e&&null!=o&&a(e,["parameters","durationSeconds"],o),void 0!==s(n,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const r=s(n,["aspectRatio"]);void 0!==e&&null!=r&&a(e,["parameters","aspectRatio"],r);const i=s(n,["resolution"]);void 0!==e&&null!=i&&a(e,["parameters","resolution"],i);const l=s(n,["personGeneration"]);if(void 0!==e&&null!=l&&a(e,["parameters","personGeneration"],l),void 0!==s(n,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=s(n,["negativePrompt"]);void 0!==e&&null!=c&&a(e,["parameters","negativePrompt"],c);const A=s(n,["enhancePrompt"]);if(void 0!==e&&null!=A&&a(e,["parameters","enhancePrompt"],A),void 0!==s(n,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const u=s(n,["lastFrame"]);void 0!==e&&null!=u&&a(e,["instances[0]","lastFrame"],ot(u));const d=s(n,["referenceImages"]);if(void 0!==e&&null!=d){let n=d;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["image"]);null!=t&&a(e,["image"],ot(t));const o=s(n,["referenceType"]);return null!=o&&a(e,["referenceType"],o),e}(n))),a(e,["instances[0]","referenceImages"],n)}if(void 0!==s(n,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==s(n,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.")}(u,o),o}function nt(n,e,t){const o={},r=s(e,["model"]);null!=r&&a(o,["_url","model"],$n(n,r));const i=s(e,["prompt"]);null!=i&&a(o,["instances[0]","prompt"],i);const l=s(e,["image"]);null!=l&&a(o,["instances[0]","image"],rt(l));const c=s(e,["video"]);null!=c&&a(o,["instances[0]","video"],ut(c));const A=s(e,["source"]);null!=A&&function(n,e){const t=s(n,["prompt"]);void 0!==e&&null!=t&&a(e,["instances[0]","prompt"],t);const o=s(n,["image"]);void 0!==e&&null!=o&&a(e,["instances[0]","image"],rt(o));const r=s(n,["video"]);void 0!==e&&null!=r&&a(e,["instances[0]","video"],ut(r))}(A,o);const u=s(e,["config"]);return null!=u&&function(n,e){const t=s(n,["numberOfVideos"]);void 0!==e&&null!=t&&a(e,["parameters","sampleCount"],t);const o=s(n,["outputGcsUri"]);void 0!==e&&null!=o&&a(e,["parameters","storageUri"],o);const r=s(n,["fps"]);void 0!==e&&null!=r&&a(e,["parameters","fps"],r);const i=s(n,["durationSeconds"]);void 0!==e&&null!=i&&a(e,["parameters","durationSeconds"],i);const l=s(n,["seed"]);void 0!==e&&null!=l&&a(e,["parameters","seed"],l);const c=s(n,["aspectRatio"]);void 0!==e&&null!=c&&a(e,["parameters","aspectRatio"],c);const A=s(n,["resolution"]);void 0!==e&&null!=A&&a(e,["parameters","resolution"],A);const u=s(n,["personGeneration"]);void 0!==e&&null!=u&&a(e,["parameters","personGeneration"],u);const d=s(n,["pubsubTopic"]);void 0!==e&&null!=d&&a(e,["parameters","pubsubTopic"],d);const p=s(n,["negativePrompt"]);void 0!==e&&null!=p&&a(e,["parameters","negativePrompt"],p);const m=s(n,["enhancePrompt"]);void 0!==e&&null!=m&&a(e,["parameters","enhancePrompt"],m);const h=s(n,["generateAudio"]);void 0!==e&&null!=h&&a(e,["parameters","generateAudio"],h);const f=s(n,["lastFrame"]);void 0!==e&&null!=f&&a(e,["instances[0]","lastFrame"],rt(f));const g=s(n,["referenceImages"]);if(void 0!==e&&null!=g){let n=g;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["image"]);null!=t&&a(e,["image"],rt(t));const o=s(n,["referenceType"]);return null!=o&&a(e,["referenceType"],o),e}(n))),a(e,["instances[0]","referenceImages"],n)}const E=s(n,["mask"]);void 0!==e&&null!=E&&a(e,["instances[0]","mask"],function(n){const e={},t=s(n,["image"]);null!=t&&a(e,["_self"],rt(t));const o=s(n,["maskMode"]);return null!=o&&a(e,["maskMode"],o),e}(E));const v=s(n,["compressionQuality"]);void 0!==e&&null!=v&&a(e,["parameters","compressionQuality"],v)}(u,o),o}function et(n,e){const t={},o=s(n,["_self"]);null!=o&&a(t,["image"],tt(o));const r=s(n,["raiFilteredReason"]);null!=r&&a(t,["raiFilteredReason"],r);const i=s(n,["_self"]);null!=i&&a(t,["safetyAttributes"],lt(i));const l=s(n,["prompt"]);return null!=l&&a(t,["enhancedPrompt"],l),t}function tt(n,e){const t={},o=s(n,["gcsUri"]);null!=o&&a(t,["gcsUri"],o);const r=s(n,["bytesBase64Encoded"]);null!=r&&a(t,["imageBytes"],me(r));const i=s(n,["mimeType"]);return null!=i&&a(t,["mimeType"],i),t}function ot(n,e){const t={};if(void 0!==s(n,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const o=s(n,["imageBytes"]);null!=o&&a(t,["bytesBase64Encoded"],me(o));const r=s(n,["mimeType"]);return null!=r&&a(t,["mimeType"],r),t}function rt(n,e){const t={},o=s(n,["gcsUri"]);null!=o&&a(t,["gcsUri"],o);const r=s(n,["imageBytes"]);null!=r&&a(t,["bytesBase64Encoded"],me(r));const i=s(n,["mimeType"]);return null!=i&&a(t,["mimeType"],i),t}function it(n,e){const t={},o=s(n,["name"]);null!=o&&a(t,["name"],o);const r=s(n,["displayName"]);null!=r&&a(t,["displayName"],r);const i=s(n,["description"]);null!=i&&a(t,["description"],i);const l=s(n,["version"]);null!=l&&a(t,["version"],l);const c=s(n,["_self"]);null!=c&&a(t,["tunedModelInfo"],function(n){const e={},t=s(n,["baseModel"]);null!=t&&a(e,["baseModel"],t);const o=s(n,["createTime"]);null!=o&&a(e,["createTime"],o);const r=s(n,["updateTime"]);return null!=r&&a(e,["updateTime"],r),e}(c));const A=s(n,["inputTokenLimit"]);null!=A&&a(t,["inputTokenLimit"],A);const u=s(n,["outputTokenLimit"]);null!=u&&a(t,["outputTokenLimit"],u);const d=s(n,["supportedGenerationMethods"]);null!=d&&a(t,["supportedActions"],d);const p=s(n,["temperature"]);null!=p&&a(t,["temperature"],p);const m=s(n,["maxTemperature"]);null!=m&&a(t,["maxTemperature"],m);const h=s(n,["topP"]);null!=h&&a(t,["topP"],h);const f=s(n,["topK"]);null!=f&&a(t,["topK"],f);const g=s(n,["thinking"]);return null!=g&&a(t,["thinking"],g),t}function at(n,e){const t={},o=s(n,["name"]);null!=o&&a(t,["name"],o);const r=s(n,["displayName"]);null!=r&&a(t,["displayName"],r);const i=s(n,["description"]);null!=i&&a(t,["description"],i);const l=s(n,["versionId"]);null!=l&&a(t,["version"],l);const c=s(n,["deployedModels"]);if(null!=c){let n=c;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["endpoint"]);null!=t&&a(e,["name"],t);const o=s(n,["deployedModelId"]);return null!=o&&a(e,["deployedModelId"],o),e}(n))),a(t,["endpoints"],n)}const A=s(n,["labels"]);null!=A&&a(t,["labels"],A);const u=s(n,["_self"]);null!=u&&a(t,["tunedModelInfo"],function(n){const e={},t=s(n,["labels","google-vertex-llm-tuning-base-model-id"]);null!=t&&a(e,["baseModel"],t);const o=s(n,["createTime"]);null!=o&&a(e,["createTime"],o);const r=s(n,["updateTime"]);return null!=r&&a(e,["updateTime"],r),e}(u));const d=s(n,["defaultCheckpointId"]);null!=d&&a(t,["defaultCheckpointId"],d);const p=s(n,["checkpoints"]);if(null!=p){let n=p;Array.isArray(n)&&(n=n.map(n=>n)),a(t,["checkpoints"],n)}return t}function st(n,e){const t={},o=s(n,["safetyAttributes","categories"]);null!=o&&a(t,["categories"],o);const r=s(n,["safetyAttributes","scores"]);null!=r&&a(t,["scores"],r);const i=s(n,["contentType"]);return null!=i&&a(t,["contentType"],i),t}function lt(n,e){const t={},o=s(n,["safetyAttributes","categories"]);null!=o&&a(t,["categories"],o);const r=s(n,["safetyAttributes","scores"]);null!=r&&a(t,["scores"],r);const i=s(n,["contentType"]);return null!=i&&a(t,["contentType"],i),t}function ct(n,e){const t={},o=s(n,["retrieval"]);null!=o&&a(t,["retrieval"],o);const r=s(n,["computerUse"]);if(null!=r&&a(t,["computerUse"],r),void 0!==s(n,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=s(n,["codeExecution"]);null!=i&&a(t,["codeExecution"],i);const l=s(n,["enterpriseWebSearch"]);null!=l&&a(t,["enterpriseWebSearch"],l);const c=s(n,["functionDeclarations"]);if(null!=c){let n=c;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["description"]);null!=t&&a(e,["description"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["parameters"]);null!=r&&a(e,["parameters"],r);const i=s(n,["parametersJsonSchema"]);null!=i&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);null!=l&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);if(null!=c&&a(e,["responseJsonSchema"],c),void 0!==s(n,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return e}(n))),a(t,["functionDeclarations"],n)}const A=s(n,["googleMaps"]);null!=A&&a(t,["googleMaps"],A);const u=s(n,["googleSearch"]);null!=u&&a(t,["googleSearch"],u);const d=s(n,["googleSearchRetrieval"]);null!=d&&a(t,["googleSearchRetrieval"],d);const p=s(n,["urlContext"]);return null!=p&&a(t,["urlContext"],p),t}function At(n,e){const t={},o=s(n,["uri"]);null!=o&&a(t,["uri"],o);const r=s(n,["videoBytes"]);null!=r&&a(t,["encodedVideo"],me(r));const i=s(n,["mimeType"]);return null!=i&&a(t,["encoding"],i),t}function ut(n,e){const t={},o=s(n,["uri"]);null!=o&&a(t,["gcsUri"],o);const r=s(n,["videoBytes"]);null!=r&&a(t,["bytesBase64Encoded"],me(r));const i=s(n,["mimeType"]);return null!=i&&a(t,["mimeType"],i),t}function dt(n,e){const t=s(n,["mimeType"]);void 0!==e&&null!=t&&a(e,["mimeType"],t);const o=s(n,["displayName"]);void 0!==e&&null!=o&&a(e,["displayName"],o);const r=s(n,["customMetadata"]);if(void 0!==e&&null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["customMetadata"],n)}const i=s(n,["chunkingConfig"]);return void 0!==e&&null!=i&&a(e,["chunkingConfig"],i),{}}const pt="x-goog-api-client",mt=[408,429,500,502,503,504];class ht{constructor(n){var e,t,o;this.clientOptions=Object.assign({},n),this.customBaseUrl=null===(e=n.httpOptions)||void 0===e?void 0:e.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl||(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl))throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const e=n.project&&n.location||!!n.apiKey;this.customBaseUrl&&!e?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||"global"===this.clientOptions.location?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1"}else{if(!this.clientOptions.apiKey)throw new Fe({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=null!==(o=this.clientOptions.apiVersion)&&void 0!==o?o:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}isVertexAI(){var n;return null!==(n=this.clientOptions.vertexai)&&void 0!==n&&n}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const n=new Headers;return await this.clientOptions.auth.addAuthHeaders(n),n}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||void 0===n.baseUrl||void 0===n.apiVersion)throw new Error("HTTP options are not correctly set.");const e=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&""!==n.apiVersion&&e.push(n.apiVersion),e.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),e=new URL(n);return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(n){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=n}constructUrl(n,e,t){const o=[this.getRequestUrlInternal(e)];return t&&o.push(this.getBaseResourcePath()),""!==n&&o.push(n),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(n,e){return!(e.baseUrl&&e.baseUrlResourceScope===q.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||"GET"===n.httpMethod&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n,e),o=this.constructUrl(n.path,e,t);if(n.queryParams)for(const[e,t]of Object.entries(n.queryParams))o.searchParams.append(e,String(t));let r={};if("GET"===n.httpMethod){if(n.body&&"{}"!==n.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=n.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,e,o.toString(),n.abortSignal),this.unaryApiCall(o,r,n.httpMethod)}patchHttpOptions(n,e){const t=JSON.parse(JSON.stringify(n));for(const[n,o]of Object.entries(e))"object"==typeof o?t[n]=Object.assign(Object.assign({},t[n]),o):void 0!==o&&(t[n]=o);return t}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n,e),o=this.constructUrl(n.path,e,t);o.searchParams.has("alt")&&"sse"===o.searchParams.get("alt")||o.searchParams.set("alt","sse");let r={};return r.body=n.body,r=await this.includeExtraHttpOptionsToRequestInit(r,e,o.toString(),n.abortSignal),this.streamApiCall(o,r,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e,t,o){if(e&&e.timeout||o){const t=new AbortController,r=t.signal;if(e.timeout&&(null==e?void 0:e.timeout)>0){const n=setTimeout(()=>t.abort(),e.timeout);n&&"function"==typeof n.unref&&n.unref()}o&&o.addEventListener("abort",()=>{t.abort()}),n.signal=r}return e&&null!==e.extraBody&&function(n,e){if(!e||0===Object.keys(e).length)return;if(n.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let t={};if("string"==typeof n.body&&n.body.length>0)try{const e=JSON.parse(n.body);if("object"!=typeof e||null===e||Array.isArray(e))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");t=e}catch(n){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}const o=function n(e,t){const o=Object.assign({},e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e],i=o[e];r&&"object"==typeof r&&!Array.isArray(r)&&i&&"object"==typeof i&&!Array.isArray(i)?o[e]=n(i,r):(i&&r&&typeof i!=typeof r&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${e}". Original type: ${typeof i}, New type: ${typeof r}. Overwriting.`),o[e]=r)}return o}(t,e);n.body=JSON.stringify(o)}(n,e.extraBody),n.headers=await this.getHeadersInternal(e,t),n}async unaryApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async n=>(await ft(n),new gn(n))).catch(n=>{throw n instanceof Error?n:new Error(JSON.stringify(n))})}async streamApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async n=>(await ft(n),this.processStreamResponse(n))).catch(n=>{throw n instanceof Error?n:new Error(JSON.stringify(n))})}processStreamResponse(n){return De(this,arguments,function*(){var e;const t=null===(e=null==n?void 0:n.body)||void 0===e?void 0:e.getReader(),o=new TextDecoder("utf-8");if(!t)throw new Error("Response body is empty");try{let e="";const r="data:",i=["\n\n","\r\r","\r\n\r\n"];for(;;){const{done:a,value:s}=yield Pe(t.read());if(a){if(e.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const l=o.decode(s,{stream:!0});try{const n=JSON.parse(l);if("error"in n){const e=JSON.parse(JSON.stringify(n.error)),t=e.status,o=e.code,r=`got status: ${t}. ${JSON.stringify(n)}`;if(o>=400&&o<600)throw new Fe({message:r,status:o})}}catch(n){if("ApiError"===n.name)throw n}e+=l;let c=-1,A=0;for(;;){c=-1,A=0;for(const n of i){const t=e.indexOf(n);-1!==t&&(-1===c||t<c)&&(c=t,A=n.length)}if(-1===c)break;const t=e.substring(0,c);e=e.substring(c+A);const o=t.trim();if(o.startsWith(r)){const e=o.substring(r.length).trim();try{const t=new Response(e,{headers:null==n?void 0:n.headers,status:null==n?void 0:n.status,statusText:null==n?void 0:n.statusText});yield yield Pe(new gn(t))}catch(n){throw new Error(`exception parsing stream chunk ${e}. ${n}`)}}}}}finally{t.releaseLock()}})}async apiCall(n,e){var t;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(n,e);const r=this.clientOptions.httpOptions.retryOptions;return o(async()=>{const t=await fetch(n,e);if(t.ok)return t;if(mt.includes(t.status))throw new Error(`Retryable HTTP Error: ${t.statusText}`);throw new o.AbortError(`Non-retryable exception ${t.statusText} sending request`)},{retries:(null!==(t=r.attempts)&&void 0!==t?t:5)-1})}getDefaultHeaders(){const n={},e="google-genai-sdk/1.42.0 "+this.clientOptions.userAgentExtra;return n["User-Agent"]=e,n[pt]=e,n["Content-Type"]="application/json",n}async getHeadersInternal(n,e){const t=new Headers;if(n&&n.headers){for(const[e,o]of Object.entries(n.headers))t.append(e,o);n.timeout&&n.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t,e),t}getFileName(n){var e;let t="";return"string"==typeof n&&(t=n.replace(/[/\\]+$/,""),t=null!==(e=t.split(/[/\\]/).pop())&&void 0!==e?e:""),t}async uploadFile(n,e){var t;const o={};null!=e&&(o.mimeType=e.mimeType,o.name=e.name,o.displayName=e.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,a=await r.stat(n);o.sizeBytes=String(a.size);const s=null!==(t=null==e?void 0:e.mimeType)&&void 0!==t?t:a.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=s;const l={file:o},c=this.getFileName(n),A=i("upload/v1beta/files",l._url),u=await this.fetchUploadUrl(A,o.sizeBytes,o.mimeType,c,l,null==e?void 0:e.httpOptions);return r.upload(n,u,this)}async uploadFileToFileSearchStore(n,e,t){var o;const r=this.clientOptions.uploader,i=await r.stat(e),a=String(i.size),s=null!==(o=null==t?void 0:t.mimeType)&&void 0!==o?o:i.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l=`upload/v1beta/${n}:uploadToFileSearchStore`,c=this.getFileName(e),A={};null!=t&&dt(t,A);const u=await this.fetchUploadUrl(l,a,s,c,A,null==t?void 0:t.httpOptions);return r.uploadToFileSearchStore(e,u,this)}async downloadFile(n){const e=this.clientOptions.downloader;await e.download(n,this)}async fetchUploadUrl(n,e,t,o,r,i){var a;let s={};s=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${t}`},o?{"X-Goog-Upload-File-Name":o}:{})};const l=await this.request({path:n,body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!l||!(null==l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=null===(a=null==l?void 0:l.headers)||void 0===a?void 0:a["x-goog-upload-url"];if(void 0===c)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function ft(n){var e;if(void 0===n)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;o=(null===(e=n.headers.get("content-type"))||void 0===e?void 0:e.includes("application/json"))?await n.json():{error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);if(t>=400&&t<600)throw new Fe({message:r,status:t});throw new Error(r)}}function gt(n){for(const e of n){if(vt(e))return!0;if("object"==typeof e&&"inputSchema"in e)return!0}return false}function Et(n){var e;const t=null!==(e=n[pt])&&void 0!==e?e:"";n[pt]=(t+" mcp_used/unknown").trimStart()}function vt(n){return null!==n&&"object"==typeof n&&n instanceof Ct}function yt(n){return De(this,arguments,function*(n,e=100){let t,o=0;for(;o<e;){const e=yield Pe(n.listTools({cursor:t}));for(const n of e.tools)yield yield Pe(n),o++;if(!e.nextCursor)break;t=e.nextCursor}})}class Ct{constructor(n=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=n,this.config=e}static create(n,e){return new Ct(n,e)}async initialize(){var n,e,t,o;if(this.mcpTools.length>0)return;const r={},i=[];for(const c of this.mcpClients)try{for(var a,s=!0,l=(e=void 0,Me(yt(c)));!(n=(a=await l.next()).done);s=!0){o=a.value,s=!1;const n=o;i.push(n);const e=n.name;if(r[e])throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r[e]=c}}catch(n){e={error:n}}finally{try{s||n||!(t=l.return)||await t.call(l)}finally{if(e)throw e.error}}this.mcpTools=i,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),function(n,e={}){const t=[],o=new Set;for(const r of n){const n=r.name;if(o.has(n))throw new Error(`Duplicate function name ${n} found in MCP tools. Please ensure function names are unique.`);o.add(n);const i=ve(r,e);i.functionDeclarations&&t.push(...i.functionDeclarations)}return{functionDeclarations:t}}(this.mcpTools,this.config)}async callTool(n){await this.initialize();const e=[];for(const t of n)if(t.name in this.functionNameToMcpClient){const n=this.functionNameToMcpClient[t.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const r=await n.callTool({name:t.name,arguments:t.args},void 0,o);e.push({functionResponse:{name:t.name,response:r.isError?{error:r}:r}})}return e}}class bt{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}async connect(n){var e,t;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),i=function(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}(this.apiClient.getDefaultHeaders()),a=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let s=()=>{};const l=new Promise(n=>{s=n}),c=n.callbacks,A=(this.apiClient,{onopen:function(){s({})},onmessage:n=>{!async function(n,e,t){const o=new Vn;let r;r=t.data instanceof Blob?JSON.parse(await t.data.text()):JSON.parse(t.data),Object.assign(o,r),e(o)}(0,c.onmessage,n)},onerror:null!==(e=null==c?void 0:c.onerror)&&void 0!==e?e:function(n){},onclose:null!==(t=null==c?void 0:c.onclose)&&void 0!==t?t:function(n){}}),u=this.webSocketFactory.create(a,function(n){const e={};return n.forEach((n,t)=>{e[t]=n}),e}(i),A);u.connect(),await l;const d={setup:{model:$n(this.apiClient,n.model)}};return u.send(JSON.stringify(d)),new Bt(u,this.apiClient)}}class Bt{constructor(n,e){this.conn=n,this.apiClient=e}async setWeightedPrompts(n){if(!n.weightedPrompts||0===Object.keys(n.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=function(n){const e={},t=s(n,["weightedPrompts"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["weightedPrompts"],n)}return e}(n);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(n){n.musicGenerationConfig||(n.musicGenerationConfig={});const e=function(n){const e={},t=s(n,["musicGenerationConfig"]);return null!=t&&a(e,["musicGenerationConfig"],t),e}(n);this.conn.send(JSON.stringify(e))}sendPlaybackControl(n){const e={playbackControl:n};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(hn.PLAY)}pause(){this.sendPlaybackControl(hn.PAUSE)}stop(){this.sendPlaybackControl(hn.STOP)}resetContext(){this.sendPlaybackControl(hn.RESET_CONTEXT)}close(){this.conn.close()}}class wt{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t,this.music=new bt(this.apiClient,this.auth,this.webSocketFactory)}async connect(n){var e,t,o,r,i,l;if(n.config&&n.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),A=this.apiClient.getApiVersion();let u;const d=this.apiClient.getHeaders();n.config&&n.config.tools&&gt(n.config.tools)&&Et(d);const p=function(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}(d);if(this.apiClient.isVertexAI()){const n=this.apiClient.getProject(),e=this.apiClient.getLocation(),t=this.apiClient.getApiKey(),o=!!n&&!!e||!!t;this.apiClient.getCustomBaseUrl()&&!o?u=c:(u=`${c}/ws/google.cloud.aiplatform.${A}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,u))}else{const n=this.apiClient.getApiKey();let e="BidiGenerateContent",t="key";(null==n?void 0:n.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==A&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),e="BidiGenerateContentConstrained",t="access_token"),u=`${c}/ws/google.ai.generativelanguage.${A}.GenerativeService.${e}?${t}=${n}`}let m=()=>{};const h=new Promise(n=>{m=n}),f=n.callbacks,g=this.apiClient,E={onopen:function(){var n;null===(n=null==f?void 0:f.onopen)||void 0===n||n.call(f),m({})},onmessage:n=>{!async function(n,e,t){const o=new Hn;let r;r=t.data instanceof Blob?await t.data.text():t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;const i=JSON.parse(r);if(n.isVertexAI()){const n=function(n){const e={},t=s(n,["setupComplete"]);null!=t&&a(e,["setupComplete"],t);const o=s(n,["serverContent"]);null!=o&&a(e,["serverContent"],o);const r=s(n,["toolCall"]);null!=r&&a(e,["toolCall"],r);const i=s(n,["toolCallCancellation"]);null!=i&&a(e,["toolCallCancellation"],i);const l=s(n,["usageMetadata"]);null!=l&&a(e,["usageMetadata"],function(n){const e={},t=s(n,["promptTokenCount"]);null!=t&&a(e,["promptTokenCount"],t);const o=s(n,["cachedContentTokenCount"]);null!=o&&a(e,["cachedContentTokenCount"],o);const r=s(n,["candidatesTokenCount"]);null!=r&&a(e,["responseTokenCount"],r);const i=s(n,["toolUsePromptTokenCount"]);null!=i&&a(e,["toolUsePromptTokenCount"],i);const l=s(n,["thoughtsTokenCount"]);null!=l&&a(e,["thoughtsTokenCount"],l);const c=s(n,["totalTokenCount"]);null!=c&&a(e,["totalTokenCount"],c);const A=s(n,["promptTokensDetails"]);if(null!=A){let n=A;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["promptTokensDetails"],n)}const u=s(n,["cacheTokensDetails"]);if(null!=u){let n=u;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["cacheTokensDetails"],n)}const d=s(n,["candidatesTokensDetails"]);if(null!=d){let n=d;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["responseTokensDetails"],n)}const p=s(n,["toolUsePromptTokensDetails"]);if(null!=p){let n=p;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["toolUsePromptTokensDetails"],n)}const m=s(n,["trafficType"]);return null!=m&&a(e,["trafficType"],m),e}(l));const c=s(n,["goAway"]);null!=c&&a(e,["goAway"],c);const A=s(n,["sessionResumptionUpdate"]);null!=A&&a(e,["sessionResumptionUpdate"],A);const u=s(n,["voiceActivityDetectionSignal"]);null!=u&&a(e,["voiceActivityDetectionSignal"],u);const d=s(n,["voiceActivity"]);return null!=d&&a(e,["voiceActivity"],function(n){const e={},t=s(n,["type"]);return null!=t&&a(e,["voiceActivityType"],t),e}(d)),e}(i);Object.assign(o,n)}else{const n=i;Object.assign(o,n)}e(o)}(g,f.onmessage,n)},onerror:null!==(e=null==f?void 0:f.onerror)&&void 0!==e?e:function(n){},onclose:null!==(t=null==f?void 0:f.onclose)&&void 0!==t?t:function(n){}},v=this.webSocketFactory.create(u,function(n){const e={};return n.forEach((n,t)=>{e[t]=n}),e}(p),E);v.connect(),await h;let y=$n(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){const n=this.apiClient.getProject(),e=this.apiClient.getLocation();n&&e&&(y=`projects/${n}/locations/${e}/`+y)}let C={};this.apiClient.isVertexAI()&&void 0===(null===(o=n.config)||void 0===o?void 0:o.responseModalities)&&(void 0===n.config?n.config={responseModalities:[R.AUDIO]}:n.config.responseModalities=[R.AUDIO]),(null===(r=n.config)||void 0===r?void 0:r.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=null!==(l=null===(i=n.config)||void 0===i?void 0:i.tools)&&void 0!==l?l:[],B=[];for(const n of b)if(this.isCallableTool(n)){const e=n;B.push(await e.tool())}else B.push(n);B.length>0&&(n.config.tools=B);const w={model:y,config:n.config,callbacks:n.callbacks};return C=this.apiClient.isVertexAI()?function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["setup","model"],$n(n,o));const r=s(e,["config"]);return null!=r&&a(t,["config"],function(n,e){const t=s(n,["generationConfig"]);void 0!==e&&null!=t&&a(e,["setup","generationConfig"],function(n){const e={},t=s(n,["modelSelectionConfig"]);null!=t&&a(e,["modelConfig"],t);const o=s(n,["responseJsonSchema"]);null!=o&&a(e,["responseJsonSchema"],o);const r=s(n,["audioTimestamp"]);null!=r&&a(e,["audioTimestamp"],r);const i=s(n,["candidateCount"]);null!=i&&a(e,["candidateCount"],i);const l=s(n,["enableAffectiveDialog"]);null!=l&&a(e,["enableAffectiveDialog"],l);const c=s(n,["frequencyPenalty"]);null!=c&&a(e,["frequencyPenalty"],c);const A=s(n,["logprobs"]);null!=A&&a(e,["logprobs"],A);const u=s(n,["maxOutputTokens"]);null!=u&&a(e,["maxOutputTokens"],u);const d=s(n,["mediaResolution"]);null!=d&&a(e,["mediaResolution"],d);const p=s(n,["presencePenalty"]);null!=p&&a(e,["presencePenalty"],p);const m=s(n,["responseLogprobs"]);null!=m&&a(e,["responseLogprobs"],m);const h=s(n,["responseMimeType"]);null!=h&&a(e,["responseMimeType"],h);const f=s(n,["responseModalities"]);null!=f&&a(e,["responseModalities"],f);const g=s(n,["responseSchema"]);null!=g&&a(e,["responseSchema"],g);const E=s(n,["routingConfig"]);null!=E&&a(e,["routingConfig"],E);const v=s(n,["seed"]);null!=v&&a(e,["seed"],v);const y=s(n,["speechConfig"]);null!=y&&a(e,["speechConfig"],y);const C=s(n,["stopSequences"]);null!=C&&a(e,["stopSequences"],C);const b=s(n,["temperature"]);null!=b&&a(e,["temperature"],b);const B=s(n,["thinkingConfig"]);null!=B&&a(e,["thinkingConfig"],B);const w=s(n,["topK"]);null!=w&&a(e,["topK"],w);const x=s(n,["topP"]);if(null!=x&&a(e,["topP"],x),void 0!==s(n,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}(t));const o=s(n,["responseModalities"]);void 0!==e&&null!=o&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);void 0!==e&&null!=r&&a(e,["setup","generationConfig","temperature"],r);const i=s(n,["topP"]);void 0!==e&&null!=i&&a(e,["setup","generationConfig","topP"],i);const l=s(n,["topK"]);void 0!==e&&null!=l&&a(e,["setup","generationConfig","topK"],l);const c=s(n,["maxOutputTokens"]);void 0!==e&&null!=c&&a(e,["setup","generationConfig","maxOutputTokens"],c);const A=s(n,["mediaResolution"]);void 0!==e&&null!=A&&a(e,["setup","generationConfig","mediaResolution"],A);const u=s(n,["seed"]);void 0!==e&&null!=u&&a(e,["setup","generationConfig","seed"],u);const d=s(n,["speechConfig"]);void 0!==e&&null!=d&&a(e,["setup","generationConfig","speechConfig"],ce(d));const p=s(n,["thinkingConfig"]);void 0!==e&&null!=p&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=s(n,["enableAffectiveDialog"]);void 0!==e&&null!=m&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=s(n,["systemInstruction"]);void 0!==e&&null!=h&&a(e,["setup","systemInstruction"],oe(h));const f=s(n,["tools"]);if(void 0!==e&&null!=f){let n=ue(f);Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["retrieval"]);null!=t&&a(e,["retrieval"],t);const o=s(n,["computerUse"]);if(null!=o&&a(e,["computerUse"],o),void 0!==s(n,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=s(n,["codeExecution"]);null!=r&&a(e,["codeExecution"],r);const i=s(n,["enterpriseWebSearch"]);null!=i&&a(e,["enterpriseWebSearch"],i);const l=s(n,["functionDeclarations"]);if(null!=l){let n=l;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["description"]);null!=t&&a(e,["description"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["parameters"]);null!=r&&a(e,["parameters"],r);const i=s(n,["parametersJsonSchema"]);null!=i&&a(e,["parametersJsonSchema"],i);const l=s(n,["response"]);null!=l&&a(e,["response"],l);const c=s(n,["responseJsonSchema"]);if(null!=c&&a(e,["responseJsonSchema"],c),void 0!==s(n,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return e}(n))),a(e,["functionDeclarations"],n)}const c=s(n,["googleMaps"]);null!=c&&a(e,["googleMaps"],c);const A=s(n,["googleSearch"]);null!=A&&a(e,["googleSearch"],A);const u=s(n,["googleSearchRetrieval"]);null!=u&&a(e,["googleSearchRetrieval"],u);const d=s(n,["urlContext"]);return null!=d&&a(e,["urlContext"],d),e}(Ae(n)))),a(e,["setup","tools"],n)}const g=s(n,["sessionResumption"]);void 0!==e&&null!=g&&a(e,["setup","sessionResumption"],g);const E=s(n,["inputAudioTranscription"]);void 0!==e&&null!=E&&a(e,["setup","inputAudioTranscription"],E);const v=s(n,["outputAudioTranscription"]);void 0!==e&&null!=v&&a(e,["setup","outputAudioTranscription"],v);const y=s(n,["realtimeInputConfig"]);void 0!==e&&null!=y&&a(e,["setup","realtimeInputConfig"],y);const C=s(n,["contextWindowCompression"]);void 0!==e&&null!=C&&a(e,["setup","contextWindowCompression"],C);const b=s(n,["proactivity"]);void 0!==e&&null!=b&&a(e,["setup","proactivity"],b);const B=s(n,["explicitVadSignal"]);return void 0!==e&&null!=B&&a(e,["setup","explicitVadSignal"],B),{}}(r,t)),t}(this.apiClient,w):function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["setup","model"],$n(n,o));const r=s(e,["config"]);return null!=r&&a(t,["config"],We(r,t)),t}(this.apiClient,w),delete C.config,v.send(JSON.stringify(C)),new _t(v,this.apiClient)}isCallableTool(n){return"callTool"in n&&"function"==typeof n.callTool}}const xt={turnComplete:!0};class _t{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(null!==e.turns&&void 0!==e.turns){let t=[];try{t=ie(e.turns),n.isVertexAI()||(t=t.map(n=>ze(n)))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(n,e){let t=[];if(null==e.functionResponses)throw new Error("functionResponses is required.");if(t=Array.isArray(e.functionResponses)?e.functionResponses:[e.functionResponses],0===t.length)throw new Error("functionResponses is required.");for(const e of t){if("object"!=typeof e||null===e||!("name"in e)||!("response"in e))throw new Error(`Could not parse function response, type '${typeof e}'.`);if(!n.isVertexAI()&&!("id"in e))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},xt),n);const e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){let e={};e=this.apiClient.isVertexAI()?{realtimeInput:Je(n)}:{realtimeInput:$e(n)},this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(null==n.functionResponses)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function Tt(n){var e,t,o;if(null===(e=null==n?void 0:n.automaticFunctionCalling)||void 0===e?void 0:e.disable)return!0;let r=!1;for(const e of null!==(t=null==n?void 0:n.tools)&&void 0!==t?t:[])if(It(e)){r=!0;break}if(!r)return!0;const i=null===(o=null==n?void 0:n.automaticFunctionCalling)||void 0===o?void 0:o.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function It(n){return"callTool"in n&&"function"==typeof n.callTool}function St(n){var e;const t=[];return(null===(e=null==n?void 0:n.config)||void 0===e?void 0:e.tools)?(n.config.tools.forEach((n,e)=>{if(It(n))return;const o=n;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(e)}),t):t}function Ot(n){var e;return!(null===(e=null==n?void 0:n.automaticFunctionCalling)||void 0===e?void 0:e.ignoreCallHistory)}class kt extends r{constructor(n){super(),this.apiClient=n,this.embedContent=async n=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(n);if(n.model.includes("gemini")&&"gemini-embedding-001"!==n.model||n.model.includes("maas")){const e=ie(n.contents);if(e.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const t=Object.assign(Object.assign({},n),{content:e[0],embeddingApiType:F.EMBED_CONTENT});return await this.embedContentInternal(t)}{const e=Object.assign(Object.assign({},n),{embeddingApiType:F.PREDICT});return await this.embedContentInternal(e)}},this.generateContent=async n=>{var e,t,o,r,i;const a=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!function(n){var e,t,o;return null!==(o=null===(t=null===(e=n.config)||void 0===e?void 0:e.tools)||void 0===t?void 0:t.some(n=>It(n)))&&void 0!==o&&o}(n)||Tt(n.config))return await this.generateContentInternal(a);const s=St(n);if(s.length>0){const n=s.map(n=>`tools[${n}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${n}.`)}let l,c;const A=ie(a.contents),u=null!==(o=null===(t=null===(e=a.config)||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.maximumRemoteCalls)&&void 0!==o?o:10;let d=0;for(;d<u&&(l=await this.generateContentInternal(a),l.functionCalls&&0!==l.functionCalls.length);){const e=l.candidates[0].content,t=[];for(const e of null!==(i=null===(r=n.config)||void 0===r?void 0:r.tools)&&void 0!==i?i:[])if(It(e)){const n=e,o=await n.callTool(l.functionCalls);t.push(...o)}d++,c={role:"user",parts:t},a.contents=ie(a.contents),a.contents.push(e),a.contents.push(c),Ot(a.config)&&(A.push(e),A.push(c))}return Ot(a.config)&&(l.automaticFunctionCallingHistory=A),l},this.generateContentStream=async n=>{var e,t,o,r,i;if(this.maybeMoveToResponseJsonSchem(n),Tt(n.config)){const e=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(e)}const a=St(n);if(a.length>0){const n=a.map(n=>`tools[${n}]`).join(", ");throw new Error(`Incompatible tools found at ${n}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const s=null===(o=null===(t=null===(e=null==n?void 0:n.config)||void 0===e?void 0:e.toolConfig)||void 0===t?void 0:t.functionCallingConfig)||void 0===o?void 0:o.streamFunctionCallArguments,l=null===(i=null===(r=null==n?void 0:n.config)||void 0===r?void 0:r.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(s&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(n=>{var e;let t;const o=[];if(null==n?void 0:n.generatedImages)for(const r of n.generatedImages)r&&(null==r?void 0:r.safetyAttributes)&&"Positive Prompt"===(null===(e=null==r?void 0:r.safetyAttributes)||void 0===e?void 0:e.contentType)?t=null==r?void 0:r.safetyAttributes:o.push(r);let r;return r=t?{generatedImages:o,positivePromptSafetyAttributes:t,sdkHttpResponse:n.sdkHttpResponse}:{generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},r}),this.list=async n=>{var e;const t={config:Object.assign(Object.assign({},{queryBase:!0}),null==n?void 0:n.config)};if(this.apiClient.isVertexAI()&&!t.config.queryBase){if(null===(e=t.config)||void 0===e?void 0:e.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");t.config.filter="labels.tune-type:*"}return new Se(fn.PAGED_ITEM_MODELS,n=>this.listInternal(n),await this.listInternal(t),t)},this.editImage=async n=>{const e={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(e.referenceImages=n.referenceImages.map(n=>n.toReferenceImageAPI())),await this.editImageInternal(e)},this.upscaleImage=async n=>{let e={numberOfImages:1,mode:"upscale"};n.config&&(e=Object.assign(Object.assign({},e),n.config));const t={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:e};return await this.upscaleImageInternal(t)},this.generateVideos=async n=>{var e,t,o,r,i,a;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(e=n.video)||void 0===e?void 0:e.uri)&&(null===(t=n.video)||void 0===t?void 0:t.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:(null===(r=null===(o=n.source)||void 0===o?void 0:o.video)||void 0===r?void 0:r.uri)&&(null===(a=null===(i=n.source)||void 0===i?void 0:i.video)||void 0===a?void 0:a.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(n){n.config&&n.config.responseSchema&&(n.config.responseJsonSchema||Object.keys(n.config.responseSchema).includes("$schema")&&(n.config.responseJsonSchema=n.config.responseSchema,delete n.config.responseSchema))}async processParamsMaybeAddMcpUsage(n){var e,t,o;const r=null===(e=n.config)||void 0===e?void 0:e.tools;if(!r)return n;const i=await Promise.all(r.map(async n=>{if(It(n)){const e=n;return await e.tool()}return n})),a={model:n.model,contents:n.contents,config:Object.assign(Object.assign({},n.config),{tools:i})};if(a.config.tools=i,n.config&&n.config.tools&&gt(n.config.tools)){const e=null!==(o=null===(t=n.config.httpOptions)||void 0===t?void 0:t.headers)&&void 0!==o?o:{};let r=Object.assign({},e);0===Object.keys(r).length&&(r=this.apiClient.getDefaultHeaders()),Et(r),a.config.httpOptions=Object.assign(Object.assign({},n.config.httpOptions),{headers:r})}return a}async initAfcToolsMap(n){var e,t,o;const r=new Map;for(const i of null!==(t=null===(e=n.config)||void 0===e?void 0:e.tools)&&void 0!==t?t:[])if(It(i)){const n=i,e=await n.tool();for(const t of null!==(o=e.functionDeclarations)&&void 0!==o?o:[]){if(!t.name)throw new Error("Function declaration name is required.");if(r.has(t.name))throw new Error(`Duplicate tool declaration name: ${t.name}`);r.set(t.name,n)}}return r}async processAfcStream(n){var e,t,o;const r=null!==(o=null===(t=null===(e=n.config)||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.maximumRemoteCalls)&&void 0!==o?o:10;let i=!1,a=0;return function(n,e,t){return De(this,arguments,function*(){for(var o,s,l,c,A,u;a<r;){i&&(a++,i=!1);const h=yield Pe(n.processParamsMaybeAddMcpUsage(t)),f=yield Pe(n.generateContentStreamInternal(h)),g=[],E=[];try{for(var d,p=!0,m=(s=void 0,Me(f));!(o=(d=yield Pe(m.next())).done);p=!0){c=d.value,p=!1;const n=c;if(yield yield Pe(n),n.candidates&&(null===(A=n.candidates[0])||void 0===A?void 0:A.content)){E.push(n.candidates[0].content);for(const t of null!==(u=n.candidates[0].content.parts)&&void 0!==u?u:[])if(a<r&&t.functionCall){if(!t.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!e.has(t.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${e.keys()}, mising tool: ${t.functionCall.name}`);{const n=yield Pe(e.get(t.functionCall.name).callTool([t.functionCall]));g.push(...n)}}}}}catch(n){s={error:n}}finally{try{p||o||!(l=m.return)||(yield Pe(l.call(m)))}finally{if(s)throw s.error}}if(!(g.length>0))break;{i=!0;const n=new En;n.candidates=[{content:{role:"user",parts:g}}],yield yield Pe(n);const e=[];e.push(...E),e.push({role:"user",parts:g});const o=ie(t.contents).concat(e);t.contents=o}}})}(this,await this.initAfcToolsMap(n),n)}async generateContentInternal(n){var e,t,o,r;let a,s="",l={};if(this.apiClient.isVertexAI()){const o=Ke(this.apiClient,n);return s=i("{model}:generateContent",o._url),l=o._query,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),a.then(n=>{const e=Qe(n),t=new En;return Object.assign(t,e),t})}{const e=Ye(this.apiClient,n);return s=i("{model}:generateContent",e._url),l=e._query,delete e._url,delete e._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),a.then(n=>{const e=Xe(n),t=new En;return Object.assign(t,e),t})}}async generateContentStreamInternal(n){var e,t,o,r;let a,s="",l={};if(this.apiClient.isVertexAI()){const o=Ke(this.apiClient,n);return s=i("{model}:streamGenerateContent?alt=sse",o._url),l=o._query,delete o._url,delete o._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}),a.then(function(n){return De(this,arguments,function*(){var e,t,o,r;try{for(var i,a=!0,s=Me(n);!(e=(i=yield Pe(s.next())).done);a=!0){r=i.value,a=!1;const n=r,e=Qe(yield Pe(n.json()));e.sdkHttpResponse={headers:n.headers};const t=new En;Object.assign(t,e),yield yield Pe(t)}}catch(n){t={error:n}}finally{try{a||e||!(o=s.return)||(yield Pe(o.call(s)))}finally{if(t)throw t.error}}})})}{const e=Ye(this.apiClient,n);return s=i("{model}:streamGenerateContent?alt=sse",e._url),l=e._query,delete e._url,delete e._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}),a.then(function(n){return De(this,arguments,function*(){var e,t,o,r;try{for(var i,a=!0,s=Me(n);!(e=(i=yield Pe(s.next())).done);a=!0){r=i.value,a=!1;const n=r,e=Xe(yield Pe(n.json()));e.sdkHttpResponse={headers:n.headers};const t=new En;Object.assign(t,e),yield yield Pe(t)}}catch(n){t={error:n}}finally{try{a||e||!(o=s.return)||(yield Pe(o.call(s)))}finally{if(t)throw t.error}}})})}}async embedContentInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e,t){const o={},r=s(e,["model"]);null!=r&&a(o,["_url","model"],$n(n,r));let i=s(t,["embeddingApiType"]);if(void 0===i&&(i="PREDICT"),"PREDICT"===i){const t=s(e,["contents"]);if(null!=t){let e=re(n,t);Array.isArray(e)&&(e=e.map(n=>n)),a(o,["instances[]","content"],e)}}let l=s(t,["embeddingApiType"]);if(void 0===l&&(l="PREDICT"),"EMBED_CONTENT"===l){const n=s(e,["content"]);null!=n&&a(o,["content"],oe(n))}const c=s(e,["config"]);return null!=c&&function(n,e,t){let o=s(t,["embeddingApiType"]);if(void 0===o&&(o="PREDICT"),"PREDICT"===o){const t=s(n,["taskType"]);void 0!==e&&null!=t&&a(e,["instances[]","task_type"],t)}else if("EMBED_CONTENT"===o){const t=s(n,["taskType"]);void 0!==e&&null!=t&&a(e,["taskType"],t)}let r=s(t,["embeddingApiType"]);if(void 0===r&&(r="PREDICT"),"PREDICT"===r){const t=s(n,["title"]);void 0!==e&&null!=t&&a(e,["instances[]","title"],t)}else if("EMBED_CONTENT"===r){const t=s(n,["title"]);void 0!==e&&null!=t&&a(e,["title"],t)}let i=s(t,["embeddingApiType"]);if(void 0===i&&(i="PREDICT"),"PREDICT"===i){const t=s(n,["outputDimensionality"]);void 0!==e&&null!=t&&a(e,["parameters","outputDimensionality"],t)}else if("EMBED_CONTENT"===i){const t=s(n,["outputDimensionality"]);void 0!==e&&null!=t&&a(e,["outputDimensionality"],t)}let l=s(t,["embeddingApiType"]);if(void 0===l&&(l="PREDICT"),"PREDICT"===l){const t=s(n,["mimeType"]);void 0!==e&&null!=t&&a(e,["instances[]","mimeType"],t)}let c=s(t,["embeddingApiType"]);if(void 0===c&&(c="PREDICT"),"PREDICT"===c){const t=s(n,["autoTruncate"]);void 0!==e&&null!=t&&a(e,["parameters","autoTruncate"],t)}else if("EMBED_CONTENT"===c){const t=s(n,["autoTruncate"]);void 0!==e&&null!=t&&a(e,["autoTruncate"],t)}}(c,o,t),o}(this.apiClient,n,n);return c=i((u=n.model).includes("gemini")&&"gemini-embedding-001"!==u||u.includes("maas")?"{model}:embedContent":"{model}:predict",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(e=>{const t=function(n,e){const t={},o=s(n,["sdkHttpResponse"]);null!=o&&a(t,["sdkHttpResponse"],o);const r=s(n,["predictions[]","embeddings"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["values"]);null!=t&&a(e,["values"],t);const o=s(n,["statistics"]);return null!=o&&a(e,["statistics"],function(n){const e={},t=s(n,["truncated"]);null!=t&&a(e,["truncated"],t);const o=s(n,["token_count"]);return null!=o&&a(e,["tokenCount"],o),e}(o)),e}(n))),a(t,["embeddings"],n)}const i=s(n,["metadata"]);if(null!=i&&a(t,["metadata"],i),e&&"EMBED_CONTENT"===s(e,["embeddingApiType"])){const e=s(n,["embedding"]),o=s(n,["usageMetadata"]),r=s(n,["truncated"]);if(e){const n={};o&&o.promptTokenCount&&(n.tokenCount=o.promptTokenCount),r&&(n.truncated=r),e.statistics=n,a(t,["embeddings"],[e])}}return t}(e,n),o=new vn;return Object.assign(o,t),o})}{const e=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["contents"]);if(null!=r){let e=re(n,r);Array.isArray(e)&&(e=e.map(n=>n)),a(t,["requests[]","content"],e)}const i=s(e,["content"]);null!=i&&ze(oe(i));const l=s(e,["config"]);null!=l&&function(n,e){const t=s(n,["taskType"]);void 0!==e&&null!=t&&a(e,["requests[]","taskType"],t);const o=s(n,["title"]);void 0!==e&&null!=o&&a(e,["requests[]","title"],o);const r=s(n,["outputDimensionality"]);if(void 0!==e&&null!=r&&a(e,["requests[]","outputDimensionality"],r),void 0!==s(n,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==s(n,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(l,t);const c=s(e,["model"]);return void 0!==c&&a(t,["requests[]","model"],$n(n,c)),t}(this.apiClient,n);return c=i("{model}:batchEmbedContents",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["embeddings"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["embeddings"],n)}const r=s(n,["metadata"]);return null!=r&&a(e,["metadata"],r),e}(n),t=new vn;return Object.assign(t,e),t})}var u}async generateImagesInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["prompt"]);null!=r&&a(t,["instances[0]","prompt"],r);const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["outputGcsUri"]);void 0!==e&&null!=t&&a(e,["parameters","storageUri"],t);const o=s(n,["negativePrompt"]);void 0!==e&&null!=o&&a(e,["parameters","negativePrompt"],o);const r=s(n,["numberOfImages"]);void 0!==e&&null!=r&&a(e,["parameters","sampleCount"],r);const i=s(n,["aspectRatio"]);void 0!==e&&null!=i&&a(e,["parameters","aspectRatio"],i);const l=s(n,["guidanceScale"]);void 0!==e&&null!=l&&a(e,["parameters","guidanceScale"],l);const c=s(n,["seed"]);void 0!==e&&null!=c&&a(e,["parameters","seed"],c);const A=s(n,["safetyFilterLevel"]);void 0!==e&&null!=A&&a(e,["parameters","safetySetting"],A);const u=s(n,["personGeneration"]);void 0!==e&&null!=u&&a(e,["parameters","personGeneration"],u);const d=s(n,["includeSafetyAttributes"]);void 0!==e&&null!=d&&a(e,["parameters","includeSafetyAttributes"],d);const p=s(n,["includeRaiReason"]);void 0!==e&&null!=p&&a(e,["parameters","includeRaiReason"],p);const m=s(n,["language"]);void 0!==e&&null!=m&&a(e,["parameters","language"],m);const h=s(n,["outputMimeType"]);void 0!==e&&null!=h&&a(e,["parameters","outputOptions","mimeType"],h);const f=s(n,["outputCompressionQuality"]);void 0!==e&&null!=f&&a(e,["parameters","outputOptions","compressionQuality"],f);const g=s(n,["addWatermark"]);void 0!==e&&null!=g&&a(e,["parameters","addWatermark"],g);const E=s(n,["labels"]);void 0!==e&&null!=E&&a(e,["labels"],E);const v=s(n,["imageSize"]);void 0!==e&&null!=v&&a(e,["parameters","sampleImageSize"],v);const y=s(n,["enhancePrompt"]);void 0!==e&&null!=y&&a(e,["parameters","enhancePrompt"],y)}(i,t),t}(this.apiClient,n);return c=i("{model}:predict",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["predictions"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>et(n))),a(e,["generatedImages"],n)}const r=s(n,["positivePromptSafetyAttributes"]);return null!=r&&a(e,["positivePromptSafetyAttributes"],lt(r)),e}(n),t=new yn;return Object.assign(t,e),t})}{const e=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["prompt"]);null!=r&&a(t,["instances[0]","prompt"],r);const i=s(e,["config"]);return null!=i&&function(n,e){if(void 0!==s(n,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==s(n,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const t=s(n,["numberOfImages"]);void 0!==e&&null!=t&&a(e,["parameters","sampleCount"],t);const o=s(n,["aspectRatio"]);void 0!==e&&null!=o&&a(e,["parameters","aspectRatio"],o);const r=s(n,["guidanceScale"]);if(void 0!==e&&null!=r&&a(e,["parameters","guidanceScale"],r),void 0!==s(n,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=s(n,["safetyFilterLevel"]);void 0!==e&&null!=i&&a(e,["parameters","safetySetting"],i);const l=s(n,["personGeneration"]);void 0!==e&&null!=l&&a(e,["parameters","personGeneration"],l);const c=s(n,["includeSafetyAttributes"]);void 0!==e&&null!=c&&a(e,["parameters","includeSafetyAttributes"],c);const A=s(n,["includeRaiReason"]);void 0!==e&&null!=A&&a(e,["parameters","includeRaiReason"],A);const u=s(n,["language"]);void 0!==e&&null!=u&&a(e,["parameters","language"],u);const d=s(n,["outputMimeType"]);void 0!==e&&null!=d&&a(e,["parameters","outputOptions","mimeType"],d);const p=s(n,["outputCompressionQuality"]);if(void 0!==e&&null!=p&&a(e,["parameters","outputOptions","compressionQuality"],p),void 0!==s(n,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==s(n,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const m=s(n,["imageSize"]);if(void 0!==e&&null!=m&&a(e,["parameters","sampleImageSize"],m),void 0!==s(n,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,t),t}(this.apiClient,n);return c=i("{model}:predict",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["predictions"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["_self"]);null!=t&&a(e,["image"],function(n){const e={},t=s(n,["bytesBase64Encoded"]);null!=t&&a(e,["imageBytes"],me(t));const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(t));const o=s(n,["raiFilteredReason"]);null!=o&&a(e,["raiFilteredReason"],o);const r=s(n,["_self"]);return null!=r&&a(e,["safetyAttributes"],st(r)),e}(n))),a(e,["generatedImages"],n)}const r=s(n,["positivePromptSafetyAttributes"]);return null!=r&&a(e,["positivePromptSafetyAttributes"],st(r)),e}(n),t=new yn;return Object.assign(t,e),t})}}async editImageInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["prompt"]);null!=r&&a(t,["instances[0]","prompt"],r);const i=s(e,["referenceImages"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["referenceImage"]);null!=t&&a(e,["referenceImage"],rt(t));const o=s(n,["referenceId"]);null!=o&&a(e,["referenceId"],o);const r=s(n,["referenceType"]);null!=r&&a(e,["referenceType"],r);const i=s(n,["maskImageConfig"]);null!=i&&a(e,["maskImageConfig"],function(n){const e={},t=s(n,["maskMode"]);null!=t&&a(e,["maskMode"],t);const o=s(n,["segmentationClasses"]);null!=o&&a(e,["maskClasses"],o);const r=s(n,["maskDilation"]);return null!=r&&a(e,["dilation"],r),e}(i));const l=s(n,["controlImageConfig"]);null!=l&&a(e,["controlImageConfig"],function(n){const e={},t=s(n,["controlType"]);null!=t&&a(e,["controlType"],t);const o=s(n,["enableControlImageComputation"]);return null!=o&&a(e,["computeControl"],o),e}(l));const c=s(n,["styleImageConfig"]);null!=c&&a(e,["styleImageConfig"],c);const A=s(n,["subjectImageConfig"]);return null!=A&&a(e,["subjectImageConfig"],A),e}(n))),a(t,["instances[0]","referenceImages"],n)}const l=s(e,["config"]);return null!=l&&function(n,e){const t=s(n,["outputGcsUri"]);void 0!==e&&null!=t&&a(e,["parameters","storageUri"],t);const o=s(n,["negativePrompt"]);void 0!==e&&null!=o&&a(e,["parameters","negativePrompt"],o);const r=s(n,["numberOfImages"]);void 0!==e&&null!=r&&a(e,["parameters","sampleCount"],r);const i=s(n,["aspectRatio"]);void 0!==e&&null!=i&&a(e,["parameters","aspectRatio"],i);const l=s(n,["guidanceScale"]);void 0!==e&&null!=l&&a(e,["parameters","guidanceScale"],l);const c=s(n,["seed"]);void 0!==e&&null!=c&&a(e,["parameters","seed"],c);const A=s(n,["safetyFilterLevel"]);void 0!==e&&null!=A&&a(e,["parameters","safetySetting"],A);const u=s(n,["personGeneration"]);void 0!==e&&null!=u&&a(e,["parameters","personGeneration"],u);const d=s(n,["includeSafetyAttributes"]);void 0!==e&&null!=d&&a(e,["parameters","includeSafetyAttributes"],d);const p=s(n,["includeRaiReason"]);void 0!==e&&null!=p&&a(e,["parameters","includeRaiReason"],p);const m=s(n,["language"]);void 0!==e&&null!=m&&a(e,["parameters","language"],m);const h=s(n,["outputMimeType"]);void 0!==e&&null!=h&&a(e,["parameters","outputOptions","mimeType"],h);const f=s(n,["outputCompressionQuality"]);void 0!==e&&null!=f&&a(e,["parameters","outputOptions","compressionQuality"],f);const g=s(n,["addWatermark"]);void 0!==e&&null!=g&&a(e,["parameters","addWatermark"],g);const E=s(n,["labels"]);void 0!==e&&null!=E&&a(e,["labels"],E);const v=s(n,["editMode"]);void 0!==e&&null!=v&&a(e,["parameters","editMode"],v);const y=s(n,["baseSteps"]);void 0!==e&&null!=y&&a(e,["parameters","editConfig","baseSteps"],y)}(l,t),t}(this.apiClient,n);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["predictions"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>et(n))),a(e,["generatedImages"],n)}return e}(n),t=new Cn;return Object.assign(t,e),t})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["image"]);null!=r&&a(t,["instances[0]","image"],rt(r));const i=s(e,["upscaleFactor"]);null!=i&&a(t,["parameters","upscaleConfig","upscaleFactor"],i);const l=s(e,["config"]);return null!=l&&function(n,e){const t=s(n,["outputGcsUri"]);void 0!==e&&null!=t&&a(e,["parameters","storageUri"],t);const o=s(n,["safetyFilterLevel"]);void 0!==e&&null!=o&&a(e,["parameters","safetySetting"],o);const r=s(n,["personGeneration"]);void 0!==e&&null!=r&&a(e,["parameters","personGeneration"],r);const i=s(n,["includeRaiReason"]);void 0!==e&&null!=i&&a(e,["parameters","includeRaiReason"],i);const l=s(n,["outputMimeType"]);void 0!==e&&null!=l&&a(e,["parameters","outputOptions","mimeType"],l);const c=s(n,["outputCompressionQuality"]);void 0!==e&&null!=c&&a(e,["parameters","outputOptions","compressionQuality"],c);const A=s(n,["enhanceInputImage"]);void 0!==e&&null!=A&&a(e,["parameters","upscaleConfig","enhanceInputImage"],A);const u=s(n,["imagePreservationFactor"]);void 0!==e&&null!=u&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=s(n,["labels"]);void 0!==e&&null!=d&&a(e,["labels"],d);const p=s(n,["numberOfImages"]);void 0!==e&&null!=p&&a(e,["parameters","sampleCount"],p);const m=s(n,["mode"]);void 0!==e&&null!=m&&a(e,["parameters","mode"],m)}(l,t),t}(this.apiClient,n);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["predictions"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>et(n))),a(e,["generatedImages"],n)}return e}(n),t=new bn;return Object.assign(t,e),t})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["source"]);null!=r&&function(n,e){const t=s(n,["prompt"]);void 0!==e&&null!=t&&a(e,["instances[0]","prompt"],t);const o=s(n,["personImage"]);void 0!==e&&null!=o&&a(e,["instances[0]","personImage","image"],rt(o));const r=s(n,["productImages"]);if(void 0!==e&&null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["productImage"]);return null!=t&&a(e,["image"],rt(t)),e}(n))),a(e,["instances[0]","productImages"],n)}}(r,t);const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["numberOfImages"]);void 0!==e&&null!=t&&a(e,["parameters","sampleCount"],t);const o=s(n,["baseSteps"]);void 0!==e&&null!=o&&a(e,["parameters","baseSteps"],o);const r=s(n,["outputGcsUri"]);void 0!==e&&null!=r&&a(e,["parameters","storageUri"],r);const i=s(n,["seed"]);void 0!==e&&null!=i&&a(e,["parameters","seed"],i);const l=s(n,["safetyFilterLevel"]);void 0!==e&&null!=l&&a(e,["parameters","safetySetting"],l);const c=s(n,["personGeneration"]);void 0!==e&&null!=c&&a(e,["parameters","personGeneration"],c);const A=s(n,["addWatermark"]);void 0!==e&&null!=A&&a(e,["parameters","addWatermark"],A);const u=s(n,["outputMimeType"]);void 0!==e&&null!=u&&a(e,["parameters","outputOptions","mimeType"],u);const d=s(n,["outputCompressionQuality"]);void 0!==e&&null!=d&&a(e,["parameters","outputOptions","compressionQuality"],d);const p=s(n,["enhancePrompt"]);void 0!==e&&null!=p&&a(e,["parameters","enhancePrompt"],p);const m=s(n,["labels"]);void 0!==e&&null!=m&&a(e,["labels"],m)}(i,t),t}(this.apiClient,n);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["predictions"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>et(n))),a(e,["generatedImages"],n)}return e}(n),t=new Bn;return Object.assign(t,e),t})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["source"]);null!=r&&function(n,e){const t=s(n,["prompt"]);void 0!==e&&null!=t&&a(e,["instances[0]","prompt"],t);const o=s(n,["image"]);void 0!==e&&null!=o&&a(e,["instances[0]","image"],rt(o));const r=s(n,["scribbleImage"]);void 0!==e&&null!=r&&a(e,["instances[0]","scribble"],function(n){const e={},t=s(n,["image"]);return null!=t&&a(e,["image"],rt(t)),e}(r))}(r,t);const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["mode"]);void 0!==e&&null!=t&&a(e,["parameters","mode"],t);const o=s(n,["maxPredictions"]);void 0!==e&&null!=o&&a(e,["parameters","maxPredictions"],o);const r=s(n,["confidenceThreshold"]);void 0!==e&&null!=r&&a(e,["parameters","confidenceThreshold"],r);const i=s(n,["maskDilation"]);void 0!==e&&null!=i&&a(e,["parameters","maskDilation"],i);const l=s(n,["binaryColorThreshold"]);void 0!==e&&null!=l&&a(e,["parameters","binaryColorThreshold"],l);const c=s(n,["labels"]);void 0!==e&&null!=c&&a(e,["labels"],c)}(i,t),t}(this.apiClient,n);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["predictions"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["_self"]);null!=t&&a(e,["mask"],tt(t));const o=s(n,["labels"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["labels"],n)}return e}(n))),a(e,["generatedMasks"],n)}return e}(n),t=new wn;return Object.assign(t,e),t})}throw new Error("This method is only supported by the Vertex AI.")}async get(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);return null!=o&&a(t,["_url","name"],$n(n,o)),t}(this.apiClient,n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>at(n))}{const e=function(n,e){const t={},o=s(e,["model"]);return null!=o&&a(t,["_url","name"],$n(n,o)),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>it(n))}}async listInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["config"]);return null!=o&&function(n,e,t){const o=s(e,["pageSize"]);void 0!==t&&null!=o&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);void 0!==t&&null!=r&&a(t,["_query","pageToken"],r);const i=s(e,["filter"]);void 0!==t&&null!=i&&a(t,["_query","filter"],i);const l=s(e,["queryBase"]);void 0!==t&&null!=l&&a(t,["_url","models_url"],fe(n,l))}(n,o,t),t}(this.apiClient,n);return c=i("{models_url}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["_self"]);if(null!=r){let n=ge(r);Array.isArray(n)&&(n=n.map(n=>at(n))),a(e,["models"],n)}return e}(n),t=new xn;return Object.assign(t,e),t})}{const e=function(n,e){const t={},o=s(e,["config"]);return null!=o&&function(n,e,t){const o=s(e,["pageSize"]);void 0!==t&&null!=o&&a(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);void 0!==t&&null!=r&&a(t,["_query","pageToken"],r);const i=s(e,["filter"]);void 0!==t&&null!=i&&a(t,["_query","filter"],i);const l=s(e,["queryBase"]);void 0!==t&&null!=l&&a(t,["_url","models_url"],fe(n,l))}(n,o,t),t}(this.apiClient,n);return c=i("{models_url}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["_self"]);if(null!=r){let n=ge(r);Array.isArray(n)&&(n=n.map(n=>it(n))),a(e,["models"],n)}return e}(n),t=new xn;return Object.assign(t,e),t})}}async update(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["displayName"]);void 0!==e&&null!=t&&a(e,["displayName"],t);const o=s(n,["description"]);void 0!==e&&null!=o&&a(e,["description"],o);const r=s(n,["defaultCheckpointId"]);void 0!==e&&null!=r&&a(e,["defaultCheckpointId"],r)}(r,t),t}(this.apiClient,n);return c=i("{model}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>at(n))}{const e=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","name"],$n(n,o));const r=s(e,["config"]);return null!=r&&function(n,e){const t=s(n,["displayName"]);void 0!==e&&null!=t&&a(e,["displayName"],t);const o=s(n,["description"]);void 0!==e&&null!=o&&a(e,["description"],o);const r=s(n,["defaultCheckpointId"]);void 0!==e&&null!=r&&a(e,["defaultCheckpointId"],r)}(r,t),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"PATCH",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>it(n))}}async delete(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);return null!=o&&a(t,["_url","name"],$n(n,o)),t}(this.apiClient,n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new _n;return Object.assign(t,e),t})}{const e=function(n,e){const t={},o=s(e,["model"]);return null!=o&&a(t,["_url","name"],$n(n,o)),t}(this.apiClient,n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"DELETE",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new _n;return Object.assign(t,e),t})}}async countTokens(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["contents"]);if(null!=r){let n=ie(r);Array.isArray(n)&&(n=n.map(n=>n)),a(t,["contents"],n)}const i=s(e,["config"]);return null!=i&&function(n,e){const t=s(n,["systemInstruction"]);void 0!==e&&null!=t&&a(e,["systemInstruction"],oe(t));const o=s(n,["tools"]);if(void 0!==e&&null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>ct(n))),a(e,["tools"],n)}const r=s(n,["generationConfig"]);void 0!==e&&null!=r&&a(e,["generationConfig"],function(n){const e={},t=s(n,["modelSelectionConfig"]);null!=t&&a(e,["modelConfig"],t);const o=s(n,["responseJsonSchema"]);null!=o&&a(e,["responseJsonSchema"],o);const r=s(n,["audioTimestamp"]);null!=r&&a(e,["audioTimestamp"],r);const i=s(n,["candidateCount"]);null!=i&&a(e,["candidateCount"],i);const l=s(n,["enableAffectiveDialog"]);null!=l&&a(e,["enableAffectiveDialog"],l);const c=s(n,["frequencyPenalty"]);null!=c&&a(e,["frequencyPenalty"],c);const A=s(n,["logprobs"]);null!=A&&a(e,["logprobs"],A);const u=s(n,["maxOutputTokens"]);null!=u&&a(e,["maxOutputTokens"],u);const d=s(n,["mediaResolution"]);null!=d&&a(e,["mediaResolution"],d);const p=s(n,["presencePenalty"]);null!=p&&a(e,["presencePenalty"],p);const m=s(n,["responseLogprobs"]);null!=m&&a(e,["responseLogprobs"],m);const h=s(n,["responseMimeType"]);null!=h&&a(e,["responseMimeType"],h);const f=s(n,["responseModalities"]);null!=f&&a(e,["responseModalities"],f);const g=s(n,["responseSchema"]);null!=g&&a(e,["responseSchema"],g);const E=s(n,["routingConfig"]);null!=E&&a(e,["routingConfig"],E);const v=s(n,["seed"]);null!=v&&a(e,["seed"],v);const y=s(n,["speechConfig"]);null!=y&&a(e,["speechConfig"],y);const C=s(n,["stopSequences"]);null!=C&&a(e,["stopSequences"],C);const b=s(n,["temperature"]);null!=b&&a(e,["temperature"],b);const B=s(n,["thinkingConfig"]);null!=B&&a(e,["thinkingConfig"],B);const w=s(n,["topK"]);null!=w&&a(e,["topK"],w);const x=s(n,["topP"]);if(null!=x&&a(e,["topP"],x),void 0!==s(n,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}(r))}(i,t),t}(this.apiClient,n);return c=i("{model}:countTokens",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["totalTokens"]);return null!=o&&a(e,["totalTokens"],o),e}(n),t=new Tn;return Object.assign(t,e),t})}{const e=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["contents"]);if(null!=r){let n=ie(r);Array.isArray(n)&&(n=n.map(n=>ze(n))),a(t,["contents"],n)}const i=s(e,["config"]);return null!=i&&function(n){if(void 0!==s(n,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==s(n,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==s(n,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),t}(this.apiClient,n);return c=i("{model}:countTokens",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["totalTokens"]);null!=o&&a(e,["totalTokens"],o);const r=s(n,["cachedContentTokenCount"]);return null!=r&&a(e,["cachedContentTokenCount"],r),e}(n),t=new Tn;return Object.assign(t,e),t})}}async computeTokens(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["_url","model"],$n(n,o));const r=s(e,["contents"]);if(null!=r){let n=ie(r);Array.isArray(n)&&(n=n.map(n=>n)),a(t,["contents"],n)}return t}(this.apiClient,n);return r=i("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["tokensInfo"]);if(null!=o){let n=o;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["tokensInfo"],n)}return e}(n),t=new In;return Object.assign(t,e),t})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=nt(this.apiClient,n);return c=i("{model}:predictLongRunning",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l.then(n=>{const e=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["videos"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["_self"]);return null!=t&&a(e,["video"],function(n){const e={},t=s(n,["gcsUri"]);null!=t&&a(e,["uri"],t);const o=s(n,["bytesBase64Encoded"]);null!=o&&a(e,["videoBytes"],me(o));const r=s(n,["mimeType"]);return null!=r&&a(e,["mimeType"],r),e}(t)),e}(n))),a(e,["generatedVideos"],n)}const o=s(n,["raiMediaFilteredCount"]);null!=o&&a(e,["raiMediaFilteredCount"],o);const r=s(n,["raiMediaFilteredReasons"]);return null!=r&&a(e,["raiMediaFilteredReasons"],r),e}(l)),e}(n),t=new Sn;return Object.assign(t,e),t})}{const e=Ze(this.apiClient,n);return c=i("{model}:predictLongRunning",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l.then(n=>{const e=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response","generateVideoResponse"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["generatedSamples"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["video"]);return null!=t&&a(e,["video"],function(n){const e={},t=s(n,["uri"]);null!=t&&a(e,["uri"],t);const o=s(n,["encodedVideo"]);null!=o&&a(e,["videoBytes"],me(o));const r=s(n,["encoding"]);return null!=r&&a(e,["mimeType"],r),e}(t)),e}(n))),a(e,["generatedVideos"],n)}const o=s(n,["raiMediaFilteredCount"]);null!=o&&a(e,["raiMediaFilteredCount"],o);const r=s(n,["raiMediaFilteredReasons"]);return null!=r&&a(e,["raiMediaFilteredReasons"],r),e}(l)),e}(n),t=new Sn;return Object.assign(t,e),t})}}}class Rt extends r{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const e=n.operation,t=n.config;if(void 0===e.name||""===e.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const n=e.name.split("/operations/")[0];let o;t&&"httpOptions"in t&&(o=t.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:n,config:{httpOptions:o}});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const n=await this.getVideosOperationInternal({operationName:e.name,config:t});return e._fromAPIResponse({apiResponse:n,_isVertexAI:!1})}}async get(n){const e=n.operation,t=n.config;if(void 0===e.name||""===e.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const n=e.name.split("/operations/")[0];let o;t&&"httpOptions"in t&&(o=t.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:n,config:{httpOptions:o}});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const n=await this.getVideosOperationInternal({operationName:e.name,config:t});return e._fromAPIResponse({apiResponse:n,_isVertexAI:!1})}}async getVideosOperationInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["operationName"]);return null!=t&&a(e,["_url","operationName"],t),e}(n);return c=i("{operationName}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),l}{const e=function(n){const e={},t=s(n,["operationName"]);return null!=t&&a(e,["_url","operationName"],t),e}(n);return c=i("{operationName}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json()),l}}async fetchPredictVideosOperationInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n){const e={},t=s(n,["operationName"]);null!=t&&a(e,["operationName"],t);const o=s(n,["resourceName"]);return null!=o&&a(e,["_url","resourceName"],o),e}(n);return r=i("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o}throw new Error("This method is only supported by the Vertex AI.")}}function Nt(n,e,t){const o=s(e,["expireTime"]);void 0!==t&&null!=o&&a(t,["expireTime"],o);const r=s(e,["newSessionExpireTime"]);void 0!==t&&null!=r&&a(t,["newSessionExpireTime"],r);const i=s(e,["uses"]);void 0!==t&&null!=i&&a(t,["uses"],i);const l=s(e,["liveConnectConstraints"]);void 0!==t&&null!=l&&a(t,["bidiGenerateContentSetup"],function(n,e){const t={},o=s(e,["model"]);null!=o&&a(t,["setup","model"],$n(n,o));const r=s(e,["config"]);return null!=r&&a(t,["config"],function(n,e){const t=s(n,["generationConfig"]);void 0!==e&&null!=t&&a(e,["setup","generationConfig"],t);const o=s(n,["responseModalities"]);void 0!==e&&null!=o&&a(e,["setup","generationConfig","responseModalities"],o);const r=s(n,["temperature"]);void 0!==e&&null!=r&&a(e,["setup","generationConfig","temperature"],r);const i=s(n,["topP"]);void 0!==e&&null!=i&&a(e,["setup","generationConfig","topP"],i);const l=s(n,["topK"]);void 0!==e&&null!=l&&a(e,["setup","generationConfig","topK"],l);const c=s(n,["maxOutputTokens"]);void 0!==e&&null!=c&&a(e,["setup","generationConfig","maxOutputTokens"],c);const A=s(n,["mediaResolution"]);void 0!==e&&null!=A&&a(e,["setup","generationConfig","mediaResolution"],A);const u=s(n,["seed"]);void 0!==e&&null!=u&&a(e,["setup","generationConfig","seed"],u);const d=s(n,["speechConfig"]);void 0!==e&&null!=d&&a(e,["setup","generationConfig","speechConfig"],ce(d));const p=s(n,["thinkingConfig"]);void 0!==e&&null!=p&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=s(n,["enableAffectiveDialog"]);void 0!==e&&null!=m&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=s(n,["systemInstruction"]);void 0!==e&&null!=h&&a(e,["setup","systemInstruction"],function(n){const e={},t=s(n,["parts"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>function(n){const e={},t=s(n,["mediaResolution"]);null!=t&&a(e,["mediaResolution"],t);const o=s(n,["codeExecutionResult"]);null!=o&&a(e,["codeExecutionResult"],o);const r=s(n,["executableCode"]);null!=r&&a(e,["executableCode"],r);const i=s(n,["fileData"]);null!=i&&a(e,["fileData"],function(n){const e={};if(void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=s(n,["fileUri"]);null!=t&&a(e,["fileUri"],t);const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(i));const l=s(n,["functionCall"]);null!=l&&a(e,["functionCall"],function(n){const e={},t=s(n,["id"]);null!=t&&a(e,["id"],t);const o=s(n,["args"]);null!=o&&a(e,["args"],o);const r=s(n,["name"]);if(null!=r&&a(e,["name"],r),void 0!==s(n,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==s(n,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return e}(l));const c=s(n,["functionResponse"]);null!=c&&a(e,["functionResponse"],c);const A=s(n,["inlineData"]);null!=A&&a(e,["inlineData"],function(n){const e={},t=s(n,["data"]);if(null!=t&&a(e,["data"],t),void 0!==s(n,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=s(n,["mimeType"]);return null!=o&&a(e,["mimeType"],o),e}(A));const u=s(n,["text"]);null!=u&&a(e,["text"],u);const d=s(n,["thought"]);null!=d&&a(e,["thought"],d);const p=s(n,["thoughtSignature"]);null!=p&&a(e,["thoughtSignature"],p);const m=s(n,["videoMetadata"]);return null!=m&&a(e,["videoMetadata"],m),e}(n))),a(e,["parts"],n)}const o=s(n,["role"]);return null!=o&&a(e,["role"],o),e}(oe(h)));const f=s(n,["tools"]);if(void 0!==e&&null!=f){let n=ue(f);Array.isArray(n)&&(n=n.map(n=>function(n){const e={};if(void 0!==s(n,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=s(n,["computerUse"]);null!=t&&a(e,["computerUse"],t);const o=s(n,["fileSearch"]);null!=o&&a(e,["fileSearch"],o);const r=s(n,["codeExecution"]);if(null!=r&&a(e,["codeExecution"],r),void 0!==s(n,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=s(n,["functionDeclarations"]);if(null!=i){let n=i;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["functionDeclarations"],n)}const l=s(n,["googleMaps"]);null!=l&&a(e,["googleMaps"],function(n){const e={};if(void 0!==s(n,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=s(n,["enableWidget"]);return null!=t&&a(e,["enableWidget"],t),e}(l));const c=s(n,["googleSearch"]);null!=c&&a(e,["googleSearch"],function(n){const e={};if(void 0!==s(n,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==s(n,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=s(n,["timeRangeFilter"]);return null!=t&&a(e,["timeRangeFilter"],t),e}(c));const A=s(n,["googleSearchRetrieval"]);null!=A&&a(e,["googleSearchRetrieval"],A);const u=s(n,["urlContext"]);return null!=u&&a(e,["urlContext"],u),e}(Ae(n)))),a(e,["setup","tools"],n)}const g=s(n,["sessionResumption"]);void 0!==e&&null!=g&&a(e,["setup","sessionResumption"],function(n){const e={},t=s(n,["handle"]);if(null!=t&&a(e,["handle"],t),void 0!==s(n,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return e}(g));const E=s(n,["inputAudioTranscription"]);void 0!==e&&null!=E&&a(e,["setup","inputAudioTranscription"],E);const v=s(n,["outputAudioTranscription"]);void 0!==e&&null!=v&&a(e,["setup","outputAudioTranscription"],v);const y=s(n,["realtimeInputConfig"]);void 0!==e&&null!=y&&a(e,["setup","realtimeInputConfig"],y);const C=s(n,["contextWindowCompression"]);void 0!==e&&null!=C&&a(e,["setup","contextWindowCompression"],C);const b=s(n,["proactivity"]);if(void 0!==e&&null!=b&&a(e,["setup","proactivity"],b),void 0!==s(n,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(r,t)),t}(n,l));const c=s(e,["lockAdditionalFields"]);return void 0!==t&&null!=c&&a(t,["fieldMask"],c),{}}class Pt extends r{constructor(n){super(),this.apiClient=n}async create(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=function(n,e){const t={},o=s(e,["config"]);return null!=o&&a(t,["config"],Nt(n,o,t)),t}(this.apiClient,n);r=i("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const A=function(n,e){let t=null;const o=n.bidiGenerateContentSetup;if("object"==typeof o&&null!==o&&"setup"in o){const e=o.setup;"object"==typeof e&&null!==e?(n.bidiGenerateContentSetup=e,t=e):delete n.bidiGenerateContentSetup}else void 0!==o&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=function(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if("object"==typeof o&&null!=o&&Object.keys(o).length>0){const n=Object.keys(o).map(n=>`${t}.${n}`);e.push(...n)}else e.push(t)}return e.join(",")}(t);if(Array.isArray(null==e?void 0:e.lockAdditionalFields)&&0===(null==e?void 0:e.lockAdditionalFields.length))o?n.fieldMask=o:delete n.fieldMask;else if((null==e?void 0:e.lockAdditionalFields)&&e.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){const e=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let t=[];r.length>0&&(t=r.map(n=>e.includes(n)?`generationConfig.${n}`:n));const i=[];o&&i.push(o),t.length>0&&i.push(...t),i.length>0?n.fieldMask=i.join(","):delete n.fieldMask}else delete n.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}(c,n.config);return o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>n)}}}class Dt extends r{constructor(n){super(),this.apiClient=n,this.list=async n=>new Se(fn.PAGED_ITEM_DOCUMENTS,e=>this.listInternal({parent:n.parent,config:e.config}),await this.listInternal(n),n)}async get(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return r=i("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>n)}}async delete(n){var e,t;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["_url","name"],t);const o=s(n,["config"]);return null!=o&&function(n,e){const t=s(n,["force"]);void 0!==e&&null!=t&&a(e,["_query","force"],t)}(o,e),e}(n);o=i("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal})}}async listInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["parent"]);null!=t&&a(e,["_url","parent"],t);const o=s(n,["config"]);return null!=o&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o)}(o,e),e}(n);return r=i("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["documents"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["documents"],n)}return e}(n),t=new Pn;return Object.assign(t,e),t})}}}class Mt extends r{constructor(n,e=new Dt(n)){super(),this.apiClient=n,this.documents=e,this.list=async(n={})=>new Se(fn.PAGED_ITEM_FILE_SEARCH_STORES,n=>this.listInternal(n),await this.listInternal(n),n)}async uploadToFileSearchStore(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(n.fileSearchStoreName,n.file,n.config)}async create(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["displayName"]);void 0!==e&&null!=t&&a(e,["displayName"],t)}(t,e),e}(n);return r=i("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>n)}}async get(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return r=i("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>n)}}async delete(n){var e,t;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["_url","name"],t);const o=s(n,["config"]);return null!=o&&function(n,e){const t=s(n,["force"]);void 0!==e&&null!=t&&a(e,["_query","force"],t)}(o,e),e}(n);o=i("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal})}}async listInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o)}(t,e),e}(n);return r=i("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["fileSearchStores"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["fileSearchStores"],n)}return e}(n),t=new Dn;return Object.assign(t,e),t})}}async uploadToFileSearchStoreInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["fileSearchStoreName"]);null!=t&&a(e,["_url","file_search_store_name"],t);const o=s(n,["config"]);return null!=o&&dt(o,e),e}(n);return r=i("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new Mn;return Object.assign(t,e),t})}}async importFile(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["fileSearchStoreName"]);null!=t&&a(e,["_url","file_search_store_name"],t);const o=s(n,["fileName"]);null!=o&&a(e,["fileName"],o);const r=s(n,["config"]);return null!=r&&function(n,e){const t=s(n,["customMetadata"]);if(void 0!==e&&null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["customMetadata"],n)}const o=s(n,["chunkingConfig"]);void 0!==e&&null!=o&&a(e,["chunkingConfig"],o)}(r,e),e}(n);return r=i("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json()),o.then(n=>{const e=function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["name"],t);const o=s(n,["metadata"]);null!=o&&a(e,["metadata"],o);const r=s(n,["done"]);null!=r&&a(e,["done"],r);const i=s(n,["error"]);null!=i&&a(e,["error"],i);const l=s(n,["response"]);return null!=l&&a(e,["response"],function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["parent"]);null!=o&&a(e,["parent"],o);const r=s(n,["documentName"]);return null!=r&&a(e,["documentName"],r),e}(l)),e}(n),t=new Ln;return Object.assign(t,e),t})}}}let Lt=function(){const{crypto:n}=globalThis;if(null==n?void 0:n.randomUUID)return Lt=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^t()&15>>+n/4).toString(16))};function Ut(n){return"object"==typeof n&&null!==n&&("name"in n&&"AbortError"===n.name||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const qt=n=>{if(n instanceof Error)return n;if("object"==typeof n&&null!==n){try{if("[object Error]"===Object.prototype.toString.call(n)){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch(n){}try{return new Error(JSON.stringify(n))}catch(n){}}return new Error(n)};class Gt extends Error{}class jt extends Gt{constructor(n,e,t,o){super(`${jt.makeMessage(n,e,t)}`),this.status=n,this.headers=o,this.error=e}static makeMessage(n,e,t){const o=(null==e?void 0:e.message)?"string"==typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):t;return n&&o?`${n} ${o}`:n?`${n} status code (no body)`:o||"(no status code or body)"}static generate(n,e,t,o){if(!n||!o)return new Ht({message:t,cause:qt(e)});const r=e;return 400===n?new Wt(n,r,t,o):401===n?new $t(n,r,t,o):403===n?new Jt(n,r,t,o):404===n?new zt(n,r,t,o):409===n?new Yt(n,r,t,o):422===n?new Kt(n,r,t,o):429===n?new Xt(n,r,t,o):n>=500?new Qt(n,r,t,o):new jt(n,r,t,o)}}class Ft extends jt{constructor({message:n}={}){super(void 0,void 0,n||"Request was aborted.",void 0)}}class Ht extends jt{constructor({message:n,cause:e}){super(void 0,void 0,n||"Connection error.",void 0),e&&(this.cause=e)}}class Vt extends Ht{constructor({message:n}={}){super({message:null!=n?n:"Request timed out."})}}class Wt extends jt{}class $t extends jt{}class Jt extends jt{}class zt extends jt{}class Yt extends jt{}class Kt extends jt{}class Xt extends jt{}class Qt extends jt{}const Zt=/^[a-z][a-z0-9+.-]*:/i;let no=n=>(no=Array.isArray,no(n));const eo=no,to="0.0.1",oo=()=>{var n,e,t,o,r;const i="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":io(Deno.build.os),"X-Stainless-Arch":ro(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(e=null===(n=Deno.version)||void 0===n?void 0:n.deno)&&void 0!==e?e:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":io(null!==(t=globalThis.process.platform)&&void 0!==t?t:"unknown"),"X-Stainless-Arch":ro(null!==(o=globalThis.process.arch)&&void 0!==o?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(r=globalThis.process.version)&&void 0!==r?r:"unknown"};const a=function(){if("undefined"==typeof navigator||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const n=t.exec(navigator.userAgent);if(n)return{browser:e,version:`${n[1]||0}.${n[2]||0}.${n[3]||0}`}}return null}();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},ro=n=>"x32"===n?"x32":"x86_64"===n||"x64"===n?"x64":"arm"===n?"arm":"aarch64"===n||"arm64"===n?"arm64":n?`other:${n}`:"unknown",io=n=>(n=n.toLowerCase()).includes("ios")?"iOS":"android"===n?"Android":"darwin"===n?"MacOS":"win32"===n?"Windows":"freebsd"===n?"FreeBSD":"openbsd"===n?"OpenBSD":"linux"===n?"Linux":n?`Other:${n}`:"Unknown";let ao;function so(...n){const e=globalThis.ReadableStream;if(void 0===e)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function lo(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return so({start(){},async pull(n){const{done:t,value:o}=await e.next();t?n.close():n.enqueue(o)},async cancel(){var n;await(null===(n=e.return)||void 0===n?void 0:n.call(e))}})}function co(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const n=await e.read();return(null==n?void 0:n.done)&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Ao=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),uo=()=>{var n;if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof(null===(n=null==e?void 0:e.versions)||void 0===n?void 0:n.node)&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function po(n,e,t){return uo(),new File(n,null!=e?e:"unknown_file",t)}const mo=n=>null!=n&&"object"==typeof n&&"number"==typeof n.size&&"string"==typeof n.type&&"function"==typeof n.text&&"function"==typeof n.slice&&"function"==typeof n.arrayBuffer;async function ho(n){var e,t,o,r,i;let a=[];if("string"==typeof n||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)a.push(n);else if(mo(n))a.push(n instanceof Blob?n:await n.arrayBuffer());else{if(!(n=>null!=n&&"object"==typeof n&&"function"==typeof n[Symbol.asyncIterator])(n)){const e=null===(i=null==n?void 0:n.constructor)||void 0===i?void 0:i.name;throw new Error(`Unexpected data type: ${typeof n}${e?`; constructor: ${e}`:""}${function(n){if("object"!=typeof n||null===n)return"";return`; props: [${Object.getOwnPropertyNames(n).map(n=>`"${n}"`).join(", ")}]`}(n)}`)}try{for(var s,l=!0,c=Me(n);!(e=(s=await c.next()).done);l=!0){r=s.value,l=!1;const n=r;a.push(...await ho(n))}}catch(n){t={error:n}}finally{try{l||e||!(o=c.return)||await o.call(c)}finally{if(t)throw t.error}}}return a}class fo{constructor(n){this._client=n}}function go(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}fo._key=[];const Eo=Object.freeze(Object.create(null)),vo=(n=go)=>function(e,...t){if(1===e.length)return e[0];let o=!1;const r=[],i=e.reduce((e,i,a)=>{var s,l,c;/[?#]/.test(i)&&(o=!0);const A=t[a];let u=(o?encodeURIComponent:n)(""+A);return a!==t.length&&(null==A||"object"==typeof A&&A.toString===(null===(c=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(s=A.hasOwnProperty)&&void 0!==s?s:Eo))&&void 0!==l?l:Eo))||void 0===c?void 0:c.toString))&&(u=A+"",r.push({start:e.length+i.length,length:u.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),e+i+(a===t.length?"":u)},""),a=i.split(/[?#]/,1)[0],s=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let l;for(;null!==(l=s.exec(a));)r.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(r.sort((n,e)=>n.start-e.start),r.length>0){let n=0;const e=r.reduce((e,t)=>{const o=" ".repeat(t.start-n),r="^".repeat(t.length);return n=t.start+t.length,e+o+r},"");throw new Gt(`Path parameters result in path with invalid segments:\n${r.map(n=>n.error).join("\n")}\n${i}\n${e}`)}return i},yo=vo(go);class Co extends fo{create(n,e){var t;const{api_version:o=this._client.apiVersion}=n,r=Ne(n,["api_version"]);if("model"in r&&"agent_config"in r)throw new Gt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Gt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(yo`/${o}/interactions`,Object.assign(Object.assign({body:r},e),{stream:null!==(t=n.stream)&&void 0!==t&&t}))}delete(n,e={},t){const{api_version:o=this._client.apiVersion}=null!=e?e:{};return this._client.delete(yo`/${o}/interactions/${n}`,t)}cancel(n,e={},t){const{api_version:o=this._client.apiVersion}=null!=e?e:{};return this._client.post(yo`/${o}/interactions/${n}/cancel`,t)}get(n,e={},t){var o;const r=null!=e?e:{},{api_version:i=this._client.apiVersion}=r,a=Ne(r,["api_version"]);return this._client.get(yo`/${i}/interactions/${n}`,Object.assign(Object.assign({query:a},t),{stream:null!==(o=null==e?void 0:e.stream)&&void 0!==o&&o}))}}Co._key=Object.freeze(["interactions"]);class bo extends Co{}let Bo,wo;function xo(n){let e;return(null!=Bo?Bo:(e=new globalThis.TextEncoder,Bo=e.encode.bind(e)))(n)}function _o(n){let e;return(null!=wo?wo:(e=new globalThis.TextDecoder,wo=e.decode.bind(e)))(n)}class To{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(n){if(null==n)return[];const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?xo(n):n;this.buffer=function(n){let e=0;for(const t of n)e+=t.length;const t=new Uint8Array(e);let o=0;for(const e of n)t.set(e,o),o+=e.length;return t}([this.buffer,e]);const t=[];let o;for(;null!=(o=Io(this.buffer,this.carriageReturnIndex));){if(o.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=o.index;continue}if(null!=this.carriageReturnIndex&&(o.index!==this.carriageReturnIndex+1||o.carriage)){t.push(_o(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const n=null!==this.carriageReturnIndex?o.preceding-1:o.preceding,e=_o(this.buffer.subarray(0,n));t.push(e),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return t}flush(){return this.buffer.length?this.decode("\n"):[]}}function Io(n,e){for(let t=null!=e?e:0;t<n.length;t++){if(10===n[t])return{preceding:t,index:t+1,carriage:!1};if(13===n[t])return{preceding:t,index:t+1,carriage:!0}}return null}function So(n){for(let e=0;e<n.length-1;e++){if(10===n[e]&&10===n[e+1])return e+2;if(13===n[e]&&13===n[e+1])return e+2;if(13===n[e]&&10===n[e+1]&&e+3<n.length&&13===n[e+2]&&10===n[e+3])return e+4}return-1}To.NEWLINE_CHARS=new Set(["\n","\r"]),To.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const Oo={off:0,error:200,warn:300,info:400,debug:500},ko=(n,e,t)=>{var o,r;if(n)return o=Oo,r=n,Object.prototype.hasOwnProperty.call(o,r)?n:void Mo(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Oo))}`)};function Ro(){}function No(n,e,t){return!e||Oo[n]>Oo[t]?Ro:e[n].bind(e)}const Po={error:Ro,warn:Ro,info:Ro,debug:Ro};let Do=new WeakMap;function Mo(n){var e;const t=n.logger,o=null!==(e=n.logLevel)&&void 0!==e?e:"off";if(!t)return Po;const r=Do.get(t);if(r&&r[0]===o)return r[1];const i={error:No("error",t,o),warn:No("warn",t,o),info:No("info",t,o),debug:No("debug",t,o)};return Do.set(t,[o,i]),i}const Lo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([n,e])=>[n,"x-goog-api-key"===n.toLowerCase()||"authorization"===n.toLowerCase()||"cookie"===n.toLowerCase()||"set-cookie"===n.toLowerCase()?"***":e]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);class Uo{constructor(n,e,t){this.iterator=n,this.controller=e,this.client=t}static fromSSEResponse(n,e,t){let o=!1;const r=t?Mo(t):console;return new Uo(function(){return De(this,arguments,function*(){var t,i,a,s;if(o)throw new Gt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{try{for(var c,A=!0,u=Me(function(n,e){return De(this,arguments,function*(){var t,o,r,i;if(!n.body){if(e.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new Gt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new Gt("Attempted to iterate over a response with no body")}const a=new qo,s=new To,l=co(n.body);try{for(var c,A=!0,u=Me(function(n){return De(this,arguments,function*(){var e,t,o,r;let i=new Uint8Array;try{for(var a,s=!0,l=Me(n);!(e=(a=yield Pe(l.next())).done);s=!0){r=a.value,s=!1;const n=r;if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?xo(n):n;let t,o=new Uint8Array(i.length+e.length);for(o.set(i),o.set(e,i.length),i=o;-1!==(t=So(i));)yield yield Pe(i.slice(0,t)),i=i.slice(t)}}catch(n){t={error:n}}finally{try{s||e||!(o=l.return)||(yield Pe(o.call(l)))}finally{if(t)throw t.error}}i.length>0&&(yield yield Pe(i))})}(l));!(t=(c=yield Pe(u.next())).done);A=!0){i=c.value,A=!1;const n=i;for(const e of s.decode(n)){const n=a.decode(e);n&&(yield yield Pe(n))}}}catch(n){o={error:n}}finally{try{A||t||!(r=u.return)||(yield Pe(r.call(u)))}finally{if(o)throw o.error}}for(const n of s.flush()){const e=a.decode(n);e&&(yield yield Pe(e))}})}(n,e));!(t=(c=yield Pe(u.next())).done);A=!0){s=c.value,A=!1;const n=s;if(!l)if(n.data.startsWith("[DONE]"))l=!0;else try{yield yield Pe(JSON.parse(n.data))}catch(e){throw r.error("Could not parse message into JSON:",n.data),r.error("From chunk:",n.raw),e}}}catch(n){i={error:n}}finally{try{A||t||!(a=u.return)||(yield Pe(a.call(u)))}finally{if(i)throw i.error}}l=!0}catch(n){if(Ut(n))return yield Pe(void 0);throw n}finally{l||e.abort()}})},e,t)}static fromReadableStream(n,e,t){let o=!1;return new Uo(function(){return De(this,arguments,function*(){var t,r,i,a;if(o)throw new Gt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let s=!1;try{try{for(var l,c=!0,A=Me(function(){return De(this,arguments,function*(){var e,t,o,r;const i=new To,a=co(n);try{for(var s,l=!0,c=Me(a);!(e=(s=yield Pe(c.next())).done);l=!0){r=s.value,l=!1;const n=r;for(const e of i.decode(n))yield yield Pe(e)}}catch(n){t={error:n}}finally{try{l||e||!(o=c.return)||(yield Pe(o.call(c)))}finally{if(t)throw t.error}}for(const n of i.flush())yield yield Pe(n)})}());!(t=(l=yield Pe(A.next())).done);c=!0){a=l.value,c=!1;const n=a;s||n&&(yield yield Pe(JSON.parse(n)))}}catch(n){r={error:n}}finally{try{c||t||!(i=A.return)||(yield Pe(i.call(A)))}finally{if(r)throw r.error}}s=!0}catch(n){if(Ut(n))return yield Pe(void 0);throw n}finally{s||e.abort()}})},e,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const n=[],e=[],t=this.iterator(),o=o=>({next:()=>{if(0===o.length){const o=t.next();n.push(o),e.push(o)}return o.shift()}});return[new Uo(()=>o(n),this.controller,this.client),new Uo(()=>o(e),this.controller,this.client)]}toReadableStream(){const n=this;let e;return so({async start(){e=n[Symbol.asyncIterator]()},async pull(n){try{const{value:t,done:o}=await e.next();if(o)return n.close();const r=xo(JSON.stringify(t)+"\n");n.enqueue(r)}catch(e){n.error(e)}},async cancel(){var n;await(null===(n=e.return)||void 0===n?void 0:n.call(e))}})}}class qo{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(n){if(n.endsWith("\r")&&(n=n.substring(0,n.length-1)),!n){if(!this.event&&!this.data.length)return null;const n={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],n}if(this.chunks.push(n),n.startsWith(":"))return null;let[e,t,o]=function(n){const e=n.indexOf(":");return-1!==e?[n.substring(0,e),":",n.substring(e+1)]:[n,"",""]}(n);return o.startsWith(" ")&&(o=o.substring(1)),"event"===e?this.event=o:"data"===e&&this.data.push(o),null}}async function Go(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,a=await(async()=>{var o;if(e.options.stream)return Mo(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Uo.fromSSEResponse(t,e.controller,n);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type"),i=null===(o=null==r?void 0:r.split(";")[0])||void 0===o?void 0:o.trim();if((null==i?void 0:i.includes("application/json"))||(null==i?void 0:i.endsWith("+json"))){if("0"===t.headers.get("content-length"))return;return await t.json()}return await t.text()})();return Mo(n).debug(`[${o}] response parsed`,Lo({retryOfRequestLogID:r,url:t.url,status:t.status,body:a,durationMs:Date.now()-i})),a}class jo extends Promise{constructor(n,e,t=Go){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t,this.client=n}_thenUnwrap(n){return new jo(this.client,this.responsePromise,async(e,t)=>n(await this.parseResponse(e,t),t))}asResponse(){return this.responsePromise.then(n=>n.response)}async withResponse(){const[n,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:n,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(n=>this.parseResponse(this.client,n))),this.parsedPromise}then(n,e){return this.parse().then(n,e)}catch(n){return this.parse().catch(n)}finally(n){return this.parse().finally(n)}}const Fo=Symbol("brand.privateNullableHeaders");function*Ho(n){if(!n)return;if(Fo in n){const{values:e,nulls:t}=n;yield*e.entries();for(const n of t)yield[n,null];return}let e,t=!1;n instanceof Headers?e=n.entries():eo(n)?e=n:(t=!0,e=Object.entries(null!=n?n:{}));for(let n of e){const e=n[0];if("string"!=typeof e)throw new TypeError("expected header name to be a string");const o=eo(n[1])?n[1]:[n[1]];let r=!1;for(const n of o)void 0!==n&&(t&&!r&&(r=!0,yield[e,null]),yield[e,n])}}const Vo=n=>{const e=new Headers,t=new Set;for(const o of n){const n=new Set;for(const[r,i]of Ho(o)){const o=r.toLowerCase();n.has(o)||(e.delete(r),n.add(o)),null===i?(e.delete(r),t.add(o)):(e.append(r,i),t.delete(o))}}return{[Fo]:!0,values:e,nulls:t}},Wo=n=>{var e,t,o,r,i,a;return void 0!==globalThis.process?null!==(o=null===(t=null===(e=globalThis.process.env)||void 0===e?void 0:e[n])||void 0===t?void 0:t.trim())&&void 0!==o?o:void 0:void 0!==globalThis.Deno?null===(a=null===(i=null===(r=globalThis.Deno.env)||void 0===r?void 0:r.get)||void 0===i?void 0:i.call(r,n))||void 0===a?void 0:a.trim():void 0};var $o;class Jo{constructor(n){var e,t,o,r,i,a,s,{baseURL:l=Wo("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(null!==(e=Wo("GEMINI_API_KEY"))&&void 0!==e?e:null),apiVersion:A="v1beta"}=n,u=Ne(n,["baseURL","apiKey","apiVersion"]);const d=Object.assign(Object.assign({apiKey:c,apiVersion:A},u),{baseURL:l||"https://generativelanguage.googleapis.com"});this.baseURL=d.baseURL,this.timeout=null!==(t=d.timeout)&&void 0!==t?t:Jo.DEFAULT_TIMEOUT,this.logger=null!==(o=d.logger)&&void 0!==o?o:console;const p="warn";this.logLevel=p,this.logLevel=null!==(i=null!==(r=ko(d.logLevel,"ClientOptions.logLevel",this))&&void 0!==r?r:ko(Wo("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))&&void 0!==i?i:p,this.fetchOptions=d.fetchOptions,this.maxRetries=null!==(a=d.maxRetries)&&void 0!==a?a:2,this.fetch=null!==(s=d.fetch)&&void 0!==s?s:function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=Ao,this._options=d,this.apiKey=c,this.apiVersion=A,this.clientAdapter=d.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:e}){if(!n.has("authorization")&&!n.has("x-goog-api-key")&&!(this.apiKey&&n.get("x-goog-api-key")||e.has("x-goog-api-key")))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){const e=Vo([n.headers]);if(!e.values.has("authorization")&&!e.values.has("x-goog-api-key"))return this.apiKey?Vo([{"x-goog-api-key":this.apiKey}]):this.clientAdapter.isVertexAI()?Vo([await this.clientAdapter.getAuthHeaders()]):void 0}stringifyQuery(n){return Object.entries(n).filter(([n,e])=>void 0!==e).map(([n,e])=>{if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return`${encodeURIComponent(n)}=${encodeURIComponent(e)}`;if(null===e)return`${encodeURIComponent(n)}=`;throw new Gt(`Cannot stringify type ${typeof e}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${to}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lt()}`}makeStatusError(n,e,t,o){return jt.generate(n,e,t,o)}buildURL(n,e,t){const o=!this.baseURLOverridden()&&t||this.baseURL,r=(n=>Zt.test(n))(n)?new URL(n):new URL(o+(o.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),i=this.defaultQuery();return function(n){if(!n)return!0;for(const e in n)return!1;return!0}(i)||(e=Object.assign(Object.assign({},i),e)),"object"==typeof e&&e&&!Array.isArray(e)&&(r.search=this.stringifyQuery(e)),r.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){const e=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(n,{url:e,options:t}){}get(n,e){return this.methodRequest("get",n,e)}post(n,e){return this.methodRequest("post",n,e)}patch(n,e){return this.methodRequest("patch",n,e)}put(n,e){return this.methodRequest("put",n,e)}delete(n,e){return this.methodRequest("delete",n,e)}methodRequest(n,e,t){return this.request(Promise.resolve(t).then(t=>Object.assign({method:n,path:e},t)))}request(n,e=null){return new jo(this,this.makeRequest(n,e,void 0))}async makeRequest(n,e,t){var o,r,i;const a=await n,s=null!==(o=a.maxRetries)&&void 0!==o?o:this.maxRetries;null==e&&(e=s),await this.prepareOptions(a);const{req:l,url:c,timeout:A}=await this.buildRequest(a,{retryCount:s-e});await this.prepareRequest(l,{url:c,options:a});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===t?"":`, retryOf: ${t}`,p=Date.now();if(Mo(this).debug(`[${u}] sending request`,Lo({retryOfRequestLogID:t,method:a.method,url:c,options:a,headers:l.headers})),null===(r=a.signal)||void 0===r?void 0:r.aborted)throw new Ft;const m=new AbortController,h=await this.fetchWithTimeout(c,l,A,m).catch(qt),f=Date.now();if(h instanceof globalThis.Error){const n=`retrying, ${e} attempts remaining`;if(null===(i=a.signal)||void 0===i?void 0:i.aborted)throw new Ft;const o=Ut(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(e)return Mo(this).info(`[${u}] connection ${o?"timed out":"failed"} - ${n}`),Mo(this).debug(`[${u}] connection ${o?"timed out":"failed"} (${n})`,Lo({retryOfRequestLogID:t,url:c,durationMs:f-p,message:h.message})),this.retryRequest(a,e,null!=t?t:u);if(Mo(this).info(`[${u}] connection ${o?"timed out":"failed"} - error; no more retries left`),Mo(this).debug(`[${u}] connection ${o?"timed out":"failed"} (error; no more retries left)`,Lo({retryOfRequestLogID:t,url:c,durationMs:f-p,message:h.message})),o)throw new Vt;throw new Ht({cause:h})}const g=`[${u}${d}] ${l.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${f-p}ms`;if(!h.ok){const n=await this.shouldRetry(h);if(e&&n){const n=`retrying, ${e} attempts remaining`;return await async function(n){var e,t;if(null===n||"object"!=typeof n)return;if(n[Symbol.asyncIterator])return void await(null===(t=(e=n[Symbol.asyncIterator]()).return)||void 0===t?void 0:t.call(e));const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}(h.body),Mo(this).info(`${g} - ${n}`),Mo(this).debug(`[${u}] response error (${n})`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,durationMs:f-p})),this.retryRequest(a,e,null!=t?t:u,h.headers)}const o=n?"error; no more retries left":"error; not retryable";Mo(this).info(`${g} - ${o}`);const r=await h.text().catch(n=>qt(n).message),i=(n=>{try{return JSON.parse(n)}catch(n){return}})(r),s=i?void 0:r;throw Mo(this).debug(`[${u}] response error (${o})`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,message:s,durationMs:Date.now()-p})),this.makeStatusError(h.status,i,s,h.headers)}return Mo(this).info(g),Mo(this).debug(`[${u}] response start`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,durationMs:f-p})),{response:h,options:a,controller:m,requestLogID:u,retryOfRequestLogID:t,startTime:p}}async fetchWithTimeout(n,e,t,o){const r=e||{},{signal:i,method:a}=r,s=Ne(r,["signal","method"]),l=this._makeAbort(o);i&&i.addEventListener("abort",l,{once:!0});const c=setTimeout(l,t),A=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,u=Object.assign(Object.assign(Object.assign({signal:o.signal},A?{duplex:"half"}:{}),{method:"GET"}),s);a&&(u.method=a.toUpperCase());try{return await this.fetch.call(void 0,n,u)}finally{clearTimeout(c)}}async shouldRetry(n){const e=n.headers.get("x-should-retry");return"true"===e||"false"!==e&&(408===n.status||409===n.status||429===n.status||n.status>=500)}async retryRequest(n,e,t,o){var r;let i;const a=null==o?void 0:o.get("retry-after-ms");if(a){const n=parseFloat(a);Number.isNaN(n)||(i=n)}const s=null==o?void 0:o.get("retry-after");if(s&&!i){const n=parseFloat(s);i=Number.isNaN(n)?Date.parse(s)-Date.now():1e3*n}if(!(i&&0<=i&&i<6e4)){const t=null!==(r=n.maxRetries)&&void 0!==r?r:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(e,t)}var l;return await(l=i,new Promise(n=>setTimeout(n,l))),this.makeRequest(n,e-1,t)}calculateDefaultRetryTimeoutMillis(n,e){const t=e-n;return Math.min(.5*Math.pow(2,t),8)*(1-.25*Math.random())*1e3}async buildRequest(n,{retryCount:e=0}={}){var t,o,r;const i=Object.assign({},n),{method:a,path:s,query:l,defaultBaseURL:c}=i,A=this.buildURL(s,l,c);"timeout"in i&&((n,e)=>{if("number"!=typeof e||!Number.isInteger(e))throw new Gt(`${n} must be an integer`);if(e<0)throw new Gt(`${n} must be a positive integer`)})("timeout",i.timeout),i.timeout=null!==(t=i.timeout)&&void 0!==t?t:this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:i}),p=await this.buildHeaders({options:n,method:a,bodyHeaders:u,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:p},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"}),d&&{body:d}),null!==(o=this.fetchOptions)&&void 0!==o?o:{}),null!==(r=i.fetchOptions)&&void 0!==r?r:{}),url:A,timeout:i.timeout}}async buildHeaders({options:n,method:e,bodyHeaders:t,retryCount:o}){let r={};this.idempotencyHeader&&"get"!==e&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=n.idempotencyKey);const i=await this.authHeaders(n);let a=Vo([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),null!=ao?ao:ao=oo()),this._options.defaultHeaders,t,n.headers,i]);return this.validateHeaders(a),a.values}_makeAbort(n){return()=>n.abort()}buildBody({options:{body:n,headers:e}}){if(!n)return{bodyHeaders:void 0,body:void 0};const t=Vo([e]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||"string"==typeof n&&t.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:"object"==typeof n&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&"function"==typeof n.next)?{bodyHeaders:void 0,body:lo(n)}:"object"==typeof n&&"application/x-www-form-urlencoded"===t.values.get("content-type")?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(n)}:this.encoder({body:n,headers:t})}}Jo.DEFAULT_TIMEOUT=6e4;class zo extends Jo{constructor(){super(...arguments),this.interactions=new bo(this)}}function Yo(n,e){const t={},o=s(n,["sdkHttpResponse"]);null!=o&&a(t,["sdkHttpResponse"],o);const r=s(n,["name"]);null!=r&&a(t,["name"],r);const i=s(n,["state"]);null!=i&&a(t,["state"],pe(i));const l=s(n,["createTime"]);null!=l&&a(t,["createTime"],l);const c=s(n,["tuningTask","startTime"]);null!=c&&a(t,["startTime"],c);const A=s(n,["tuningTask","completeTime"]);null!=A&&a(t,["endTime"],A);const u=s(n,["updateTime"]);null!=u&&a(t,["updateTime"],u);const d=s(n,["description"]);null!=d&&a(t,["description"],d);const p=s(n,["baseModel"]);null!=p&&a(t,["baseModel"],p);const m=s(n,["_self"]);return null!=m&&a(t,["tunedModel"],function(n){const e={},t=s(n,["name"]);null!=t&&a(e,["model"],t);const o=s(n,["name"]);return null!=o&&a(e,["endpoint"],o),e}(m)),t}function Ko(n,e){const t={},o=s(n,["sdkHttpResponse"]);null!=o&&a(t,["sdkHttpResponse"],o);const r=s(n,["name"]);null!=r&&a(t,["name"],r);const i=s(n,["state"]);null!=i&&a(t,["state"],pe(i));const l=s(n,["createTime"]);null!=l&&a(t,["createTime"],l);const c=s(n,["startTime"]);null!=c&&a(t,["startTime"],c);const A=s(n,["endTime"]);null!=A&&a(t,["endTime"],A);const u=s(n,["updateTime"]);null!=u&&a(t,["updateTime"],u);const d=s(n,["error"]);null!=d&&a(t,["error"],d);const p=s(n,["description"]);null!=p&&a(t,["description"],p);const m=s(n,["baseModel"]);null!=m&&a(t,["baseModel"],m);const h=s(n,["tunedModel"]);null!=h&&a(t,["tunedModel"],h);const f=s(n,["preTunedModel"]);null!=f&&a(t,["preTunedModel"],f);const g=s(n,["supervisedTuningSpec"]);null!=g&&a(t,["supervisedTuningSpec"],g);const E=s(n,["preferenceOptimizationSpec"]);null!=E&&a(t,["preferenceOptimizationSpec"],E);const v=s(n,["distillationSpec"]);null!=v&&a(t,["distillationSpec"],v);const y=s(n,["tuningDataStats"]);null!=y&&a(t,["tuningDataStats"],y);const C=s(n,["encryptionSpec"]);null!=C&&a(t,["encryptionSpec"],C);const b=s(n,["partnerModelTuningSpec"]);null!=b&&a(t,["partnerModelTuningSpec"],b);const B=s(n,["customBaseModel"]);null!=B&&a(t,["customBaseModel"],B);const w=s(n,["experiment"]);null!=w&&a(t,["experiment"],w);const x=s(n,["labels"]);null!=x&&a(t,["labels"],x);const _=s(n,["outputUri"]);null!=_&&a(t,["outputUri"],_);const T=s(n,["pipelineJob"]);null!=T&&a(t,["pipelineJob"],T);const I=s(n,["serviceAccount"]);null!=I&&a(t,["serviceAccount"],I);const S=s(n,["tunedModelDisplayName"]);null!=S&&a(t,["tunedModelDisplayName"],S);const O=s(n,["veoTuningSpec"]);return null!=O&&a(t,["veoTuningSpec"],O),t}function Xo(n,e){const t={},o=s(n,["gcsUri"]);null!=o&&a(t,["validationDatasetUri"],o);const r=s(n,["vertexDatasetResource"]);return null!=r&&a(t,["validationDatasetUri"],r),t}$o=zo,zo.GeminiNextGenAPIClient=$o,zo.GeminiNextGenAPIClientError=Gt,zo.APIError=jt,zo.APIConnectionError=Ht,zo.APIConnectionTimeoutError=Vt,zo.APIUserAbortError=Ft,zo.NotFoundError=zt,zo.ConflictError=Yt,zo.RateLimitError=Xt,zo.BadRequestError=Wt,zo.AuthenticationError=$t,zo.InternalServerError=Qt,zo.PermissionDeniedError=Jt,zo.UnprocessableEntityError=Kt,zo.toFile=async function(n,e,t){if(uo(),(n=>null!=n&&"object"==typeof n&&"string"==typeof n.name&&"number"==typeof n.lastModified&&mo(n))(n=await n))return n instanceof File?n:po([await n.arrayBuffer()],n.name);if((n=>null!=n&&"object"==typeof n&&"string"==typeof n.url&&"function"==typeof n.blob)(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),po(await ho(o),e,t)}const o=await ho(n);if(e||(e=function(n){return("object"==typeof n&&null!==n&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}(n)),!(null==t?void 0:t.type)){const n=o.find(n=>"object"==typeof n&&"type"in n&&n.type);"string"==typeof n&&(t=Object.assign(Object.assign({},t),{type:n}))}return po(o,e,t)},zo.Interactions=bo;class Qo extends r{constructor(n){super(),this.apiClient=n,this.list=async(n={})=>new Se(fn.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var e;if(this.apiClient.isVertexAI()){if(n.baseModel.startsWith("projects/")){const t={tunedModelName:n.baseModel};(null===(e=n.config)||void 0===e?void 0:e.preTunedModelCheckpointId)&&(t.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:t});return o.baseModel=void 0,await this.tuneInternal(o)}{const e=Object.assign({},n);return await this.tuneInternal(e)}}{const e=Object.assign({},n),t=await this.tuneMldevInternal(e);let o="";return void 0!==t.metadata&&void 0!==t.metadata.tunedModel?o=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(o=t.name.split("/operations/")[0]),{name:o,state:M.JOB_STATE_QUEUED}}}}async getInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return c=i("{name}",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>Ko(n))}{const e=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return c=i("{name}",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>Yo(n))}}async listInternal(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o);const r=s(n,["filter"]);void 0!==e&&null!=r&&a(e,["_query","filter"],r)}(t,e),e}(n);return c=i("tuningJobs",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["tuningJobs"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>Ko(n))),a(e,["tuningJobs"],n)}return e}(n),t=new On;return Object.assign(t,e),t})}{const e=function(n){const e={},t=s(n,["config"]);return null!=t&&function(n,e){const t=s(n,["pageSize"]);void 0!==e&&null!=t&&a(e,["_query","pageSize"],t);const o=s(n,["pageToken"]);void 0!==e&&null!=o&&a(e,["_query","pageToken"],o);const r=s(n,["filter"]);void 0!==e&&null!=r&&a(e,["_query","filter"],r)}(t,e),e}(n);return c=i("tunedModels",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"GET",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["nextPageToken"]);null!=o&&a(e,["nextPageToken"],o);const r=s(n,["tunedModels"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>Yo(n))),a(e,["tuningJobs"],n)}return e}(n),t=new On;return Object.assign(t,e),t})}}async cancel(n){var e,t,o,r;let l,c="",A={};if(this.apiClient.isVertexAI()){const o=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return c=i("{name}:cancel",o._url),A=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new kn;return Object.assign(t,e),t})}{const e=function(n){const e={},t=s(n,["name"]);return null!=t&&a(e,["_url","name"],t),e}(n);return c=i("{name}:cancel",e._url),A=e._query,delete e._url,delete e._query,l=this.apiClient.request({path:c,queryParams:A,body:JSON.stringify(e),httpMethod:"POST",httpOptions:null===(o=n.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=n.config)||void 0===r?void 0:r.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),l.then(n=>{const e=function(n){const e={},t=s(n,["sdkHttpResponse"]);return null!=t&&a(e,["sdkHttpResponse"],t),e}(n),t=new kn;return Object.assign(t,e),t})}}async tuneInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(n,e){const t={},o=s(n,["baseModel"]);null!=o&&a(t,["baseModel"],o);const r=s(n,["preTunedModel"]);null!=r&&a(t,["preTunedModel"],r);const i=s(n,["trainingDataset"]);null!=i&&function(n,e,t){let o=s(t,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const t=s(n,["gcsUri"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","trainingDatasetUri"],t)}else if("PREFERENCE_TUNING"===o){const t=s(n,["gcsUri"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],t)}else if("DISTILLATION"===o){const t=s(n,["gcsUri"]);void 0!==e&&null!=t&&a(e,["distillationSpec","promptDatasetUri"],t)}let r=s(t,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const t=s(n,["vertexDatasetResource"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","trainingDatasetUri"],t)}else if("PREFERENCE_TUNING"===r){const t=s(n,["vertexDatasetResource"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],t)}else if("DISTILLATION"===r){const t=s(n,["vertexDatasetResource"]);void 0!==e&&null!=t&&a(e,["distillationSpec","promptDatasetUri"],t)}if(void 0!==s(n,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,t,e);const l=s(n,["config"]);return null!=l&&function(n,e,t){let o=s(t,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const t=s(n,["validationDataset"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec"],Xo(t))}else if("PREFERENCE_TUNING"===o){const t=s(n,["validationDataset"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec"],Xo(t))}else if("DISTILLATION"===o){const t=s(n,["validationDataset"]);void 0!==e&&null!=t&&a(e,["distillationSpec"],Xo(t))}const r=s(n,["tunedModelDisplayName"]);void 0!==e&&null!=r&&a(e,["tunedModelDisplayName"],r);const i=s(n,["description"]);void 0!==e&&null!=i&&a(e,["description"],i);let l=s(t,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const t=s(n,["epochCount"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],t)}else if("PREFERENCE_TUNING"===l){const t=s(n,["epochCount"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],t)}else if("DISTILLATION"===l){const t=s(n,["epochCount"]);void 0!==e&&null!=t&&a(e,["distillationSpec","hyperParameters","epochCount"],t)}let c=s(t,["config","method"]);if(void 0===c&&(c="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===c){const t=s(n,["learningRateMultiplier"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],t)}else if("PREFERENCE_TUNING"===c){const t=s(n,["learningRateMultiplier"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],t)}else if("DISTILLATION"===c){const t=s(n,["learningRateMultiplier"]);void 0!==e&&null!=t&&a(e,["distillationSpec","hyperParameters","learningRateMultiplier"],t)}let A=s(t,["config","method"]);if(void 0===A&&(A="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===A){const t=s(n,["exportLastCheckpointOnly"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],t)}else if("PREFERENCE_TUNING"===A){const t=s(n,["exportLastCheckpointOnly"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],t)}else if("DISTILLATION"===A){const t=s(n,["exportLastCheckpointOnly"]);void 0!==e&&null!=t&&a(e,["distillationSpec","exportLastCheckpointOnly"],t)}let u=s(t,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const t=s(n,["adapterSize"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],t)}else if("PREFERENCE_TUNING"===u){const t=s(n,["adapterSize"]);void 0!==e&&null!=t&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],t)}else if("DISTILLATION"===u){const t=s(n,["adapterSize"]);void 0!==e&&null!=t&&a(e,["distillationSpec","hyperParameters","adapterSize"],t)}let d=s(t,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){const t=s(n,["tuningMode"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","tuningMode"],t)}const p=s(n,["customBaseModel"]);void 0!==e&&null!=p&&a(e,["customBaseModel"],p);let m=s(t,["config","method"]);if(void 0===m&&(m="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===m){const t=s(n,["batchSize"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","hyperParameters","batchSize"],t)}let h=s(t,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){const t=s(n,["learningRate"]);void 0!==e&&null!=t&&a(e,["supervisedTuningSpec","hyperParameters","learningRate"],t)}const f=s(n,["labels"]);void 0!==e&&null!=f&&a(e,["labels"],f);const g=s(n,["beta"]);void 0!==e&&null!=g&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],g);const E=s(n,["baseTeacherModel"]);void 0!==e&&null!=E&&a(e,["distillationSpec","baseTeacherModel"],E);const v=s(n,["tunedTeacherModelSource"]);void 0!==e&&null!=v&&a(e,["distillationSpec","tunedTeacherModelSource"],v);const y=s(n,["sftLossWeightMultiplier"]);void 0!==e&&null!=y&&a(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],y);const C=s(n,["outputUri"]);void 0!==e&&null!=C&&a(e,["outputUri"],C);const b=s(n,["encryptionSpec"]);void 0!==e&&null!=b&&a(e,["encryptionSpec"],b)}(l,t,e),t}(n,n);return r=i("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>Ko(n))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var e,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(n){const e={},t=s(n,["baseModel"]);null!=t&&a(e,["baseModel"],t);const o=s(n,["preTunedModel"]);null!=o&&a(e,["preTunedModel"],o);const r=s(n,["trainingDataset"]);null!=r&&function(n){const e={};if(void 0!==s(n,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==s(n,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=s(n,["examples"]);if(null!=t){let n=t;Array.isArray(n)&&(n=n.map(n=>n)),a(e,["examples","examples"],n)}}(r);const i=s(n,["config"]);return null!=i&&function(n,e){if(void 0!==s(n,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const t=s(n,["tunedModelDisplayName"]);if(void 0!==e&&null!=t&&a(e,["displayName"],t),void 0!==s(n,["description"]))throw new Error("description parameter is not supported in Gemini API.");const o=s(n,["epochCount"]);void 0!==e&&null!=o&&a(e,["tuningTask","hyperparameters","epochCount"],o);const r=s(n,["learningRateMultiplier"]);if(null!=r&&a({},["tuningTask","hyperparameters","learningRateMultiplier"],r),void 0!==s(n,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==s(n,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==s(n,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");if(void 0!==s(n,["tuningMode"]))throw new Error("tuningMode parameter is not supported in Gemini API.");if(void 0!==s(n,["customBaseModel"]))throw new Error("customBaseModel parameter is not supported in Gemini API.");const i=s(n,["batchSize"]);void 0!==e&&null!=i&&a(e,["tuningTask","hyperparameters","batchSize"],i);const l=s(n,["learningRate"]);if(void 0!==e&&null!=l&&a(e,["tuningTask","hyperparameters","learningRate"],l),void 0!==s(n,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==s(n,["beta"]))throw new Error("beta parameter is not supported in Gemini API.");if(void 0!==s(n,["baseTeacherModel"]))throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(void 0!==s(n,["tunedTeacherModelSource"]))throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(void 0!==s(n,["sftLossWeightMultiplier"]))throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(void 0!==s(n,["outputUri"]))throw new Error("outputUri parameter is not supported in Gemini API.");if(void 0!==s(n,["encryptionSpec"]))throw new Error("encryptionSpec parameter is not supported in Gemini API.")}(i,e),e}(n);return r=i("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(e=n.config)||void 0===e?void 0:e.httpOptions,abortSignal:null===(t=n.config)||void 0===t?void 0:t.abortSignal}).then(n=>n.json().then(e=>{const t=e;return t.sdkHttpResponse={headers:n.headers},t})),o.then(n=>function(n){const e={},t=s(n,["sdkHttpResponse"]);null!=t&&a(e,["sdkHttpResponse"],t);const o=s(n,["name"]);null!=o&&a(e,["name"],o);const r=s(n,["metadata"]);null!=r&&a(e,["metadata"],r);const i=s(n,["done"]);null!=i&&a(e,["done"],i);const l=s(n,["error"]);return null!=l&&a(e,["error"],l),e}(n))}}}class Zo{async download(n,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nr="x-goog-upload-status";async function er(n,e,t){var o,r;let i=0,a=0,s=new gn(new Response),l="upload";for(i=n.size;a<i;){const c=Math.min(8388608,i-a),A=n.slice(a,a+c);a+c>=i&&(l+=", finalize");let u=0,d=1e3;for(;u<3&&(s=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(null===(o=null==s?void 0:s.headers)||void 0===o?void 0:o[nr]));)u++,await tr(d),d*=2;if(a+=c,"active"!==(null===(r=null==s?void 0:s.headers)||void 0===r?void 0:r[nr]))break;if(i<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}function tr(n){return new Promise(e=>setTimeout(e,n))}class or{async upload(n,e,t){if("string"==typeof n)throw new Error("File path is not supported in browser uploader.");return await async function(n,e,t){var o;const r=await er(n,e,t),i=await(null==r?void 0:r.json());if("final"!==(null===(o=null==r?void 0:r.headers)||void 0===o?void 0:o[nr]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(n,e,t)}async uploadToFileSearchStore(n,e,t){if("string"==typeof n)throw new Error("File path is not supported in browser uploader.");return await async function(n,e,t){var o;const r=await er(n,e,t),i=await(null==r?void 0:r.json());if("final"!==(null===(o=null==r?void 0:r.headers)||void 0===o?void 0:o[nr]))throw new Error("Failed to upload file: Upload status is not finalized.");const a=A(i),s=new Wn;return Object.assign(s,a),s}(n,e,t)}async stat(n){if("string"==typeof n)throw new Error("File path is not supported in browser uploader.");return await async function(n){return{size:n.size,type:n.type}}(n)}}class rr{create(n,e,t){return new ir(n,e,t)}}class ir{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const ar="x-goog-api-key";class sr{constructor(n){this.apiKey=n}async addAuthHeaders(n,e){if(null===n.get(ar)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");n.append(ar,this.apiKey)}}}class lr{get interactions(){var n;if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;(null==e?void 0:e.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new zo({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==e?void 0:e.timeout,maxRetries:null===(n=null==e?void 0:e.retryOptions)||void 0===n?void 0:n.attempts});return this._interactions=t.interactions,this._interactions}constructor(n){var e;if(null==n.apiKey)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(e=n.vertexai)&&void 0!==e&&e,this.apiKey=n.apiKey;const t=function(n,e,t,o){var r,i;if(!(null==n?void 0:n.baseUrl)){const n={geminiUrl:void 0,vertexUrl:void 0};return e?null!==(r=n.vertexUrl)&&void 0!==r?r:t:null!==(i=n.geminiUrl)&&void 0!==i?i:o}return n.baseUrl}(n.httpOptions,n.vertexai,void 0,void 0);t&&(n.httpOptions?n.httpOptions.baseUrl=t:n.httpOptions={baseUrl:t}),this.apiVersion=n.apiVersion,this.httpOptions=n.httpOptions;const o=new sr(this.apiKey);this.apiClient=new ht({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new or,downloader:new Zo}),this.models=new kt(this.apiClient),this.live=new wt(this.apiClient,o,new rr),this.batches=new Oe(this.apiClient),this.chats=new Ge(this.models,this.apiClient),this.caches=new Re(this.apiClient),this.files=new He(this.apiClient),this.operations=new Rt(this.apiClient),this.authTokens=new Pt(this.apiClient),this.tunings=new Qo(this.apiClient),this.fileSearchStores=new Mt(this.apiClient)}}var cr=t(33422);let Ar=function(n){return n.INVALID_API_KEY="INVALID_API_KEY",n.QUOTA_EXCEEDED="QUOTA_EXCEEDED",n.RATE_LIMITED="RATE_LIMITED",n.NETWORK_ERROR="NETWORK_ERROR",n.TIMEOUT="TIMEOUT",n.CONTENT_FILTERED="CONTENT_FILTERED",n.UNKNOWN="UNKNOWN",n}({});class ur extends Error{constructor(n,e,t=!1,o){super(n),this.name="GeminiError",this.code=e,this.retryable=t,this.statusCode=o,Object.setPrototypeOf(this,ur.prototype)}}const dr="gemini-3-flash-preview",pr="gemini-3-flash-preview";let mr=null;function hr(n){if(!n||0===n.trim().length)throw new ur("API key is required. Please set GEMINI_API_KEY in your .env file.",Ar.INVALID_API_KEY);return mr=new lr({apiKey:n}),mr}function fr(){if(!mr)throw new ur("Gemini client not initialised. Call initGeminiClient(apiKey) first.",Ar.INVALID_API_KEY);return mr}async function gr(n,e={}){const t=fr(),o=e.model??(0,cr.getSetting)("defaultModel")??dr,r=vr(n.length,e.timeoutMs);return Cr(async()=>{try{const i=(await yr(t.models.generateContent({model:o,contents:n,config:{temperature:e.temperature??1,maxOutputTokens:e.maxOutputTokens??2048,topP:e.topP??.95,topK:e.topK??40}}),r)).text;if(!i||0===i.trim().length)throw new ur("The model returned an empty response. The content may have been filtered.",Ar.CONTENT_FILTERED);return i}catch(n){throw br(n)}})}async function Er(n,e={}){const t=fr(),o=e.model??(0,cr.getSetting)("defaultModel")??dr,r=vr(n.length,e.timeoutMs);return Cr(async()=>{try{const i=(await yr(t.models.generateContent({model:o,contents:n,config:{temperature:e.temperature??.1,maxOutputTokens:e.maxOutputTokens??1024,responseMimeType:"application/json",responseSchema:e.responseSchema,systemInstruction:e.systemInstruction,thinkingConfig:{thinkingBudget:0}}}),r)).text;if(!i||0===i.trim().length)throw new ur("The model returned an empty response.",Ar.CONTENT_FILTERED);try{return JSON.parse(i)}catch{const n=i.match(/\{[\s\S]*\}/);if(n)return JSON.parse(n[0]);throw new ur(`Model returned invalid JSON: ${i.slice(0,100)}`,Ar.UNKNOWN)}}catch(n){if(n instanceof ur)throw n;throw br(n)}})}function vr(n,e){if(e)return e;const t=3e4+1e4*Math.ceil(n/5e3);return Math.min(t,9e4)}function yr(n,e){return new Promise((t,o)=>{const r=setTimeout(()=>{o(new ur(`Request timed out after ${e/1e3}s. The email may be too long — try a shorter selection.`,Ar.TIMEOUT,!1))},e);n.then(n=>{clearTimeout(r),t(n)}).catch(n=>{clearTimeout(r),o(n)})})}async function Cr(n){let e,t=1e3;for(let o=0;o<=3;o++)try{return await n()}catch(n){if(e=n instanceof ur?n:br(n),!e.retryable||3===o)throw e;const r=.3*Math.random()*t;await Br(t+r),t*=2}throw e}function br(n){if(n instanceof ur)return n;const e=n instanceof Error?n.message:String(n),t=function(n){if(n&&"object"==typeof n){const e=n;if("number"==typeof e.status)return e.status;if("number"==typeof e.statusCode)return e.statusCode;if("number"==typeof e.code)return e.code;if(e.response&&"object"==typeof e.response){const n=e.response;if("number"==typeof n.status)return n.status}}}(n);return 401===t||403===t||/api.?key/i.test(e)?new ur("Invalid or expired API key. Please check your GEMINI_API_KEY.",Ar.INVALID_API_KEY,!1,t):429===t||/rate.?limit/i.test(e)||/too many requests/i.test(e)?new ur("Rate limited by the Gemini API. Retrying with backoff…",Ar.RATE_LIMITED,!0,429):429===t&&/quota/i.test(e)?new ur("API quota exceeded. Check your billing and quota settings in the Google Cloud Console.",Ar.QUOTA_EXCEEDED,!1,429):/network/i.test(e)||/fetch failed/i.test(e)||/ECONNREFUSED/i.test(e)||/ENOTFOUND/i.test(e)||/offline/i.test(e)?new ur("Network error — please check your internet connection.",Ar.NETWORK_ERROR,!0):/safety/i.test(e)||/blocked/i.test(e)||/filter/i.test(e)?new ur("The response was blocked by content safety filters.",Ar.CONTENT_FILTERED,!1):t&&t>=500?new ur(`Server error (${t}). Retrying…`,Ar.UNKNOWN,!0,t):new ur(`Unexpected error: ${e}`,Ar.UNKNOWN,!1,t)}function Br(n){return new Promise(e=>setTimeout(e,n))}},89419(n,e,t){"use strict";function o(){const n=Office.context.mailbox.item;return n?"function"==typeof n.body?.getAsync&&"function"==typeof n.body?.setAsync?"compose":"string"==typeof n.subject?"read":"function"==typeof n.subject?.getAsync?"compose":"unknown":"unknown"}function r(){return new Promise((n,e)=>{c().body.getAsync(Office.CoercionType.Text,t=>{t.status===Office.AsyncResultStatus.Succeeded?n(t.value||""):e(new Error(`Failed to read email body: ${t.error?.message||"Unknown error"}`))})})}function i(){return new Promise((n,e)=>{const t=c();if("string"==typeof t.subject)return void n(t.subject);const o=t.subject;"function"!=typeof o?.getAsync?n(""):o.getAsync(t=>{t.status===Office.AsyncResultStatus.Succeeded?n(t.value||""):e(new Error(`Failed to read email subject: ${t.error?.message||"Unknown error"}`))})})}function a(){return new Promise((n,e)=>{const t=c();if(t.from){const e=t.from;return void n({name:e.displayName||"",email:e.emailAddress||""})}const o=t.from;o&&"function"==typeof o.getAsync?o.getAsync(e=>{e.status===Office.AsyncResultStatus.Succeeded&&e.value?n({name:e.value.displayName||"",email:e.value.emailAddress||""}):n(A())}):n(A())})}async function s(){if("read"===o())return a();const n=c(),e=await function(n){return new Promise(e=>{const t=n.to;t&&"function"==typeof t.getAsync?t.getAsync(n=>{n.status===Office.AsyncResultStatus.Succeeded&&n.value?e(n.value.map(n=>({name:n.displayName||"",email:n.emailAddress||""}))):e([])}):e([])})}(n);return e.length>0?e[0]:a()}async function l(){const[n,e,t]=await Promise.all([r(),i(),a()]),o=Office.context.mailbox.item;return[{subject:e,body:n,sender:t,dateTime:o?.dateTimeCreated?.toISOString?.()||void 0}]}function c(){const n=Office.context.mailbox.item;if(!n)throw new Error("No mailbox item is currently open. Make sure the add-in is activated on an email.");return n}function A(){const n=Office.context.mailbox.userProfile;return{name:n?.displayName||"",email:n?.emailAddress||""}}t.d(e,{Ev:()=>l,J5:()=>o,getCurrentEmailSubject:()=>i,getOriginalSender:()=>s,k3:()=>r,mi:()=>a})},21342(n,e,t){"use strict";t.d(e,{A:()=>s});var o=t(71354),r=t.n(o),i=t(76314),a=t.n(i)()(r());a.push([n.id,'/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */\n@layer properties;\n:root, :host {\n  --color-black: #000;\n  --spacing: 0.25rem;\n  --breakpoint-sm: 40rem;\n  --breakpoint-md: 48rem;\n  --breakpoint-lg: 64rem;\n  --breakpoint-xl: 80rem;\n  --breakpoint-2xl: 96rem;\n  --text-xs: 12px;\n  --text-xs--line-height: calc(1 / 0.75);\n  --text-sm: 13px;\n  --text-sm--line-height: calc(1.25 / 0.875);\n  --text-lg: 15px;\n  --text-lg--line-height: calc(1.75 / 1.125);\n  --text-xl: 16px;\n  --text-xl--line-height: calc(1.75 / 1.25);\n  --text-2xl: 1.5rem;\n  --text-2xl--line-height: calc(2 / 1.5);\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --tracking-tight: -0.025em;\n  --tracking-wide: 0.025em;\n  --leading-normal: 1.5;\n  --radius-xs: 4px;\n  --radius-sm: 6px;\n  --radius-md: 8px;\n  --radius-lg: 0.5rem;\n  --default-transition-duration: 150ms;\n  --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  --color-aic-blue: #3b9eff;\n  --color-aic-blue-hover: #2188ed;\n  --color-aic-blue-light: #e8f3ff;\n  --color-aic-blue-glow: rgba(59, 158, 255, 0.15);\n  --color-aic-purple: #7b61db;\n  --color-aic-purple-hover: #6b51c8;\n  --color-aic-green: #22c55e;\n  --color-aic-amber: #f59e0b;\n  --color-aic-teal: #14b8a6;\n  --color-aic-bg: #ffffff;\n  --color-aic-bg-panel: #f8f9fb;\n  --color-aic-bg-elevated: #ffffff;\n  --color-aic-border: #e2e5ea;\n  --color-aic-border-light: #eef0f3;\n  --color-aic-text: #1a1d23;\n  --color-aic-text-secondary: #5e6470;\n  --color-aic-text-tertiary: #8e95a2;\n  --color-aic-text-inverse: #ffffff;\n  --color-aic-error-bg: #fff1f0;\n  --color-aic-error-text: #d1242f;\n  --color-aic-error-border: #ffd2cf;\n  --color-aic-success: #1a7f37;\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 12px;\n  --spacing-lg: 22px;\n  --spacing-xl: 24px;\n  --font-aic: "Poppins", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n  --text-md: 13px;\n  --ease-aic: cubic-bezier(0.25, 0.1, 0.25, 1);\n  --duration-aic: 150ms;\n  --color-dark-bg: #1e1e1e;\n  --color-dark-bg-panel: #252526;\n  --color-dark-bg-elevated: #2d2d2d;\n  --color-dark-border: #3e3e42;\n  --color-dark-border-light: #333337;\n  --color-dark-text: #e0e0e0;\n  --color-dark-text-secondary: #a0a0a0;\n  --color-dark-text-tertiary: #8a8a8a;\n  --color-dark-error-bg: #3a1a1a;\n  --color-dark-error-border: #5c2626;\n}\n.invisible {\n  visibility: hidden;\n}\n.visible {\n  visibility: visible;\n}\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip-path: inset(50%);\n  white-space: nowrap;\n  border-width: 0;\n}\n.absolute {\n  position: absolute;\n}\n.fixed {\n  position: fixed;\n}\n.relative {\n  position: relative;\n}\n.static {\n  position: static;\n}\n.sticky {\n  position: sticky;\n}\n.inset-0 {\n  inset: calc(var(--spacing) * 0);\n}\n.top-0 {\n  top: calc(var(--spacing) * 0);\n}\n.top-\\[50\\%\\] {\n  top: 50%;\n}\n.left-\\[50\\%\\] {\n  left: 50%;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-50 {\n  z-index: 50;\n}\n.container {\n  width: 100%;\n  @media (width >= 40rem) {\n    max-width: 40rem;\n  }\n  @media (width >= 48rem) {\n    max-width: 48rem;\n  }\n  @media (width >= 64rem) {\n    max-width: 64rem;\n  }\n  @media (width >= 80rem) {\n    max-width: 80rem;\n  }\n  @media (width >= 96rem) {\n    max-width: 96rem;\n  }\n}\n.m-0 {\n  margin: calc(var(--spacing) * 0);\n}\n.mx-auto {\n  margin-inline: auto;\n}\n.mt-1 {\n  margin-top: calc(var(--spacing) * 1);\n}\n.mt-\\[2px\\] {\n  margin-top: 2px;\n}\n.mt-auto {\n  margin-top: auto;\n}\n.mt-lg {\n  margin-top: var(--spacing-lg);\n}\n.mt-sm {\n  margin-top: var(--spacing-sm);\n}\n.mt-xl {\n  margin-top: var(--spacing-xl);\n}\n.mt-xs {\n  margin-top: var(--spacing-xs);\n}\n.mb-lg {\n  margin-bottom: var(--spacing-lg);\n}\n.mb-md {\n  margin-bottom: var(--spacing-md);\n}\n.mb-sm {\n  margin-bottom: var(--spacing-sm);\n}\n.mb-xs {\n  margin-bottom: var(--spacing-xs);\n}\n.ml-auto {\n  margin-left: auto;\n}\n.block {\n  display: block;\n}\n.contents {\n  display: contents;\n}\n.flex {\n  display: flex;\n}\n.grid {\n  display: grid;\n}\n.hidden {\n  display: none;\n}\n.inline {\n  display: inline;\n}\n.inline-flex {\n  display: inline-flex;\n}\n.table {\n  display: table;\n}\n.h-5 {\n  height: calc(var(--spacing) * 5);\n}\n.h-9 {\n  height: calc(var(--spacing) * 9);\n}\n.h-10 {\n  height: calc(var(--spacing) * 10);\n}\n.h-11 {\n  height: calc(var(--spacing) * 11);\n}\n.min-h-\\[50vh\\] {\n  min-height: 50vh;\n}\n.min-h-\\[80px\\] {\n  min-height: 80px;\n}\n.min-h-\\[100px\\] {\n  min-height: 100px;\n}\n.min-h-screen {\n  min-height: 100vh;\n}\n.w-5 {\n  width: calc(var(--spacing) * 5);\n}\n.w-10 {\n  width: calc(var(--spacing) * 10);\n}\n.w-full {\n  width: 100%;\n}\n.max-w-full {\n  max-width: 100%;\n}\n.max-w-lg {\n  max-width: var(--spacing-lg);\n}\n.max-w-screen-2xl {\n  max-width: var(--breakpoint-2xl);\n}\n.max-w-screen-lg {\n  max-width: var(--breakpoint-lg);\n}\n.max-w-screen-md {\n  max-width: var(--breakpoint-md);\n}\n.max-w-screen-sm {\n  max-width: var(--breakpoint-sm);\n}\n.max-w-screen-xl {\n  max-width: var(--breakpoint-xl);\n}\n.min-w-0 {\n  min-width: calc(var(--spacing) * 0);\n}\n.min-w-\\[55px\\] {\n  min-width: 55px;\n}\n.flex-1 {\n  flex: 1;\n}\n.shrink-0 {\n  flex-shrink: 0;\n}\n.translate-x-\\[-50\\%\\] {\n  --tw-translate-x: -50%;\n  translate: var(--tw-translate-x) var(--tw-translate-y);\n}\n.translate-y-\\[-50\\%\\] {\n  --tw-translate-y: -50%;\n  translate: var(--tw-translate-x) var(--tw-translate-y);\n}\n.scale-0 {\n  --tw-scale-x: 0%;\n  --tw-scale-y: 0%;\n  --tw-scale-z: 0%;\n  scale: var(--tw-scale-x) var(--tw-scale-y);\n}\n.scale-100 {\n  --tw-scale-x: 100%;\n  --tw-scale-y: 100%;\n  --tw-scale-z: 100%;\n  scale: var(--tw-scale-x) var(--tw-scale-y);\n}\n.rotate-0 {\n  rotate: 0deg;\n}\n.rotate-90 {\n  rotate: 90deg;\n}\n.transform {\n  transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.resize-y {\n  resize: vertical;\n}\n.grid-cols-1 {\n  grid-template-columns: repeat(1, minmax(0, 1fr));\n}\n.grid-cols-2 {\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-center {\n  align-items: center;\n}\n.items-end {\n  align-items: flex-end;\n}\n.items-start {\n  align-items: flex-start;\n}\n.justify-center {\n  justify-content: center;\n}\n.gap-0 {\n  gap: calc(var(--spacing) * 0);\n}\n.gap-2 {\n  gap: calc(var(--spacing) * 2);\n}\n.gap-4 {\n  gap: calc(var(--spacing) * 4);\n}\n.gap-6 {\n  gap: calc(var(--spacing) * 6);\n}\n.gap-8 {\n  gap: calc(var(--spacing) * 8);\n}\n.gap-sm {\n  gap: var(--spacing-sm);\n}\n.gap-xs {\n  gap: var(--spacing-xs);\n}\n.space-y-1 {\n  :where(& > :not(:last-child)) {\n    --tw-space-y-reverse: 0;\n    margin-block-start: calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));\n    margin-block-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)));\n  }\n}\n.space-y-2 {\n  :where(& > :not(:last-child)) {\n    --tw-space-y-reverse: 0;\n    margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));\n    margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));\n  }\n}\n.space-y-4 {\n  :where(& > :not(:last-child)) {\n    --tw-space-y-reverse: 0;\n    margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));\n    margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));\n  }\n}\n.truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.overflow-x-hidden {\n  overflow-x: hidden;\n}\n.rounded-lg {\n  border-radius: var(--radius-lg);\n}\n.rounded-md {\n  border-radius: var(--radius-md);\n}\n.rounded-sm {\n  border-radius: var(--radius-sm);\n}\n.border {\n  border-style: var(--tw-border-style);\n  border-width: 1px;\n}\n.border-t {\n  border-top-style: var(--tw-border-style);\n  border-top-width: 1px;\n}\n.border-b {\n  border-bottom-style: var(--tw-border-style);\n  border-bottom-width: 1px;\n}\n.border-aic-border {\n  border-color: var(--color-aic-border);\n}\n.border-aic-border-light {\n  border-color: var(--color-aic-border-light);\n}\n.bg-aic-bg {\n  background-color: var(--color-aic-bg);\n}\n.bg-black\\/80 {\n  background-color: color-mix(in srgb, #000 80%, transparent);\n  @supports (color: color-mix(in lab, red, red)) {\n    background-color: color-mix(in oklab, var(--color-black) 80%, transparent);\n  }\n}\n.p-0 {\n  padding: calc(var(--spacing) * 0);\n}\n.p-6 {\n  padding: calc(var(--spacing) * 6);\n}\n.p-lg {\n  padding: var(--spacing-lg);\n}\n.p-sm {\n  padding: var(--spacing-sm);\n}\n.p-xl {\n  padding: var(--spacing-xl);\n}\n.px-3 {\n  padding-inline: calc(var(--spacing) * 3);\n}\n.px-4 {\n  padding-inline: calc(var(--spacing) * 4);\n}\n.px-8 {\n  padding-inline: calc(var(--spacing) * 8);\n}\n.py-2 {\n  padding-block: calc(var(--spacing) * 2);\n}\n.py-sm {\n  padding-block: var(--spacing-sm);\n}\n.pt-0 {\n  padding-top: calc(var(--spacing) * 0);\n}\n.pt-lg {\n  padding-top: var(--spacing-lg);\n}\n.pr-lg {\n  padding-right: var(--spacing-lg);\n}\n.pb-\\[7px\\] {\n  padding-bottom: 7px;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.font-aic {\n  font-family: var(--font-aic);\n}\n.text-2xl {\n  font-size: var(--text-2xl);\n  line-height: var(--tw-leading, var(--text-2xl--line-height));\n}\n.text-lg {\n  font-size: var(--text-lg);\n  line-height: var(--tw-leading, var(--text-lg--line-height));\n}\n.text-sm {\n  font-size: var(--text-sm);\n  line-height: var(--tw-leading, var(--text-sm--line-height));\n}\n.text-xl {\n  font-size: var(--text-xl);\n  line-height: var(--tw-leading, var(--text-xl--line-height));\n}\n.text-xs {\n  font-size: var(--text-xs);\n  line-height: var(--tw-leading, var(--text-xs--line-height));\n}\n.text-md {\n  font-size: var(--text-md);\n}\n.leading-none {\n  --tw-leading: 1;\n  line-height: 1;\n}\n.leading-normal {\n  --tw-leading: var(--leading-normal);\n  line-height: var(--leading-normal);\n}\n.font-medium {\n  --tw-font-weight: var(--font-weight-medium);\n  font-weight: var(--font-weight-medium);\n}\n.font-normal {\n  --tw-font-weight: var(--font-weight-normal);\n  font-weight: var(--font-weight-normal);\n}\n.font-semibold {\n  --tw-font-weight: var(--font-weight-semibold);\n  font-weight: var(--font-weight-semibold);\n}\n.tracking-tight {\n  --tw-tracking: var(--tracking-tight);\n  letter-spacing: var(--tracking-tight);\n}\n.tracking-wide {\n  --tw-tracking: var(--tracking-wide);\n  letter-spacing: var(--tracking-wide);\n}\n.whitespace-nowrap {\n  white-space: nowrap;\n}\n.text-aic-amber {\n  color: var(--color-aic-amber);\n}\n.text-aic-blue {\n  color: var(--color-aic-blue);\n}\n.text-aic-green {\n  color: var(--color-aic-green);\n}\n.text-aic-purple {\n  color: var(--color-aic-purple);\n}\n.text-aic-success {\n  color: var(--color-aic-success);\n}\n.text-aic-teal {\n  color: var(--color-aic-teal);\n}\n.text-aic-text {\n  color: var(--color-aic-text);\n}\n.text-aic-text-secondary {\n  color: var(--color-aic-text-secondary);\n}\n.text-aic-text-tertiary {\n  color: var(--color-aic-text-tertiary);\n}\n.uppercase {\n  text-transform: uppercase;\n}\n.no-underline {\n  text-decoration-line: none;\n}\n.underline {\n  text-decoration-line: underline;\n}\n.underline-offset-4 {\n  text-underline-offset: 4px;\n}\n.antialiased {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.accent-aic-purple {\n  accent-color: var(--color-aic-purple);\n}\n.opacity-60 {\n  opacity: 60%;\n}\n.shadow-lg {\n  --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n}\n.shadow-sm {\n  --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n}\n.ring {\n  --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n}\n.outline {\n  outline-style: var(--tw-outline-style);\n  outline-width: 1px;\n}\n.blur {\n  --tw-blur: blur(8px);\n  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n}\n.filter {\n  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n}\n.transition-\\[border-color\\,box-shadow\\] {\n  transition-property: border-color,box-shadow;\n  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n  transition-duration: var(--tw-duration, var(--default-transition-duration));\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n  transition-duration: var(--tw-duration, var(--default-transition-duration));\n}\n.transition-colors {\n  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n  transition-duration: var(--tw-duration, var(--default-transition-duration));\n}\n.duration-150 {\n  --tw-duration: 150ms;\n  transition-duration: 150ms;\n}\n.duration-200 {\n  --tw-duration: 200ms;\n  transition-duration: 200ms;\n}\n.duration-300 {\n  --tw-duration: 300ms;\n  transition-duration: 300ms;\n}\n.duration-\\[var\\(--duration-aic\\)\\] {\n  --tw-duration: var(--duration-aic);\n  transition-duration: var(--duration-aic);\n}\n.outline-none {\n  --tw-outline-style: none;\n  outline-style: none;\n}\n.peer-disabled\\:cursor-not-allowed {\n  &:is(:where(.peer):disabled ~ *) {\n    cursor: not-allowed;\n  }\n}\n.peer-disabled\\:opacity-70 {\n  &:is(:where(.peer):disabled ~ *) {\n    opacity: 70%;\n  }\n}\n.file\\:border-0 {\n  &::file-selector-button {\n    border-style: var(--tw-border-style);\n    border-width: 0px;\n  }\n}\n.file\\:bg-transparent {\n  &::file-selector-button {\n    background-color: transparent;\n  }\n}\n.file\\:text-sm {\n  &::file-selector-button {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n}\n.file\\:font-medium {\n  &::file-selector-button {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n}\n.hover\\:underline {\n  &:hover {\n    @media (hover: hover) {\n      text-decoration-line: underline;\n    }\n  }\n}\n.focus\\:border-aic-blue {\n  &:focus {\n    border-color: var(--color-aic-blue);\n  }\n}\n.focus\\:shadow-\\[0_0_0_2px_var\\(--color-aic-blue-glow\\)\\] {\n  &:focus {\n    --tw-shadow: 0 0 0 2px var(--tw-shadow-color, var(--color-aic-blue-glow));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n}\n.focus-visible\\:ring-2 {\n  &:focus-visible {\n    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n}\n.focus-visible\\:ring-offset-2 {\n  &:focus-visible {\n    --tw-ring-offset-width: 2px;\n    --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n  }\n}\n.focus-visible\\:outline-none {\n  &:focus-visible {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n}\n.disabled\\:pointer-events-none {\n  &:disabled {\n    pointer-events: none;\n  }\n}\n.disabled\\:cursor-not-allowed {\n  &:disabled {\n    cursor: not-allowed;\n  }\n}\n.disabled\\:opacity-50 {\n  &:disabled {\n    opacity: 50%;\n  }\n}\n.sm\\:grid-cols-2 {\n  @media (width >= 40rem) {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n}\n.sm\\:grid-cols-3 {\n  @media (width >= 40rem) {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n}\n.sm\\:rounded-lg {\n  @media (width >= 40rem) {\n    border-radius: var(--radius-lg);\n  }\n}\n.sm\\:px-6 {\n  @media (width >= 40rem) {\n    padding-inline: calc(var(--spacing) * 6);\n  }\n}\n.lg\\:grid-cols-3 {\n  @media (width >= 64rem) {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n}\n.lg\\:grid-cols-4 {\n  @media (width >= 64rem) {\n    grid-template-columns: repeat(4, minmax(0, 1fr));\n  }\n}\n.lg\\:grid-cols-5 {\n  @media (width >= 64rem) {\n    grid-template-columns: repeat(5, minmax(0, 1fr));\n  }\n}\n.lg\\:grid-cols-6 {\n  @media (width >= 64rem) {\n    grid-template-columns: repeat(6, minmax(0, 1fr));\n  }\n}\n.lg\\:px-8 {\n  @media (width >= 64rem) {\n    padding-inline: calc(var(--spacing) * 8);\n  }\n}\n.dark\\:scale-0 {\n  @media (prefers-color-scheme: dark) {\n    --tw-scale-x: 0%;\n    --tw-scale-y: 0%;\n    --tw-scale-z: 0%;\n    scale: var(--tw-scale-x) var(--tw-scale-y);\n  }\n}\n.dark\\:scale-100 {\n  @media (prefers-color-scheme: dark) {\n    --tw-scale-x: 100%;\n    --tw-scale-y: 100%;\n    --tw-scale-z: 100%;\n    scale: var(--tw-scale-x) var(--tw-scale-y);\n  }\n}\n.dark\\:-rotate-90 {\n  @media (prefers-color-scheme: dark) {\n    rotate: calc(90deg * -1);\n  }\n}\n.dark\\:rotate-0 {\n  @media (prefers-color-scheme: dark) {\n    rotate: 0deg;\n  }\n}\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n[data-theme="dark"] {\n  --color-aic-bg: var(--color-dark-bg);\n  --color-aic-bg-panel: var(--color-dark-bg-panel);\n  --color-aic-bg-elevated: var(--color-dark-bg-elevated);\n  --color-aic-border: var(--color-dark-border);\n  --color-aic-border-light: var(--color-dark-border-light);\n  --color-aic-text: var(--color-dark-text);\n  --color-aic-text-secondary: var(--color-dark-text-secondary);\n  --color-aic-text-tertiary: var(--color-dark-text-tertiary);\n  --color-aic-error-bg: var(--color-dark-error-bg);\n  --color-aic-error-border: var(--color-dark-error-border);\n}\n@property --tw-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-scale-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-rotate-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-z {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-space-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-leading {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-tracking {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-outline-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-drop-shadow-size {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-duration {\n  syntax: "*";\n  inherits: false;\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-translate-x: 0;\n      --tw-translate-y: 0;\n      --tw-translate-z: 0;\n      --tw-scale-x: 1;\n      --tw-scale-y: 1;\n      --tw-scale-z: 1;\n      --tw-rotate-x: initial;\n      --tw-rotate-y: initial;\n      --tw-rotate-z: initial;\n      --tw-skew-x: initial;\n      --tw-skew-y: initial;\n      --tw-space-y-reverse: 0;\n      --tw-border-style: solid;\n      --tw-leading: initial;\n      --tw-font-weight: initial;\n      --tw-tracking: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-outline-style: solid;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-duration: initial;\n    }\n  }\n}\n',"",{version:3,sources:["<no source>","webpack://./node_modules/tailwindcss/utilities.css","webpack://./node_modules/tailwindcss/theme.css","webpack://./src/styles/main.css"],names:[],mappings:"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",sourcesContent:[null,"@tailwind utilities;\n","@theme default {\n  --font-sans:\n    ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  --font-serif: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;\n  --font-mono:\n    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',\n    monospace;\n\n  --color-red-50: oklch(97.1% 0.013 17.38);\n  --color-red-100: oklch(93.6% 0.032 17.717);\n  --color-red-200: oklch(88.5% 0.062 18.334);\n  --color-red-300: oklch(80.8% 0.114 19.571);\n  --color-red-400: oklch(70.4% 0.191 22.216);\n  --color-red-500: oklch(63.7% 0.237 25.331);\n  --color-red-600: oklch(57.7% 0.245 27.325);\n  --color-red-700: oklch(50.5% 0.213 27.518);\n  --color-red-800: oklch(44.4% 0.177 26.899);\n  --color-red-900: oklch(39.6% 0.141 25.723);\n  --color-red-950: oklch(25.8% 0.092 26.042);\n\n  --color-orange-50: oklch(98% 0.016 73.684);\n  --color-orange-100: oklch(95.4% 0.038 75.164);\n  --color-orange-200: oklch(90.1% 0.076 70.697);\n  --color-orange-300: oklch(83.7% 0.128 66.29);\n  --color-orange-400: oklch(75% 0.183 55.934);\n  --color-orange-500: oklch(70.5% 0.213 47.604);\n  --color-orange-600: oklch(64.6% 0.222 41.116);\n  --color-orange-700: oklch(55.3% 0.195 38.402);\n  --color-orange-800: oklch(47% 0.157 37.304);\n  --color-orange-900: oklch(40.8% 0.123 38.172);\n  --color-orange-950: oklch(26.6% 0.079 36.259);\n\n  --color-amber-50: oklch(98.7% 0.022 95.277);\n  --color-amber-100: oklch(96.2% 0.059 95.617);\n  --color-amber-200: oklch(92.4% 0.12 95.746);\n  --color-amber-300: oklch(87.9% 0.169 91.605);\n  --color-amber-400: oklch(82.8% 0.189 84.429);\n  --color-amber-500: oklch(76.9% 0.188 70.08);\n  --color-amber-600: oklch(66.6% 0.179 58.318);\n  --color-amber-700: oklch(55.5% 0.163 48.998);\n  --color-amber-800: oklch(47.3% 0.137 46.201);\n  --color-amber-900: oklch(41.4% 0.112 45.904);\n  --color-amber-950: oklch(27.9% 0.077 45.635);\n\n  --color-yellow-50: oklch(98.7% 0.026 102.212);\n  --color-yellow-100: oklch(97.3% 0.071 103.193);\n  --color-yellow-200: oklch(94.5% 0.129 101.54);\n  --color-yellow-300: oklch(90.5% 0.182 98.111);\n  --color-yellow-400: oklch(85.2% 0.199 91.936);\n  --color-yellow-500: oklch(79.5% 0.184 86.047);\n  --color-yellow-600: oklch(68.1% 0.162 75.834);\n  --color-yellow-700: oklch(55.4% 0.135 66.442);\n  --color-yellow-800: oklch(47.6% 0.114 61.907);\n  --color-yellow-900: oklch(42.1% 0.095 57.708);\n  --color-yellow-950: oklch(28.6% 0.066 53.813);\n\n  --color-lime-50: oklch(98.6% 0.031 120.757);\n  --color-lime-100: oklch(96.7% 0.067 122.328);\n  --color-lime-200: oklch(93.8% 0.127 124.321);\n  --color-lime-300: oklch(89.7% 0.196 126.665);\n  --color-lime-400: oklch(84.1% 0.238 128.85);\n  --color-lime-500: oklch(76.8% 0.233 130.85);\n  --color-lime-600: oklch(64.8% 0.2 131.684);\n  --color-lime-700: oklch(53.2% 0.157 131.589);\n  --color-lime-800: oklch(45.3% 0.124 130.933);\n  --color-lime-900: oklch(40.5% 0.101 131.063);\n  --color-lime-950: oklch(27.4% 0.072 132.109);\n\n  --color-green-50: oklch(98.2% 0.018 155.826);\n  --color-green-100: oklch(96.2% 0.044 156.743);\n  --color-green-200: oklch(92.5% 0.084 155.995);\n  --color-green-300: oklch(87.1% 0.15 154.449);\n  --color-green-400: oklch(79.2% 0.209 151.711);\n  --color-green-500: oklch(72.3% 0.219 149.579);\n  --color-green-600: oklch(62.7% 0.194 149.214);\n  --color-green-700: oklch(52.7% 0.154 150.069);\n  --color-green-800: oklch(44.8% 0.119 151.328);\n  --color-green-900: oklch(39.3% 0.095 152.535);\n  --color-green-950: oklch(26.6% 0.065 152.934);\n\n  --color-emerald-50: oklch(97.9% 0.021 166.113);\n  --color-emerald-100: oklch(95% 0.052 163.051);\n  --color-emerald-200: oklch(90.5% 0.093 164.15);\n  --color-emerald-300: oklch(84.5% 0.143 164.978);\n  --color-emerald-400: oklch(76.5% 0.177 163.223);\n  --color-emerald-500: oklch(69.6% 0.17 162.48);\n  --color-emerald-600: oklch(59.6% 0.145 163.225);\n  --color-emerald-700: oklch(50.8% 0.118 165.612);\n  --color-emerald-800: oklch(43.2% 0.095 166.913);\n  --color-emerald-900: oklch(37.8% 0.077 168.94);\n  --color-emerald-950: oklch(26.2% 0.051 172.552);\n\n  --color-teal-50: oklch(98.4% 0.014 180.72);\n  --color-teal-100: oklch(95.3% 0.051 180.801);\n  --color-teal-200: oklch(91% 0.096 180.426);\n  --color-teal-300: oklch(85.5% 0.138 181.071);\n  --color-teal-400: oklch(77.7% 0.152 181.912);\n  --color-teal-500: oklch(70.4% 0.14 182.503);\n  --color-teal-600: oklch(60% 0.118 184.704);\n  --color-teal-700: oklch(51.1% 0.096 186.391);\n  --color-teal-800: oklch(43.7% 0.078 188.216);\n  --color-teal-900: oklch(38.6% 0.063 188.416);\n  --color-teal-950: oklch(27.7% 0.046 192.524);\n\n  --color-cyan-50: oklch(98.4% 0.019 200.873);\n  --color-cyan-100: oklch(95.6% 0.045 203.388);\n  --color-cyan-200: oklch(91.7% 0.08 205.041);\n  --color-cyan-300: oklch(86.5% 0.127 207.078);\n  --color-cyan-400: oklch(78.9% 0.154 211.53);\n  --color-cyan-500: oklch(71.5% 0.143 215.221);\n  --color-cyan-600: oklch(60.9% 0.126 221.723);\n  --color-cyan-700: oklch(52% 0.105 223.128);\n  --color-cyan-800: oklch(45% 0.085 224.283);\n  --color-cyan-900: oklch(39.8% 0.07 227.392);\n  --color-cyan-950: oklch(30.2% 0.056 229.695);\n\n  --color-sky-50: oklch(97.7% 0.013 236.62);\n  --color-sky-100: oklch(95.1% 0.026 236.824);\n  --color-sky-200: oklch(90.1% 0.058 230.902);\n  --color-sky-300: oklch(82.8% 0.111 230.318);\n  --color-sky-400: oklch(74.6% 0.16 232.661);\n  --color-sky-500: oklch(68.5% 0.169 237.323);\n  --color-sky-600: oklch(58.8% 0.158 241.966);\n  --color-sky-700: oklch(50% 0.134 242.749);\n  --color-sky-800: oklch(44.3% 0.11 240.79);\n  --color-sky-900: oklch(39.1% 0.09 240.876);\n  --color-sky-950: oklch(29.3% 0.066 243.157);\n\n  --color-blue-50: oklch(97% 0.014 254.604);\n  --color-blue-100: oklch(93.2% 0.032 255.585);\n  --color-blue-200: oklch(88.2% 0.059 254.128);\n  --color-blue-300: oklch(80.9% 0.105 251.813);\n  --color-blue-400: oklch(70.7% 0.165 254.624);\n  --color-blue-500: oklch(62.3% 0.214 259.815);\n  --color-blue-600: oklch(54.6% 0.245 262.881);\n  --color-blue-700: oklch(48.8% 0.243 264.376);\n  --color-blue-800: oklch(42.4% 0.199 265.638);\n  --color-blue-900: oklch(37.9% 0.146 265.522);\n  --color-blue-950: oklch(28.2% 0.091 267.935);\n\n  --color-indigo-50: oklch(96.2% 0.018 272.314);\n  --color-indigo-100: oklch(93% 0.034 272.788);\n  --color-indigo-200: oklch(87% 0.065 274.039);\n  --color-indigo-300: oklch(78.5% 0.115 274.713);\n  --color-indigo-400: oklch(67.3% 0.182 276.935);\n  --color-indigo-500: oklch(58.5% 0.233 277.117);\n  --color-indigo-600: oklch(51.1% 0.262 276.966);\n  --color-indigo-700: oklch(45.7% 0.24 277.023);\n  --color-indigo-800: oklch(39.8% 0.195 277.366);\n  --color-indigo-900: oklch(35.9% 0.144 278.697);\n  --color-indigo-950: oklch(25.7% 0.09 281.288);\n\n  --color-violet-50: oklch(96.9% 0.016 293.756);\n  --color-violet-100: oklch(94.3% 0.029 294.588);\n  --color-violet-200: oklch(89.4% 0.057 293.283);\n  --color-violet-300: oklch(81.1% 0.111 293.571);\n  --color-violet-400: oklch(70.2% 0.183 293.541);\n  --color-violet-500: oklch(60.6% 0.25 292.717);\n  --color-violet-600: oklch(54.1% 0.281 293.009);\n  --color-violet-700: oklch(49.1% 0.27 292.581);\n  --color-violet-800: oklch(43.2% 0.232 292.759);\n  --color-violet-900: oklch(38% 0.189 293.745);\n  --color-violet-950: oklch(28.3% 0.141 291.089);\n\n  --color-purple-50: oklch(97.7% 0.014 308.299);\n  --color-purple-100: oklch(94.6% 0.033 307.174);\n  --color-purple-200: oklch(90.2% 0.063 306.703);\n  --color-purple-300: oklch(82.7% 0.119 306.383);\n  --color-purple-400: oklch(71.4% 0.203 305.504);\n  --color-purple-500: oklch(62.7% 0.265 303.9);\n  --color-purple-600: oklch(55.8% 0.288 302.321);\n  --color-purple-700: oklch(49.6% 0.265 301.924);\n  --color-purple-800: oklch(43.8% 0.218 303.724);\n  --color-purple-900: oklch(38.1% 0.176 304.987);\n  --color-purple-950: oklch(29.1% 0.149 302.717);\n\n  --color-fuchsia-50: oklch(97.7% 0.017 320.058);\n  --color-fuchsia-100: oklch(95.2% 0.037 318.852);\n  --color-fuchsia-200: oklch(90.3% 0.076 319.62);\n  --color-fuchsia-300: oklch(83.3% 0.145 321.434);\n  --color-fuchsia-400: oklch(74% 0.238 322.16);\n  --color-fuchsia-500: oklch(66.7% 0.295 322.15);\n  --color-fuchsia-600: oklch(59.1% 0.293 322.896);\n  --color-fuchsia-700: oklch(51.8% 0.253 323.949);\n  --color-fuchsia-800: oklch(45.2% 0.211 324.591);\n  --color-fuchsia-900: oklch(40.1% 0.17 325.612);\n  --color-fuchsia-950: oklch(29.3% 0.136 325.661);\n\n  --color-pink-50: oklch(97.1% 0.014 343.198);\n  --color-pink-100: oklch(94.8% 0.028 342.258);\n  --color-pink-200: oklch(89.9% 0.061 343.231);\n  --color-pink-300: oklch(82.3% 0.12 346.018);\n  --color-pink-400: oklch(71.8% 0.202 349.761);\n  --color-pink-500: oklch(65.6% 0.241 354.308);\n  --color-pink-600: oklch(59.2% 0.249 0.584);\n  --color-pink-700: oklch(52.5% 0.223 3.958);\n  --color-pink-800: oklch(45.9% 0.187 3.815);\n  --color-pink-900: oklch(40.8% 0.153 2.432);\n  --color-pink-950: oklch(28.4% 0.109 3.907);\n\n  --color-rose-50: oklch(96.9% 0.015 12.422);\n  --color-rose-100: oklch(94.1% 0.03 12.58);\n  --color-rose-200: oklch(89.2% 0.058 10.001);\n  --color-rose-300: oklch(81% 0.117 11.638);\n  --color-rose-400: oklch(71.2% 0.194 13.428);\n  --color-rose-500: oklch(64.5% 0.246 16.439);\n  --color-rose-600: oklch(58.6% 0.253 17.585);\n  --color-rose-700: oklch(51.4% 0.222 16.935);\n  --color-rose-800: oklch(45.5% 0.188 13.697);\n  --color-rose-900: oklch(41% 0.159 10.272);\n  --color-rose-950: oklch(27.1% 0.105 12.094);\n\n  --color-slate-50: oklch(98.4% 0.003 247.858);\n  --color-slate-100: oklch(96.8% 0.007 247.896);\n  --color-slate-200: oklch(92.9% 0.013 255.508);\n  --color-slate-300: oklch(86.9% 0.022 252.894);\n  --color-slate-400: oklch(70.4% 0.04 256.788);\n  --color-slate-500: oklch(55.4% 0.046 257.417);\n  --color-slate-600: oklch(44.6% 0.043 257.281);\n  --color-slate-700: oklch(37.2% 0.044 257.287);\n  --color-slate-800: oklch(27.9% 0.041 260.031);\n  --color-slate-900: oklch(20.8% 0.042 265.755);\n  --color-slate-950: oklch(12.9% 0.042 264.695);\n\n  --color-gray-50: oklch(98.5% 0.002 247.839);\n  --color-gray-100: oklch(96.7% 0.003 264.542);\n  --color-gray-200: oklch(92.8% 0.006 264.531);\n  --color-gray-300: oklch(87.2% 0.01 258.338);\n  --color-gray-400: oklch(70.7% 0.022 261.325);\n  --color-gray-500: oklch(55.1% 0.027 264.364);\n  --color-gray-600: oklch(44.6% 0.03 256.802);\n  --color-gray-700: oklch(37.3% 0.034 259.733);\n  --color-gray-800: oklch(27.8% 0.033 256.848);\n  --color-gray-900: oklch(21% 0.034 264.665);\n  --color-gray-950: oklch(13% 0.028 261.692);\n\n  --color-zinc-50: oklch(98.5% 0 0);\n  --color-zinc-100: oklch(96.7% 0.001 286.375);\n  --color-zinc-200: oklch(92% 0.004 286.32);\n  --color-zinc-300: oklch(87.1% 0.006 286.286);\n  --color-zinc-400: oklch(70.5% 0.015 286.067);\n  --color-zinc-500: oklch(55.2% 0.016 285.938);\n  --color-zinc-600: oklch(44.2% 0.017 285.786);\n  --color-zinc-700: oklch(37% 0.013 285.805);\n  --color-zinc-800: oklch(27.4% 0.006 286.033);\n  --color-zinc-900: oklch(21% 0.006 285.885);\n  --color-zinc-950: oklch(14.1% 0.005 285.823);\n\n  --color-neutral-50: oklch(98.5% 0 0);\n  --color-neutral-100: oklch(97% 0 0);\n  --color-neutral-200: oklch(92.2% 0 0);\n  --color-neutral-300: oklch(87% 0 0);\n  --color-neutral-400: oklch(70.8% 0 0);\n  --color-neutral-500: oklch(55.6% 0 0);\n  --color-neutral-600: oklch(43.9% 0 0);\n  --color-neutral-700: oklch(37.1% 0 0);\n  --color-neutral-800: oklch(26.9% 0 0);\n  --color-neutral-900: oklch(20.5% 0 0);\n  --color-neutral-950: oklch(14.5% 0 0);\n\n  --color-stone-50: oklch(98.5% 0.001 106.423);\n  --color-stone-100: oklch(97% 0.001 106.424);\n  --color-stone-200: oklch(92.3% 0.003 48.717);\n  --color-stone-300: oklch(86.9% 0.005 56.366);\n  --color-stone-400: oklch(70.9% 0.01 56.259);\n  --color-stone-500: oklch(55.3% 0.013 58.071);\n  --color-stone-600: oklch(44.4% 0.011 73.639);\n  --color-stone-700: oklch(37.4% 0.01 67.558);\n  --color-stone-800: oklch(26.8% 0.007 34.298);\n  --color-stone-900: oklch(21.6% 0.006 56.043);\n  --color-stone-950: oklch(14.7% 0.004 49.25);\n\n  --color-black: #000;\n  --color-white: #fff;\n\n  --spacing: 0.25rem;\n\n  --breakpoint-sm: 40rem;\n  --breakpoint-md: 48rem;\n  --breakpoint-lg: 64rem;\n  --breakpoint-xl: 80rem;\n  --breakpoint-2xl: 96rem;\n\n  --container-3xs: 16rem;\n  --container-2xs: 18rem;\n  --container-xs: 20rem;\n  --container-sm: 24rem;\n  --container-md: 28rem;\n  --container-lg: 32rem;\n  --container-xl: 36rem;\n  --container-2xl: 42rem;\n  --container-3xl: 48rem;\n  --container-4xl: 56rem;\n  --container-5xl: 64rem;\n  --container-6xl: 72rem;\n  --container-7xl: 80rem;\n\n  --text-xs: 0.75rem;\n  --text-xs--line-height: calc(1 / 0.75);\n  --text-sm: 0.875rem;\n  --text-sm--line-height: calc(1.25 / 0.875);\n  --text-base: 1rem;\n  --text-base--line-height: calc(1.5 / 1);\n  --text-lg: 1.125rem;\n  --text-lg--line-height: calc(1.75 / 1.125);\n  --text-xl: 1.25rem;\n  --text-xl--line-height: calc(1.75 / 1.25);\n  --text-2xl: 1.5rem;\n  --text-2xl--line-height: calc(2 / 1.5);\n  --text-3xl: 1.875rem;\n  --text-3xl--line-height: calc(2.25 / 1.875);\n  --text-4xl: 2.25rem;\n  --text-4xl--line-height: calc(2.5 / 2.25);\n  --text-5xl: 3rem;\n  --text-5xl--line-height: 1;\n  --text-6xl: 3.75rem;\n  --text-6xl--line-height: 1;\n  --text-7xl: 4.5rem;\n  --text-7xl--line-height: 1;\n  --text-8xl: 6rem;\n  --text-8xl--line-height: 1;\n  --text-9xl: 8rem;\n  --text-9xl--line-height: 1;\n\n  --font-weight-thin: 100;\n  --font-weight-extralight: 200;\n  --font-weight-light: 300;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --font-weight-bold: 700;\n  --font-weight-extrabold: 800;\n  --font-weight-black: 900;\n\n  --tracking-tighter: -0.05em;\n  --tracking-tight: -0.025em;\n  --tracking-normal: 0em;\n  --tracking-wide: 0.025em;\n  --tracking-wider: 0.05em;\n  --tracking-widest: 0.1em;\n\n  --leading-tight: 1.25;\n  --leading-snug: 1.375;\n  --leading-normal: 1.5;\n  --leading-relaxed: 1.625;\n  --leading-loose: 2;\n\n  --radius-xs: 0.125rem;\n  --radius-sm: 0.25rem;\n  --radius-md: 0.375rem;\n  --radius-lg: 0.5rem;\n  --radius-xl: 0.75rem;\n  --radius-2xl: 1rem;\n  --radius-3xl: 1.5rem;\n  --radius-4xl: 2rem;\n\n  --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);\n  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n\n  --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);\n  --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);\n  --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);\n\n  --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);\n  --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);\n  --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);\n  --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);\n  --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);\n  --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);\n\n  --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);\n  --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);\n  --text-shadow-sm:\n    0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075), 0px 2px 2px rgb(0 0 0 / 0.075);\n  --text-shadow-md:\n    0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1), 0px 2px 4px rgb(0 0 0 / 0.1);\n  --text-shadow-lg:\n    0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1), 0px 4px 8px rgb(0 0 0 / 0.1);\n\n  --ease-in: cubic-bezier(0.4, 0, 1, 1);\n  --ease-out: cubic-bezier(0, 0, 0.2, 1);\n  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n\n  --animate-spin: spin 1s linear infinite;\n  --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n  --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  --animate-bounce: bounce 1s infinite;\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes ping {\n    75%,\n    100% {\n      transform: scale(2);\n      opacity: 0;\n    }\n  }\n\n  @keyframes pulse {\n    50% {\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes bounce {\n    0%,\n    100% {\n      transform: translateY(-25%);\n      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n    }\n\n    50% {\n      transform: none;\n      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n    }\n  }\n\n  --blur-xs: 4px;\n  --blur-sm: 8px;\n  --blur-md: 12px;\n  --blur-lg: 16px;\n  --blur-xl: 24px;\n  --blur-2xl: 40px;\n  --blur-3xl: 64px;\n\n  --perspective-dramatic: 100px;\n  --perspective-near: 300px;\n  --perspective-normal: 500px;\n  --perspective-midrange: 800px;\n  --perspective-distant: 1200px;\n\n  --aspect-video: 16 / 9;\n\n  --default-transition-duration: 150ms;\n  --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  --default-font-family: --theme(--font-sans, initial);\n  --default-font-feature-settings: --theme(--font-sans--font-feature-settings, initial);\n  --default-font-variation-settings: --theme(--font-sans--font-variation-settings, initial);\n  --default-mono-font-family: --theme(--font-mono, initial);\n  --default-mono-font-feature-settings: --theme(--font-mono--font-feature-settings, initial);\n  --default-mono-font-variation-settings: --theme(--font-mono--font-variation-settings, initial);\n}\n\n/* Deprecated */\n@theme default inline reference {\n  --blur: 8px;\n  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);\n  --drop-shadow: 0 1px 2px rgb(0 0 0 / 0.1), 0 1px 1px rgb(0 0 0 / 0.06);\n  --radius: 0.25rem;\n  --max-width-prose: 65ch;\n}\n",'/* ================================================================\r\n   AI Compose — Main Stylesheet (Tailwind CSS v4)\r\n\r\n   This file bootstraps Tailwind CSS and defines custom design tokens\r\n   through the CSS-first @theme directive. All values align with the\r\n   existing AI Compose design system (--aic-* custom properties).\r\n\r\n   © Rizonetech (Pty) Ltd. — https://rizonesoft.com\r\n   ================================================================ */\r\n\r\n@import "tailwindcss/theme";\r\n@import "tailwindcss/utilities";\r\n\r\n/* Box-sizing reset (preflight is skipped to preserve existing styles) */\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* ================================================================\r\n   Custom Design Tokens\r\n   ================================================================ */\r\n\r\n@theme {\r\n  /* Brand — AI Compose sparkle icon palette */\r\n  --color-aic-blue: #3b9eff;\r\n  --color-aic-blue-hover: #2188ed;\r\n  --color-aic-blue-light: #e8f3ff;\r\n  --color-aic-blue-glow: rgba(59, 158, 255, 0.15);\r\n  --color-aic-purple: #7b61db;\r\n  --color-aic-purple-hover: #6b51c8;\r\n  --color-aic-green: #22c55e;\r\n  --color-aic-amber: #f59e0b;\r\n  --color-aic-teal: #14b8a6;\r\n\r\n  /* Surfaces */\r\n  --color-aic-bg: #ffffff;\r\n  --color-aic-bg-panel: #f8f9fb;\r\n  --color-aic-bg-elevated: #ffffff;\r\n\r\n  /* Borders */\r\n  --color-aic-border: #e2e5ea;\r\n  --color-aic-border-light: #eef0f3;\r\n  --color-aic-border-focus: #3b9eff;\r\n\r\n  /* Text */\r\n  --color-aic-text: #1a1d23;\r\n  --color-aic-text-secondary: #5e6470;\r\n  --color-aic-text-tertiary: #8e95a2;\r\n  --color-aic-text-inverse: #ffffff;\r\n\r\n  /* Status */\r\n  --color-aic-error-bg: #fff1f0;\r\n  --color-aic-error-text: #d1242f;\r\n  --color-aic-error-border: #ffd2cf;\r\n  --color-aic-success: #1a7f37;\r\n\r\n  /* Spacing (4px grid) */\r\n  --spacing-xs: 4px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 12px;\r\n  --spacing-lg: 22px;\r\n  --spacing-xl: 24px;\r\n\r\n  /* Border radius */\r\n  --radius-xs: 4px;\r\n  --radius-sm: 6px;\r\n  --radius-md: 8px;\r\n\r\n  /* Typography */\r\n  --font-aic: "Poppins", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\r\n  --text-xs: 12px;\r\n  --text-sm: 13px;\r\n  --text-md: 13px;\r\n  --text-lg: 15px;\r\n  --text-xl: 16px;\r\n\r\n  /* Motion */\r\n  --ease-aic: cubic-bezier(0.25, 0.1, 0.25, 1);\r\n  --duration-aic: 150ms;\r\n\r\n  /* Dark theme surfaces (used via .dark variant) */\r\n  --color-dark-bg: #1e1e1e;\r\n  --color-dark-bg-panel: #252526;\r\n  --color-dark-bg-elevated: #2d2d2d;\r\n  --color-dark-border: #3e3e42;\r\n  --color-dark-border-light: #333337;\r\n  --color-dark-text: #e0e0e0;\r\n  --color-dark-text-secondary: #a0a0a0;\r\n  --color-dark-text-tertiary: #8a8a8a;\r\n  --color-dark-error-bg: #3a1a1a;\r\n  --color-dark-error-border: #5c2626;\r\n}\r\n\r\n/* ================================================================\r\n   Dark theme — activated by adding `data-theme="dark"` to <html>\r\n   or via Outlook\'s theme detection in taskpane.ts\r\n   ================================================================ */\r\n\r\n[data-theme="dark"] {\r\n  --color-aic-bg: var(--color-dark-bg);\r\n  --color-aic-bg-panel: var(--color-dark-bg-panel);\r\n  --color-aic-bg-elevated: var(--color-dark-bg-elevated);\r\n  --color-aic-border: var(--color-dark-border);\r\n  --color-aic-border-light: var(--color-dark-border-light);\r\n  --color-aic-text: var(--color-dark-text);\r\n  --color-aic-text-secondary: var(--color-dark-text-secondary);\r\n  --color-aic-text-tertiary: var(--color-dark-text-tertiary);\r\n  --color-aic-error-bg: var(--color-dark-error-bg);\r\n  --color-aic-error-border: var(--color-dark-error-border);\r\n}\r\n'],sourceRoot:""}]);const s=a},88969(n,e,t){"use strict";t.d(e,{A:()=>d});var o=t(71354),r=t.n(o),i=t(76314),a=t.n(i),s=t(4417),l=t.n(s),c=new URL(t(23753),t.b),A=a()(r()),u=l()(c);A.push([n.id,`/**\n * AI Compose — Component Styles\n *\n * Component-level CSS for interactive states, dynamic content,\n * and polished UI elements that benefit from semantic class names.\n * Design tokens come from \`src/styles/main.css\` via Tailwind @theme.\n *\n * © Rizonetech (Pty) Ltd. — https://rizonesoft.com\n */\n\n/* ================================================================\n   Utility — hidden (Tailwind v4 may not scan .ts files for this)\n   ================================================================ */\n\n.hidden {\n  display: none !important;\n}\n\n/* ================================================================\n   Scrollbar — slim, theme-aware\n   ================================================================ */\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--color-aic-border);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Tab bar\n   ================================================================ */\n\n.aic-tab {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  color: var(--color-aic-text-secondary);\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid transparent;\n  cursor: pointer;\n  transition:\n    color var(--duration-aic) var(--ease-aic),\n    border-color var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n}\n\n.aic-tab:hover {\n  color: var(--color-aic-text);\n}\n\n.aic-tab--active {\n  color: var(--color-aic-blue);\n  border-bottom-color: var(--color-aic-blue);\n}\n\n.aic-tab--icon {\n  padding: var(--spacing-sm);\n}\n\n/* ================================================================\n   Dropdown menu — proper menu component\n   ================================================================ */\n\n.aic-dropdown {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 4px);\n  min-width: 200px;\n  background: var(--color-aic-bg-elevated);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  box-shadow:\n    0 4px 16px rgba(0, 0, 0, 0.1),\n    0 1px 4px rgba(0, 0, 0, 0.06);\n  padding: var(--spacing-xs) 0;\n  z-index: 20;\n  overflow: hidden;\n}\n\n.aic-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: background var(--duration-aic) var(--ease-aic);\n  text-align: left;\n}\n\n.aic-dropdown__item:hover {\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-dropdown__item:active {\n  background: var(--color-aic-blue-light);\n}\n\n.aic-dropdown__item svg {\n  color: var(--color-aic-text-tertiary);\n  flex-shrink: 0;\n}\n\n.aic-dropdown__item:hover svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-dropdown__item--active {\n  background: var(--color-aic-blue-light);\n  color: var(--color-aic-blue);\n  font-weight: 500;\n}\n\n.aic-dropdown__item--active svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-split--open .aic-tab--icon {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n  border-radius: var(--radius-xs);\n}\n\n/* ================================================================\n   Buttons\n   ================================================================ */\n\n.aic-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-xs);\n  padding: 9px var(--spacing-lg);\n  border-radius: var(--radius-xs);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n  border: 1px solid transparent;\n  line-height: 1;\n}\n\n.aic-btn:active {\n  transform: scale(0.97);\n}\n\n.aic-btn:focus-visible {\n  outline: 2px solid var(--color-aic-blue);\n  outline-offset: 2px;\n}\n\n.aic-btn:disabled,\n.aic-btn[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n/* Loading state — inline spinner replaces content */\n.aic-btn--loading {\n  pointer-events: none;\n  position: relative;\n  color: transparent !important;\n}\n\n.aic-btn--loading::after {\n  content: "";\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 50%;\n  left: 50%;\n  margin: -8px 0 0 -8px;\n  border: 2px solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  opacity: 0.8;\n  animation: spin 0.6s linear infinite;\n}\n\n/* Restore visible colour for the pseudo-element */\n.aic-btn--primary.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n.aic-btn--secondary.aic-btn--loading::after { color: var(--color-aic-text-secondary); }\n.aic-btn--accent.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n\n/* Primary — blue filled */\n.aic-btn--primary {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-btn--primary:hover {\n  background: var(--color-aic-blue-hover);\n  border-color: var(--color-aic-blue-hover);\n  box-shadow: 0 2px 8px rgba(59, 158, 255, 0.25);\n}\n\n/* Secondary — outlined */\n.aic-btn--secondary {\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  border-color: var(--color-aic-border);\n}\n\n.aic-btn--secondary:hover {\n  border-color: var(--color-aic-text-secondary);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n/* Accent — purple filled, icon-only square */\n\n/* Clear / reset button (×) for text inputs */\n.aic-btn-clear {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: none;\n  border-radius: 50%;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  font-size: 14px;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-btn-clear:hover {\n  background: var(--color-aic-error-bg);\n  color: var(--color-aic-error-text);\n}\n\n/* Accent — purple filled, icon-only square */\n.aic-btn--accent {\n  background: var(--color-aic-purple);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-purple);\n  padding: 9px;\n  aspect-ratio: 1;\n  justify-content: center;\n}\n\n.aic-btn--accent:hover {\n  background: var(--color-aic-purple-hover);\n  border-color: var(--color-aic-purple-hover);\n}\n\n/* Success state (JS-toggled after copy actions) */\n.aic-btn--success {\n  background: var(--color-aic-success) !important;\n  border-color: var(--color-aic-success) !important;\n  color: var(--color-aic-text-inverse) !important;\n}\n\n/* Icon-only toggle (e.g. API key show/hide) */\n.aic-btn--icon-toggle {\n  padding: 8px 10px;\n}\n\n/* Danger — destructive action */\n.aic-btn--danger {\n  background: transparent;\n  color: var(--color-aic-error-text);\n  border-color: var(--color-aic-error-border);\n}\n\n.aic-btn--danger:hover {\n  background: var(--color-aic-error-bg);\n  border-color: var(--color-aic-error-text);\n}\n\n.aic-btn--ghost {\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  border: 1px dashed var(--color-aic-border);\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-btn--ghost:hover {\n  color: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n  border-style: solid;\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-btn--ghost:disabled {\n  opacity: 0.6;\n  cursor: wait;\n}\n\n/* Utility — error text colour */\n.aic-text-error {\n  color: var(--color-aic-error-text);\n}\n\n/* ================================================================\n   Scroll-to-top button\n   ================================================================ */\n\n/* ================================================================\n   Template controls — compact select & buttons\n   ================================================================ */\n\n.aic-template-select {\n  flex: 1;\n  min-width: 0;\n  font-size: 11px;\n}\n\n.aic-template-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30px;\n  height: 30px;\n  padding: 0;\n  flex-shrink: 0;\n  border: 1px dashed var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-template-btn:hover {\n  border-style: solid;\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-template-btn--delete {\n  color: var(--color-aic-error-text);\n}\n\n.aic-template-btn--delete:hover {\n  border-color: var(--color-aic-error-text);\n  color: var(--color-aic-error-text);\n  background: var(--color-aic-error-bg);\n}\n\n/* ================================================================\n   Email Score Card\n   ================================================================ */\n\n.aic-score-card {\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-sm);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-score-card__header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-score-card__circle {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 3px solid var(--aic-score-color, var(--color-aic-border));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.aic-score-card__value {\n  font-size: 13px;\n  font-weight: 700;\n  color: var(--aic-score-color, var(--color-aic-text-secondary));\n}\n\n.aic-score-card__label {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-score-card__bars {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-score-bar {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.aic-score-bar__label {\n  font-size: 11px;\n  color: var(--color-aic-text-tertiary);\n  width: 50px;\n  flex-shrink: 0;\n}\n\n.aic-score-bar__track {\n  flex: 1;\n  height: 6px;\n  background: var(--color-aic-border-light);\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.aic-score-bar__fill {\n  height: 100%;\n  border-radius: 3px;\n  background: var(--aic-bar-color, var(--color-aic-blue));\n  width: 0%;\n  transition: width 0.6s ease;\n}\n\n.aic-score-bar__val {\n  font-size: 10px;\n  font-weight: 600;\n  color: var(--color-aic-text-tertiary);\n  width: 16px;\n  text-align: right;\n  flex-shrink: 0;\n}\n\n.aic-scroll-top {\n  position: fixed;\n  bottom: 5px;\n  right: 16px;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 1px solid var(--color-aic-border);\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  transition: all var(--duration-aic) var(--ease-aic);\n  opacity: 1;\n  z-index: 50;\n}\n\n.aic-scroll-top.hidden {\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(8px);\n}\n\n.aic-scroll-top:hover {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Result section separator\n   ================================================================ */\n\n.aic-section--result {\n  margin-top: var(--spacing-sm);\n  border-top: 1px solid var(--color-aic-border);\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);\n  animation: slideIn 0.3s var(--ease-aic) both;\n}\n\n/* Section heading polish */\n.aic-section h2 {\n  letter-spacing: 0.01em;\n}\n\n/* ================================================================\n   Form controls — shared styles for select, input, textarea\n   ================================================================ */\n\n.aic-select {\n  display: block;\n  width: 100%;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  cursor: pointer;\n  appearance: none;\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  background-position: right 8px center;\n  padding-right: 28px;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-select:hover {\n  border-color: var(--color-aic-text-secondary);\n}\n\n.aic-select:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n.aic-input {\n  flex: 1;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-input::placeholder {\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-input:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n/* ================================================================\n   Radio group\n   ================================================================ */\n\n.aic-radio-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n\n.aic-radio-group--vertical {\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-radio {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-radio input[type="radio"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 50%;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-radio input[type="radio"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Checkbox\n   ================================================================ */\n\n.aic-checkbox {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-checkbox input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 3px;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-checkbox input[type="checkbox"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked {\n  background: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  width: 4px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n/* ================================================================\n   Context banner (reply-context)\n   ================================================================ */\n\n.aic-context-banner {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-lg);\n}\n\n/* ================================================================\n   Hint text\n   ================================================================ */\n\n.aic-hint {\n  font-size: var(--text-sm);\n  color: var(--color-aic-text-tertiary);\n  margin-bottom: var(--spacing-lg);\n  font-style: italic;\n}\n\n/* ================================================================\n   Reply suggestion chips\n   ================================================================ */\n\n.aic-suggestion-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border: 1px solid var(--color-aic-border);\n  border-radius: 999px;\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  font-size: var(--text-xs);\n  line-height: 1.4;\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-suggestion-chip:hover {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-suggestion-chip--active {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.08);\n}\n\n/* ================================================================\n   Preview — rendered HTML content area\n   ================================================================ */\n\n.aic-preview {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-md);\n  font-size: var(--text-md);\n  line-height: 1.65;\n  margin-bottom: var(--spacing-lg);\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.aic-preview[contenteditable="true"] {\n  cursor: text;\n  outline: none;\n  transition: border-color var(--duration-aic) ease,\n    box-shadow var(--duration-aic) ease;\n}\n\n.aic-preview[contenteditable="true"]:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n}\n\n.aic-copy-btn {\n  position: absolute;\n  top: var(--spacing-sm);\n  right: var(--spacing-sm);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-xs);\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-tertiary);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) ease,\n    color var(--duration-aic) ease,\n    background var(--duration-aic) ease;\n}\n\n.aic-copy-btn:hover {\n  opacity: 1;\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-copy-btn--success {\n  opacity: 1;\n  color: var(--color-aic-green);\n}\n\n.aic-preview p {\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview p:last-child {\n  margin-bottom: 0;\n}\n\n.aic-preview ul,\n.aic-preview ol {\n  padding-left: 1.5em;\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview li {\n  margin-bottom: var(--spacing-xs);\n}\n\n/* ================================================================\n   Loading overlay\n   ================================================================ */\n\n.aic-loading {\n  position: fixed;\n  inset: 0;\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.85);\n  z-index: 50;\n  backdrop-filter: blur(4px);\n  opacity: 0;\n  transition: opacity var(--duration-aic) ease;\n}\n\n.aic-loading:not(.hidden) {\n  display: flex;\n  opacity: 1;\n}\n\n.aic-loading.aic-loading--fade-out {\n  opacity: 0;\n}\n\n.aic-loading__spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--color-aic-border-light);\n  border-top-color: var(--color-aic-blue);\n  border-radius: 50%;\n  animation: spin 0.7s linear infinite;\n  margin-bottom: var(--spacing-md);\n}\n\n/* ================================================================\n   Error banner\n   ================================================================ */\n\n.aic-error {\n  position: fixed;\n  bottom: var(--spacing-md);\n  left: var(--spacing-md);\n  right: var(--spacing-md);\n  display: none;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  background: var(--color-aic-error-bg);\n  border: 1px solid var(--color-aic-error-border);\n  border-radius: var(--radius-sm);\n  color: var(--color-aic-error-text);\n  font-size: var(--text-sm);\n  z-index: 50;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.aic-error:not(.hidden) {\n  display: flex;\n}\n\n.aic-error__dismiss {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: var(--radius-xs);\n  background: transparent;\n  border: none;\n  color: var(--color-aic-error-text);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) var(--ease-aic);\n}\n\n.aic-error__dismiss:hover {\n  opacity: 1;\n}\n\n/* ================================================================\n   Diff view — dynamically injected by JS\n   ================================================================ */\n\n.aic-diff {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-diff__panel {\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-diff__panel--improved {\n  border-color: rgba(26, 127, 55, 0.2);\n}\n\n.aic-diff__label {\n  font-size: var(--text-xs);\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  padding: 5px 10px;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  border-bottom: 1px solid var(--color-aic-border-light);\n}\n\n.aic-diff__panel--improved .aic-diff__label {\n  background: rgba(26, 127, 55, 0.05);\n  color: var(--color-aic-success);\n}\n\n.aic-diff__content {\n  padding: 10px 12px;\n  font-size: var(--text-sm);\n  line-height: 1.7;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.aic-diff__del {\n  background: #ffeef0;\n  color: #b31d28;\n  text-decoration: line-through;\n  text-decoration-color: rgba(179, 29, 40, 0.4);\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n.aic-diff__ins {\n  background: #e6ffec;\n  color: #22863a;\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n/* ================================================================\n   Checklist — dynamically injected action items\n   ================================================================ */\n\n.aic-task-list {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-task-item {\n  display: flex;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) 10px;\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-task-item:hover {\n  border-color: var(--color-aic-border);\n}\n\n.aic-task-item__check {\n  flex-shrink: 0;\n  display: flex;\n  align-items: flex-start;\n  padding-top: 1px;\n  cursor: pointer;\n}\n\n.aic-task-item__check input[type="checkbox"] {\n  width: 16px;\n  height: 16px;\n  accent-color: var(--color-aic-blue);\n  cursor: pointer;\n}\n\n.aic-task-item__body {\n  flex: 1;\n  min-width: 0;\n}\n\n.aic-task-item__text {\n  font-size: var(--text-md);\n  line-height: 1.5;\n  color: var(--color-aic-text);\n}\n\n.aic-task-item__meta {\n  display: flex;\n  gap: var(--spacing-md);\n  flex-wrap: wrap;\n  margin-top: 2px;\n  font-size: var(--text-xs);\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-task-item__owner strong,\n.aic-task-item__deadline strong {\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-task-item:has(input[type="checkbox"]:checked) .aic-task-item__text {\n  text-decoration: line-through;\n  color: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Translation — dynamically injected side-by-side panels\n   ================================================================ */\n\n.aic-translate-view {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-translate-panel {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-translate-panel__label {\n  padding: 6px 10px;\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n  background: var(--color-aic-bg);\n  border-bottom: 1px solid var(--color-aic-border-light);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.aic-translate-panel__text {\n  padding: 10px;\n  font-size: var(--text-md);\n  line-height: 1.6;\n  color: var(--color-aic-text);\n  max-height: 240px;\n  overflow-y: auto;\n}\n\n.aic-translate-panel--target {\n  border-color: rgba(59, 158, 255, 0.2);\n}\n\n.aic-translate-panel--target .aic-translate-panel__label {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n}\n\n/* ================================================================\n   Spinner keyframes\n   ================================================================ */\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes focusPulse {\n  0%, 100% {\n    box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  }\n  50% {\n    box-shadow: 0 0 0 4px var(--color-aic-blue-glow);\n  }\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-12px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n`,"",{version:3,sources:["webpack://./src/taskpane/taskpane.css"],names:[],mappings:"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",sourcesContent:['/**\r\n * AI Compose — Component Styles\r\n *\r\n * Component-level CSS for interactive states, dynamic content,\r\n * and polished UI elements that benefit from semantic class names.\r\n * Design tokens come from `src/styles/main.css` via Tailwind @theme.\r\n *\r\n * © Rizonetech (Pty) Ltd. — https://rizonesoft.com\r\n */\r\n\r\n/* ================================================================\r\n   Utility — hidden (Tailwind v4 may not scan .ts files for this)\r\n   ================================================================ */\r\n\r\n.hidden {\r\n  display: none !important;\r\n}\r\n\r\n/* ================================================================\r\n   Scrollbar — slim, theme-aware\r\n   ================================================================ */\r\n\r\n::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: var(--color-aic-border);\r\n  border-radius: 3px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: var(--color-aic-text-tertiary);\r\n}\r\n\r\n/* ================================================================\r\n   Tab bar\r\n   ================================================================ */\r\n\r\n.aic-tab {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: var(--spacing-xs);\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  font-family: var(--font-aic);\r\n  font-size: var(--text-sm);\r\n  font-weight: 500;\r\n  color: var(--color-aic-text-secondary);\r\n  background: transparent;\r\n  border: none;\r\n  border-bottom: 2px solid transparent;\r\n  cursor: pointer;\r\n  transition:\r\n    color var(--duration-aic) var(--ease-aic),\r\n    border-color var(--duration-aic) var(--ease-aic);\r\n  white-space: nowrap;\r\n}\r\n\r\n.aic-tab:hover {\r\n  color: var(--color-aic-text);\r\n}\r\n\r\n.aic-tab--active {\r\n  color: var(--color-aic-blue);\r\n  border-bottom-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-tab--icon {\r\n  padding: var(--spacing-sm);\r\n}\r\n\r\n/* ================================================================\r\n   Dropdown menu — proper menu component\r\n   ================================================================ */\r\n\r\n.aic-dropdown {\r\n  position: absolute;\r\n  right: 0;\r\n  top: calc(100% + 4px);\r\n  min-width: 200px;\r\n  background: var(--color-aic-bg-elevated);\r\n  border: 1px solid var(--color-aic-border);\r\n  border-radius: var(--radius-md);\r\n  box-shadow:\r\n    0 4px 16px rgba(0, 0, 0, 0.1),\r\n    0 1px 4px rgba(0, 0, 0, 0.06);\r\n  padding: var(--spacing-xs) 0;\r\n  z-index: 20;\r\n  overflow: hidden;\r\n}\r\n\r\n.aic-dropdown__item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-sm);\r\n  width: 100%;\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  font-family: var(--font-aic);\r\n  font-size: var(--text-sm);\r\n  color: var(--color-aic-text);\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: background var(--duration-aic) var(--ease-aic);\r\n  text-align: left;\r\n}\r\n\r\n.aic-dropdown__item:hover {\r\n  background: var(--color-aic-bg-panel);\r\n}\r\n\r\n.aic-dropdown__item:active {\r\n  background: var(--color-aic-blue-light);\r\n}\r\n\r\n.aic-dropdown__item svg {\r\n  color: var(--color-aic-text-tertiary);\r\n  flex-shrink: 0;\r\n}\r\n\r\n.aic-dropdown__item:hover svg {\r\n  color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-dropdown__item--active {\r\n  background: var(--color-aic-blue-light);\r\n  color: var(--color-aic-blue);\r\n  font-weight: 500;\r\n}\r\n\r\n.aic-dropdown__item--active svg {\r\n  color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-split--open .aic-tab--icon {\r\n  color: var(--color-aic-blue);\r\n  background: var(--color-aic-blue-light);\r\n  border-radius: var(--radius-xs);\r\n}\r\n\r\n/* ================================================================\r\n   Buttons\r\n   ================================================================ */\r\n\r\n.aic-btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: var(--spacing-xs);\r\n  padding: 9px var(--spacing-lg);\r\n  border-radius: var(--radius-xs);\r\n  font-family: var(--font-aic);\r\n  font-size: var(--text-sm);\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all var(--duration-aic) var(--ease-aic);\r\n  white-space: nowrap;\r\n  border: 1px solid transparent;\r\n  line-height: 1;\r\n}\r\n\r\n.aic-btn:active {\r\n  transform: scale(0.97);\r\n}\r\n\r\n.aic-btn:focus-visible {\r\n  outline: 2px solid var(--color-aic-blue);\r\n  outline-offset: 2px;\r\n}\r\n\r\n.aic-btn:disabled,\r\n.aic-btn[disabled] {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n  pointer-events: none;\r\n}\r\n\r\n/* Loading state — inline spinner replaces content */\r\n.aic-btn--loading {\r\n  pointer-events: none;\r\n  position: relative;\r\n  color: transparent !important;\r\n}\r\n\r\n.aic-btn--loading::after {\r\n  content: "";\r\n  position: absolute;\r\n  width: 16px;\r\n  height: 16px;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin: -8px 0 0 -8px;\r\n  border: 2px solid currentColor;\r\n  border-right-color: transparent;\r\n  border-radius: 50%;\r\n  opacity: 0.8;\r\n  animation: spin 0.6s linear infinite;\r\n}\r\n\r\n/* Restore visible colour for the pseudo-element */\r\n.aic-btn--primary.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\r\n.aic-btn--secondary.aic-btn--loading::after { color: var(--color-aic-text-secondary); }\r\n.aic-btn--accent.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\r\n\r\n/* Primary — blue filled */\r\n.aic-btn--primary {\r\n  background: var(--color-aic-blue);\r\n  color: var(--color-aic-text-inverse);\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-btn--primary:hover {\r\n  background: var(--color-aic-blue-hover);\r\n  border-color: var(--color-aic-blue-hover);\r\n  box-shadow: 0 2px 8px rgba(59, 158, 255, 0.25);\r\n}\r\n\r\n/* Secondary — outlined */\r\n.aic-btn--secondary {\r\n  background: var(--color-aic-bg);\r\n  color: var(--color-aic-text-secondary);\r\n  border-color: var(--color-aic-border);\r\n}\r\n\r\n.aic-btn--secondary:hover {\r\n  border-color: var(--color-aic-text-secondary);\r\n  color: var(--color-aic-text);\r\n  background: var(--color-aic-bg-panel);\r\n}\r\n\r\n/* Accent — purple filled, icon-only square */\r\n\r\n/* Clear / reset button (×) for text inputs */\r\n.aic-btn-clear {\r\n  position: absolute;\r\n  top: 6px;\r\n  right: 6px;\r\n  width: 20px;\r\n  height: 20px;\r\n  padding: 0;\r\n  border: none;\r\n  border-radius: 50%;\r\n  background: var(--color-aic-bg-panel);\r\n  color: var(--color-aic-text-tertiary);\r\n  font-size: 14px;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-btn-clear:hover {\r\n  background: var(--color-aic-error-bg);\r\n  color: var(--color-aic-error-text);\r\n}\r\n\r\n/* Accent — purple filled, icon-only square */\r\n.aic-btn--accent {\r\n  background: var(--color-aic-purple);\r\n  color: var(--color-aic-text-inverse);\r\n  border-color: var(--color-aic-purple);\r\n  padding: 9px;\r\n  aspect-ratio: 1;\r\n  justify-content: center;\r\n}\r\n\r\n.aic-btn--accent:hover {\r\n  background: var(--color-aic-purple-hover);\r\n  border-color: var(--color-aic-purple-hover);\r\n}\r\n\r\n/* Success state (JS-toggled after copy actions) */\r\n.aic-btn--success {\r\n  background: var(--color-aic-success) !important;\r\n  border-color: var(--color-aic-success) !important;\r\n  color: var(--color-aic-text-inverse) !important;\r\n}\r\n\r\n/* Icon-only toggle (e.g. API key show/hide) */\r\n.aic-btn--icon-toggle {\r\n  padding: 8px 10px;\r\n}\r\n\r\n/* Danger — destructive action */\r\n.aic-btn--danger {\r\n  background: transparent;\r\n  color: var(--color-aic-error-text);\r\n  border-color: var(--color-aic-error-border);\r\n}\r\n\r\n.aic-btn--danger:hover {\r\n  background: var(--color-aic-error-bg);\r\n  border-color: var(--color-aic-error-text);\r\n}\r\n\r\n.aic-btn--ghost {\r\n  background: transparent;\r\n  color: var(--color-aic-text-secondary);\r\n  border: 1px dashed var(--color-aic-border);\r\n  transition: all var(--duration-aic) ease;\r\n}\r\n\r\n.aic-btn--ghost:hover {\r\n  color: var(--color-aic-blue);\r\n  border-color: var(--color-aic-blue);\r\n  border-style: solid;\r\n  background: rgba(37, 99, 235, 0.06);\r\n}\r\n\r\n.aic-btn--ghost:disabled {\r\n  opacity: 0.6;\r\n  cursor: wait;\r\n}\r\n\r\n/* Utility — error text colour */\r\n.aic-text-error {\r\n  color: var(--color-aic-error-text);\r\n}\r\n\r\n/* ================================================================\r\n   Scroll-to-top button\r\n   ================================================================ */\r\n\r\n/* ================================================================\r\n   Template controls — compact select & buttons\r\n   ================================================================ */\r\n\r\n.aic-template-select {\r\n  flex: 1;\r\n  min-width: 0;\r\n  font-size: 11px;\r\n}\r\n\r\n.aic-template-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 0;\r\n  flex-shrink: 0;\r\n  border: 1px dashed var(--color-aic-border);\r\n  border-radius: var(--radius-sm);\r\n  background: transparent;\r\n  color: var(--color-aic-text-secondary);\r\n  cursor: pointer;\r\n  transition: all var(--duration-aic) ease;\r\n}\r\n\r\n.aic-template-btn:hover {\r\n  border-style: solid;\r\n  border-color: var(--color-aic-blue);\r\n  color: var(--color-aic-blue);\r\n  background: rgba(37, 99, 235, 0.06);\r\n}\r\n\r\n.aic-template-btn--delete {\r\n  color: var(--color-aic-error-text);\r\n}\r\n\r\n.aic-template-btn--delete:hover {\r\n  border-color: var(--color-aic-error-text);\r\n  color: var(--color-aic-error-text);\r\n  background: var(--color-aic-error-bg);\r\n}\r\n\r\n/* ================================================================\r\n   Email Score Card\r\n   ================================================================ */\r\n\r\n.aic-score-card {\r\n  border: 1px solid var(--color-aic-border);\r\n  border-radius: var(--radius-md);\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  margin-bottom: var(--spacing-sm);\r\n  background: var(--color-aic-bg-panel);\r\n}\r\n\r\n.aic-score-card__header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-sm);\r\n  margin-bottom: var(--spacing-sm);\r\n}\r\n\r\n.aic-score-card__circle {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  border: 3px solid var(--aic-score-color, var(--color-aic-border));\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.aic-score-card__value {\r\n  font-size: 13px;\r\n  font-weight: 700;\r\n  color: var(--aic-score-color, var(--color-aic-text-secondary));\r\n}\r\n\r\n.aic-score-card__label {\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  color: var(--color-aic-text-secondary);\r\n}\r\n\r\n.aic-score-card__bars {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.aic-score-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-xs);\r\n}\r\n\r\n.aic-score-bar__label {\r\n  font-size: 11px;\r\n  color: var(--color-aic-text-tertiary);\r\n  width: 50px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.aic-score-bar__track {\r\n  flex: 1;\r\n  height: 6px;\r\n  background: var(--color-aic-border-light);\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n}\r\n\r\n.aic-score-bar__fill {\r\n  height: 100%;\r\n  border-radius: 3px;\r\n  background: var(--aic-bar-color, var(--color-aic-blue));\r\n  width: 0%;\r\n  transition: width 0.6s ease;\r\n}\r\n\r\n.aic-score-bar__val {\r\n  font-size: 10px;\r\n  font-weight: 600;\r\n  color: var(--color-aic-text-tertiary);\r\n  width: 16px;\r\n  text-align: right;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.aic-scroll-top {\r\n  position: fixed;\r\n  bottom: 5px;\r\n  right: 16px;\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  border: 1px solid var(--color-aic-border);\r\n  background: var(--color-aic-bg-panel);\r\n  color: var(--color-aic-text-secondary);\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r\n  transition: all var(--duration-aic) var(--ease-aic);\r\n  opacity: 1;\r\n  z-index: 50;\r\n}\r\n\r\n.aic-scroll-top.hidden {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n  transform: translateY(8px);\r\n}\r\n\r\n.aic-scroll-top:hover {\r\n  background: var(--color-aic-blue);\r\n  color: var(--color-aic-text-inverse);\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n/* ================================================================\r\n   Result section separator\r\n   ================================================================ */\r\n\r\n.aic-section--result {\r\n  margin-top: var(--spacing-sm);\r\n  border-top: 1px solid var(--color-aic-border);\r\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);\r\n  animation: slideIn 0.3s var(--ease-aic) both;\r\n}\r\n\r\n/* Section heading polish */\r\n.aic-section h2 {\r\n  letter-spacing: 0.01em;\r\n}\r\n\r\n/* ================================================================\r\n   Form controls — shared styles for select, input, textarea\r\n   ================================================================ */\r\n\r\n.aic-select {\r\n  display: block;\r\n  width: 100%;\r\n  padding: var(--spacing-sm);\r\n  font-family: var(--font-aic);\r\n  font-size: var(--text-md);\r\n  color: var(--color-aic-text);\r\n  background: var(--color-aic-bg);\r\n  border: 1px solid var(--color-aic-border);\r\n  border-radius: var(--radius-sm);\r\n  outline: none;\r\n  cursor: pointer;\r\n  appearance: none;\r\n  background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'12\' height=\'12\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%235E6470\' stroke-width=\'2.5\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3E%3Cpath d=\'m6 9 6 6 6-6\'/%3E%3C/svg%3E");\r\n  background-repeat: no-repeat;\r\n  background-position: right 8px center;\r\n  padding-right: 28px;\r\n  transition:\r\n    border-color var(--duration-aic) var(--ease-aic),\r\n    box-shadow var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-select:hover {\r\n  border-color: var(--color-aic-text-secondary);\r\n}\r\n\r\n.aic-select:focus {\r\n  border-color: var(--color-aic-blue);\r\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\r\n  animation: focusPulse 1.5s ease-in-out infinite;\r\n}\r\n\r\n.aic-input {\r\n  flex: 1;\r\n  padding: var(--spacing-sm);\r\n  font-family: var(--font-aic);\r\n  font-size: var(--text-md);\r\n  color: var(--color-aic-text);\r\n  background: var(--color-aic-bg);\r\n  border: 1px solid var(--color-aic-border);\r\n  border-radius: var(--radius-sm);\r\n  outline: none;\r\n  transition:\r\n    border-color var(--duration-aic) var(--ease-aic),\r\n    box-shadow var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-input::placeholder {\r\n  color: var(--color-aic-text-tertiary);\r\n}\r\n\r\n.aic-input:focus {\r\n  border-color: var(--color-aic-blue);\r\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\r\n  animation: focusPulse 1.5s ease-in-out infinite;\r\n}\r\n\r\n/* ================================================================\r\n   Radio group\r\n   ================================================================ */\r\n\r\n.aic-radio-group {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: var(--spacing-md);\r\n}\r\n\r\n.aic-radio-group--vertical {\r\n  flex-direction: column;\r\n  gap: var(--spacing-sm);\r\n}\r\n\r\n.aic-radio {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  cursor: pointer;\r\n  font-size: var(--text-sm);\r\n  color: var(--color-aic-text);\r\n}\r\n\r\n.aic-radio input[type="radio"] {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 14px;\r\n  height: 14px;\r\n  border: 1.5px solid var(--color-aic-border);\r\n  border-radius: 50%;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  transition: border-color var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-radio input[type="radio"]:hover {\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-radio input[type="radio"]:checked {\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-radio input[type="radio"]:checked::after {\r\n  content: "";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 50%;\r\n  background: var(--color-aic-blue);\r\n}\r\n\r\n/* ================================================================\r\n   Checkbox\r\n   ================================================================ */\r\n\r\n.aic-checkbox {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  cursor: pointer;\r\n  font-size: var(--text-sm);\r\n  color: var(--color-aic-text);\r\n}\r\n\r\n.aic-checkbox input[type="checkbox"] {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 14px;\r\n  height: 14px;\r\n  border: 1.5px solid var(--color-aic-border);\r\n  border-radius: 3px;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  transition: all var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-checkbox input[type="checkbox"]:hover {\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-checkbox input[type="checkbox"]:checked {\r\n  background: var(--color-aic-blue);\r\n  border-color: var(--color-aic-blue);\r\n}\r\n\r\n.aic-checkbox input[type="checkbox"]:checked::after {\r\n  content: "";\r\n  position: absolute;\r\n  top: 1px;\r\n  left: 4px;\r\n  width: 4px;\r\n  height: 8px;\r\n  border: solid white;\r\n  border-width: 0 2px 2px 0;\r\n  transform: rotate(45deg);\r\n}\r\n\r\n/* ================================================================\r\n   Context banner (reply-context)\r\n   ================================================================ */\r\n\r\n.aic-context-banner {\r\n  background: var(--color-aic-bg-panel);\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-sm);\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  margin-bottom: var(--spacing-lg);\r\n}\r\n\r\n/* ================================================================\r\n   Hint text\r\n   ================================================================ */\r\n\r\n.aic-hint {\r\n  font-size: var(--text-sm);\r\n  color: var(--color-aic-text-tertiary);\r\n  margin-bottom: var(--spacing-lg);\r\n  font-style: italic;\r\n}\r\n\r\n/* ================================================================\r\n   Reply suggestion chips\r\n   ================================================================ */\r\n\r\n.aic-suggestion-chip {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: var(--spacing-xs);\r\n  padding: var(--spacing-xs) var(--spacing-sm);\r\n  border: 1px solid var(--color-aic-border);\r\n  border-radius: 999px;\r\n  background: var(--color-aic-bg);\r\n  color: var(--color-aic-text-secondary);\r\n  font-size: var(--text-xs);\r\n  line-height: 1.4;\r\n  cursor: pointer;\r\n  transition: all var(--duration-aic) ease;\r\n}\r\n\r\n.aic-suggestion-chip:hover {\r\n  border-color: var(--color-aic-blue);\r\n  color: var(--color-aic-blue);\r\n  background: var(--color-aic-bg-panel);\r\n}\r\n\r\n.aic-suggestion-chip--active {\r\n  border-color: var(--color-aic-blue);\r\n  color: var(--color-aic-blue);\r\n  background: rgba(37, 99, 235, 0.08);\r\n}\r\n\r\n/* ================================================================\r\n   Preview — rendered HTML content area\r\n   ================================================================ */\r\n\r\n.aic-preview {\r\n  background: var(--color-aic-bg-panel);\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-sm);\r\n  padding: var(--spacing-md);\r\n  font-size: var(--text-md);\r\n  line-height: 1.65;\r\n  margin-bottom: var(--spacing-lg);\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.aic-preview[contenteditable="true"] {\r\n  cursor: text;\r\n  outline: none;\r\n  transition: border-color var(--duration-aic) ease,\r\n    box-shadow var(--duration-aic) ease;\r\n}\r\n\r\n.aic-preview[contenteditable="true"]:focus {\r\n  border-color: var(--color-aic-blue);\r\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\r\n}\r\n\r\n.aic-copy-btn {\r\n  position: absolute;\r\n  top: var(--spacing-sm);\r\n  right: var(--spacing-sm);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 28px;\r\n  height: 28px;\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-xs);\r\n  background: var(--color-aic-bg);\r\n  color: var(--color-aic-text-tertiary);\r\n  cursor: pointer;\r\n  opacity: 0.5;\r\n  transition: opacity var(--duration-aic) ease,\r\n    color var(--duration-aic) ease,\r\n    background var(--duration-aic) ease;\r\n}\r\n\r\n.aic-copy-btn:hover {\r\n  opacity: 1;\r\n  color: var(--color-aic-text);\r\n  background: var(--color-aic-bg-panel);\r\n}\r\n\r\n.aic-copy-btn--success {\r\n  opacity: 1;\r\n  color: var(--color-aic-green);\r\n}\r\n\r\n.aic-preview p {\r\n  margin-bottom: var(--spacing-sm);\r\n}\r\n\r\n.aic-preview p:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.aic-preview ul,\r\n.aic-preview ol {\r\n  padding-left: 1.5em;\r\n  margin-bottom: var(--spacing-sm);\r\n}\r\n\r\n.aic-preview li {\r\n  margin-bottom: var(--spacing-xs);\r\n}\r\n\r\n/* ================================================================\r\n   Loading overlay\r\n   ================================================================ */\r\n\r\n.aic-loading {\r\n  position: fixed;\r\n  inset: 0;\r\n  display: none;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: rgba(255, 255, 255, 0.85);\r\n  z-index: 50;\r\n  backdrop-filter: blur(4px);\r\n  opacity: 0;\r\n  transition: opacity var(--duration-aic) ease;\r\n}\r\n\r\n.aic-loading:not(.hidden) {\r\n  display: flex;\r\n  opacity: 1;\r\n}\r\n\r\n.aic-loading.aic-loading--fade-out {\r\n  opacity: 0;\r\n}\r\n\r\n.aic-loading__spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid var(--color-aic-border-light);\r\n  border-top-color: var(--color-aic-blue);\r\n  border-radius: 50%;\r\n  animation: spin 0.7s linear infinite;\r\n  margin-bottom: var(--spacing-md);\r\n}\r\n\r\n/* ================================================================\r\n   Error banner\r\n   ================================================================ */\r\n\r\n.aic-error {\r\n  position: fixed;\r\n  bottom: var(--spacing-md);\r\n  left: var(--spacing-md);\r\n  right: var(--spacing-md);\r\n  display: none;\r\n  align-items: center;\r\n  gap: var(--spacing-sm);\r\n  padding: var(--spacing-sm) var(--spacing-md);\r\n  background: var(--color-aic-error-bg);\r\n  border: 1px solid var(--color-aic-error-border);\r\n  border-radius: var(--radius-sm);\r\n  color: var(--color-aic-error-text);\r\n  font-size: var(--text-sm);\r\n  z-index: 50;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.aic-error:not(.hidden) {\r\n  display: flex;\r\n}\r\n\r\n.aic-error__dismiss {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: var(--radius-xs);\r\n  background: transparent;\r\n  border: none;\r\n  color: var(--color-aic-error-text);\r\n  cursor: pointer;\r\n  opacity: 0.5;\r\n  transition: opacity var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-error__dismiss:hover {\r\n  opacity: 1;\r\n}\r\n\r\n/* ================================================================\r\n   Diff view — dynamically injected by JS\r\n   ================================================================ */\r\n\r\n.aic-diff {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-sm);\r\n}\r\n\r\n.aic-diff__panel {\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-sm);\r\n  overflow: hidden;\r\n}\r\n\r\n.aic-diff__panel--improved {\r\n  border-color: rgba(26, 127, 55, 0.2);\r\n}\r\n\r\n.aic-diff__label {\r\n  font-size: var(--text-xs);\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.04em;\r\n  padding: 5px 10px;\r\n  background: var(--color-aic-bg-panel);\r\n  color: var(--color-aic-text-tertiary);\r\n  border-bottom: 1px solid var(--color-aic-border-light);\r\n}\r\n\r\n.aic-diff__panel--improved .aic-diff__label {\r\n  background: rgba(26, 127, 55, 0.05);\r\n  color: var(--color-aic-success);\r\n}\r\n\r\n.aic-diff__content {\r\n  padding: 10px 12px;\r\n  font-size: var(--text-sm);\r\n  line-height: 1.7;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.aic-diff__del {\r\n  background: #ffeef0;\r\n  color: #b31d28;\r\n  text-decoration: line-through;\r\n  text-decoration-color: rgba(179, 29, 40, 0.4);\r\n  border-radius: 2px;\r\n  padding: 0 1px;\r\n}\r\n\r\n.aic-diff__ins {\r\n  background: #e6ffec;\r\n  color: #22863a;\r\n  border-radius: 2px;\r\n  padding: 0 1px;\r\n}\r\n\r\n/* ================================================================\r\n   Checklist — dynamically injected action items\r\n   ================================================================ */\r\n\r\n.aic-task-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n\r\n.aic-task-item {\r\n  display: flex;\r\n  gap: var(--spacing-sm);\r\n  padding: var(--spacing-sm) 10px;\r\n  background: var(--color-aic-bg-panel);\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-sm);\r\n  transition: border-color var(--duration-aic) var(--ease-aic);\r\n}\r\n\r\n.aic-task-item:hover {\r\n  border-color: var(--color-aic-border);\r\n}\r\n\r\n.aic-task-item__check {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding-top: 1px;\r\n  cursor: pointer;\r\n}\r\n\r\n.aic-task-item__check input[type="checkbox"] {\r\n  width: 16px;\r\n  height: 16px;\r\n  accent-color: var(--color-aic-blue);\r\n  cursor: pointer;\r\n}\r\n\r\n.aic-task-item__body {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.aic-task-item__text {\r\n  font-size: var(--text-md);\r\n  line-height: 1.5;\r\n  color: var(--color-aic-text);\r\n}\r\n\r\n.aic-task-item__meta {\r\n  display: flex;\r\n  gap: var(--spacing-md);\r\n  flex-wrap: wrap;\r\n  margin-top: 2px;\r\n  font-size: var(--text-xs);\r\n  color: var(--color-aic-text-tertiary);\r\n}\r\n\r\n.aic-task-item__owner strong,\r\n.aic-task-item__deadline strong {\r\n  font-weight: 600;\r\n  color: var(--color-aic-text-secondary);\r\n}\r\n\r\n.aic-task-item:has(input[type="checkbox"]:checked) .aic-task-item__text {\r\n  text-decoration: line-through;\r\n  color: var(--color-aic-text-tertiary);\r\n}\r\n\r\n/* ================================================================\r\n   Translation — dynamically injected side-by-side panels\r\n   ================================================================ */\r\n\r\n.aic-translate-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-sm);\r\n}\r\n\r\n.aic-translate-panel {\r\n  background: var(--color-aic-bg-panel);\r\n  border: 1px solid var(--color-aic-border-light);\r\n  border-radius: var(--radius-sm);\r\n  overflow: hidden;\r\n}\r\n\r\n.aic-translate-panel__label {\r\n  padding: 6px 10px;\r\n  font-size: var(--text-xs);\r\n  font-weight: 600;\r\n  color: var(--color-aic-text-secondary);\r\n  background: var(--color-aic-bg);\r\n  border-bottom: 1px solid var(--color-aic-border-light);\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.aic-translate-panel__text {\r\n  padding: 10px;\r\n  font-size: var(--text-md);\r\n  line-height: 1.6;\r\n  color: var(--color-aic-text);\r\n  max-height: 240px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.aic-translate-panel--target {\r\n  border-color: rgba(59, 158, 255, 0.2);\r\n}\r\n\r\n.aic-translate-panel--target .aic-translate-panel__label {\r\n  color: var(--color-aic-blue);\r\n  background: var(--color-aic-blue-light);\r\n}\r\n\r\n/* ================================================================\r\n   Spinner keyframes\r\n   ================================================================ */\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes focusPulse {\r\n  0%, 100% {\r\n    box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\r\n  }\r\n  50% {\r\n    box-shadow: 0 0 0 4px var(--color-aic-blue-glow);\r\n  }\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-12px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n'],sourceRoot:""}]);const d=A},76314(n){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<n.length;c++){var A=[].concat(n[c]);o&&a[A[0]]||(void 0!==i&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=i),t&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=t):A[2]=t),r&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=r):A[4]="".concat(r)),e.push(A))}},e}},4417(n){"use strict";n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},71354(n){"use strict";n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},85072(n){"use strict";var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],s=0;s<n.length;s++){var l=n[s],c=o.base?l[0]+o.base:l[0],A=i[c]||0,u="".concat(c," ").concat(A);i[c]=A+1;var d=t(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var m=r(p,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:m,references:1})}a.push(u)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var l=o(n,r),c=0;c<i.length;c++){var A=t(i[c]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}i=l}}},77659(n){"use strict";var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},10540(n){"use strict";n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},55056(n,e,t){"use strict";n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},97825(n){"use strict";n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},41113(n){"use strict";n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},23753(n){"use strict";n.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27%235E6470%27 stroke-width=%272.5%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3E%3Cpath d=%27m6 9 6 6 6-6%27/%3E%3C/svg%3E"}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.m=n,t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.b="undefined"!=typeof document&&document.baseURI||self.location.href,t.nc=void 0,(()=>{"use strict";var n=t(85072),e=t.n(n),o=t(97825),r=t.n(o),i=t(77659),a=t.n(i),s=t(55056),l=t.n(s),c=t(10540),A=t.n(c),u=t(41113),d=t.n(u),p=t(21342),m={};m.styleTagTransform=d(),m.setAttributes=l(),m.insert=a().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=A(),e()(p.A,m),p.A&&p.A.locals&&p.A.locals;var h=t(88969),f={};f.styleTagTransform=d(),f.setAttributes=l(),f.insert=a().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=A(),e()(h.A,f),h.A&&h.A.locals&&h.A.locals;var g=t(75260),E=t(89419),v=t(33422),y=t(47336),C=t(43712);let b=null,B="";async function w(n){if(!n.instructions||!n.instructions.trim())throw new Error("Please enter your instructions or bullet points.");const e=function(n){switch(n){case"short":return"Keep it brief — 2-4 sentences maximum.";case"detailed":return"Write a thorough, detailed email covering all points.";default:return"Standard length — a few short paragraphs."}}(n.length),t=(0,y.fn)(C.mR,{INSTRUCTIONS:`${n.instructions}\n\nDesired length: ${e}`,TONE:n.tone||"professional",LANGUAGE:n.language||"English"},!0),o=await(0,g.Df)(t,{temperature:.7,maxOutputTokens:x(n.length)});return b={...n},B=o,o}function x(n){switch(n){case"short":return 512;case"detailed":return 4096;default:return 2048}}function _(n){return n.split("\n\n").map(n=>`<p>${function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(n).replace(/\n/g,"<br>")}</p>`).join("")}var T=t(87473);let I="",S=null;async function O(n){let e;try{e=(await(0,E.Ev)()).map((n,e)=>{let t=`--- Message ${e+1} ---\n`;return t+=`From: ${n.sender.name} <${n.sender.email}>\n`,t+=`Subject: ${n.subject}\n`,n.dateTime&&(t+=`Date: ${n.dateTime}\n`),t+=`\n${n.body}`,t}).join("\n\n")}catch{const[n,t,o]=await Promise.all([(0,E.k3)(),(0,E.getCurrentEmailSubject)(),(0,E.mi)()]);e=`From: ${o.name} <${o.email}>\nSubject: ${t}\n\n${n}`}if(!e.trim())throw new Error("No email content to summarize. Please make sure an email is open.");const t=(0,y.U6)(e,8e3),o=(r=n.length,i=n.style,`${{brief:"brief (2-3 sentences)",standard:"standard (1 paragraph)",detailed:"detailed (multiple paragraphs)"}[r]}. ${{bullets:"Format the summary as bullet points.",paragraph:"Format the summary as flowing prose paragraphs.",tldr:"Provide a single TL;DR sentence first, followed by key points."}[i]}`);var r,i;const a=(0,y.fn)(C.mH,{EMAIL_THREAD:t,SUMMARY_LENGTH:o}),s=await(0,g.Df)(a,{temperature:.4,maxOutputTokens:k(n.length),model:g.t2});return I=s,S={...n},s}function k(n){switch(n){case"brief":return 256;case"detailed":return 2048;default:return 1024}}let R="",N="",P=null;const D={fix_grammar:"Fix grammar, spelling, and punctuation errors",improve_clarity:"Improve clarity and readability",make_concise:"Make the text more concise — remove unnecessary words",make_professional:"Make the tone more professional and polished"};async function M(n){const e=await async function(){if("compose"===(0,E.J5)())try{const n=await new Promise((n,e)=>{const t=Office.context.mailbox.item;t?"function"==typeof t.getSelectedDataAsync?t.getSelectedDataAsync(Office.CoercionType.Text,t=>{t.status===Office.AsyncResultStatus.Succeeded?n(t.value.data||""):e(new Error(t.error?.message||"Failed to get selected text"))}):n(""):e(new Error("No mailbox item"))});if(n.trim())return n}catch{}return(0,E.k3)()}();if(!e.trim())throw new Error("No text to improve. Select some text or open an email in compose mode.");const t=D[n.focus]||n.focus,o=(0,y.fn)(C.DS,{TEXT:e,IMPROVEMENT_FOCUS:t}),r=await(0,g.Df)(o,{temperature:.3,maxOutputTokens:2048});return R=e,N=r,P={...n},{original:e,improved:r}}function L(n,e){const t=U(n),o=U(e),{added:r,removed:i,unchanged:a}=function(n,e){const t=n.length,o=e.length;if(t>500||o>500)return{removed:new Set(Array.from({length:t},(n,e)=>e)),added:new Set(Array.from({length:o},(n,e)=>e)),unchanged:new Set};const r=Array.from({length:t+1},()=>new Array(o+1).fill(0));for(let i=1;i<=t;i++)for(let t=1;t<=o;t++)n[i-1]===e[t-1]?r[i][t]=r[i-1][t-1]+1:r[i][t]=Math.max(r[i-1][t],r[i][t-1]);const i=new Set,a=new Set;let s=t,l=o;for(;s>0&&l>0;)n[s-1]===e[l-1]?(i.add(s-1),a.add(l-1),s--,l--):r[s-1][l]>r[s][l-1]?s--:l--;const c=new Set,A=new Set,u=new Set;for(let n=0;n<t;n++)i.has(n)?u.add(n):c.add(n);for(let n=0;n<o;n++)a.has(n)||A.add(n);return{added:A,removed:c,unchanged:u}}(t,o);return`\n    <div class="aic-diff">\n      <div class="aic-diff__panel">\n        <div class="aic-diff__label">Original</div>\n        <div class="aic-diff__content">${q(t,i,"aic-diff__del")}</div>\n      </div>\n      <div class="aic-diff__panel aic-diff__panel--improved">\n        <div class="aic-diff__label">Improved</div>\n        <div class="aic-diff__content">${q(o,r,"aic-diff__ins")}</div>\n      </div>\n    </div>`}function U(n){return n.match(/\S+|\s+/g)||[]}function q(n,e,t){return n.map((n,o)=>{const r=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e.has(o)?`<span class="${t}">${r}</span>`:r}).join("")}let G=[],j="";async function F(){const n=await async function(){try{return(await(0,E.Ev)()).map((n,e)=>{let t=`--- Message ${e+1} ---\n`;return t+=`From: ${n.sender.name} <${n.sender.email}>\n`,t+=`Subject: ${n.subject}\n`,n.dateTime&&(t+=`Date: ${n.dateTime}\n`),t+=`\n${n.body}`,t}).join("\n\n")}catch{const[n,e,t]=await Promise.all([(0,E.k3)(),(0,E.getCurrentEmailSubject)(),(0,E.mi)()]);return`From: ${t.name} <${t.email}>\nSubject: ${e}\n\n${n}`}}();if(!n.trim())throw new Error("No email content found. Please open an email first.");const e=(0,y.U6)(n,6e3),t=(0,y.fn)(C.fz,{EMAIL_CONTENT:e}),o=await(0,g.Df)(t,{temperature:.2,maxOutputTokens:2048,model:g.t2});return j=o,G=function(n){if(/no action items found/i.test(n))return[];const e=[],t=n.split(/(?:^|\n)(?:[-•*]|\d+\.)\s+/);for(const n of t){const t=n.trim();if(!t)continue;const o={task:"",owner:"—",deadline:"—"},r=t.match(/\*\*Task\*\*:\s*(.+?)(?:\n|$)/i),i=t.match(/\*\*Owner\*\*:\s*(.+?)(?:\n|$)/i),a=t.match(/\*\*Deadline\*\*:\s*(.+?)(?:\n|$)/i);r?(o.task=r[1].trim(),i&&(o.owner=i[1].trim()),a&&(o.deadline=a[1].trim())):o.task=t.replace(/\*\*/g,"").replace(/\n/g," ").trim(),o.task&&o.task.length>2&&e.push(o)}return e}(o),G}function H(n){return 0===n.length?'<p class="aic-hint">No action items found in this email.</p>':`<div class="aic-task-list">${n.map((n,e)=>`\n      <div class="aic-task-item">\n        <label class="aic-task-item__check">\n          <input type="checkbox" data-index="${e}" />\n          <span class="aic-task-item__checkmark"></span>\n        </label>\n        <div class="aic-task-item__body">\n          <div class="aic-task-item__text">${V(n.task)}</div>\n          <div class="aic-task-item__meta">\n            ${n.owner&&"—"!==n.owner?`<span class="aic-task-item__owner"><strong>Owner:</strong> ${V(n.owner)}</span>`:""}\n            ${n.deadline&&"—"!==n.deadline?`<span class="aic-task-item__deadline"><strong>Due:</strong> ${V(n.deadline)}</span>`:""}\n          </div>\n        </div>\n      </div>`).join("")}</div>`}function V(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let W=null;async function $(n){const e=await(0,E.k3)();if(!e.trim())throw new Error("No email content found. Please open an email first.");const t=(0,y.fn)(C.uC,{TEXT:e,TARGET_LANGUAGE:n}),o=await(0,g.Df)(t,{temperature:.3,maxOutputTokens:4096,model:g.t2});return W={original:e,translated:o,targetLanguage:n},W}function J(n){return`\n    <div class="aic-translate-view">\n      <div class="aic-translate-panel">\n        <div class="aic-translate-panel__label">Original</div>\n        <div class="aic-translate-panel__text">${z(n.original)}</div>\n      </div>\n      <div class="aic-translate-panel aic-translate-panel--target">\n        <div class="aic-translate-panel__label">${z(n.targetLanguage)}</div>\n        <div class="aic-translate-panel__text">${z(n.translated)}</div>\n      </div>\n    </div>`}function z(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")}const Y=n=>document.getElementById(n);function K(n){return/^AIza[0-9A-Za-z_-]{35}$/.test(n)}function X(n){const e=Y(n);e&&e.classList.remove("hidden")}function Q(n){const e=Y(n);e&&e.classList.add("hidden")}function Z(n,e){const t=Y("loading-overlay");if(!t)return;const o=t.querySelector(".aic-loading__text");o&&n&&(o.textContent=n);const r=t.querySelector(".aic-loading__estimate");if(r)if(e&&e>0){const n=Math.min(30,Math.round(8+e/100));r.textContent=`Estimated time: ~${n}s`,r.classList.remove("hidden")}else r.classList.add("hidden");t.classList.remove("aic-loading--fade-out"),X("loading-overlay")}function nn(){const n=Y("loading-overlay");if(!n||n.classList.contains("hidden"))return;n.classList.add("aic-loading--fade-out");const e=()=>{n.classList.remove("aic-loading--fade-out"),Q("loading-overlay")};n.addEventListener("transitionend",e,{once:!0}),setTimeout(e,350)}function en(n){const e=Y("error-message");e&&(e.textContent=n),X("error-banner")}function tn(){Q("error-banner")}function on(n,e){const t=Y(n);if(!t)return;const o=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").split("\n").map(n=>n.toLowerCase().startsWith("subject:")?`<div class="aic-preview__subject">${n}</div>`:""===n.trim()?"<br>":`<div>${n}</div>`).join("");t.innerHTML=o,rn(n)}function rn(n){const e=Y(n),t=n.replace("-preview","-stats"),o=Y(t);if(!e||!o)return;const r=(e.innerText||e.textContent||"").trim();if(!r)return void o.classList.add("hidden");const i=r.split(/\s+/).filter(n=>n.length>0).length,a=Math.max(1,Math.round(i/200));o.textContent=`${i} words · ${a} min read`,o.classList.remove("hidden")}async function an(n,e){const t=Y(e);if(!t)return;t.classList.remove("hidden");const o=t.querySelector(".aic-score-card__value");o&&(o.textContent="..."),await new Promise(n=>setTimeout(n,500));try{console.log("[Score] Requesting score...");const e=await(0,g.mm)(`Score this email:\n\n${n.slice(0,1500)}`,{model:"gemini-2.5-flash",systemInstruction:"You are an email quality scorer. Score emails on clarity, tone, conciseness, and call-to-action, each from 1 to 10.",temperature:.1,maxOutputTokens:100,responseSchema:{type:g.ZU.OBJECT,properties:{clarity:{type:g.ZU.NUMBER},tone:{type:g.ZU.NUMBER},conciseness:{type:g.ZU.NUMBER},cta:{type:g.ZU.NUMBER}},required:["clarity","tone","conciseness","cta"]}});console.log("[Score] Parsed:",e);const r=n=>Math.min(10,Math.max(1,Math.round(n))),i={clarity:r(Number(e.clarity)||7),tone:r(Number(e.tone)||7),conciseness:r(Number(e.conciseness)||7),cta:r(Number(e.cta)||7)},a=Math.round((i.clarity+i.tone+i.conciseness+i.cta)/4),s=n=>n>=7?"#22c55e":n>=5?"#eab308":"#ef4444",l=s(a);t.style.setProperty("--aic-score-color",l),o&&(o.textContent=`${a}`);const c=i;t.querySelectorAll(".aic-score-bar").forEach(n=>{const e=n.dataset.dim||"",t=c[e];if(void 0===t)return;const o=n.querySelector(".aic-score-bar__fill"),r=n.querySelector(".aic-score-bar__val");o&&(o.style.width=10*t+"%",o.style.background=s(t)),r&&(r.textContent=`${t}`)})}catch(n){console.warn("[Score] Failed:",n),o&&(o.textContent="—")}}const sn={draft:["draft-section","result-section"],reply:["reply-section","reply-result-section"],summarize:["summarize-section","summarize-result-section"],improve:["improve-section","improve-result-section"],extract:["extract-section","extract-result-section"],translate:["translate-section","translate-result-section"],settings:["settings-section"],rules:["rules-section"]};function ln(n){document.querySelectorAll(".aic-tab").forEach(e=>{e.classList.toggle("aic-tab--active",e.dataset.tab===n)});for(const[e,t]of Object.entries(sn)){const o=e===n;for(const n of t){const e=Y(n);e&&(o?n.includes("result")||e.classList.remove("hidden"):e.classList.add("hidden"))}}tn(),"reply"===n&&cn()}async function cn(){const n=Y("reply-sender"),e=Y("reply-subject");try{(0,T.jt)();const t=await(0,T.qP)();n&&(n.textContent=t.sender.name?`${t.sender.name} <${t.sender.email}>`:t.sender.email||"Unknown sender"),e&&(e.textContent=t.subject||"(no subject)")}catch{n&&(n.textContent="Could not read email"),e&&(e.textContent="—")}}async function An(){const n=Y("draft-instructions")?.value||"",e=Y("draft-tone")?.value||"professional",t=Y("draft-length")?.value||"medium",o=Y("draft-language")?.value||"English",r=Y("draft-goal")?.value||"none",i=Y("draft-goal-custom")?.value||"",a={instructions:n+(0,v.buildGoalText)(r,i),tone:e,length:t,language:o};tn(),Z("Generating with Gemini...",n.length);try{const n=await w(a);on("draft-preview",n),an(n,"draft-score"),X("result-section"),Y("result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(n){en(n.message||"Failed to generate draft. Please try again.")}finally{nn()}}async function un(){tn(),Z("Regenerating...");try{const n=await async function(){if(!b)throw new Error("No previous draft to regenerate. Please generate a draft first.");return w(b)}();on("draft-preview",n),an(n,"draft-score")}catch(n){en(n.message||"Failed to regenerate. Please try again.")}finally{nn()}}async function dn(){const n=Y("refine-input"),e=n?.value||"";if(e.trim()){tn(),Z("Refining...");try{const t=await async function(n){if(!B)throw new Error("No draft to refine. Please generate a draft first.");if(!n||!n.trim())throw new Error("Please enter your refinement instructions.");const e=`You are a professional email assistant.\n\nHere is the current draft email:\n\n---\n${B}\n---\n\nPlease revise the draft based on these instructions: ${n}\n\nRequirements:\n- Keep the same general format (Subject line on first line, greeting, body, sign-off)\n- Apply the requested changes while maintaining quality\n- Return only the revised email, no explanations`,t=await(0,g.Df)(e,{temperature:.6,maxOutputTokens:2048});return B=t,t}(e);on("draft-preview",t),an(t,"draft-score"),n&&(n.value="")}catch(n){en(n.message||"Failed to refine. Please try again.")}finally{nn()}}else en("Please enter refinement instructions.")}function pn(){const n=Y("draft-preview");if(!n)return;const e=n.innerText||n.textContent||"";if(e.trim())try{!function(n){const{subject:e,body:t}=function(n){const e=n.split("\n");let t="",o=0;return e.length>0&&e[0].toLowerCase().startsWith("subject:")&&(t=e[0].replace(/^subject:\s*/i,"").trim(),o=1,o<e.length&&""===e[o].trim()&&o++),{subject:t,body:e.slice(o).join("\n").trim()}}(n);if("compose"===(0,E.J5)()){const n=Office.context.mailbox.item;n&&n.body&&"function"==typeof n.body.prependAsync&&n.body.prependAsync(_(t),{coercionType:Office.CoercionType.Html}),e&&n&&n.subject&&"function"==typeof n.subject.setAsync&&n.subject.setAsync(e)}else Office.context.mailbox.displayNewMessageForm({subject:e,htmlBody:_(t)})}(e)}catch(n){en(n.message||"Failed to open compose window.")}else en("No draft to copy. Please generate one first.")}async function mn(){const n=Y("reply-instructions")?.value||"",e=Y("reply-tone")?.value||"professional",t=Y("reply-include-original")?.checked??!0,o=Y("reply-language")?.value||"auto",r=Y("reply-goal")?.value||"none",i=Y("reply-goal-custom")?.value||"",a={instructions:n+(0,v.buildGoalText)(r,i),tone:e,includeOriginal:t,language:o};tn(),Z("Generating reply with Gemini...",n.length);try{const n=await(0,T.yd)(a);on("reply-preview",n),an(n,"reply-score"),X("reply-result-section"),Y("reply-result-section")?.scrollIntoView({behavior:"smooth",block:"start"}),"compose"===(0,E.J5)()&&Q("btn-insert-reply-all")}catch(n){en(n.message||"Failed to generate reply. Please try again.")}finally{nn()}}async function hn(){tn(),Z("Regenerating reply...");try{const n=await(0,T.FA)();on("reply-preview",n),an(n,"reply-score")}catch(n){en(n.message||"Failed to regenerate reply. Please try again.")}finally{nn()}}async function fn(){const n=Y("reply-refine-input"),e=n?.value||"";if(e.trim()){tn(),Z("Refining reply...");try{const t=await(0,T.Q$)(e);on("reply-preview",t),an(t,"reply-score"),n&&(n.value="")}catch(n){en(n.message||"Failed to refine reply. Please try again.")}finally{nn()}}else en("Please enter refinement instructions.")}async function gn(){const n=Y("btn-suggest-replies"),e=Y("suggest-replies-text"),o=Y("reply-suggestions");if(n&&o){n.disabled=!0,e&&(e.textContent="Thinking..."),o.classList.add("hidden"),o.innerHTML="";try{const{getEmailContext:n}=await Promise.resolve().then(t.bind(t,87473)),e=await n(),r=`Read this email and suggest exactly 3 short reply sentences (5-12 words each) that the user could send back as a response.\nEach suggestion should be an actual reply message, NOT an email client action like archiving or unsubscribing.\nReturn ONLY 3 lines, one suggestion per line. No numbering, no bullets, no quotes, no extra text.\n\nEmail:\n${`From: ${e.sender.name} <${e.sender.email}>\nSubject: ${e.subject}\n\n${e.body}`.slice(0,2e3)}`,i=await(0,g.Df)(r,{temperature:.9,maxOutputTokens:1024});console.log("[Suggest replies] Raw response:",i);const a=i.split("\n").map(n=>n.replace(/^\d+[\.\)\-]\s*/,"").replace(/^[-•*]\s*/,"").replace(/^["']|["']$/g,"").trim()).filter(n=>n.length>5&&n.length<120).slice(0,3);if(0===a.length)throw new Error("No suggestions returned. Please try again.");a.slice(0,3).forEach(n=>{const e=document.createElement("button");e.type="button",e.className="aic-suggestion-chip",e.textContent=n,e.addEventListener("click",()=>{const t=Y("reply-instructions");t&&(t.value=n,t.focus(),t.dispatchEvent(new Event("input",{bubbles:!0}))),o.querySelectorAll(".aic-suggestion-chip").forEach(n=>n.classList.remove("aic-suggestion-chip--active")),e.classList.add("aic-suggestion-chip--active")}),o.appendChild(e)}),o.classList.remove("hidden")}catch(n){en(n.message||"Failed to generate suggestions.")}finally{n.disabled=!1,e&&(e.textContent="Suggest replies")}}}function En(){const n=Y("reply-preview");if(!n)return;const e=n.innerText||n.textContent||"";if(e.trim())try{(0,T.Vx)(e)}catch(n){en(n.message||"Failed to open reply window.")}else en("No reply to insert. Please generate one first.")}function vn(){const n=Y("reply-preview");if(!n)return;const e=n.innerText||n.textContent||"";if(e.trim())try{(0,T.aR)(e)}catch(n){en(n.message||"Failed to open Reply All window.")}else en("No reply to insert. Please generate one first.")}async function yn(){const n={style:function(){const n=document.querySelector('input[name="summary-style"]:checked');return n?.value||"bullets"}(),length:Y("summary-length")?.value||"standard"};tn(),Z("Summarizing with Gemini...");try{on("summary-preview",await O(n)),X("summarize-result-section"),Y("summarize-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(n){en(n.message||"Failed to summarize. Please try again.")}finally{nn()}}async function Cn(){tn(),Z("Regenerating summary...");try{on("summary-preview",await async function(){if(!S)throw new Error("No previous summary to regenerate. Please summarize first.");return O(S)}())}catch(n){en(n.message||"Failed to regenerate summary. Please try again.")}finally{nn()}}async function bn(){const n=Y("summary-preview");if(!n)return;const e=n.innerText||n.textContent||"";if(e.trim())try{await async function(n){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(n);const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}(e);const n=Y("btn-copy-summary");if(n){const e=n.innerHTML;n.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',n.classList.add("aic-btn--success"),setTimeout(()=>{n.innerHTML=e,n.classList.remove("aic-btn--success")},1500)}}catch(n){en(n.message||"Failed to copy to clipboard.")}else en("No summary to copy.")}async function Bn(){const n={focus:function(){const n=document.querySelector('input[name="improve-focus"]:checked');return n?.value||"fix_grammar"}()};tn(),Z("Improving with Gemini...");try{const e=await M(n),t=Y("improve-diff");t&&(t.innerHTML=L(e.original,e.improved)),X("improve-result-section"),Y("improve-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(n){en(n.message||"Failed to improve text. Please try again.")}finally{nn()}}async function wn(){tn(),Z("Regenerating improvement...");try{const n=await async function(){if(!P)throw new Error("No previous improvement to regenerate.");return M(P)}(),e=Y("improve-diff");e&&(e.innerHTML=L(n.original,n.improved))}catch(n){en(n.message||"Failed to regenerate. Please try again.")}finally{nn()}}async function xn(){tn();try{const n=await async function(){if(!N)throw new Error("No improved text to accept.");return"compose"===(0,E.J5)()?(await(n=N,new Promise((e,t)=>{const o=Office.context.mailbox.item;o&&"body"in o?o.body.setAsync(n,{coercionType:Office.CoercionType.Text},n=>{n.status===Office.AsyncResultStatus.Succeeded?e():t(new Error(n.error?.message||"Failed to replace body"))}):t(new Error("Cannot access compose body"))})),"replaced"):(await async function(n){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(n);const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}(N),"copied");var n}(),e=Y("btn-accept-changes");if(e){const t=e.innerHTML,o="replaced"===n?'<i class="ms-Icon ms-Icon--CheckMark"></i> Replaced!':'<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!';e.innerHTML=o,e.classList.add("aic-btn--success"),setTimeout(()=>{e.innerHTML=t,e.classList.remove("aic-btn--success")},1500)}}catch(n){en(n.message||"Failed to accept changes.")}}async function _n(){tn(),Z("Scanning for action items...");try{const n=await F(),e=Y("extract-checklist");e&&(e.innerHTML=H(n)),X("extract-result-section"),Y("extract-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(n){en(n.message||"Failed to extract action items.")}finally{nn()}}async function Tn(){tn(),Z("Re-scanning for action items...");try{const n=await async function(){return F()}(),e=Y("extract-checklist");e&&(e.innerHTML=H(n))}catch(n){en(n.message||"Failed to re-extract.")}finally{nn()}}async function In(){const n=G;if(0!==n.length)try{const e=function(n){return 0===n.length?"No action items found.":n.map((n,e)=>{let t=`${e+1}. ${n.task}`;return n.owner&&"—"!==n.owner&&(t+=` (Owner: ${n.owner})`),n.deadline&&"—"!==n.deadline&&(t+=` [Due: ${n.deadline}]`),t}).join("\n")}(n);await async function(n){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(n);const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}(e);const t=Y("btn-copy-tasks");if(t){const n=t.innerHTML;t.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',t.classList.add("aic-btn--success"),setTimeout(()=>{t.innerHTML=n,t.classList.remove("aic-btn--success")},1500)}}catch(n){en(n.message||"Failed to copy tasks.")}else en("No action items to copy.")}async function Sn(){const n=Y("translate-language");if(n){tn(),Z("Translating email...");try{const e=await $(n.value),t=Y("translate-output");t&&(t.innerHTML=J(e)),X("translate-result-section"),Y("translate-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(n){en(n.message||"Failed to translate.")}finally{nn()}}}async function On(){const n=Y("translate-language");if(n){tn(),Z("Re-translating email...");try{const e=await async function(n){return $(n)}(n.value),t=Y("translate-output");t&&(t.innerHTML=J(e))}catch(n){en(n.message||"Failed to re-translate.")}finally{nn()}}}async function kn(){const n=W;if(n)try{await async function(n){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(n);const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}(n.translated);const e=Y("btn-copy-translation");if(e){const n=e.innerHTML;e.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',e.classList.add("aic-btn--success"),setTimeout(()=>{e.innerHTML=n,e.classList.remove("aic-btn--success")},1500)}}catch(n){en(n.message||"Failed to copy translation.")}else en("No translation to copy.")}Office.onReady(n=>{if(n.host===Office.HostType.Outlook){Q("sideload-msg"),X("app-body");const n=(0,E.J5)();if(function(n){if("compose"===n){const n=Y("btn-copy-compose");n&&(n.innerHTML='<i class="ms-Icon ms-Icon--Edit"></i> Insert into Email',n.title="Insert the draft into the current email");const e=Y("btn-insert-reply");e&&(e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg> Insert Reply',e.title="Insert the reply into the current email");const o=Y("btn-insert-reply-all");o&&o.classList.add("hidden");const r=Y("reply-sender"),i=Y("reply-subject");r&&(r.textContent="Loading…"),Promise.resolve().then(t.bind(t,89419)).then(async({getOriginalSender:n,getCurrentEmailSubject:e})=>{try{const[e,t]=await Promise.all([n(),(async()=>{const n=Office.context.mailbox.item;return n&&n.subject&&"function"==typeof n.subject.getAsync?new Promise(e=>{n.subject.getAsync(n=>{e(n.status===Office.AsyncResultStatus.Succeeded&&n.value||"(new email)")})}):"(new email)"})()]);r&&(r.textContent=e.name?`${e.name} <${e.email}>`:e.email||"Unknown sender"),i&&(i.textContent=t)}catch{r&&(r.textContent="Could not read email"),i&&(i.textContent="—")}})}}(n),"read"===n)cn();else if("compose"===n){const n=Office.context.mailbox.item;n&&n.to&&"function"==typeof n.to.getAsync?n.to.getAsync(n=>{n.status===Office.AsyncResultStatus.Succeeded&&n.value&&n.value.length>0?ln("reply"):ln("draft")}):ln("draft")}Office.context.mailbox&&Office.context.mailbox.addHandlerAsync(Office.EventType.ItemChanged,()=>{cn()});const e=(0,v.loadSettings)();try{const n=e.apiKey||window.__AICompose_API_KEY__||"";n&&(0,g.HW)(n)}catch{}const o=n=>{const e=Y("draft-tone"),t=Y("reply-tone");e&&(e.value=n.defaultTone),t&&(t.value=n.defaultTone);const o=document.querySelector(`input[name="summary-style"][value="${n.defaultSummaryStyle}"]`);o&&(o.checked=!0);const r=Y("translate-language");r&&(r.value=n.defaultLanguage);const i=Y("settings-api-key"),a=Y("settings-model"),s=Y("settings-tone"),l=Y("settings-summary-style"),c=Y("settings-language");i&&(i.value=n.apiKey),a&&(a.value=n.defaultModel),s&&(s.value=n.defaultTone),l&&(l.value=n.defaultSummaryStyle),c&&(c.value=n.defaultLanguage);for(const[e,t]of Object.entries(n.presetRules)){const n=Y(`rule-${e}`);n&&(n.checked=t)}const A=Y("custom-rules");A&&(A.value=n.customRules)};o(e);try{const n=Office.context.officeTheme;if(n?.bodyBackgroundColor){const e=n.bodyBackgroundColor.replace("#",""),t=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16);.299*t+.587*o+.114*parseInt(e.substring(4,6),16)<128&&document.documentElement.setAttribute("data-theme","dark")}}catch{}new Set(["summarize","improve","extract"]);const r=Y("tab-more"),i=Y("more-dropdown"),a=r?.closest(".aic-split"),s=n=>{if(!i||!a)return;const e=void 0!==n?n:i.classList.contains("hidden");i.classList.toggle("hidden",!e),a.classList.toggle("aic-split--open",e)};document.querySelectorAll(".aic-tabs > .aic-tab").forEach(n=>{n.addEventListener("click",()=>{const e=n.dataset.tab;e&&"more"!==e&&(ln(e),r?.classList.remove("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(n=>n.classList.remove("aic-dropdown__item--active")),s(!1))})}),r?.addEventListener("click",n=>{n.stopPropagation(),s()}),document.querySelectorAll(".aic-dropdown__item").forEach(n=>{n.addEventListener("click",e=>{e.stopPropagation();const t=n.dataset.tab;t&&(ln(t),document.querySelectorAll(".aic-tab").forEach(n=>n.classList.remove("aic-tab--active")),r?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(n=>n.classList.remove("aic-dropdown__item--active")),n.classList.add("aic-dropdown__item--active"),s(!1))})}),document.addEventListener("click",()=>s(!1)),document.querySelectorAll(".aic-char-count[data-for]").forEach(n=>{const e=n.getAttribute("data-for");if(!e)return;const t=Y(e);if(!t)return;const o=t.maxLength||1e3,r=document.querySelector(`.aic-btn-clear[data-clear="${e}"]`);t.addEventListener("input",()=>{n.textContent=`${t.value.length} / ${o}`,t.style.height="auto",t.style.height=t.scrollHeight+"px",r&&(t.value.length>0?r.classList.remove("hidden"):r.classList.add("hidden"))})}),document.querySelectorAll(".aic-btn-clear[data-clear]").forEach(n=>{n.addEventListener("click",()=>{const e=n.getAttribute("data-clear");if(!e)return;const t=Y(e);t&&(t.value="",t.style.height="",t.dispatchEvent(new Event("input")),t.focus())})}),Y("btn-generate")?.addEventListener("click",An),Y("btn-regenerate")?.addEventListener("click",un),Y("btn-refine")?.addEventListener("click",dn),Y("btn-copy-compose")?.addEventListener("click",pn),Y("refine-input")?.addEventListener("keydown",n=>{"Enter"===n.key&&dn()}),Y("btn-generate-reply")?.addEventListener("click",mn),Y("btn-suggest-replies")?.addEventListener("click",gn),Y("btn-regenerate-reply")?.addEventListener("click",hn),Y("btn-refine-reply")?.addEventListener("click",fn),Y("btn-insert-reply")?.addEventListener("click",En),Y("btn-insert-reply-all")?.addEventListener("click",vn),Y("reply-refine-input")?.addEventListener("keydown",n=>{"Enter"===n.key&&fn()}),Y("btn-summarize")?.addEventListener("click",yn),Y("btn-regenerate-summary")?.addEventListener("click",Cn),Y("btn-copy-summary")?.addEventListener("click",bn),Y("btn-improve")?.addEventListener("click",Bn),Y("btn-regenerate-improve")?.addEventListener("click",wn),Y("btn-accept-changes")?.addEventListener("click",xn),Y("btn-extract")?.addEventListener("click",_n),Y("btn-regenerate-extract")?.addEventListener("click",Tn),Y("btn-copy-tasks")?.addEventListener("click",In),Y("btn-translate")?.addEventListener("click",Sn),Y("btn-regenerate-translate")?.addEventListener("click",On),Y("btn-copy-translation")?.addEventListener("click",kn),Y("tab-settings")?.addEventListener("click",()=>{ln("settings"),document.querySelectorAll(".aic-tab").forEach(n=>n.classList.remove("aic-tab--active")),Y("tab-settings")?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(n=>n.classList.remove("aic-dropdown__item--active")),s(!1)}),Y("tab-rules")?.addEventListener("click",()=>{ln("rules"),document.querySelectorAll(".aic-tab").forEach(n=>n.classList.remove("aic-tab--active")),Y("tab-rules")?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(n=>n.classList.remove("aic-dropdown__item--active")),s(!1)}),Y("btn-save-rules")?.addEventListener("click",()=>{const n=(0,v.loadSettings)(),e={};for(const t of Object.keys(n.presetRules)){const n=Y(`rule-${t}`);e[t]=n?.checked??!1}const t=Y("custom-rules")?.value||"";(0,v.saveSettings)({...n,presetRules:e,customRules:t});const o=Y("rules-saved-msg");o&&(o.classList.remove("hidden"),setTimeout(()=>{o.classList.add("hidden")},2500))}),Y("btn-toggle-api-key")?.addEventListener("click",()=>{const n=Y("settings-api-key"),e=Y("icon-eye-show"),t=Y("icon-eye-hide");n&&("password"===n.type?(n.type="text",e&&e.classList.add("hidden"),t&&t.classList.remove("hidden")):(n.type="password",e&&e.classList.remove("hidden"),t&&t.classList.add("hidden")))}),Y("btn-save-settings")?.addEventListener("click",()=>{const n=Y("settings-api-key")?.value?.trim()||"",e=Y("settings-model")?.value||"gemini-3-flash-preview",t=Y("settings-tone")?.value||"professional",r=Y("settings-summary-style")?.value||"bullets",i=Y("settings-language")?.value||"English",a=Y("api-key-error");if(n&&!K(n))return void(a&&(a.textContent='Invalid API key format. Keys typically start with "AIza" and are 39 characters long.',a.classList.remove("hidden")));a&&a.classList.add("hidden");const s={...(0,v.loadSettings)(),apiKey:n,defaultModel:e,defaultTone:t,defaultSummaryStyle:r,defaultLanguage:i};(0,v.saveSettings)(s),o(s);const l=Y("settings-saved-msg");l&&(l.classList.remove("hidden"),setTimeout(()=>{l.classList.add("hidden")},2e3));const c=Y("btn-save-settings");c&&(c.classList.add("aic-btn--success"),setTimeout(()=>c.classList.remove("aic-btn--success"),1500))}),Y("btn-test-connection")?.addEventListener("click",async()=>{const n=Y("settings-api-key")?.value?.trim()||"",e=Y("test-connection-result"),t=Y("api-key-error"),o=Y("btn-test-connection");if(e)if(n)if(K(n)){t&&t.classList.add("hidden"),e.classList.remove("hidden"),e.style.color="var(--color-aic-text-secondary)",e.textContent="Testing connection…",o&&o.setAttribute("disabled","true");try{(0,g.HW)(n);try{await(0,g.Df)("Say hello in one word.",{maxOutputTokens:20,temperature:.5})}catch(n){if("CONTENT_FILTERED"!==n?.code)throw n}e.style.color="var(--color-aic-success)",e.textContent="✓ Connection successful! API key is valid.",o&&(o.classList.add("aic-btn--success"),setTimeout(()=>o.classList.remove("aic-btn--success"),2e3))}catch(n){e.style.color="var(--color-aic-error-text)",e.textContent=`✗ ${n.message||"Connection failed. Please check your API key."}`}finally{o&&o.removeAttribute("disabled")}}else t&&(t.textContent='Invalid API key format. Keys typically start with "AIza" and are 39 characters long.',t.classList.remove("hidden"));else t&&(t.textContent="Please enter an API key first.",t.classList.remove("hidden"))}),Y("btn-clear-all-data")?.addEventListener("click",()=>{(0,v.resetSettings)();const n=(0,v.loadSettings)();o(n);const e=Y("clear-data-msg");e&&(e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("hidden")},2500))});const l=Y("btn-scroll-top");l&&(window.addEventListener("scroll",()=>{window.scrollY>300?l.classList.remove("hidden"):l.classList.add("hidden")}),l.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));const c=()=>{const n=(0,v.getTemplates)();["draft","reply"].forEach(e=>{const t=Y(`${e}-template`);if(!t)return;const o=t.value;t.innerHTML='<option value="">Templates...</option>';const r=e;n.filter(n=>n.type===r||"both"===n.type).forEach(n=>{const e=document.createElement("option");e.value=n.id,e.textContent=n.name,t.appendChild(e)}),t.value=o})};c(),["draft","reply"].forEach(n=>{const e=Y(`${n}-template`),t=Y(`${n}-instructions`),o=Y(`btn-delete-${n}-template`);e?.addEventListener("change",()=>{const n=e.value;if(!n)return void o?.classList.add("hidden");const r=(0,v.getTemplates)().find(e=>e.id===n);r&&t&&(t.value=r.instructions,t.dispatchEvent(new Event("input",{bubbles:!0}))),o?.classList.remove("hidden")}),Y(`btn-save-${n}-template`)?.addEventListener("click",()=>{const o=t?.value?.trim();if(!o)return void en("Write some instructions first before saving as a template.");const r=e?.parentElement;if(!r)return;if(r.querySelector(".aic-template-name-input"))return;const i=document.createElement("input");i.type="text",i.className="aic-select aic-template-select flex-1 aic-template-name-input",i.placeholder="Template name...",i.maxLength=50,e.classList.add("hidden"),r.insertBefore(i,e),i.focus();const a=t=>{const r=i.value.trim();i.remove(),e.classList.remove("hidden"),t&&r&&((0,v.saveTemplate)({name:r,instructions:o,type:n}),c())};i.addEventListener("keydown",n=>{"Enter"===n.key&&a(!0),"Escape"===n.key&&a(!1)}),i.addEventListener("blur",()=>a(!0))}),Y(`btn-delete-${n}-template`)?.addEventListener("click",()=>{const n=e?.value;n&&((0,v.deleteTemplate)(n),e.value="",o?.classList.add("hidden"),c())})}),["draft","reply"].forEach(n=>{const e=Y(`${n}-goal`),t=Y(`${n}-goal-custom`);e&&t&&e.addEventListener("change",()=>{"custom"===e.value?(t.classList.remove("hidden"),t.focus()):(t.classList.add("hidden"),t.value="")})}),["draft-preview","reply-preview"].forEach(n=>{Y(n)?.addEventListener("input",()=>rn(n))}),document.querySelectorAll(".aic-copy-btn").forEach(n=>{n.addEventListener("click",async()=>{const e=n.dataset.copyTarget;if(!e)return;const t=Y(e);if(!t)return;const o=t.innerText||t.textContent||"";if(o.trim())try{await navigator.clipboard.writeText(o);const e=n.innerHTML;n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>',n.classList.add("aic-copy-btn--success"),setTimeout(()=>{n.innerHTML=e,n.classList.remove("aic-copy-btn--success")},1500)}catch{en("Failed to copy to clipboard.")}})}),Y("btn-dismiss-error")?.addEventListener("click",tn)}})})()})();
//# sourceMappingURL=taskpane.js.map