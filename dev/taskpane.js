/*! For license information please see taskpane.js.LICENSE.txt */
(()=>{var e={39026(e,n,t){"use strict";const o=t(12935),r=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,n)=>new Promise((t,s)=>{n={onFailedAttempt:()=>{},retries:10,...n};const a=o.operation(n);a.attempt(async o=>{try{t(await e(o))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof i)a.stop(),s(e.originalError);else if(e instanceof TypeError&&(l=e.message,!r.includes(l)))a.stop(),s(e);else{((e,n,t)=>{const o=t.retries-(n-1);e.attemptNumber=n,e.retriesLeft=o})(e,o,n);try{await n.onFailedAttempt(e)}catch(e){return void s(e)}a.retry(e)||s(a.mainError())}}var l})});e.exports=s,e.exports.default=s,e.exports.AbortError=i},12935(e,n,t){e.exports=t(24665)},24665(e,n,t){var o=t(64063);n.operation=function(e){var t=n.timeouts(e);return new o(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},n.timeouts=function(e){if(e instanceof Array)return[].concat(e);var n={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var t in e)n[t]=e[t];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],r=0;r<n.retries;r++)o.push(this.createTimeout(r,n));return e&&e.forever&&!o.length&&o.push(this.createTimeout(r,n)),o.sort(function(e,n){return e-n}),o},n.createTimeout=function(e,n){var t=n.randomize?Math.random()+1:1,o=Math.round(t*Math.max(n.minTimeout,1)*Math.pow(n.factor,e));return Math.min(o,n.maxTimeout)},n.wrap=function(e,t,o){if(t instanceof Array&&(o=t,t=null),!o)for(var r in o=[],e)"function"==typeof e[r]&&o.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=e[s];e[s]=function(o){var r=n.operation(t),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push(function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),s.apply(this,arguments))}),r.attempt(function(){o.apply(e,i)})}.bind(e,a),e[s].options=t}}},64063(e){function n(e,n){"boolean"==typeof n&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=(new Date).getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1)}var o=this;return this._timer=setTimeout(function(){o._attempts++,o._operationTimeoutCb&&(o._timeout=setTimeout(function(){o._operationTimeoutCb(o._attempts)},o._operationTimeout),o._options.unref&&o._timeout.unref()),o._fn(o._attempts)},t),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},n=null,t=0,o=0;o<this._errors.length;o++){var r=this._errors[o],i=r.message,s=(e[i]||0)+1;e[i]=s,s>=t&&(n=r,t=s)}return n}},87473(e,n,t){"use strict";t.d(n,{FA:()=>m,Q$:()=>h,Vx:()=>f,aR:()=>g,getEmailContext:()=>d,jt:()=>p,qP:()=>u,yd:()=>A});var o=t(75260),r=t(47336),i=t(43712),s=t(89419);let a=null,l="",c=null;async function u(){const[e,n,t]=await Promise.all([(0,s.k3)(),(0,s.getCurrentEmailSubject)(),(0,s.getOriginalSender)()]);return c={subject:n,body:e,sender:t},c}async function d(){return c||u()}function p(){c=null}async function A(e){if(!e.instructions||!e.instructions.trim())throw new Error("Please enter your reply instructions.");const n=await d();let t=`From: ${n.sender.name} <${n.sender.email}>\n`;t+=`Subject: ${n.subject}\n\n`,t+=n.body;const s=e.language&&"auto"!==e.language?e.language:"Reply in the same language as the original email",c=(0,r.fn)(i.Yu,{ORIGINAL_EMAIL:t,REPLY_INSTRUCTIONS:e.instructions,TONE:e.tone||"professional",LANGUAGE:s,REPLY_TO_NAME:n.sender.name||n.sender.email||"the sender"},!0),u=await(0,o.Df)(c,{temperature:.7,maxOutputTokens:2048});return a={...e},l=u,u}async function m(){if(!a)throw new Error("No previous reply to regenerate. Please generate a reply first.");return A(a)}async function h(e){if(!l)throw new Error("No reply to refine. Please generate a reply first.");if(!e||!e.trim())throw new Error("Please enter your refinement instructions.");const n=`You are a professional email assistant.\n\nHere is the current draft reply:\n\n---\n${l}\n---\n\nPlease revise the reply based on these instructions: ${e}\n\nRequirements:\n- Keep the same general format (greeting, body, sign-off)\n- Apply the requested changes while maintaining quality\n- Return only the revised reply, no explanations`,t=await(0,o.Df)(n,{temperature:.6,maxOutputTokens:2048});return l=t,t}function f(e){const n=(0,s.J5)(),t=Office.context.mailbox.item;if("compose"===n){if(!t||!t.body||"function"!=typeof t.body.prependAsync)throw new Error("Cannot insert reply — compose body is not accessible.");t.body.prependAsync(E(e),{coercionType:Office.CoercionType.Html})}else{if(!t||"function"!=typeof t.displayReplyForm)throw new Error("Cannot open reply window. Please make sure an email is selected.");t.displayReplyForm(E(e))}}function g(e){const n=(0,s.J5)(),t=Office.context.mailbox.item;if("compose"===n){if(!t||!t.body||"function"!=typeof t.body.prependAsync)throw new Error("Cannot insert reply — compose body is not accessible.");t.body.prependAsync(E(e),{coercionType:Office.CoercionType.Html})}else{if(!t||"function"!=typeof t.displayReplyAllForm)throw new Error("Cannot open Reply All window. Please make sure an email is selected.");t.displayReplyAllForm(E(e))}}function E(e){return e.split("\n\n").map(e=>`<p>${function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(e).replace(/\n/g,"<br>")}</p>`).join("")}},33422(e,n,t){"use strict";t.r(n),t.d(n,{GOAL_PROMPTS:()=>f,PRESET_RULE_LABELS:()=>m,buildGoalText:()=>g,buildRulesText:()=>h,deleteTemplate:()=>C,getApiKey:()=>u,getSetting:()=>p,getTemplates:()=>y,loadSettings:()=>l,resetSettings:()=>A,saveSettings:()=>c,saveTemplate:()=>v,setApiKey:()=>d});var o=t(75260);const r="ai_compose_settings",i="glide_settings",s={apiKey:"",defaultModel:"gemini-3-flash-preview",defaultTone:"professional",defaultSummaryStyle:"bullets",defaultLanguage:"English",presetRules:{noPlaceholders:!0,noSignature:!0,noSubjectLine:!1,keepShort:!1,useSimpleLanguage:!1},customRules:""};let a=null;function l(){if(a)return{...a};try{let e=localStorage.getItem(r);if(!e){const n=localStorage.getItem(i);n&&(e=n,localStorage.setItem(r,n),localStorage.removeItem(i))}if(e){const n=JSON.parse(e);a={...s,...n}}else a={...s}}catch{a={...s}}return{...a}}function c(e){const n=a?.apiKey||"";a={...e};try{localStorage.setItem(r,JSON.stringify(a))}catch{}if(e.apiKey&&e.apiKey!==n)try{(0,o.HW)(e.apiKey)}catch{}}function u(){return l().apiKey}function d(e){const n=l();n.apiKey=e,c(n)}function p(e){return l()[e]}function A(){a={...s};try{localStorage.removeItem(r)}catch{}}const m={noPlaceholders:"Do not include placeholder tokens like [Your Name], [Company], or [Recipient]. Use real names from context or omit the sign-off entirely instead of using placeholders",noSignature:'Do not add a sign-off or signature (e.g. "Best regards", "Kind regards", "Sincerely") — the email client will add the signature automatically',noSubjectLine:"Do not include a subject line in the output",keepShort:"Keep the output concise — no more than 5 sentences",useSimpleLanguage:"Use simple, easy-to-understand language (avoid jargon)"};function h(){const e=l(),n=[];for(const[t,o]of Object.entries(e.presetRules))o&&m[t]&&n.push(`- ${m[t]}`);return e.customRules.trim()&&n.push(`- ${e.customRules.trim()}`),n.length>0?`\n\nAdditional rules:\n${n.join("\n")}`:""}const f={"close-deal":"Write with the strategic goal of CLOSING A DEAL. Create appropriate urgency, reinforce value and benefits, proactively address potential objections, and end with a clear, specific call to action. Use confident but not pushy language.","get-approval":"Write with the strategic goal of GETTING A QUOTE OR PROPOSAL APPROVED. Summarize key value propositions concisely, address any likely concerns preemptively, create a sense of momentum, and make it easy to say yes with a clear next step.","schedule-meeting":"Write with the strategic goal of SCHEDULING A MEETING. Propose specific times (if context allows), emphasize the value of the meeting, keep it brief and action-oriented, and make it effortless to confirm.","follow-up":"Write with the strategic goal of FOLLOWING UP ON AN OVERDUE ITEM. Be firm but professional, reference the original timeline, express understanding while maintaining urgency, and request a specific response or action by a clear date.","request-intro":"Write with the strategic goal of REQUESTING A FAVOR OR INTRODUCTION. Be respectful of the recipient's time, clearly explain the mutual benefit, make it easy to say yes by providing context they can forward, and express genuine appreciation.","resolve-complaint":"Write with the strategic goal of RESOLVING A COMPLAINT. Acknowledge the issue with empathy, take ownership where appropriate, propose a concrete resolution, and aim to turn a negative experience into a positive one."};function g(e,n){if(!e||"none"===e)return"";if("custom"===e&&n?.trim())return`\n\nStrategic goal: ${n.trim()}. Write the email with this specific outcome in mind — use appropriate persuasion, structure, and a clear call to action.`;const t=f[e];return t?`\n\n${t}`:""}const E="aic_templates";function y(){try{const e=localStorage.getItem(E);return e?JSON.parse(e):[]}catch{return[]}}function v(e){const n=y(),t={...e,id:Date.now().toString(36)+Math.random().toString(36).slice(2,6)};return n.push(t),localStorage.setItem(E,JSON.stringify(n)),t}function C(e){const n=y().filter(n=>n.id!==e);localStorage.setItem(E,JSON.stringify(n))}},47336(e,n,t){"use strict";function o(e,n,o=!1){if(!e)throw new Error("Prompt template cannot be empty.");let r=e;for(const[e,t]of Object.entries(n)){const n=`{{${e}}}`;r=r.split(n).join(t)}if(o)try{const{buildRulesText:e}=t(33422);r+=e()}catch{}return r}t.d(n,{fn:()=>o})},43712(e,n,t){"use strict";t.d(n,{DS:()=>s,Yu:()=>r,fz:()=>a,mH:()=>i,mR:()=>o,uC:()=>l});const o='You are a professional email assistant.\n\nDraft a complete email based on the following instructions:\n\n{{INSTRUCTIONS}}\n\nRequirements:\n- Tone: {{TONE}}\n- Language: {{LANGUAGE}}\n- Include a subject line on the first line prefixed with "Subject: "\n- Use an appropriate greeting\n- Keep the email concise and to the point\n- Do not add any commentary outside the email itself',r="You are a professional email assistant.\n\nHere is the original email you are replying to:\n\n---\n{{ORIGINAL_EMAIL}}\n---\n\nReply instructions: {{REPLY_INSTRUCTIONS}}\n\nRequirements:\n- Tone: {{TONE}}\n- Language: {{LANGUAGE}}\n- Address the reply to: {{REPLY_TO_NAME}} (this is the person you are replying to, NOT the person the original email was addressed to)\n- Write only the reply body (no subject line needed)\n- Reference relevant points from the original email naturally\n- Keep the reply focused and professional\n- Do not add any commentary outside the reply itself",i="You are a professional email assistant.\n\nSummarize the following email thread:\n\n---\n{{EMAIL_THREAD}}\n---\n\nRequirements:\n- Length: {{SUMMARY_LENGTH}} (brief = 2-3 sentences, standard = 1 paragraph, detailed = multiple paragraphs)\n- Identify the key discussion points and decisions made\n- Note any action items or deadlines mentioned\n- List the participants and their main positions\n- Use bullet points for clarity where appropriate\n- Do not add opinions or information not present in the thread",s="You are a professional writing assistant.\n\nImprove the following text:\n\n---\n{{TEXT}}\n---\n\nFocus on: {{IMPROVEMENT_FOCUS}}\n\nRequirements:\n- Fix grammar, spelling, and punctuation errors\n- Improve clarity and readability\n- Maintain the original meaning and intent\n- Keep the same general length unless brevity improves the text\n- Return only the improved text, no explanations or annotations",a='You are a professional email assistant.\n\nExtract all action items, tasks, and deadlines from the following email:\n\n---\n{{EMAIL_CONTENT}}\n---\n\nRequirements:\n- List each action item as a bullet point\n- For each item, identify:\n  - **Task**: What needs to be done\n  - **Owner**: Who is responsible (if mentioned)\n  - **Deadline**: When it\'s due (if mentioned)\n- If no action items are found, respond with "No action items found."\n- Only extract items explicitly stated or clearly implied in the email\n- Do not invent tasks that are not present',l="You are a professional translator.\n\nTranslate the following text to {{TARGET_LANGUAGE}}:\n\n---\n{{TEXT}}\n---\n\nRequirements:\n- Maintain the original formatting (paragraphs, bullet points, etc.)\n- Preserve the original tone and register\n- Use natural, fluent phrasing in the target language (not literal word-for-word)\n- Keep proper nouns, brand names, and technical terms as-is unless they have\n  well-known translations\n- Return only the translated text, no explanations"},75260(e,n,t){"use strict";t.d(n,{ZU:()=>m,mm:()=>gr,Df:()=>fr,HW:()=>mr});var o=t(39026);class r{}function i(e,n){return e.replace(/\{([^}]+)\}/g,(e,t)=>{if(Object.prototype.hasOwnProperty.call(n,t)){const e=n[t];return null!=e?String(e):""}throw new Error(`Key '${t}' not found in valueMap.`)})}function s(e,n,t){for(let o=0;o<n.length-1;o++){const r=n[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in e)){if(!Array.isArray(t))throw new Error(`Value must be a list given an array path ${r}`);e[i]=Array.from({length:t.length},()=>({}))}if(Array.isArray(e[i])){const r=e[i];if(Array.isArray(t))for(let e=0;e<r.length;e++)s(r[e],n.slice(o+1),t[e]);else for(const e of r)s(e,n.slice(o+1),t)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);return i in e||(e[i]=[{}]),void s(e[i][0],n.slice(o+1),t)}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}const o=n[n.length-1],r=e[o];if(void 0!==r){if(!t||"object"==typeof t&&0===Object.keys(t).length)return;if(t===r)return;if("object"!=typeof r||"object"!=typeof t||null===r||null===t)throw new Error(`Cannot set value for an existing key. Key: ${o}`);Object.assign(r,t)}else if("_self"!==o||"object"!=typeof t||null===t||Array.isArray(t))e[o]=t;else{const n=t;Object.assign(e,n)}}function a(e,n,t=void 0){try{if(1===n.length&&"_self"===n[0])return e;for(let o=0;o<n.length;o++){if("object"!=typeof e||null===e)return t;const r=n[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const r=e[i];return Array.isArray(r)?r.map(e=>a(e,n.slice(o+1),t)):t}return t}e=e[r]}return e}catch(e){if(e instanceof TypeError)return t;throw e}}function l(e,n,t,o,r){if(o>=n.length)return;if("object"!=typeof e||null===e)return;const i=n[o];if(i.endsWith("[]")){const s=i.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(const e of a[s])l(e,n,t,o+1,r)}else if("*"===i){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const n=e,i=Object.keys(n).filter(e=>!e.startsWith("_")&&!r.has(e)),a={};for(const e of i)a[e]=n[e];for(const[e,r]of Object.entries(a)){const i=[];for(const n of t.slice(o))"*"===n?i.push(e):i.push(n);s(n,i,r)}for(const e of i)delete n[e]}}else i in e&&l(e[i],n,t,o+1,r)}function c(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}function u(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["parent"]);null!=o&&s(n,["parent"],o);const r=a(e,["documentName"]);return null!=r&&s(n,["documentName"],r),n}(l)),n}var d,p,A,m,h,f,g,E,y,v,C,b,w,_,x,B,T,I,S,O,k,R,N,P,D,M,L,U,q,G,j,F,H,V,$,W,J,Y,z,K,X,Q,Z,ee,ne,te,oe,re,ie,se,ae,le,ce,ue,de,pe,Ae,me,he;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(d||(d={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(p||(p={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(A||(A={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(m||(m={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(h||(h={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(f||(f={})),function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(g||(g={})),function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(E||(E={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(y||(y={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(v||(v={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(C||(C={})),function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"}(b||(b={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(w||(w={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(_||(_={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(x||(x={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"}(B||(B={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(T||(T={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(I||(I={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(S||(S={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"}(O||(O={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(k||(k={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(R||(R={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(N||(N={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(P||(P={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(D||(D={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(M||(M={})),function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"}(L||(L={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"}(U||(U={})),function(e){e.COLLECTION="COLLECTION"}(q||(q={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(G||(G={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(j||(j={})),function(e){e.PREDICT="PREDICT",e.EMBED_CONTENT="EMBED_CONTENT"}(F||(F={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(H||(H={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(V||(V={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}($||($={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(W||(W={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(J||(J={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(Y||(Y={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(z||(z={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(K||(K={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(X||(X={})),function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"}(Q||(Q={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(Z||(Z={})),function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"}(ee||(ee={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"}(ne||(ne={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(te||(te={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"}(oe||(oe={})),function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"}(re||(re={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(ie||(ie={})),function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"}(se||(se={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"}(ae||(ae={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(le||(le={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(ce||(ce={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(ue||(ue={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(de||(de={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(pe||(pe={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(Ae||(Ae={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(me||(me={}));class fe{constructor(e){const n={};for(const t of e.headers.entries())n[t[0]]=t[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ge{get text(){var e,n,t,o,r,i,s,a;if(0===(null===(o=null===(t=null===(n=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",c=!1;const u=[];for(const e of null!==(a=null===(s=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[n,t]of Object.entries(e))"text"===n||"thought"===n||"thoughtSignature"===n||null===t&&void 0===t||u.push(n);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;c=!0,l+=e.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?l:void 0}get data(){var e,n,t,o,r,i,s,a;if(0===(null===(o=null===(t=null===(n=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const c=[];for(const e of null!==(a=null===(s=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[n,t]of Object.entries(e))"inlineData"===n||null===t&&void 0===t||c.push(n);e.inlineData&&"string"==typeof e.inlineData.data&&(l+=atob(e.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var e,n,t,o,r,i,s,a;if(0===(null===(o=null===(t=null===(n=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,n,t,o,r,i,s,a,l;if(0===(null===(o=null===(t=null===(n=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(a=null===(s=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,n,t,o,r,i,s,a,l;if(0===(null===(o=null===(t=null===(n=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content)||void 0===t?void 0:t.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(a=null===(s=null===(i=null===(r=this.candidates)||void 0===r?void 0:r[0])||void 0===i?void 0:i.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class Ee{}class ye{}class ve{}class Ce{}class be{}class we{}class _e{}class xe{}class Be{}class Te{}class Ie{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const t=new Ie;let o;const r=e;return o=n?function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["videos"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["_self"]);return null!=t&&s(n,["video"],function(e){const n={},t=a(e,["gcsUri"]);null!=t&&s(n,["uri"],t);const o=a(e,["bytesBase64Encoded"]);null!=o&&s(n,["videoBytes"],c(o));const r=a(e,["mimeType"]);return null!=r&&s(n,["mimeType"],r),n}(t)),n}(e))),s(n,["generatedVideos"],e)}const o=a(e,["raiMediaFilteredCount"]);null!=o&&s(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return null!=r&&s(n,["raiMediaFilteredReasons"],r),n}(l)),n}(r):function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response","generateVideoResponse"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["generatedSamples"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["video"]);return null!=t&&s(n,["video"],function(e){const n={},t=a(e,["uri"]);null!=t&&s(n,["uri"],t);const o=a(e,["encodedVideo"]);null!=o&&s(n,["videoBytes"],c(o));const r=a(e,["encoding"]);return null!=r&&s(n,["mimeType"],r),n}(t)),n}(e))),s(n,["generatedVideos"],e)}const o=a(e,["raiMediaFilteredCount"]);null!=o&&s(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return null!=r&&s(n,["raiMediaFilteredReasons"],r),n}(l)),n}(r),Object.assign(t,o),t}}class Se{}class Oe{}class ke{}class Re{}class Ne{}class Pe{}class De{}class Me{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const t=new Me,o=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["parent"]);null!=o&&s(n,["parent"],o);const r=a(e,["documentName"]);return null!=r&&s(n,["documentName"],r),n}(l)),n}(e);return Object.assign(t,o),t}}class Le{}class Ue{}class qe{}class Ge{}class je{}class Fe{get text(){var e,n,t;let o="",r=!1;const i=[];for(const s of null!==(t=null===(n=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===n?void 0:n.parts)&&void 0!==t?t:[]){for(const[e,n]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==n&&i.push(e);if("string"==typeof s.text){if("boolean"==typeof s.thought&&s.thought)continue;r=!0,o+=s.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,n,t;let o="";const r=[];for(const i of null!==(t=null===(n=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===n?void 0:n.parts)&&void 0!==t?t:[]){for(const[e,n]of Object.entries(i))"inlineData"!==e&&null!==n&&r.push(e);i.inlineData&&"string"==typeof i.inlineData.data&&(o+=atob(i.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class He{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ve{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const t=new Ve,o=u(e);return Object.assign(t,o),t}}function $e(e,n){if(!n||"string"!=typeof n)throw new Error("model is required and must be a string");if(n.includes("..")||n.includes("?")||n.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${n}`}return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function We(e,n){const t=$e(e,n);return t?t.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:t.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${t}`:t:""}function Je(e){return Array.isArray(e)?e.map(e=>Ye(e)):[Ye(e)]}function Ye(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function ze(e){const n=Ye(e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Ke(e){const n=Ye(e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Xe(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function Qe(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>Xe(e)):[Xe(e)]}function Ze(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function en(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function nn(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function tn(e){if(null==e)throw new Error("ContentUnion is required");return Ze(e)?e:{role:"user",parts:Qe(e)}}function on(e,n){if(!n)return[];if(e.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{const n=tn(e);return n.parts&&n.parts.length>0&&void 0!==n.parts[0].text?[n.parts[0].text]:[]});if(e.isVertexAI()){const e=tn(n);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>tn(e)):[tn(n)]}function rn(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(en(e)||nn(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(e)]}const n=[],t=[],o=Ze(e[0]);for(const r of e){const e=Ze(r);if(e!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)n.push(r);else{if(en(r)||nn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||n.push({role:"user",parts:Qe(t)}),n}function sn(e){const n={},t=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(n.nullable=!0,e=i[1]):"null"===i[1].type&&(n.nullable=!0,e=i[0])),e.type instanceof Array&&function(e,n){e.includes("null")&&(n.nullable=!0);const t=e.filter(e=>"null"!==e);if(1===t.length)n.type=Object.values(m).includes(t[0].toUpperCase())?t[0].toUpperCase():m.TYPE_UNSPECIFIED;else{n.anyOf=[];for(const e of t)n.anyOf.push({type:Object.values(m).includes(e.toUpperCase())?e.toUpperCase():m.TYPE_UNSPECIFIED})}}(e.type,n);for(const[i,s]of Object.entries(e))if(null!=s)if("type"==i){if("null"===s)throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;n.type=Object.values(m).includes(s.toUpperCase())?s.toUpperCase():m.TYPE_UNSPECIFIED}else if(t.includes(i))n[i]=sn(s);else if(o.includes(i)){const e=[];for(const t of s)"null"!=t.type?e.push(sn(t)):n.nullable=!0;n[i]=e}else if(r.includes(i)){const e={};for(const[n,t]of Object.entries(s))e[n]=sn(t);n[i]=e}else{if("additionalProperties"===i)continue;n[i]=s}return n}function an(e){return sn(e)}function ln(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function cn(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function un(e){if(e.functionDeclarations)for(const n of e.functionDeclarations)n.parameters&&(Object.keys(n.parameters).includes("$schema")?n.parametersJsonSchema||(n.parametersJsonSchema=n.parameters,delete n.parameters):n.parameters=sn(n.parameters)),n.response&&(Object.keys(n.response).includes("$schema")?n.responseJsonSchema||(n.responseJsonSchema=n.response,delete n.response):n.response=sn(n.response));return e}function dn(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const n=[];for(const t of e)n.push(t);return n}function pn(e,n){if("string"!=typeof n)throw new Error("name must be a string");return function(e,n,t,o=1){const r=!n.startsWith(`${t}/`)&&n.split("/").length===o;return e.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${e.getProject()}/${n}`:n.startsWith(`${t}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}/${n}`:n:r?`${t}/${n}`:n}(e,n,"cachedContents")}function An(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function mn(e){return c(e)}function hn(e){var n;let t;var o;if(null!=(o=e)&&"object"==typeof o&&"name"in o&&(t=e.name),!(function(e){return null!=e&&"object"==typeof e&&"uri"in e}(e)&&(t=e.uri,void 0===t)||function(e){return null!=e&&"object"==typeof e&&"video"in e}(e)&&(t=null===(n=e.video)||void 0===n?void 0:n.uri,void 0===t))){if("string"==typeof e&&(t=e),void 0===t)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const e=t.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${t}`);t=e[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function fn(e,n){let t;return t=e.isVertexAI()?n?"publishers/google/models":"models":n?"models":"tunedModels",t}function gn(e){for(const n of["models","tunedModels","publisherModels"])if(En(e,n))return e[n];return[]}function En(e,n){return null!==e&&"object"==typeof e&&n in e}function yn(e,n={}){const t=e,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),n.behavior&&(o.behavior=n.behavior),{functionDeclarations:[o]}}function vn(e,n){let t;if("string"==typeof n)if(e.isVertexAI())if(n.startsWith("gs://"))t={format:"jsonl",gcsUri:[n]};else{if(!n.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${n}`);t={format:"bigquery",bigqueryUri:n}}else{if(!n.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${n}`);t={fileName:n}}else if(Array.isArray(n)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:n}}else t=n;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||1!==o)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||1!==r)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Cn(e){if("object"!=typeof e||null===e)return{};const n=e,t=n.inlinedResponses;if("object"!=typeof t||null===t)return e;const o=t.inlinedResponses;if(!Array.isArray(o)||0===o.length)return e;let r=!1;for(const e of o){if("object"!=typeof e||null===e)continue;const n=e.response;if("object"==typeof n&&null!==n&&void 0!==n.embedding){r=!0;break}}return r&&(n.inlinedEmbedContentResponses=n.inlinedResponses,delete n.inlinedResponses),e}function bn(e,n){const t=n;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function wn(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}function _n(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata","displayName"]);null!=o&&s(n,["displayName"],o);const r=a(e,["metadata","state"]);null!=r&&s(n,["state"],wn(r));const i=a(e,["metadata","createTime"]);null!=i&&s(n,["createTime"],i);const l=a(e,["metadata","endTime"]);null!=l&&s(n,["endTime"],l);const c=a(e,["metadata","updateTime"]);null!=c&&s(n,["updateTime"],c);const u=a(e,["metadata","model"]);null!=u&&s(n,["model"],u);const d=a(e,["metadata","output"]);return null!=d&&s(n,["dest"],function(e){const n={},t=a(e,["responsesFile"]);null!=t&&s(n,["fileName"],t);const o=a(e,["inlinedResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["response"]);null!=t&&s(n,["response"],function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["candidates"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["content"]);null!=t&&s(n,["content"],t);const o=a(e,["citationMetadata"]);null!=o&&s(n,["citationMetadata"],function(e){const n={},t=a(e,["citationSources"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["citations"],e)}return n}(o));const r=a(e,["tokenCount"]);null!=r&&s(n,["tokenCount"],r);const i=a(e,["finishReason"]);null!=i&&s(n,["finishReason"],i);const l=a(e,["avgLogprobs"]);null!=l&&s(n,["avgLogprobs"],l);const c=a(e,["groundingMetadata"]);null!=c&&s(n,["groundingMetadata"],c);const u=a(e,["index"]);null!=u&&s(n,["index"],u);const d=a(e,["logprobsResult"]);null!=d&&s(n,["logprobsResult"],d);const p=a(e,["safetyRatings"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["safetyRatings"],e)}const A=a(e,["urlContextMetadata"]);return null!=A&&s(n,["urlContextMetadata"],A),n}(e))),s(n,["candidates"],e)}const r=a(e,["modelVersion"]);null!=r&&s(n,["modelVersion"],r);const i=a(e,["promptFeedback"]);null!=i&&s(n,["promptFeedback"],i);const l=a(e,["responseId"]);null!=l&&s(n,["responseId"],l);const c=a(e,["usageMetadata"]);return null!=c&&s(n,["usageMetadata"],c),n}(t));const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["error"]);return null!=r&&s(n,["error"],r),n}(e))),s(n,["inlinedResponses"],e)}const r=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["inlinedEmbedContentResponses"],e)}return n}(Cn(d))),n}function xn(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["displayName"]);null!=o&&s(n,["displayName"],o);const r=a(e,["state"]);null!=r&&s(n,["state"],wn(r));const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["createTime"]);null!=l&&s(n,["createTime"],l);const c=a(e,["startTime"]);null!=c&&s(n,["startTime"],c);const u=a(e,["endTime"]);null!=u&&s(n,["endTime"],u);const d=a(e,["updateTime"]);null!=d&&s(n,["updateTime"],d);const p=a(e,["model"]);null!=p&&s(n,["model"],p);const A=a(e,["inputConfig"]);null!=A&&s(n,["src"],function(e){const n={},t=a(e,["instancesFormat"]);null!=t&&s(n,["format"],t);const o=a(e,["gcsSource","uris"]);null!=o&&s(n,["gcsUri"],o);const r=a(e,["bigquerySource","inputUri"]);return null!=r&&s(n,["bigqueryUri"],r),n}(A));const m=a(e,["outputConfig"]);null!=m&&s(n,["dest"],function(e){const n={},t=a(e,["predictionsFormat"]);null!=t&&s(n,["format"],t);const o=a(e,["gcsDestination","outputUriPrefix"]);null!=o&&s(n,["gcsUri"],o);const r=a(e,["bigqueryDestination","outputUri"]);return null!=r&&s(n,["bigqueryUri"],r),n}(Cn(m)));const h=a(e,["completionStats"]);return null!=h&&s(n,["completionStats"],h),n}function Bn(e){const n={},t=a(e,["parts"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["mediaResolution"]);null!=t&&s(n,["mediaResolution"],t);const o=a(e,["codeExecutionResult"]);null!=o&&s(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);null!=r&&s(n,["executableCode"],r);const i=a(e,["fileData"]);null!=i&&s(n,["fileData"],function(e){const n={};if(void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=a(e,["fileUri"]);null!=t&&s(n,["fileUri"],t);const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(i));const l=a(e,["functionCall"]);null!=l&&s(n,["functionCall"],function(e){const n={},t=a(e,["id"]);null!=t&&s(n,["id"],t);const o=a(e,["args"]);null!=o&&s(n,["args"],o);const r=a(e,["name"]);if(null!=r&&s(n,["name"],r),void 0!==a(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==a(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return n}(l));const c=a(e,["functionResponse"]);null!=c&&s(n,["functionResponse"],c);const u=a(e,["inlineData"]);null!=u&&s(n,["inlineData"],function(e){const n={},t=a(e,["data"]);if(null!=t&&s(n,["data"],t),void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(u));const d=a(e,["text"]);null!=d&&s(n,["text"],d);const p=a(e,["thought"]);null!=p&&s(n,["thought"],p);const A=a(e,["thoughtSignature"]);null!=A&&s(n,["thoughtSignature"],A);const m=a(e,["videoMetadata"]);return null!=m&&s(n,["videoMetadata"],m),n}(e))),s(n,["parts"],e)}const o=a(e,["role"]);return null!=o&&s(n,["role"],o),n}function Tn(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["src"]);null!=r&&s(t,["batch","inputConfig"],function(e,n){const t={};if(void 0!==a(n,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==a(n,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==a(n,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=a(n,["fileName"]);null!=o&&s(t,["fileName"],o);const r=a(n,["inlinedRequests"]);if(null!=r){let n=r;Array.isArray(n)&&(n=n.map(n=>function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["request","model"],$e(e,o));const r=a(n,["contents"]);if(null!=r){let e=rn(r);Array.isArray(e)&&(e=e.map(e=>Bn(e))),s(t,["request","contents"],e)}const i=a(n,["metadata"]);null!=i&&s(t,["metadata"],i);const l=a(n,["config"]);return null!=l&&s(t,["request","generationConfig"],function(e,n,t){const o={},r=a(n,["systemInstruction"]);void 0!==t&&null!=r&&s(t,["systemInstruction"],Bn(tn(r)));const i=a(n,["temperature"]);null!=i&&s(o,["temperature"],i);const l=a(n,["topP"]);null!=l&&s(o,["topP"],l);const c=a(n,["topK"]);null!=c&&s(o,["topK"],c);const u=a(n,["candidateCount"]);null!=u&&s(o,["candidateCount"],u);const d=a(n,["maxOutputTokens"]);null!=d&&s(o,["maxOutputTokens"],d);const p=a(n,["stopSequences"]);null!=p&&s(o,["stopSequences"],p);const A=a(n,["responseLogprobs"]);null!=A&&s(o,["responseLogprobs"],A);const m=a(n,["logprobs"]);null!=m&&s(o,["logprobs"],m);const h=a(n,["presencePenalty"]);null!=h&&s(o,["presencePenalty"],h);const f=a(n,["frequencyPenalty"]);null!=f&&s(o,["frequencyPenalty"],f);const g=a(n,["seed"]);null!=g&&s(o,["seed"],g);const E=a(n,["responseMimeType"]);null!=E&&s(o,["responseMimeType"],E);const y=a(n,["responseSchema"]);null!=y&&s(o,["responseSchema"],an(y));const v=a(n,["responseJsonSchema"]);if(null!=v&&s(o,["responseJsonSchema"],v),void 0!==a(n,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==a(n,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=a(n,["safetySettings"]);if(void 0!==t&&null!=C){let e=C;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["category"]);if(null!=t&&s(n,["category"],t),void 0!==a(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return null!=o&&s(n,["threshold"],o),n}(e))),s(t,["safetySettings"],e)}const b=a(n,["tools"]);if(void 0!==t&&null!=b){let e=dn(b);Array.isArray(e)&&(e=e.map(e=>function(e){const n={};if(void 0!==a(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=a(e,["computerUse"]);null!=t&&s(n,["computerUse"],t);const o=a(e,["fileSearch"]);null!=o&&s(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(null!=r&&s(n,["codeExecution"],r),void 0!==a(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["functionDeclarations"],e)}const l=a(e,["googleMaps"]);null!=l&&s(n,["googleMaps"],function(e){const n={};if(void 0!==a(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=a(e,["enableWidget"]);return null!=t&&s(n,["enableWidget"],t),n}(l));const c=a(e,["googleSearch"]);null!=c&&s(n,["googleSearch"],function(e){const n={};if(void 0!==a(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==a(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=a(e,["timeRangeFilter"]);return null!=t&&s(n,["timeRangeFilter"],t),n}(c));const u=a(e,["googleSearchRetrieval"]);null!=u&&s(n,["googleSearchRetrieval"],u);const d=a(e,["urlContext"]);return null!=d&&s(n,["urlContext"],d),n}(un(e)))),s(t,["tools"],e)}const w=a(n,["toolConfig"]);if(void 0!==t&&null!=w&&s(t,["toolConfig"],function(e){const n={},t=a(e,["retrievalConfig"]);null!=t&&s(n,["retrievalConfig"],t);const o=a(e,["functionCallingConfig"]);return null!=o&&s(n,["functionCallingConfig"],function(e){const n={},t=a(e,["allowedFunctionNames"]);null!=t&&s(n,["allowedFunctionNames"],t);const o=a(e,["mode"]);if(null!=o&&s(n,["mode"],o),void 0!==a(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}(o)),n}(w)),void 0!==a(n,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const _=a(n,["cachedContent"]);void 0!==t&&null!=_&&s(t,["cachedContent"],pn(e,_));const x=a(n,["responseModalities"]);null!=x&&s(o,["responseModalities"],x);const B=a(n,["mediaResolution"]);null!=B&&s(o,["mediaResolution"],B);const T=a(n,["speechConfig"]);if(null!=T&&s(o,["speechConfig"],ln(T)),void 0!==a(n,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(n,["thinkingConfig"]);null!=I&&s(o,["thinkingConfig"],I);const S=a(n,["imageConfig"]);null!=S&&s(o,["imageConfig"],function(e){const n={},t=a(e,["aspectRatio"]);null!=t&&s(n,["aspectRatio"],t);const o=a(e,["imageSize"]);if(null!=o&&s(n,["imageSize"],o),void 0!==a(e,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==a(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==a(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}(S));const O=a(n,["enableEnhancedCivicAnswers"]);if(null!=O&&s(o,["enableEnhancedCivicAnswers"],O),void 0!==a(n,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}(e,l,a(t,["request"],{}))),t}(e,n))),s(t,["requests","requests"],n)}return t}(e,vn(e,r)));const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["displayName"]);if(void 0!==n&&null!=t&&s(n,["batch","displayName"],t),void 0!==a(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,t),t}function In(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["model"],$e(e,o));const r=a(n,["src"]);null!=r&&s(t,["inputConfig"],function(e){const n={},t=a(e,["format"]);null!=t&&s(n,["instancesFormat"],t);const o=a(e,["gcsUri"]);null!=o&&s(n,["gcsSource","uris"],o);const r=a(e,["bigqueryUri"]);if(null!=r&&s(n,["bigquerySource","inputUri"],r),void 0!==a(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==a(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return n}(vn(e,r)));const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["displayName"]);void 0!==n&&null!=t&&s(n,["displayName"],t);const o=a(e,["dest"]);void 0!==n&&null!=o&&s(n,["outputConfig"],function(e){const n={},t=a(e,["format"]);null!=t&&s(n,["predictionsFormat"],t);const o=a(e,["gcsUri"]);null!=o&&s(n,["gcsDestination","outputUriPrefix"],o);const r=a(e,["bigqueryUri"]);if(null!=r&&s(n,["bigqueryDestination","outputUri"],r),void 0!==a(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==a(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==a(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return n}(function(e){if("string"!=typeof e)return e;const n=e;if(n.startsWith("gs://"))return{format:"jsonl",gcsUri:n};if(n.startsWith("bq://"))return{format:"bigquery",bigqueryUri:n};throw new Error(`Unsupported destination: ${n}`)}(o)))}(i,t),t}!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"}(he||(he={}));class Sn{constructor(e,n,t,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,t,o)}init(e,n,t){var o,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=null==n?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=t&&0!==Object.keys(t).length?"object"==typeof t?Object.assign({},t):t:{config:{}},i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(r=null===(o=i.config)||void 0===o?void 0:o.pageSize)&&void 0!==r?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class On extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Sn(he.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){const n=Tn(this.apiClient,e),t=i("{model}:batchGenerateContent",n._url),o=n.batch.inputConfig.requests,r=o.requests,s=[];for(const e of r){const n=Object.assign({},e);if(n.systemInstruction){const e=n.systemInstruction;delete n.systemInstruction;const t=n.request;t.systemInstruction=e,n.request=t}s.push(n)}return o.requests=s,delete n.config,delete n._url,delete n._query,{path:t,body:n}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,n){const t=n?Object.assign({},n):{},o=Date.now().toString();if(t.displayName||(t.displayName=`genaiBatchJob_${o}`),void 0===t.dest){const n=this.getGcsUri(e),r=this.getBigqueryUri(e);if(n)n.endsWith(".jsonl")?t.dest=`${n.slice(0,-6)}/dest`:t.dest=`${n}_dest_${o}`;else{if(!r)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");t.dest=`${r}_dest_${o}`}}return t}async createInternal(e){var n,t,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const o=In(this.apiClient,e);return a=i("batchPredictionJobs",o._url),l=o._query,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),s.then(e=>xn(e))}{const n=Tn(this.apiClient,e);return a=i("{model}:batchGenerateContent",n._url),l=n._query,delete n._url,delete n._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),s.then(e=>_n(e))}}async createEmbeddingsInternal(e){var n,t;let o,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["src"]);null!=r&&s(t,["batch","inputConfig"],function(e,n){const t={},o=a(n,["fileName"]);null!=o&&s(t,["file_name"],o);const r=a(n,["inlinedRequests"]);return null!=r&&s(t,["requests"],function(e,n){const t={},o=a(n,["contents"]);if(null!=o){let n=on(e,o);Array.isArray(n)&&(n=n.map(e=>e)),s(t,["requests[]","request","content"],n)}const r=a(n,["config"]);return null!=r&&(s(t,["_self"],function(e,n){const t=a(e,["taskType"]);void 0!==n&&null!=t&&s(n,["requests[]","taskType"],t);const o=a(e,["title"]);void 0!==n&&null!=o&&s(n,["requests[]","title"],o);const r=a(e,["outputDimensionality"]);if(void 0!==n&&null!=r&&s(n,["requests[]","outputDimensionality"],r),void 0!==a(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==a(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,t)),function(e){for(const[n,t]of Object.entries({"requests[].*":"requests[].request.*"})){const o=n.split("."),r=t.split("."),i=new Set;let s=-1;for(let e=0;e<o.length;e++)if("*"===o[e]){s=e;break}if(-1!==s&&r.length>s)for(let e=s;e<r.length;e++){const n=r[e];"*"===n||n.endsWith("[]")||n.endsWith("[0]")||i.add(n)}l(e,o,r,0,i)}}(t)),t}(e,r)),t}(e,r));const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["displayName"]);void 0!==n&&null!=t&&s(n,["batch","displayName"],t)}(i,t),t}(this.apiClient,e);return r=i("{model}:asyncBatchEmbedContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>_n(e))}}async get(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);return c=i("batchPredictionJobs/{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>xn(e))}{const n=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);return c=i("batches/{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>_n(e))}}async cancel(e){var n,t,o,r;let l="",c={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);l=i("batchPredictionJobs/{name}:cancel",o._url),c=o._query,delete o._url,delete o._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal})}else{const n=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);l=i("batches/{name}:cancel",n._url),c=n._query,delete n._url,delete n._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal})}}async listInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o);const r=a(e,["filter"]);void 0!==n&&null!=r&&s(n,["_query","filter"],r)}(t,n),n}(e);return c=i("batchPredictionJobs",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["batchPredictionJobs"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>xn(e))),s(n,["batchJobs"],e)}return n}(e),t=new je;return Object.assign(t,n),t})}{const n=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);if(void 0!==n&&null!=o&&s(n,["_query","pageToken"],o),void 0!==a(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(t,n),n}(e);return c=i("batches",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["operations"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>_n(e))),s(n,["batchJobs"],e)}return n}(e),t=new je;return Object.assign(t,n),t})}}async delete(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);return c=i("batchPredictionJobs/{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);return null!=i&&s(n,["error"],i),n}(e))}{const n=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],bn(e,o)),t}(this.apiClient,e);return c=i("batches/{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"DELETE",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);return null!=i&&s(n,["error"],i),n}(e))}}}function kn(e){const n={},t=a(e,["parts"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["mediaResolution"]);null!=t&&s(n,["mediaResolution"],t);const o=a(e,["codeExecutionResult"]);null!=o&&s(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);null!=r&&s(n,["executableCode"],r);const i=a(e,["fileData"]);null!=i&&s(n,["fileData"],function(e){const n={};if(void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=a(e,["fileUri"]);null!=t&&s(n,["fileUri"],t);const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(i));const l=a(e,["functionCall"]);null!=l&&s(n,["functionCall"],function(e){const n={},t=a(e,["id"]);null!=t&&s(n,["id"],t);const o=a(e,["args"]);null!=o&&s(n,["args"],o);const r=a(e,["name"]);if(null!=r&&s(n,["name"],r),void 0!==a(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==a(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return n}(l));const c=a(e,["functionResponse"]);null!=c&&s(n,["functionResponse"],c);const u=a(e,["inlineData"]);null!=u&&s(n,["inlineData"],function(e){const n={},t=a(e,["data"]);if(null!=t&&s(n,["data"],t),void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(u));const d=a(e,["text"]);null!=d&&s(n,["text"],d);const p=a(e,["thought"]);null!=p&&s(n,["thought"],p);const A=a(e,["thoughtSignature"]);null!=A&&s(n,["thoughtSignature"],A);const m=a(e,["videoMetadata"]);return null!=m&&s(n,["videoMetadata"],m),n}(e))),s(n,["parts"],e)}const o=a(e,["role"]);return null!=o&&s(n,["role"],o),n}class Rn extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Sn(he.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["model"],We(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["ttl"]);void 0!==n&&null!=t&&s(n,["ttl"],t);const o=a(e,["expireTime"]);void 0!==n&&null!=o&&s(n,["expireTime"],o);const r=a(e,["displayName"]);void 0!==n&&null!=r&&s(n,["displayName"],r);const i=a(e,["contents"]);if(void 0!==n&&null!=i){let e=rn(i);Array.isArray(e)&&(e=e.map(e=>e)),s(n,["contents"],e)}const l=a(e,["systemInstruction"]);void 0!==n&&null!=l&&s(n,["systemInstruction"],tn(l));const c=a(e,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["retrieval"]);null!=t&&s(n,["retrieval"],t);const o=a(e,["computerUse"]);if(null!=o&&s(n,["computerUse"],o),void 0!==a(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(e,["codeExecution"]);null!=r&&s(n,["codeExecution"],r);const i=a(e,["enterpriseWebSearch"]);null!=i&&s(n,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["description"]);null!=t&&s(n,["description"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["parameters"]);null!=r&&s(n,["parameters"],r);const i=a(e,["parametersJsonSchema"]);null!=i&&s(n,["parametersJsonSchema"],i);const l=a(e,["response"]);null!=l&&s(n,["response"],l);const c=a(e,["responseJsonSchema"]);if(null!=c&&s(n,["responseJsonSchema"],c),void 0!==a(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return n}(e))),s(n,["functionDeclarations"],e)}const c=a(e,["googleMaps"]);null!=c&&s(n,["googleMaps"],c);const u=a(e,["googleSearch"]);null!=u&&s(n,["googleSearch"],u);const d=a(e,["googleSearchRetrieval"]);null!=d&&s(n,["googleSearchRetrieval"],d);const p=a(e,["urlContext"]);return null!=p&&s(n,["urlContext"],p),n}(e))),s(n,["tools"],e)}const u=a(e,["toolConfig"]);void 0!==n&&null!=u&&s(n,["toolConfig"],u);const d=a(e,["kmsKeyName"]);void 0!==n&&null!=d&&s(n,["encryption_spec","kmsKeyName"],d)}(r,t),t}(this.apiClient,e);return c=i("cachedContents",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>e)}{const n=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["model"],We(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["ttl"]);void 0!==n&&null!=t&&s(n,["ttl"],t);const o=a(e,["expireTime"]);void 0!==n&&null!=o&&s(n,["expireTime"],o);const r=a(e,["displayName"]);void 0!==n&&null!=r&&s(n,["displayName"],r);const i=a(e,["contents"]);if(void 0!==n&&null!=i){let e=rn(i);Array.isArray(e)&&(e=e.map(e=>kn(e))),s(n,["contents"],e)}const l=a(e,["systemInstruction"]);void 0!==n&&null!=l&&s(n,["systemInstruction"],kn(tn(l)));const c=a(e,["tools"]);if(void 0!==n&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const n={};if(void 0!==a(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=a(e,["computerUse"]);null!=t&&s(n,["computerUse"],t);const o=a(e,["fileSearch"]);null!=o&&s(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(null!=r&&s(n,["codeExecution"],r),void 0!==a(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["functionDeclarations"],e)}const l=a(e,["googleMaps"]);null!=l&&s(n,["googleMaps"],function(e){const n={};if(void 0!==a(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=a(e,["enableWidget"]);return null!=t&&s(n,["enableWidget"],t),n}(l));const c=a(e,["googleSearch"]);null!=c&&s(n,["googleSearch"],function(e){const n={};if(void 0!==a(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==a(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=a(e,["timeRangeFilter"]);return null!=t&&s(n,["timeRangeFilter"],t),n}(c));const u=a(e,["googleSearchRetrieval"]);null!=u&&s(n,["googleSearchRetrieval"],u);const d=a(e,["urlContext"]);return null!=d&&s(n,["urlContext"],d),n}(e))),s(n,["tools"],e)}const u=a(e,["toolConfig"]);if(void 0!==n&&null!=u&&s(n,["toolConfig"],function(e){const n={},t=a(e,["retrievalConfig"]);null!=t&&s(n,["retrievalConfig"],t);const o=a(e,["functionCallingConfig"]);return null!=o&&s(n,["functionCallingConfig"],function(e){const n={},t=a(e,["allowedFunctionNames"]);null!=t&&s(n,["allowedFunctionNames"],t);const o=a(e,["mode"]);if(null!=o&&s(n,["mode"],o),void 0!==a(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}(o)),n}(u)),void 0!==a(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.")}(r,t),t}(this.apiClient,e);return c=i("cachedContents",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>e)}}async get(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],pn(e,o)),t}(this.apiClient,e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>e)}{const n=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],pn(e,o)),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>e)}}async delete(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],pn(e,o)),t}(this.apiClient,e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new ke;return Object.assign(t,n),t})}{const n=function(e,n){const t={},o=a(n,["name"]);return null!=o&&s(t,["_url","name"],pn(e,o)),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"DELETE",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new ke;return Object.assign(t,n),t})}}async update(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["name"]);null!=o&&s(t,["_url","name"],pn(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["ttl"]);void 0!==n&&null!=t&&s(n,["ttl"],t);const o=a(e,["expireTime"]);void 0!==n&&null!=o&&s(n,["expireTime"],o)}(r,t),t}(this.apiClient,e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>e)}{const n=function(e,n){const t={},o=a(n,["name"]);null!=o&&s(t,["_url","name"],pn(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["ttl"]);void 0!==n&&null!=t&&s(n,["ttl"],t);const o=a(e,["expireTime"]);void 0!==n&&null!=o&&s(n,["expireTime"],o)}(r,t),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"PATCH",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>e)}}async listInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o)}(t,n),n}(e);return c=i("cachedContents",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["cachedContents"],e)}return n}(e),t=new Re;return Object.assign(t,n),t})}{const n=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o)}(t,n),n}(e);return c=i("cachedContents",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["cachedContents"],e)}return n}(e),t=new Re;return Object.assign(t,n),t})}}}function Nn(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}function Pn(e){return this instanceof Pn?(this.v=e,this):new Pn(e)}function Dn(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(e,n||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(n){return Promise.resolve(n).then(e,c)}}),o[Symbol.asyncIterator]=function(){return this},o;function s(e,n){r[e]&&(o[e]=function(n){return new Promise(function(t,o){i.push([e,n,t,o])>1||a(e,n)})},n&&(o[e]=n(o[e])))}function a(e,n){try{(t=r[e](n)).value instanceof Pn?Promise.resolve(t.value.v).then(l,c):u(i[0][2],t)}catch(e){u(i[0][3],e)}var t}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,n){e(n),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Mn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(t){n[t]=e[t]&&function(n){return new Promise(function(o,r){!function(e,n,t,o){Promise.resolve(o).then(function(n){e({value:n,done:t})},n)}(o,r,(n=e[t](n)).done,n.value)})}}}function Ln(e){var n;if(null==e.candidates||0===e.candidates.length)return!1;const t=null===(n=e.candidates[0])||void 0===n?void 0:n.content;return void 0!==t&&Un(t)}function Un(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const n of e.parts)if(void 0===n||0===Object.keys(n).length)return!1;return!0}function qn(e){if(void 0===e||0===e.length)return[];const n=[],t=e.length;let o=0;for(;o<t;)if("user"===e[o].role)n.push(e[o]),o++;else{const r=[];let i=!0;for(;o<t&&"model"===e[o].role;)r.push(e[o]),i&&!Un(e[o])&&(i=!1),o++;i?n.push(...r):n.pop()}return n}"function"==typeof SuppressedError&&SuppressedError;class Gn{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new jn(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jn{constructor(e,n,t,o={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=t,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const n of e)if("user"!==n.role&&"model"!==n.role)throw new Error(`Role must be user or model, but got ${n.role}.`)}(r)}async sendMessage(e){var n;await this.sendPromise;const t=tn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:null!==(n=e.config)&&void 0!==n?n:this.config});return this.sendPromise=(async()=>{var e,n,r;const i=await o,s=null===(n=null===(e=i.candidates)||void 0===e?void 0:e[0])||void 0===n?void 0:n.content,a=i.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=a&&(c=null!==(r=a.slice(l))&&void 0!==r?r:[]);const u=s?[s]:[];this.recordHistory(t,u,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const t=tn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:null!==(n=e.config)&&void 0!==n?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,t)}getHistory(e=!1){const n=e?qn(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Dn(this,arguments,function*(){var t,o,r,i,s,a;const l=[];try{for(var c,u=!0,d=Mn(e);!(t=(c=yield Pn(d.next())).done);u=!0){i=c.value,u=!1;const e=i;if(Ln(e)){const n=null===(a=null===(s=e.candidates)||void 0===s?void 0:s[0])||void 0===a?void 0:a.content;void 0!==n&&l.push(n)}yield yield Pn(e)}}catch(e){o={error:e}}finally{try{u||t||!(r=d.return)||(yield Pn(r.call(d)))}finally{if(o)throw o.error}}this.recordHistory(n,l)})}recordHistory(e,n,t){let o=[];n.length>0&&n.every(e=>void 0!==e.role)?o=n:o.push({role:"model",parts:[]}),t&&t.length>0?this.history.push(...qn(t)):this.history.push(e),this.history.push(...o)}}class Fn extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Fn.prototype)}}class Hn extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Sn(he.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o)}(t,n),n}(e);return r=i("files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["files"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["files"],e)}return n}(e),t=new Le;return Object.assign(t,n),t})}}async createInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["file"]);return null!=t&&s(n,["file"],t),n}(e);return r=i("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new Ue;return Object.assign(t,n),t})}}async get(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","file"],hn(t)),n}(e);return r=i("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>e)}}async delete(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","file"],hn(t)),n}(e);return r=i("files/{file}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new qe;return Object.assign(t,n),t})}}async registerFilesInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["uris"]);return null!=t&&s(n,["uris"],t),n}(e);return r=i("files:register",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["files"],e)}return n}(e),t=new Ge;return Object.assign(t,n),t})}}}function Vn(e){const n={},t=a(e,["data"]);if(null!=t&&s(n,["data"],t),void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}function $n(e,n){const t=a(e,["generationConfig"]);void 0!==n&&null!=t&&s(n,["setup","generationConfig"],t);const o=a(e,["responseModalities"]);void 0!==n&&null!=o&&s(n,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);void 0!==n&&null!=r&&s(n,["setup","generationConfig","temperature"],r);const i=a(e,["topP"]);void 0!==n&&null!=i&&s(n,["setup","generationConfig","topP"],i);const l=a(e,["topK"]);void 0!==n&&null!=l&&s(n,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);void 0!==n&&null!=c&&s(n,["setup","generationConfig","maxOutputTokens"],c);const u=a(e,["mediaResolution"]);void 0!==n&&null!=u&&s(n,["setup","generationConfig","mediaResolution"],u);const d=a(e,["seed"]);void 0!==n&&null!=d&&s(n,["setup","generationConfig","seed"],d);const p=a(e,["speechConfig"]);void 0!==n&&null!=p&&s(n,["setup","generationConfig","speechConfig"],cn(p));const A=a(e,["thinkingConfig"]);void 0!==n&&null!=A&&s(n,["setup","generationConfig","thinkingConfig"],A);const m=a(e,["enableAffectiveDialog"]);void 0!==n&&null!=m&&s(n,["setup","generationConfig","enableAffectiveDialog"],m);const h=a(e,["systemInstruction"]);void 0!==n&&null!=h&&s(n,["setup","systemInstruction"],function(e){const n={},t=a(e,["parts"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["mediaResolution"]);null!=t&&s(n,["mediaResolution"],t);const o=a(e,["codeExecutionResult"]);null!=o&&s(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);null!=r&&s(n,["executableCode"],r);const i=a(e,["fileData"]);null!=i&&s(n,["fileData"],function(e){const n={};if(void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=a(e,["fileUri"]);null!=t&&s(n,["fileUri"],t);const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(i));const l=a(e,["functionCall"]);null!=l&&s(n,["functionCall"],function(e){const n={},t=a(e,["id"]);null!=t&&s(n,["id"],t);const o=a(e,["args"]);null!=o&&s(n,["args"],o);const r=a(e,["name"]);if(null!=r&&s(n,["name"],r),void 0!==a(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==a(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return n}(l));const c=a(e,["functionResponse"]);null!=c&&s(n,["functionResponse"],c);const u=a(e,["inlineData"]);null!=u&&s(n,["inlineData"],Vn(u));const d=a(e,["text"]);null!=d&&s(n,["text"],d);const p=a(e,["thought"]);null!=p&&s(n,["thought"],p);const A=a(e,["thoughtSignature"]);null!=A&&s(n,["thoughtSignature"],A);const m=a(e,["videoMetadata"]);return null!=m&&s(n,["videoMetadata"],m),n}(e))),s(n,["parts"],e)}const o=a(e,["role"]);return null!=o&&s(n,["role"],o),n}(tn(h)));const f=a(e,["tools"]);if(void 0!==n&&null!=f){let e=dn(f);Array.isArray(e)&&(e=e.map(e=>function(e){const n={};if(void 0!==a(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=a(e,["computerUse"]);null!=t&&s(n,["computerUse"],t);const o=a(e,["fileSearch"]);null!=o&&s(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(null!=r&&s(n,["codeExecution"],r),void 0!==a(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["functionDeclarations"],e)}const l=a(e,["googleMaps"]);null!=l&&s(n,["googleMaps"],function(e){const n={};if(void 0!==a(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=a(e,["enableWidget"]);return null!=t&&s(n,["enableWidget"],t),n}(l));const c=a(e,["googleSearch"]);null!=c&&s(n,["googleSearch"],function(e){const n={};if(void 0!==a(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==a(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=a(e,["timeRangeFilter"]);return null!=t&&s(n,["timeRangeFilter"],t),n}(c));const u=a(e,["googleSearchRetrieval"]);null!=u&&s(n,["googleSearchRetrieval"],u);const d=a(e,["urlContext"]);return null!=d&&s(n,["urlContext"],d),n}(un(e)))),s(n,["setup","tools"],e)}const g=a(e,["sessionResumption"]);void 0!==n&&null!=g&&s(n,["setup","sessionResumption"],function(e){const n={},t=a(e,["handle"]);if(null!=t&&s(n,["handle"],t),void 0!==a(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(g));const E=a(e,["inputAudioTranscription"]);void 0!==n&&null!=E&&s(n,["setup","inputAudioTranscription"],E);const y=a(e,["outputAudioTranscription"]);void 0!==n&&null!=y&&s(n,["setup","outputAudioTranscription"],y);const v=a(e,["realtimeInputConfig"]);void 0!==n&&null!=v&&s(n,["setup","realtimeInputConfig"],v);const C=a(e,["contextWindowCompression"]);void 0!==n&&null!=C&&s(n,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(void 0!==n&&null!=b&&s(n,["setup","proactivity"],b),void 0!==a(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}function Wn(e){const n={},t=a(e,["media"]);if(null!=t){let e=Je(t);Array.isArray(e)&&(e=e.map(e=>Vn(e))),s(n,["mediaChunks"],e)}const o=a(e,["audio"]);null!=o&&s(n,["audio"],Vn(Ke(o)));const r=a(e,["audioStreamEnd"]);null!=r&&s(n,["audioStreamEnd"],r);const i=a(e,["video"]);null!=i&&s(n,["video"],Vn(ze(i)));const l=a(e,["text"]);null!=l&&s(n,["text"],l);const c=a(e,["activityStart"]);null!=c&&s(n,["activityStart"],c);const u=a(e,["activityEnd"]);return null!=u&&s(n,["activityEnd"],u),n}function Jn(e){const n={},t=a(e,["media"]);if(null!=t){let e=Je(t);Array.isArray(e)&&(e=e.map(e=>e)),s(n,["mediaChunks"],e)}const o=a(e,["audio"]);null!=o&&s(n,["audio"],Ke(o));const r=a(e,["audioStreamEnd"]);null!=r&&s(n,["audioStreamEnd"],r);const i=a(e,["video"]);null!=i&&s(n,["video"],ze(i));const l=a(e,["text"]);null!=l&&s(n,["text"],l);const c=a(e,["activityStart"]);null!=c&&s(n,["activityStart"],c);const u=a(e,["activityEnd"]);return null!=u&&s(n,["activityEnd"],u),n}function Yn(e,n){const t={},o=a(e,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["mediaResolution"]);null!=t&&s(n,["mediaResolution"],t);const o=a(e,["codeExecutionResult"]);null!=o&&s(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);null!=r&&s(n,["executableCode"],r);const i=a(e,["fileData"]);null!=i&&s(n,["fileData"],function(e){const n={};if(void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=a(e,["fileUri"]);null!=t&&s(n,["fileUri"],t);const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(i));const l=a(e,["functionCall"]);null!=l&&s(n,["functionCall"],function(e){const n={},t=a(e,["id"]);null!=t&&s(n,["id"],t);const o=a(e,["args"]);null!=o&&s(n,["args"],o);const r=a(e,["name"]);if(null!=r&&s(n,["name"],r),void 0!==a(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==a(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return n}(l));const c=a(e,["functionResponse"]);null!=c&&s(n,["functionResponse"],c);const u=a(e,["inlineData"]);null!=u&&s(n,["inlineData"],function(e){const n={},t=a(e,["data"]);if(null!=t&&s(n,["data"],t),void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(u));const d=a(e,["text"]);null!=d&&s(n,["text"],d);const p=a(e,["thought"]);null!=p&&s(n,["thought"],p);const A=a(e,["thoughtSignature"]);null!=A&&s(n,["thoughtSignature"],A);const m=a(e,["videoMetadata"]);return null!=m&&s(n,["videoMetadata"],m),n}(e))),s(t,["parts"],e)}const r=a(e,["role"]);return null!=r&&s(t,["role"],r),t}function zn(e,n,t){const o={},r=a(n,["model"]);null!=r&&s(o,["_url","model"],$e(e,r));const i=a(n,["contents"]);if(null!=i){let e=rn(i);Array.isArray(e)&&(e=e.map(e=>Yn(e))),s(o,["contents"],e)}const l=a(n,["config"]);return null!=l&&s(o,["generationConfig"],function(e,n,t){const o={},r=a(n,["systemInstruction"]);void 0!==t&&null!=r&&s(t,["systemInstruction"],Yn(tn(r)));const i=a(n,["temperature"]);null!=i&&s(o,["temperature"],i);const l=a(n,["topP"]);null!=l&&s(o,["topP"],l);const c=a(n,["topK"]);null!=c&&s(o,["topK"],c);const u=a(n,["candidateCount"]);null!=u&&s(o,["candidateCount"],u);const d=a(n,["maxOutputTokens"]);null!=d&&s(o,["maxOutputTokens"],d);const p=a(n,["stopSequences"]);null!=p&&s(o,["stopSequences"],p);const A=a(n,["responseLogprobs"]);null!=A&&s(o,["responseLogprobs"],A);const m=a(n,["logprobs"]);null!=m&&s(o,["logprobs"],m);const h=a(n,["presencePenalty"]);null!=h&&s(o,["presencePenalty"],h);const f=a(n,["frequencyPenalty"]);null!=f&&s(o,["frequencyPenalty"],f);const g=a(n,["seed"]);null!=g&&s(o,["seed"],g);const E=a(n,["responseMimeType"]);null!=E&&s(o,["responseMimeType"],E);const y=a(n,["responseSchema"]);null!=y&&s(o,["responseSchema"],an(y));const v=a(n,["responseJsonSchema"]);if(null!=v&&s(o,["responseJsonSchema"],v),void 0!==a(n,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==a(n,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=a(n,["safetySettings"]);if(void 0!==t&&null!=C){let e=C;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["category"]);if(null!=t&&s(n,["category"],t),void 0!==a(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return null!=o&&s(n,["threshold"],o),n}(e))),s(t,["safetySettings"],e)}const b=a(n,["tools"]);if(void 0!==t&&null!=b){let e=dn(b);Array.isArray(e)&&(e=e.map(e=>function(e){const n={};if(void 0!==a(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=a(e,["computerUse"]);null!=t&&s(n,["computerUse"],t);const o=a(e,["fileSearch"]);null!=o&&s(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(null!=r&&s(n,["codeExecution"],r),void 0!==a(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["functionDeclarations"],e)}const l=a(e,["googleMaps"]);null!=l&&s(n,["googleMaps"],function(e){const n={};if(void 0!==a(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=a(e,["enableWidget"]);return null!=t&&s(n,["enableWidget"],t),n}(l));const c=a(e,["googleSearch"]);null!=c&&s(n,["googleSearch"],function(e){const n={};if(void 0!==a(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==a(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=a(e,["timeRangeFilter"]);return null!=t&&s(n,["timeRangeFilter"],t),n}(c));const u=a(e,["googleSearchRetrieval"]);null!=u&&s(n,["googleSearchRetrieval"],u);const d=a(e,["urlContext"]);return null!=d&&s(n,["urlContext"],d),n}(un(e)))),s(t,["tools"],e)}const w=a(n,["toolConfig"]);if(void 0!==t&&null!=w&&s(t,["toolConfig"],function(e){const n={},t=a(e,["retrievalConfig"]);null!=t&&s(n,["retrievalConfig"],t);const o=a(e,["functionCallingConfig"]);return null!=o&&s(n,["functionCallingConfig"],function(e){const n={},t=a(e,["allowedFunctionNames"]);null!=t&&s(n,["allowedFunctionNames"],t);const o=a(e,["mode"]);if(null!=o&&s(n,["mode"],o),void 0!==a(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}(o)),n}(w)),void 0!==a(n,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const _=a(n,["cachedContent"]);void 0!==t&&null!=_&&s(t,["cachedContent"],pn(e,_));const x=a(n,["responseModalities"]);null!=x&&s(o,["responseModalities"],x);const B=a(n,["mediaResolution"]);null!=B&&s(o,["mediaResolution"],B);const T=a(n,["speechConfig"]);if(null!=T&&s(o,["speechConfig"],ln(T)),void 0!==a(n,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(n,["thinkingConfig"]);null!=I&&s(o,["thinkingConfig"],I);const S=a(n,["imageConfig"]);null!=S&&s(o,["imageConfig"],function(e){const n={},t=a(e,["aspectRatio"]);null!=t&&s(n,["aspectRatio"],t);const o=a(e,["imageSize"]);if(null!=o&&s(n,["imageSize"],o),void 0!==a(e,["personGeneration"]))throw new Error("personGeneration parameter is not supported in Gemini API.");if(void 0!==a(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==a(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}(S));const O=a(n,["enableEnhancedCivicAnswers"]);if(null!=O&&s(o,["enableEnhancedCivicAnswers"],O),void 0!==a(n,["modelArmorConfig"]))throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}(e,l,o)),o}function Kn(e,n,t){const o={},r=a(n,["model"]);null!=r&&s(o,["_url","model"],$e(e,r));const i=a(n,["contents"]);if(null!=i){let e=rn(i);Array.isArray(e)&&(e=e.map(e=>e)),s(o,["contents"],e)}const l=a(n,["config"]);return null!=l&&s(o,["generationConfig"],function(e,n,t){const o={},r=a(n,["systemInstruction"]);void 0!==t&&null!=r&&s(t,["systemInstruction"],tn(r));const i=a(n,["temperature"]);null!=i&&s(o,["temperature"],i);const l=a(n,["topP"]);null!=l&&s(o,["topP"],l);const c=a(n,["topK"]);null!=c&&s(o,["topK"],c);const u=a(n,["candidateCount"]);null!=u&&s(o,["candidateCount"],u);const d=a(n,["maxOutputTokens"]);null!=d&&s(o,["maxOutputTokens"],d);const p=a(n,["stopSequences"]);null!=p&&s(o,["stopSequences"],p);const A=a(n,["responseLogprobs"]);null!=A&&s(o,["responseLogprobs"],A);const m=a(n,["logprobs"]);null!=m&&s(o,["logprobs"],m);const h=a(n,["presencePenalty"]);null!=h&&s(o,["presencePenalty"],h);const f=a(n,["frequencyPenalty"]);null!=f&&s(o,["frequencyPenalty"],f);const g=a(n,["seed"]);null!=g&&s(o,["seed"],g);const E=a(n,["responseMimeType"]);null!=E&&s(o,["responseMimeType"],E);const y=a(n,["responseSchema"]);null!=y&&s(o,["responseSchema"],an(y));const v=a(n,["responseJsonSchema"]);null!=v&&s(o,["responseJsonSchema"],v);const C=a(n,["routingConfig"]);null!=C&&s(o,["routingConfig"],C);const b=a(n,["modelSelectionConfig"]);null!=b&&s(o,["modelConfig"],b);const w=a(n,["safetySettings"]);if(void 0!==t&&null!=w){let e=w;Array.isArray(e)&&(e=e.map(e=>e)),s(t,["safetySettings"],e)}const _=a(n,["tools"]);if(void 0!==t&&null!=_){let e=dn(_);Array.isArray(e)&&(e=e.map(e=>ct(un(e)))),s(t,["tools"],e)}const x=a(n,["toolConfig"]);void 0!==t&&null!=x&&s(t,["toolConfig"],x);const B=a(n,["labels"]);void 0!==t&&null!=B&&s(t,["labels"],B);const T=a(n,["cachedContent"]);void 0!==t&&null!=T&&s(t,["cachedContent"],pn(e,T));const I=a(n,["responseModalities"]);null!=I&&s(o,["responseModalities"],I);const S=a(n,["mediaResolution"]);null!=S&&s(o,["mediaResolution"],S);const O=a(n,["speechConfig"]);null!=O&&s(o,["speechConfig"],ln(O));const k=a(n,["audioTimestamp"]);null!=k&&s(o,["audioTimestamp"],k);const R=a(n,["thinkingConfig"]);null!=R&&s(o,["thinkingConfig"],R);const N=a(n,["imageConfig"]);if(null!=N&&s(o,["imageConfig"],function(e){const n={},t=a(e,["aspectRatio"]);null!=t&&s(n,["aspectRatio"],t);const o=a(e,["imageSize"]);null!=o&&s(n,["imageSize"],o);const r=a(e,["personGeneration"]);null!=r&&s(n,["personGeneration"],r);const i=a(e,["outputMimeType"]);null!=i&&s(n,["imageOutputOptions","mimeType"],i);const l=a(e,["outputCompressionQuality"]);return null!=l&&s(n,["imageOutputOptions","compressionQuality"],l),n}(N)),void 0!==a(n,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const P=a(n,["modelArmorConfig"]);return void 0!==t&&null!=P&&s(t,["modelArmorConfig"],P),o}(e,l,o)),o}function Xn(e,n){const t={},o=a(e,["sdkHttpResponse"]);null!=o&&s(t,["sdkHttpResponse"],o);const r=a(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["content"]);null!=t&&s(n,["content"],t);const o=a(e,["citationMetadata"]);null!=o&&s(n,["citationMetadata"],function(e){const n={},t=a(e,["citationSources"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["citations"],e)}return n}(o));const r=a(e,["tokenCount"]);null!=r&&s(n,["tokenCount"],r);const i=a(e,["finishReason"]);null!=i&&s(n,["finishReason"],i);const l=a(e,["avgLogprobs"]);null!=l&&s(n,["avgLogprobs"],l);const c=a(e,["groundingMetadata"]);null!=c&&s(n,["groundingMetadata"],c);const u=a(e,["index"]);null!=u&&s(n,["index"],u);const d=a(e,["logprobsResult"]);null!=d&&s(n,["logprobsResult"],d);const p=a(e,["safetyRatings"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["safetyRatings"],e)}const A=a(e,["urlContextMetadata"]);return null!=A&&s(n,["urlContextMetadata"],A),n}(e))),s(t,["candidates"],e)}const i=a(e,["modelVersion"]);null!=i&&s(t,["modelVersion"],i);const l=a(e,["promptFeedback"]);null!=l&&s(t,["promptFeedback"],l);const c=a(e,["responseId"]);null!=c&&s(t,["responseId"],c);const u=a(e,["usageMetadata"]);return null!=u&&s(t,["usageMetadata"],u),t}function Qn(e,n){const t={},o=a(e,["sdkHttpResponse"]);null!=o&&s(t,["sdkHttpResponse"],o);const r=a(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(t,["candidates"],e)}const i=a(e,["createTime"]);null!=i&&s(t,["createTime"],i);const l=a(e,["modelVersion"]);null!=l&&s(t,["modelVersion"],l);const c=a(e,["promptFeedback"]);null!=c&&s(t,["promptFeedback"],c);const u=a(e,["responseId"]);null!=u&&s(t,["responseId"],u);const d=a(e,["usageMetadata"]);return null!=d&&s(t,["usageMetadata"],d),t}function Zn(e,n,t){const o={},r=a(n,["model"]);null!=r&&s(o,["_url","model"],$e(e,r));const i=a(n,["prompt"]);null!=i&&s(o,["instances[0]","prompt"],i);const l=a(n,["image"]);null!=l&&s(o,["instances[0]","image"],ot(l));const c=a(n,["video"]);null!=c&&s(o,["instances[0]","video"],ut(c));const u=a(n,["source"]);null!=u&&function(e,n){const t=a(e,["prompt"]);void 0!==n&&null!=t&&s(n,["instances[0]","prompt"],t);const o=a(e,["image"]);void 0!==n&&null!=o&&s(n,["instances[0]","image"],ot(o));const r=a(e,["video"]);void 0!==n&&null!=r&&s(n,["instances[0]","video"],ut(r))}(u,o);const d=a(n,["config"]);return null!=d&&function(e,n){const t=a(e,["numberOfVideos"]);if(void 0!==n&&null!=t&&s(n,["parameters","sampleCount"],t),void 0!==a(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const o=a(e,["durationSeconds"]);if(void 0!==n&&null!=o&&s(n,["parameters","durationSeconds"],o),void 0!==a(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const r=a(e,["aspectRatio"]);void 0!==n&&null!=r&&s(n,["parameters","aspectRatio"],r);const i=a(e,["resolution"]);void 0!==n&&null!=i&&s(n,["parameters","resolution"],i);const l=a(e,["personGeneration"]);if(void 0!==n&&null!=l&&s(n,["parameters","personGeneration"],l),void 0!==a(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(e,["negativePrompt"]);void 0!==n&&null!=c&&s(n,["parameters","negativePrompt"],c);const u=a(e,["enhancePrompt"]);if(void 0!==n&&null!=u&&s(n,["parameters","enhancePrompt"],u),void 0!==a(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const d=a(e,["lastFrame"]);void 0!==n&&null!=d&&s(n,["instances[0]","lastFrame"],ot(d));const p=a(e,["referenceImages"]);if(void 0!==n&&null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["image"]);null!=t&&s(n,["image"],ot(t));const o=a(e,["referenceType"]);return null!=o&&s(n,["referenceType"],o),n}(e))),s(n,["instances[0]","referenceImages"],e)}if(void 0!==a(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==a(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.")}(d,o),o}function et(e,n,t){const o={},r=a(n,["model"]);null!=r&&s(o,["_url","model"],$e(e,r));const i=a(n,["prompt"]);null!=i&&s(o,["instances[0]","prompt"],i);const l=a(n,["image"]);null!=l&&s(o,["instances[0]","image"],rt(l));const c=a(n,["video"]);null!=c&&s(o,["instances[0]","video"],dt(c));const u=a(n,["source"]);null!=u&&function(e,n){const t=a(e,["prompt"]);void 0!==n&&null!=t&&s(n,["instances[0]","prompt"],t);const o=a(e,["image"]);void 0!==n&&null!=o&&s(n,["instances[0]","image"],rt(o));const r=a(e,["video"]);void 0!==n&&null!=r&&s(n,["instances[0]","video"],dt(r))}(u,o);const d=a(n,["config"]);return null!=d&&function(e,n){const t=a(e,["numberOfVideos"]);void 0!==n&&null!=t&&s(n,["parameters","sampleCount"],t);const o=a(e,["outputGcsUri"]);void 0!==n&&null!=o&&s(n,["parameters","storageUri"],o);const r=a(e,["fps"]);void 0!==n&&null!=r&&s(n,["parameters","fps"],r);const i=a(e,["durationSeconds"]);void 0!==n&&null!=i&&s(n,["parameters","durationSeconds"],i);const l=a(e,["seed"]);void 0!==n&&null!=l&&s(n,["parameters","seed"],l);const c=a(e,["aspectRatio"]);void 0!==n&&null!=c&&s(n,["parameters","aspectRatio"],c);const u=a(e,["resolution"]);void 0!==n&&null!=u&&s(n,["parameters","resolution"],u);const d=a(e,["personGeneration"]);void 0!==n&&null!=d&&s(n,["parameters","personGeneration"],d);const p=a(e,["pubsubTopic"]);void 0!==n&&null!=p&&s(n,["parameters","pubsubTopic"],p);const A=a(e,["negativePrompt"]);void 0!==n&&null!=A&&s(n,["parameters","negativePrompt"],A);const m=a(e,["enhancePrompt"]);void 0!==n&&null!=m&&s(n,["parameters","enhancePrompt"],m);const h=a(e,["generateAudio"]);void 0!==n&&null!=h&&s(n,["parameters","generateAudio"],h);const f=a(e,["lastFrame"]);void 0!==n&&null!=f&&s(n,["instances[0]","lastFrame"],rt(f));const g=a(e,["referenceImages"]);if(void 0!==n&&null!=g){let e=g;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["image"]);null!=t&&s(n,["image"],rt(t));const o=a(e,["referenceType"]);return null!=o&&s(n,["referenceType"],o),n}(e))),s(n,["instances[0]","referenceImages"],e)}const E=a(e,["mask"]);void 0!==n&&null!=E&&s(n,["instances[0]","mask"],function(e){const n={},t=a(e,["image"]);null!=t&&s(n,["_self"],rt(t));const o=a(e,["maskMode"]);return null!=o&&s(n,["maskMode"],o),n}(E));const y=a(e,["compressionQuality"]);void 0!==n&&null!=y&&s(n,["parameters","compressionQuality"],y)}(d,o),o}function nt(e,n){const t={},o=a(e,["_self"]);null!=o&&s(t,["image"],tt(o));const r=a(e,["raiFilteredReason"]);null!=r&&s(t,["raiFilteredReason"],r);const i=a(e,["_self"]);null!=i&&s(t,["safetyAttributes"],lt(i));const l=a(e,["prompt"]);return null!=l&&s(t,["enhancedPrompt"],l),t}function tt(e,n){const t={},o=a(e,["gcsUri"]);null!=o&&s(t,["gcsUri"],o);const r=a(e,["bytesBase64Encoded"]);null!=r&&s(t,["imageBytes"],mn(r));const i=a(e,["mimeType"]);return null!=i&&s(t,["mimeType"],i),t}function ot(e,n){const t={};if(void 0!==a(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const o=a(e,["imageBytes"]);null!=o&&s(t,["bytesBase64Encoded"],mn(o));const r=a(e,["mimeType"]);return null!=r&&s(t,["mimeType"],r),t}function rt(e,n){const t={},o=a(e,["gcsUri"]);null!=o&&s(t,["gcsUri"],o);const r=a(e,["imageBytes"]);null!=r&&s(t,["bytesBase64Encoded"],mn(r));const i=a(e,["mimeType"]);return null!=i&&s(t,["mimeType"],i),t}function it(e,n){const t={},o=a(e,["name"]);null!=o&&s(t,["name"],o);const r=a(e,["displayName"]);null!=r&&s(t,["displayName"],r);const i=a(e,["description"]);null!=i&&s(t,["description"],i);const l=a(e,["version"]);null!=l&&s(t,["version"],l);const c=a(e,["_self"]);null!=c&&s(t,["tunedModelInfo"],function(e){const n={},t=a(e,["baseModel"]);null!=t&&s(n,["baseModel"],t);const o=a(e,["createTime"]);null!=o&&s(n,["createTime"],o);const r=a(e,["updateTime"]);return null!=r&&s(n,["updateTime"],r),n}(c));const u=a(e,["inputTokenLimit"]);null!=u&&s(t,["inputTokenLimit"],u);const d=a(e,["outputTokenLimit"]);null!=d&&s(t,["outputTokenLimit"],d);const p=a(e,["supportedGenerationMethods"]);null!=p&&s(t,["supportedActions"],p);const A=a(e,["temperature"]);null!=A&&s(t,["temperature"],A);const m=a(e,["maxTemperature"]);null!=m&&s(t,["maxTemperature"],m);const h=a(e,["topP"]);null!=h&&s(t,["topP"],h);const f=a(e,["topK"]);null!=f&&s(t,["topK"],f);const g=a(e,["thinking"]);return null!=g&&s(t,["thinking"],g),t}function st(e,n){const t={},o=a(e,["name"]);null!=o&&s(t,["name"],o);const r=a(e,["displayName"]);null!=r&&s(t,["displayName"],r);const i=a(e,["description"]);null!=i&&s(t,["description"],i);const l=a(e,["versionId"]);null!=l&&s(t,["version"],l);const c=a(e,["deployedModels"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["endpoint"]);null!=t&&s(n,["name"],t);const o=a(e,["deployedModelId"]);return null!=o&&s(n,["deployedModelId"],o),n}(e))),s(t,["endpoints"],e)}const u=a(e,["labels"]);null!=u&&s(t,["labels"],u);const d=a(e,["_self"]);null!=d&&s(t,["tunedModelInfo"],function(e){const n={},t=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=t&&s(n,["baseModel"],t);const o=a(e,["createTime"]);null!=o&&s(n,["createTime"],o);const r=a(e,["updateTime"]);return null!=r&&s(n,["updateTime"],r),n}(d));const p=a(e,["defaultCheckpointId"]);null!=p&&s(t,["defaultCheckpointId"],p);const A=a(e,["checkpoints"]);if(null!=A){let e=A;Array.isArray(e)&&(e=e.map(e=>e)),s(t,["checkpoints"],e)}return t}function at(e,n){const t={},o=a(e,["safetyAttributes","categories"]);null!=o&&s(t,["categories"],o);const r=a(e,["safetyAttributes","scores"]);null!=r&&s(t,["scores"],r);const i=a(e,["contentType"]);return null!=i&&s(t,["contentType"],i),t}function lt(e,n){const t={},o=a(e,["safetyAttributes","categories"]);null!=o&&s(t,["categories"],o);const r=a(e,["safetyAttributes","scores"]);null!=r&&s(t,["scores"],r);const i=a(e,["contentType"]);return null!=i&&s(t,["contentType"],i),t}function ct(e,n){const t={},o=a(e,["retrieval"]);null!=o&&s(t,["retrieval"],o);const r=a(e,["computerUse"]);if(null!=r&&s(t,["computerUse"],r),void 0!==a(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(e,["codeExecution"]);null!=i&&s(t,["codeExecution"],i);const l=a(e,["enterpriseWebSearch"]);null!=l&&s(t,["enterpriseWebSearch"],l);const c=a(e,["functionDeclarations"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["description"]);null!=t&&s(n,["description"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["parameters"]);null!=r&&s(n,["parameters"],r);const i=a(e,["parametersJsonSchema"]);null!=i&&s(n,["parametersJsonSchema"],i);const l=a(e,["response"]);null!=l&&s(n,["response"],l);const c=a(e,["responseJsonSchema"]);if(null!=c&&s(n,["responseJsonSchema"],c),void 0!==a(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return n}(e))),s(t,["functionDeclarations"],e)}const u=a(e,["googleMaps"]);null!=u&&s(t,["googleMaps"],u);const d=a(e,["googleSearch"]);null!=d&&s(t,["googleSearch"],d);const p=a(e,["googleSearchRetrieval"]);null!=p&&s(t,["googleSearchRetrieval"],p);const A=a(e,["urlContext"]);return null!=A&&s(t,["urlContext"],A),t}function ut(e,n){const t={},o=a(e,["uri"]);null!=o&&s(t,["uri"],o);const r=a(e,["videoBytes"]);null!=r&&s(t,["encodedVideo"],mn(r));const i=a(e,["mimeType"]);return null!=i&&s(t,["encoding"],i),t}function dt(e,n){const t={},o=a(e,["uri"]);null!=o&&s(t,["gcsUri"],o);const r=a(e,["videoBytes"]);null!=r&&s(t,["bytesBase64Encoded"],mn(r));const i=a(e,["mimeType"]);return null!=i&&s(t,["mimeType"],i),t}function pt(e,n){const t=a(e,["mimeType"]);void 0!==n&&null!=t&&s(n,["mimeType"],t);const o=a(e,["displayName"]);void 0!==n&&null!=o&&s(n,["displayName"],o);const r=a(e,["customMetadata"]);if(void 0!==n&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["customMetadata"],e)}const i=a(e,["chunkingConfig"]);return void 0!==n&&null!=i&&s(n,["chunkingConfig"],i),{}}const At="x-goog-api-client",mt=[408,429,500,502,503,504];class ht{constructor(e){var n,t,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=null===(n=e.httpOptions)||void 0===n?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl||(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey||this.customBaseUrl))throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const n=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!n?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||"global"===this.clientOptions.location?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1"}else{if(!this.clientOptions.apiKey)throw new Fn({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=null!==(o=this.clientOptions.apiVersion)&&void 0!==o?o:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol="http:"==n.protocol?"ws":"wss",n.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,n,t){const o=[this.getRequestUrlInternal(n)];return t&&o.push(this.getBaseResourcePath()),""!==e&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===q.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const t=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,t);if(e.queryParams)for(const[n,t]of Object.entries(e.queryParams))o.searchParams.append(n,String(t));let r={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)}patchHttpOptions(e,n){const t=JSON.parse(JSON.stringify(e));for(const[e,o]of Object.entries(n))"object"==typeof o?t[e]=Object.assign(Object.assign({},t[e]),o):void 0!==o&&(t[e]=o);return t}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const t=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,t);o.searchParams.has("alt")&&"sse"===o.searchParams.get("alt")||o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),e.abortSignal),this.streamApiCall(o,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,t,o){if(n&&n.timeout||o){const t=new AbortController,r=t.signal;if(n.timeout&&(null==n?void 0:n.timeout)>0){const e=setTimeout(()=>t.abort(),n.timeout);e&&"function"==typeof e.unref&&e.unref()}o&&o.addEventListener("abort",()=>{t.abort()}),e.signal=r}return n&&null!==n.extraBody&&function(e,n){if(!n||0===Object.keys(n).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let t={};if("string"==typeof e.body&&e.body.length>0)try{const n=JSON.parse(e.body);if("object"!=typeof n||null===n||Array.isArray(n))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");t=n}catch(e){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}const o=function e(n,t){const o=Object.assign({},n);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n],i=o[n];r&&"object"==typeof r&&!Array.isArray(r)&&i&&"object"==typeof i&&!Array.isArray(i)?o[n]=e(i,r):(i&&r&&typeof i!=typeof r&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${n}". Original type: ${typeof i}, New type: ${typeof r}. Overwriting.`),o[n]=r)}return o}(t,n);e.body=JSON.stringify(o)}(e,n.extraBody),e.headers=await this.getHeadersInternal(n,t),e}async unaryApiCall(e,n,t){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:t})).then(async e=>(await ft(e),new fe(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,n,t){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:t})).then(async e=>(await ft(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){return Dn(this,arguments,function*(){var n;const t=null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!t)throw new Error("Response body is empty");try{let n="";const r="data:",i=["\n\n","\r\r","\r\n\r\n"];for(;;){const{done:s,value:a}=yield Pn(t.read());if(s){if(n.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const l=o.decode(a,{stream:!0});try{const e=JSON.parse(l);if("error"in e){const n=JSON.parse(JSON.stringify(e.error)),t=n.status,o=n.code,r=`got status: ${t}. ${JSON.stringify(e)}`;if(o>=400&&o<600)throw new Fn({message:r,status:o})}}catch(e){if("ApiError"===e.name)throw e}n+=l;let c=-1,u=0;for(;;){c=-1,u=0;for(const e of i){const t=n.indexOf(e);-1!==t&&(-1===c||t<c)&&(c=t,u=e.length)}if(-1===c)break;const t=n.substring(0,c);n=n.substring(c+u);const o=t.trim();if(o.startsWith(r)){const n=o.substring(r.length).trim();try{const t=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield Pn(new fe(t))}catch(e){throw new Error(`exception parsing stream chunk ${n}. ${e}`)}}}}}finally{t.releaseLock()}})}async apiCall(e,n){var t;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const r=this.clientOptions.httpOptions.retryOptions;return o(async()=>{const t=await fetch(e,n);if(t.ok)return t;if(mt.includes(t.status))throw new Error(`Retryable HTTP Error: ${t.statusText}`);throw new o.AbortError(`Non-retryable exception ${t.statusText} sending request`)},{retries:(null!==(t=r.attempts)&&void 0!==t?t:5)-1})}getDefaultHeaders(){const e={},n="google-genai-sdk/1.42.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=n,e[At]=n,e["Content-Type"]="application/json",e}async getHeadersInternal(e,n){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t,n),t}getFileName(e){var n;let t="";return"string"==typeof e&&(t=e.replace(/[/\\]+$/,""),t=null!==(n=t.split(/[/\\]/).pop())&&void 0!==n?n:""),t}async uploadFile(e,n){var t;const o={};null!=n&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,s=await r.stat(e);o.sizeBytes=String(s.size);const a=null!==(t=null==n?void 0:n.mimeType)&&void 0!==t?t:s.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},c=this.getFileName(e),u=i("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(u,o.sizeBytes,o.mimeType,c,l,null==n?void 0:n.httpOptions);return r.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,t){var o;const r=this.clientOptions.uploader,i=await r.stat(n),s=String(i.size),a=null!==(o=null==t?void 0:t.mimeType)&&void 0!==o?o:i.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),u={};null!=t&&pt(t,u);const d=await this.fetchUploadUrl(l,s,a,c,u,null==t?void 0:t.httpOptions);return r.uploadToFileSearchStore(n,d,this)}async downloadFile(e){const n=this.clientOptions.downloader;await n.download(e,this)}async fetchUploadUrl(e,n,t,o,r,i){var s;let a={};a=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${t}`},o?{"X-Goog-Upload-File-Name":o}:{})};const l=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:a});if(!l||!(null==l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=null===(s=null==l?void 0:l.headers)||void 0===s?void 0:s["x-goog-upload-url"];if(void 0===c)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function ft(e){var n;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const t=e.status;let o;o=(null===(n=e.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);if(t>=400&&t<600)throw new Fn({message:r,status:t});throw new Error(r)}}function gt(e){for(const n of e){if(yt(n))return!0;if("object"==typeof n&&"inputSchema"in n)return!0}return false}function Et(e){var n;const t=null!==(n=e[At])&&void 0!==n?n:"";e[At]=(t+" mcp_used/unknown").trimStart()}function yt(e){return null!==e&&"object"==typeof e&&e instanceof Ct}function vt(e){return Dn(this,arguments,function*(e,n=100){let t,o=0;for(;o<n;){const n=yield Pn(e.listTools({cursor:t}));for(const e of n.tools)yield yield Pn(e),o++;if(!n.nextCursor)break;t=n.nextCursor}})}class Ct{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ct(e,n)}async initialize(){var e,n,t,o;if(this.mcpTools.length>0)return;const r={},i=[];for(const c of this.mcpClients)try{for(var s,a=!0,l=(n=void 0,Mn(vt(c)));!(e=(s=await l.next()).done);a=!0){o=s.value,a=!1;const e=o;i.push(e);const n=e.name;if(r[n])throw new Error(`Duplicate function name ${n} found in MCP tools. Please ensure function names are unique.`);r[n]=c}}catch(e){n={error:e}}finally{try{a||e||!(t=l.return)||await t.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),function(e,n={}){const t=[],o=new Set;for(const r of e){const e=r.name;if(o.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);o.add(e);const i=yn(r,n);i.functionDeclarations&&t.push(...i.functionDeclarations)}return{functionDeclarations:t}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const t of e)if(t.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[t.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const r=await e.callTool({name:t.name,arguments:t.args},void 0,o);n.push({functionResponse:{name:t.name,response:r.isError?{error:r}:r}})}return n}}class bt{constructor(e,n,t){this.apiClient=e,this.auth=n,this.webSocketFactory=t}async connect(e){var n,t;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),i=function(e){const n=new Headers;for(const[t,o]of Object.entries(e))n.append(t,o);return n}(this.apiClient.getDefaultHeaders()),s=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let a=()=>{};const l=new Promise(e=>{a=e}),c=e.callbacks,u=(this.apiClient,{onopen:function(){a({})},onmessage:e=>{!async function(e,n,t){const o=new He;let r;r=t.data instanceof Blob?JSON.parse(await t.data.text()):JSON.parse(t.data),Object.assign(o,r),n(o)}(0,c.onmessage,e)},onerror:null!==(n=null==c?void 0:c.onerror)&&void 0!==n?n:function(e){},onclose:null!==(t=null==c?void 0:c.onclose)&&void 0!==t?t:function(e){}}),d=this.webSocketFactory.create(s,function(e){const n={};return e.forEach((e,t)=>{n[t]=e}),n}(i),u);d.connect(),await l;const p={setup:{model:$e(this.apiClient,e.model)}};return d.send(JSON.stringify(p)),new wt(d,this.apiClient)}}class wt{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=function(e){const n={},t=a(e,["weightedPrompts"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["weightedPrompts"],e)}return n}(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=function(e){const n={},t=a(e,["musicGenerationConfig"]);return null!=t&&s(n,["musicGenerationConfig"],t),n}(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(me.PLAY)}pause(){this.sendPlaybackControl(me.PAUSE)}stop(){this.sendPlaybackControl(me.STOP)}resetContext(){this.sendPlaybackControl(me.RESET_CONTEXT)}close(){this.conn.close()}}class _t{constructor(e,n,t){this.apiClient=e,this.auth=n,this.webSocketFactory=t,this.music=new bt(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,t,o,r,i,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&gt(e.config.tools)&&Et(p);const A=function(e){const n=new Headers;for(const[t,o]of Object.entries(e))n.append(t,o);return n}(p);if(this.apiClient.isVertexAI()){const e=this.apiClient.getProject(),n=this.apiClient.getLocation(),t=this.apiClient.getApiKey(),o=!!e&&!!n||!!t;this.apiClient.getCustomBaseUrl()&&!o?d=c:(d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,d))}else{const e=this.apiClient.getApiKey();let n="BidiGenerateContent",t="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==u&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),n="BidiGenerateContentConstrained",t="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${n}?${t}=${e}`}let m=()=>{};const h=new Promise(e=>{m=e}),f=e.callbacks,g=this.apiClient,E={onopen:function(){var e;null===(e=null==f?void 0:f.onopen)||void 0===e||e.call(f),m({})},onmessage:e=>{!async function(e,n,t){const o=new Fe;let r;r=t.data instanceof Blob?await t.data.text():t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;const i=JSON.parse(r);if(e.isVertexAI()){const e=function(e){const n={},t=a(e,["setupComplete"]);null!=t&&s(n,["setupComplete"],t);const o=a(e,["serverContent"]);null!=o&&s(n,["serverContent"],o);const r=a(e,["toolCall"]);null!=r&&s(n,["toolCall"],r);const i=a(e,["toolCallCancellation"]);null!=i&&s(n,["toolCallCancellation"],i);const l=a(e,["usageMetadata"]);null!=l&&s(n,["usageMetadata"],function(e){const n={},t=a(e,["promptTokenCount"]);null!=t&&s(n,["promptTokenCount"],t);const o=a(e,["cachedContentTokenCount"]);null!=o&&s(n,["cachedContentTokenCount"],o);const r=a(e,["candidatesTokenCount"]);null!=r&&s(n,["responseTokenCount"],r);const i=a(e,["toolUsePromptTokenCount"]);null!=i&&s(n,["toolUsePromptTokenCount"],i);const l=a(e,["thoughtsTokenCount"]);null!=l&&s(n,["thoughtsTokenCount"],l);const c=a(e,["totalTokenCount"]);null!=c&&s(n,["totalTokenCount"],c);const u=a(e,["promptTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["promptTokensDetails"],e)}const d=a(e,["cacheTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["cacheTokensDetails"],e)}const p=a(e,["candidatesTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["responseTokensDetails"],e)}const A=a(e,["toolUsePromptTokensDetails"]);if(null!=A){let e=A;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["toolUsePromptTokensDetails"],e)}const m=a(e,["trafficType"]);return null!=m&&s(n,["trafficType"],m),n}(l));const c=a(e,["goAway"]);null!=c&&s(n,["goAway"],c);const u=a(e,["sessionResumptionUpdate"]);null!=u&&s(n,["sessionResumptionUpdate"],u);const d=a(e,["voiceActivityDetectionSignal"]);null!=d&&s(n,["voiceActivityDetectionSignal"],d);const p=a(e,["voiceActivity"]);return null!=p&&s(n,["voiceActivity"],function(e){const n={},t=a(e,["type"]);return null!=t&&s(n,["voiceActivityType"],t),n}(p)),n}(i);Object.assign(o,e)}else{const e=i;Object.assign(o,e)}n(o)}(g,f.onmessage,e)},onerror:null!==(n=null==f?void 0:f.onerror)&&void 0!==n?n:function(e){},onclose:null!==(t=null==f?void 0:f.onclose)&&void 0!==t?t:function(e){}},y=this.webSocketFactory.create(d,function(e){const n={};return e.forEach((e,t)=>{n[t]=e}),n}(A),E);y.connect(),await h;let v=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){const e=this.apiClient.getProject(),n=this.apiClient.getLocation();e&&n&&(v=`projects/${e}/locations/${n}/`+v)}let C={};this.apiClient.isVertexAI()&&void 0===(null===(o=e.config)||void 0===o?void 0:o.responseModalities)&&(void 0===e.config?e.config={responseModalities:[R.AUDIO]}:e.config.responseModalities=[R.AUDIO]),(null===(r=e.config)||void 0===r?void 0:r.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=null!==(l=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==l?l:[],w=[];for(const e of b)if(this.isCallableTool(e)){const n=e;w.push(await n.tool())}else w.push(e);w.length>0&&(e.config.tools=w);const _={model:v,config:e.config,callbacks:e.callbacks};return C=this.apiClient.isVertexAI()?function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["setup","model"],$e(e,o));const r=a(n,["config"]);return null!=r&&s(t,["config"],function(e,n){const t=a(e,["generationConfig"]);void 0!==n&&null!=t&&s(n,["setup","generationConfig"],function(e){const n={},t=a(e,["modelSelectionConfig"]);null!=t&&s(n,["modelConfig"],t);const o=a(e,["responseJsonSchema"]);null!=o&&s(n,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);null!=r&&s(n,["audioTimestamp"],r);const i=a(e,["candidateCount"]);null!=i&&s(n,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);null!=l&&s(n,["enableAffectiveDialog"],l);const c=a(e,["frequencyPenalty"]);null!=c&&s(n,["frequencyPenalty"],c);const u=a(e,["logprobs"]);null!=u&&s(n,["logprobs"],u);const d=a(e,["maxOutputTokens"]);null!=d&&s(n,["maxOutputTokens"],d);const p=a(e,["mediaResolution"]);null!=p&&s(n,["mediaResolution"],p);const A=a(e,["presencePenalty"]);null!=A&&s(n,["presencePenalty"],A);const m=a(e,["responseLogprobs"]);null!=m&&s(n,["responseLogprobs"],m);const h=a(e,["responseMimeType"]);null!=h&&s(n,["responseMimeType"],h);const f=a(e,["responseModalities"]);null!=f&&s(n,["responseModalities"],f);const g=a(e,["responseSchema"]);null!=g&&s(n,["responseSchema"],g);const E=a(e,["routingConfig"]);null!=E&&s(n,["routingConfig"],E);const y=a(e,["seed"]);null!=y&&s(n,["seed"],y);const v=a(e,["speechConfig"]);null!=v&&s(n,["speechConfig"],v);const C=a(e,["stopSequences"]);null!=C&&s(n,["stopSequences"],C);const b=a(e,["temperature"]);null!=b&&s(n,["temperature"],b);const w=a(e,["thinkingConfig"]);null!=w&&s(n,["thinkingConfig"],w);const _=a(e,["topK"]);null!=_&&s(n,["topK"],_);const x=a(e,["topP"]);if(null!=x&&s(n,["topP"],x),void 0!==a(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}(t));const o=a(e,["responseModalities"]);void 0!==n&&null!=o&&s(n,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);void 0!==n&&null!=r&&s(n,["setup","generationConfig","temperature"],r);const i=a(e,["topP"]);void 0!==n&&null!=i&&s(n,["setup","generationConfig","topP"],i);const l=a(e,["topK"]);void 0!==n&&null!=l&&s(n,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);void 0!==n&&null!=c&&s(n,["setup","generationConfig","maxOutputTokens"],c);const u=a(e,["mediaResolution"]);void 0!==n&&null!=u&&s(n,["setup","generationConfig","mediaResolution"],u);const d=a(e,["seed"]);void 0!==n&&null!=d&&s(n,["setup","generationConfig","seed"],d);const p=a(e,["speechConfig"]);void 0!==n&&null!=p&&s(n,["setup","generationConfig","speechConfig"],cn(p));const A=a(e,["thinkingConfig"]);void 0!==n&&null!=A&&s(n,["setup","generationConfig","thinkingConfig"],A);const m=a(e,["enableAffectiveDialog"]);void 0!==n&&null!=m&&s(n,["setup","generationConfig","enableAffectiveDialog"],m);const h=a(e,["systemInstruction"]);void 0!==n&&null!=h&&s(n,["setup","systemInstruction"],tn(h));const f=a(e,["tools"]);if(void 0!==n&&null!=f){let e=dn(f);Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["retrieval"]);null!=t&&s(n,["retrieval"],t);const o=a(e,["computerUse"]);if(null!=o&&s(n,["computerUse"],o),void 0!==a(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(e,["codeExecution"]);null!=r&&s(n,["codeExecution"],r);const i=a(e,["enterpriseWebSearch"]);null!=i&&s(n,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["description"]);null!=t&&s(n,["description"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["parameters"]);null!=r&&s(n,["parameters"],r);const i=a(e,["parametersJsonSchema"]);null!=i&&s(n,["parametersJsonSchema"],i);const l=a(e,["response"]);null!=l&&s(n,["response"],l);const c=a(e,["responseJsonSchema"]);if(null!=c&&s(n,["responseJsonSchema"],c),void 0!==a(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");return n}(e))),s(n,["functionDeclarations"],e)}const c=a(e,["googleMaps"]);null!=c&&s(n,["googleMaps"],c);const u=a(e,["googleSearch"]);null!=u&&s(n,["googleSearch"],u);const d=a(e,["googleSearchRetrieval"]);null!=d&&s(n,["googleSearchRetrieval"],d);const p=a(e,["urlContext"]);return null!=p&&s(n,["urlContext"],p),n}(un(e)))),s(n,["setup","tools"],e)}const g=a(e,["sessionResumption"]);void 0!==n&&null!=g&&s(n,["setup","sessionResumption"],g);const E=a(e,["inputAudioTranscription"]);void 0!==n&&null!=E&&s(n,["setup","inputAudioTranscription"],E);const y=a(e,["outputAudioTranscription"]);void 0!==n&&null!=y&&s(n,["setup","outputAudioTranscription"],y);const v=a(e,["realtimeInputConfig"]);void 0!==n&&null!=v&&s(n,["setup","realtimeInputConfig"],v);const C=a(e,["contextWindowCompression"]);void 0!==n&&null!=C&&s(n,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);void 0!==n&&null!=b&&s(n,["setup","proactivity"],b);const w=a(e,["explicitVadSignal"]);return void 0!==n&&null!=w&&s(n,["setup","explicitVadSignal"],w),{}}(r,t)),t}(this.apiClient,_):function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["setup","model"],$e(e,o));const r=a(n,["config"]);return null!=r&&s(t,["config"],$n(r,t)),t}(this.apiClient,_),delete C.config,y.send(JSON.stringify(C)),new Bt(y,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const xt={turnComplete:!0};class Bt{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(null!==n.turns&&void 0!==n.turns){let t=[];try{t=rn(n.turns),e.isVertexAI()||(t=t.map(e=>Yn(e)))}catch(e){throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:t,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let t=[];if(null==n.functionResponses)throw new Error("functionResponses is required.");if(t=Array.isArray(n.functionResponses)?n.functionResponses:[n.functionResponses],0===t.length)throw new Error("functionResponses is required.");for(const n of t){if("object"!=typeof n||null===n||!("name"in n)||!("response"in n))throw new Error(`Could not parse function response, type '${typeof n}'.`);if(!e.isVertexAI()&&!("id"in n))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:t}}}sendClientContent(e){e=Object.assign(Object.assign({},xt),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};n=this.apiClient.isVertexAI()?{realtimeInput:Jn(e)}:{realtimeInput:Wn(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Tt(e){var n,t,o;if(null===(n=null==e?void 0:e.automaticFunctionCalling)||void 0===n?void 0:n.disable)return!0;let r=!1;for(const n of null!==(t=null==e?void 0:e.tools)&&void 0!==t?t:[])if(It(n)){r=!0;break}if(!r)return!0;const i=null===(o=null==e?void 0:e.automaticFunctionCalling)||void 0===o?void 0:o.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function It(e){return"callTool"in e&&"function"==typeof e.callTool}function St(e){var n;const t=[];return(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.tools)?(e.config.tools.forEach((e,n)=>{if(It(e))return;const o=e;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(n)}),t):t}function Ot(e){var n;return!(null===(n=null==e?void 0:e.automaticFunctionCalling)||void 0===n?void 0:n.ignoreCallHistory)}class kt extends r{constructor(e){super(),this.apiClient=e,this.embedContent=async e=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(e);if(e.model.includes("gemini")&&"gemini-embedding-001"!==e.model||e.model.includes("maas")){const n=rn(e.contents);if(n.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const t=Object.assign(Object.assign({},e),{content:n[0],embeddingApiType:F.EMBED_CONTENT});return await this.embedContentInternal(t)}{const n=Object.assign(Object.assign({},e),{embeddingApiType:F.PREDICT});return await this.embedContentInternal(n)}},this.generateContent=async e=>{var n,t,o,r,i;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var n,t,o;return null!==(o=null===(t=null===(n=e.config)||void 0===n?void 0:n.tools)||void 0===t?void 0:t.some(e=>It(e)))&&void 0!==o&&o}(e)||Tt(e.config))return await this.generateContentInternal(s);const a=St(e);if(a.length>0){const e=a.map(e=>`tools[${e}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let l,c;const u=rn(s.contents),d=null!==(o=null===(t=null===(n=s.config)||void 0===n?void 0:n.automaticFunctionCalling)||void 0===t?void 0:t.maximumRemoteCalls)&&void 0!==o?o:10;let p=0;for(;p<d&&(l=await this.generateContentInternal(s),l.functionCalls&&0!==l.functionCalls.length);){const n=l.candidates[0].content,t=[];for(const n of null!==(i=null===(r=e.config)||void 0===r?void 0:r.tools)&&void 0!==i?i:[])if(It(n)){const e=n,o=await e.callTool(l.functionCalls);t.push(...o)}p++,c={role:"user",parts:t},s.contents=rn(s.contents),s.contents.push(n),s.contents.push(c),Ot(s.config)&&(u.push(n),u.push(c))}return Ot(s.config)&&(l.automaticFunctionCallingHistory=u),l},this.generateContentStream=async e=>{var n,t,o,r,i;if(this.maybeMoveToResponseJsonSchem(e),Tt(e.config)){const n=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(n)}const s=St(e);if(s.length>0){const e=s.map(e=>`tools[${e}]`).join(", ");throw new Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const a=null===(o=null===(t=null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.toolConfig)||void 0===t?void 0:t.functionCallingConfig)||void 0===o?void 0:o.streamFunctionCallArguments,l=null===(i=null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(a&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var n;let t;const o=[];if(null==e?void 0:e.generatedImages)for(const r of e.generatedImages)r&&(null==r?void 0:r.safetyAttributes)&&"Positive Prompt"===(null===(n=null==r?void 0:r.safetyAttributes)||void 0===n?void 0:n.contentType)?t=null==r?void 0:r.safetyAttributes:o.push(r);let r;return r=t?{generatedImages:o,positivePromptSafetyAttributes:t,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:o,sdkHttpResponse:e.sdkHttpResponse},r}),this.list=async e=>{var n;const t={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!t.config.queryBase){if(null===(n=t.config)||void 0===n?void 0:n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");t.config.filter="labels.tune-type:*"}return new Sn(he.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(t),t)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const t={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(t)},this.generateVideos=async e=>{var n,t,o,r,i,s;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(n=e.video)||void 0===n?void 0:n.uri)&&(null===(t=e.video)||void 0===t?void 0:t.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(r=null===(o=e.source)||void 0===o?void 0:o.video)||void 0===r?void 0:r.uri)&&(null===(s=null===(i=e.source)||void 0===i?void 0:i.video)||void 0===s?void 0:s.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,t,o;const r=null===(n=e.config)||void 0===n?void 0:n.tools;if(!r)return e;const i=await Promise.all(r.map(async e=>{if(It(e)){const n=e;return await n.tool()}return e})),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(s.config.tools=i,e.config&&e.config.tools&&gt(e.config.tools)){const n=null!==(o=null===(t=e.config.httpOptions)||void 0===t?void 0:t.headers)&&void 0!==o?o:{};let r=Object.assign({},n);0===Object.keys(r).length&&(r=this.apiClient.getDefaultHeaders()),Et(r),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:r})}return s}async initAfcToolsMap(e){var n,t,o;const r=new Map;for(const i of null!==(t=null===(n=e.config)||void 0===n?void 0:n.tools)&&void 0!==t?t:[])if(It(i)){const e=i,n=await e.tool();for(const t of null!==(o=n.functionDeclarations)&&void 0!==o?o:[]){if(!t.name)throw new Error("Function declaration name is required.");if(r.has(t.name))throw new Error(`Duplicate tool declaration name: ${t.name}`);r.set(t.name,e)}}return r}async processAfcStream(e){var n,t,o;const r=null!==(o=null===(t=null===(n=e.config)||void 0===n?void 0:n.automaticFunctionCalling)||void 0===t?void 0:t.maximumRemoteCalls)&&void 0!==o?o:10;let i=!1,s=0;return function(e,n,t){return Dn(this,arguments,function*(){for(var o,a,l,c,u,d;s<r;){i&&(s++,i=!1);const h=yield Pn(e.processParamsMaybeAddMcpUsage(t)),f=yield Pn(e.generateContentStreamInternal(h)),g=[],E=[];try{for(var p,A=!0,m=(a=void 0,Mn(f));!(o=(p=yield Pn(m.next())).done);A=!0){c=p.value,A=!1;const e=c;if(yield yield Pn(e),e.candidates&&(null===(u=e.candidates[0])||void 0===u?void 0:u.content)){E.push(e.candidates[0].content);for(const t of null!==(d=e.candidates[0].content.parts)&&void 0!==d?d:[])if(s<r&&t.functionCall){if(!t.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!n.has(t.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${n.keys()}, mising tool: ${t.functionCall.name}`);{const e=yield Pn(n.get(t.functionCall.name).callTool([t.functionCall]));g.push(...e)}}}}}catch(e){a={error:e}}finally{try{A||o||!(l=m.return)||(yield Pn(l.call(m)))}finally{if(a)throw a.error}}if(!(g.length>0))break;{i=!0;const e=new ge;e.candidates=[{content:{role:"user",parts:g}}],yield yield Pn(e);const n=[];n.push(...E),n.push({role:"user",parts:g});const o=rn(t.contents).concat(n);t.contents=o}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var n,t,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const o=Kn(this.apiClient,e);return a=i("{model}:generateContent",o._url),l=o._query,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),s.then(e=>{const n=Qn(e),t=new ge;return Object.assign(t,n),t})}{const n=zn(this.apiClient,e);return a=i("{model}:generateContent",n._url),l=n._query,delete n._url,delete n._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),s.then(e=>{const n=Xn(e),t=new ge;return Object.assign(t,n),t})}}async generateContentStreamInternal(e){var n,t,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const o=Kn(this.apiClient,e);return a=i("{model}:streamGenerateContent?alt=sse",o._url),l=o._query,delete o._url,delete o._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}),s.then(function(e){return Dn(this,arguments,function*(){var n,t,o,r;try{for(var i,s=!0,a=Mn(e);!(n=(i=yield Pn(a.next())).done);s=!0){r=i.value,s=!1;const e=r,n=Qn(yield Pn(e.json()));n.sdkHttpResponse={headers:e.headers};const t=new ge;Object.assign(t,n),yield yield Pn(t)}}catch(e){t={error:e}}finally{try{s||n||!(o=a.return)||(yield Pn(o.call(a)))}finally{if(t)throw t.error}}})})}{const n=zn(this.apiClient,e);return a=i("{model}:streamGenerateContent?alt=sse",n._url),l=n._query,delete n._url,delete n._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}),s.then(function(e){return Dn(this,arguments,function*(){var n,t,o,r;try{for(var i,s=!0,a=Mn(e);!(n=(i=yield Pn(a.next())).done);s=!0){r=i.value,s=!1;const e=r,n=Xn(yield Pn(e.json()));n.sdkHttpResponse={headers:e.headers};const t=new ge;Object.assign(t,n),yield yield Pn(t)}}catch(e){t={error:e}}finally{try{s||n||!(o=a.return)||(yield Pn(o.call(a)))}finally{if(t)throw t.error}}})})}}async embedContentInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n,t){const o={},r=a(n,["model"]);null!=r&&s(o,["_url","model"],$e(e,r));let i=a(t,["embeddingApiType"]);if(void 0===i&&(i="PREDICT"),"PREDICT"===i){const t=a(n,["contents"]);if(null!=t){let n=on(e,t);Array.isArray(n)&&(n=n.map(e=>e)),s(o,["instances[]","content"],n)}}let l=a(t,["embeddingApiType"]);if(void 0===l&&(l="PREDICT"),"EMBED_CONTENT"===l){const e=a(n,["content"]);null!=e&&s(o,["content"],tn(e))}const c=a(n,["config"]);return null!=c&&function(e,n,t){let o=a(t,["embeddingApiType"]);if(void 0===o&&(o="PREDICT"),"PREDICT"===o){const t=a(e,["taskType"]);void 0!==n&&null!=t&&s(n,["instances[]","task_type"],t)}else if("EMBED_CONTENT"===o){const t=a(e,["taskType"]);void 0!==n&&null!=t&&s(n,["taskType"],t)}let r=a(t,["embeddingApiType"]);if(void 0===r&&(r="PREDICT"),"PREDICT"===r){const t=a(e,["title"]);void 0!==n&&null!=t&&s(n,["instances[]","title"],t)}else if("EMBED_CONTENT"===r){const t=a(e,["title"]);void 0!==n&&null!=t&&s(n,["title"],t)}let i=a(t,["embeddingApiType"]);if(void 0===i&&(i="PREDICT"),"PREDICT"===i){const t=a(e,["outputDimensionality"]);void 0!==n&&null!=t&&s(n,["parameters","outputDimensionality"],t)}else if("EMBED_CONTENT"===i){const t=a(e,["outputDimensionality"]);void 0!==n&&null!=t&&s(n,["outputDimensionality"],t)}let l=a(t,["embeddingApiType"]);if(void 0===l&&(l="PREDICT"),"PREDICT"===l){const t=a(e,["mimeType"]);void 0!==n&&null!=t&&s(n,["instances[]","mimeType"],t)}let c=a(t,["embeddingApiType"]);if(void 0===c&&(c="PREDICT"),"PREDICT"===c){const t=a(e,["autoTruncate"]);void 0!==n&&null!=t&&s(n,["parameters","autoTruncate"],t)}else if("EMBED_CONTENT"===c){const t=a(e,["autoTruncate"]);void 0!==n&&null!=t&&s(n,["autoTruncate"],t)}}(c,o,t),o}(this.apiClient,e,e);return c=i((d=e.model).includes("gemini")&&"gemini-embedding-001"!==d||d.includes("maas")?"{model}:embedContent":"{model}:predict",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(n=>{const t=function(e,n){const t={},o=a(e,["sdkHttpResponse"]);null!=o&&s(t,["sdkHttpResponse"],o);const r=a(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["values"]);null!=t&&s(n,["values"],t);const o=a(e,["statistics"]);return null!=o&&s(n,["statistics"],function(e){const n={},t=a(e,["truncated"]);null!=t&&s(n,["truncated"],t);const o=a(e,["token_count"]);return null!=o&&s(n,["tokenCount"],o),n}(o)),n}(e))),s(t,["embeddings"],e)}const i=a(e,["metadata"]);if(null!=i&&s(t,["metadata"],i),n&&"EMBED_CONTENT"===a(n,["embeddingApiType"])){const n=a(e,["embedding"]),o=a(e,["usageMetadata"]),r=a(e,["truncated"]);if(n){const e={};o&&o.promptTokenCount&&(e.tokenCount=o.promptTokenCount),r&&(e.truncated=r),n.statistics=e,s(t,["embeddings"],[n])}}return t}(n,e),o=new Ee;return Object.assign(o,t),o})}{const n=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["contents"]);if(null!=r){let n=on(e,r);Array.isArray(n)&&(n=n.map(e=>e)),s(t,["requests[]","content"],n)}const i=a(n,["content"]);null!=i&&Yn(tn(i));const l=a(n,["config"]);null!=l&&function(e,n){const t=a(e,["taskType"]);void 0!==n&&null!=t&&s(n,["requests[]","taskType"],t);const o=a(e,["title"]);void 0!==n&&null!=o&&s(n,["requests[]","title"],o);const r=a(e,["outputDimensionality"]);if(void 0!==n&&null!=r&&s(n,["requests[]","outputDimensionality"],r),void 0!==a(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==a(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(l,t);const c=a(n,["model"]);return void 0!==c&&s(t,["requests[]","model"],$e(e,c)),t}(this.apiClient,e);return c=i("{model}:batchEmbedContents",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["embeddings"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["embeddings"],e)}const r=a(e,["metadata"]);return null!=r&&s(n,["metadata"],r),n}(e),t=new Ee;return Object.assign(t,n),t})}var d}async generateImagesInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["prompt"]);null!=r&&s(t,["instances[0]","prompt"],r);const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["outputGcsUri"]);void 0!==n&&null!=t&&s(n,["parameters","storageUri"],t);const o=a(e,["negativePrompt"]);void 0!==n&&null!=o&&s(n,["parameters","negativePrompt"],o);const r=a(e,["numberOfImages"]);void 0!==n&&null!=r&&s(n,["parameters","sampleCount"],r);const i=a(e,["aspectRatio"]);void 0!==n&&null!=i&&s(n,["parameters","aspectRatio"],i);const l=a(e,["guidanceScale"]);void 0!==n&&null!=l&&s(n,["parameters","guidanceScale"],l);const c=a(e,["seed"]);void 0!==n&&null!=c&&s(n,["parameters","seed"],c);const u=a(e,["safetyFilterLevel"]);void 0!==n&&null!=u&&s(n,["parameters","safetySetting"],u);const d=a(e,["personGeneration"]);void 0!==n&&null!=d&&s(n,["parameters","personGeneration"],d);const p=a(e,["includeSafetyAttributes"]);void 0!==n&&null!=p&&s(n,["parameters","includeSafetyAttributes"],p);const A=a(e,["includeRaiReason"]);void 0!==n&&null!=A&&s(n,["parameters","includeRaiReason"],A);const m=a(e,["language"]);void 0!==n&&null!=m&&s(n,["parameters","language"],m);const h=a(e,["outputMimeType"]);void 0!==n&&null!=h&&s(n,["parameters","outputOptions","mimeType"],h);const f=a(e,["outputCompressionQuality"]);void 0!==n&&null!=f&&s(n,["parameters","outputOptions","compressionQuality"],f);const g=a(e,["addWatermark"]);void 0!==n&&null!=g&&s(n,["parameters","addWatermark"],g);const E=a(e,["labels"]);void 0!==n&&null!=E&&s(n,["labels"],E);const y=a(e,["imageSize"]);void 0!==n&&null!=y&&s(n,["parameters","sampleImageSize"],y);const v=a(e,["enhancePrompt"]);void 0!==n&&null!=v&&s(n,["parameters","enhancePrompt"],v)}(i,t),t}(this.apiClient,e);return c=i("{model}:predict",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>nt(e))),s(n,["generatedImages"],e)}const r=a(e,["positivePromptSafetyAttributes"]);return null!=r&&s(n,["positivePromptSafetyAttributes"],lt(r)),n}(e),t=new ye;return Object.assign(t,n),t})}{const n=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["prompt"]);null!=r&&s(t,["instances[0]","prompt"],r);const i=a(n,["config"]);return null!=i&&function(e,n){if(void 0!==a(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==a(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const t=a(e,["numberOfImages"]);void 0!==n&&null!=t&&s(n,["parameters","sampleCount"],t);const o=a(e,["aspectRatio"]);void 0!==n&&null!=o&&s(n,["parameters","aspectRatio"],o);const r=a(e,["guidanceScale"]);if(void 0!==n&&null!=r&&s(n,["parameters","guidanceScale"],r),void 0!==a(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=a(e,["safetyFilterLevel"]);void 0!==n&&null!=i&&s(n,["parameters","safetySetting"],i);const l=a(e,["personGeneration"]);void 0!==n&&null!=l&&s(n,["parameters","personGeneration"],l);const c=a(e,["includeSafetyAttributes"]);void 0!==n&&null!=c&&s(n,["parameters","includeSafetyAttributes"],c);const u=a(e,["includeRaiReason"]);void 0!==n&&null!=u&&s(n,["parameters","includeRaiReason"],u);const d=a(e,["language"]);void 0!==n&&null!=d&&s(n,["parameters","language"],d);const p=a(e,["outputMimeType"]);void 0!==n&&null!=p&&s(n,["parameters","outputOptions","mimeType"],p);const A=a(e,["outputCompressionQuality"]);if(void 0!==n&&null!=A&&s(n,["parameters","outputOptions","compressionQuality"],A),void 0!==a(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==a(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const m=a(e,["imageSize"]);if(void 0!==n&&null!=m&&s(n,["parameters","sampleImageSize"],m),void 0!==a(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,t),t}(this.apiClient,e);return c=i("{model}:predict",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["_self"]);null!=t&&s(n,["image"],function(e){const n={},t=a(e,["bytesBase64Encoded"]);null!=t&&s(n,["imageBytes"],mn(t));const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(t));const o=a(e,["raiFilteredReason"]);null!=o&&s(n,["raiFilteredReason"],o);const r=a(e,["_self"]);return null!=r&&s(n,["safetyAttributes"],at(r)),n}(e))),s(n,["generatedImages"],e)}const r=a(e,["positivePromptSafetyAttributes"]);return null!=r&&s(n,["positivePromptSafetyAttributes"],at(r)),n}(e),t=new ye;return Object.assign(t,n),t})}}async editImageInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["prompt"]);null!=r&&s(t,["instances[0]","prompt"],r);const i=a(n,["referenceImages"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["referenceImage"]);null!=t&&s(n,["referenceImage"],rt(t));const o=a(e,["referenceId"]);null!=o&&s(n,["referenceId"],o);const r=a(e,["referenceType"]);null!=r&&s(n,["referenceType"],r);const i=a(e,["maskImageConfig"]);null!=i&&s(n,["maskImageConfig"],function(e){const n={},t=a(e,["maskMode"]);null!=t&&s(n,["maskMode"],t);const o=a(e,["segmentationClasses"]);null!=o&&s(n,["maskClasses"],o);const r=a(e,["maskDilation"]);return null!=r&&s(n,["dilation"],r),n}(i));const l=a(e,["controlImageConfig"]);null!=l&&s(n,["controlImageConfig"],function(e){const n={},t=a(e,["controlType"]);null!=t&&s(n,["controlType"],t);const o=a(e,["enableControlImageComputation"]);return null!=o&&s(n,["computeControl"],o),n}(l));const c=a(e,["styleImageConfig"]);null!=c&&s(n,["styleImageConfig"],c);const u=a(e,["subjectImageConfig"]);return null!=u&&s(n,["subjectImageConfig"],u),n}(e))),s(t,["instances[0]","referenceImages"],e)}const l=a(n,["config"]);return null!=l&&function(e,n){const t=a(e,["outputGcsUri"]);void 0!==n&&null!=t&&s(n,["parameters","storageUri"],t);const o=a(e,["negativePrompt"]);void 0!==n&&null!=o&&s(n,["parameters","negativePrompt"],o);const r=a(e,["numberOfImages"]);void 0!==n&&null!=r&&s(n,["parameters","sampleCount"],r);const i=a(e,["aspectRatio"]);void 0!==n&&null!=i&&s(n,["parameters","aspectRatio"],i);const l=a(e,["guidanceScale"]);void 0!==n&&null!=l&&s(n,["parameters","guidanceScale"],l);const c=a(e,["seed"]);void 0!==n&&null!=c&&s(n,["parameters","seed"],c);const u=a(e,["safetyFilterLevel"]);void 0!==n&&null!=u&&s(n,["parameters","safetySetting"],u);const d=a(e,["personGeneration"]);void 0!==n&&null!=d&&s(n,["parameters","personGeneration"],d);const p=a(e,["includeSafetyAttributes"]);void 0!==n&&null!=p&&s(n,["parameters","includeSafetyAttributes"],p);const A=a(e,["includeRaiReason"]);void 0!==n&&null!=A&&s(n,["parameters","includeRaiReason"],A);const m=a(e,["language"]);void 0!==n&&null!=m&&s(n,["parameters","language"],m);const h=a(e,["outputMimeType"]);void 0!==n&&null!=h&&s(n,["parameters","outputOptions","mimeType"],h);const f=a(e,["outputCompressionQuality"]);void 0!==n&&null!=f&&s(n,["parameters","outputOptions","compressionQuality"],f);const g=a(e,["addWatermark"]);void 0!==n&&null!=g&&s(n,["parameters","addWatermark"],g);const E=a(e,["labels"]);void 0!==n&&null!=E&&s(n,["labels"],E);const y=a(e,["editMode"]);void 0!==n&&null!=y&&s(n,["parameters","editMode"],y);const v=a(e,["baseSteps"]);void 0!==n&&null!=v&&s(n,["parameters","editConfig","baseSteps"],v)}(l,t),t}(this.apiClient,e);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>nt(e))),s(n,["generatedImages"],e)}return n}(e),t=new ve;return Object.assign(t,n),t})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["image"]);null!=r&&s(t,["instances[0]","image"],rt(r));const i=a(n,["upscaleFactor"]);null!=i&&s(t,["parameters","upscaleConfig","upscaleFactor"],i);const l=a(n,["config"]);return null!=l&&function(e,n){const t=a(e,["outputGcsUri"]);void 0!==n&&null!=t&&s(n,["parameters","storageUri"],t);const o=a(e,["safetyFilterLevel"]);void 0!==n&&null!=o&&s(n,["parameters","safetySetting"],o);const r=a(e,["personGeneration"]);void 0!==n&&null!=r&&s(n,["parameters","personGeneration"],r);const i=a(e,["includeRaiReason"]);void 0!==n&&null!=i&&s(n,["parameters","includeRaiReason"],i);const l=a(e,["outputMimeType"]);void 0!==n&&null!=l&&s(n,["parameters","outputOptions","mimeType"],l);const c=a(e,["outputCompressionQuality"]);void 0!==n&&null!=c&&s(n,["parameters","outputOptions","compressionQuality"],c);const u=a(e,["enhanceInputImage"]);void 0!==n&&null!=u&&s(n,["parameters","upscaleConfig","enhanceInputImage"],u);const d=a(e,["imagePreservationFactor"]);void 0!==n&&null!=d&&s(n,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=a(e,["labels"]);void 0!==n&&null!=p&&s(n,["labels"],p);const A=a(e,["numberOfImages"]);void 0!==n&&null!=A&&s(n,["parameters","sampleCount"],A);const m=a(e,["mode"]);void 0!==n&&null!=m&&s(n,["parameters","mode"],m)}(l,t),t}(this.apiClient,e);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>nt(e))),s(n,["generatedImages"],e)}return n}(e),t=new Ce;return Object.assign(t,n),t})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["source"]);null!=r&&function(e,n){const t=a(e,["prompt"]);void 0!==n&&null!=t&&s(n,["instances[0]","prompt"],t);const o=a(e,["personImage"]);void 0!==n&&null!=o&&s(n,["instances[0]","personImage","image"],rt(o));const r=a(e,["productImages"]);if(void 0!==n&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["productImage"]);return null!=t&&s(n,["image"],rt(t)),n}(e))),s(n,["instances[0]","productImages"],e)}}(r,t);const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["numberOfImages"]);void 0!==n&&null!=t&&s(n,["parameters","sampleCount"],t);const o=a(e,["baseSteps"]);void 0!==n&&null!=o&&s(n,["parameters","baseSteps"],o);const r=a(e,["outputGcsUri"]);void 0!==n&&null!=r&&s(n,["parameters","storageUri"],r);const i=a(e,["seed"]);void 0!==n&&null!=i&&s(n,["parameters","seed"],i);const l=a(e,["safetyFilterLevel"]);void 0!==n&&null!=l&&s(n,["parameters","safetySetting"],l);const c=a(e,["personGeneration"]);void 0!==n&&null!=c&&s(n,["parameters","personGeneration"],c);const u=a(e,["addWatermark"]);void 0!==n&&null!=u&&s(n,["parameters","addWatermark"],u);const d=a(e,["outputMimeType"]);void 0!==n&&null!=d&&s(n,["parameters","outputOptions","mimeType"],d);const p=a(e,["outputCompressionQuality"]);void 0!==n&&null!=p&&s(n,["parameters","outputOptions","compressionQuality"],p);const A=a(e,["enhancePrompt"]);void 0!==n&&null!=A&&s(n,["parameters","enhancePrompt"],A);const m=a(e,["labels"]);void 0!==n&&null!=m&&s(n,["labels"],m)}(i,t),t}(this.apiClient,e);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["predictions"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>nt(e))),s(n,["generatedImages"],e)}return n}(e),t=new be;return Object.assign(t,n),t})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["source"]);null!=r&&function(e,n){const t=a(e,["prompt"]);void 0!==n&&null!=t&&s(n,["instances[0]","prompt"],t);const o=a(e,["image"]);void 0!==n&&null!=o&&s(n,["instances[0]","image"],rt(o));const r=a(e,["scribbleImage"]);void 0!==n&&null!=r&&s(n,["instances[0]","scribble"],function(e){const n={},t=a(e,["image"]);return null!=t&&s(n,["image"],rt(t)),n}(r))}(r,t);const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["mode"]);void 0!==n&&null!=t&&s(n,["parameters","mode"],t);const o=a(e,["maxPredictions"]);void 0!==n&&null!=o&&s(n,["parameters","maxPredictions"],o);const r=a(e,["confidenceThreshold"]);void 0!==n&&null!=r&&s(n,["parameters","confidenceThreshold"],r);const i=a(e,["maskDilation"]);void 0!==n&&null!=i&&s(n,["parameters","maskDilation"],i);const l=a(e,["binaryColorThreshold"]);void 0!==n&&null!=l&&s(n,["parameters","binaryColorThreshold"],l);const c=a(e,["labels"]);void 0!==n&&null!=c&&s(n,["labels"],c)}(i,t),t}(this.apiClient,e);return r=i("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["predictions"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["_self"]);null!=t&&s(n,["mask"],tt(t));const o=a(e,["labels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["labels"],e)}return n}(e))),s(n,["generatedMasks"],e)}return n}(e),t=new we;return Object.assign(t,n),t})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);return null!=o&&s(t,["_url","name"],$e(e,o)),t}(this.apiClient,e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>st(e))}{const n=function(e,n){const t={},o=a(n,["model"]);return null!=o&&s(t,["_url","name"],$e(e,o)),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>it(e))}}async listInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["config"]);return null!=o&&function(e,n,t){const o=a(n,["pageSize"]);void 0!==t&&null!=o&&s(t,["_query","pageSize"],o);const r=a(n,["pageToken"]);void 0!==t&&null!=r&&s(t,["_query","pageToken"],r);const i=a(n,["filter"]);void 0!==t&&null!=i&&s(t,["_query","filter"],i);const l=a(n,["queryBase"]);void 0!==t&&null!=l&&s(t,["_url","models_url"],fn(e,l))}(e,o,t),t}(this.apiClient,e);return c=i("{models_url}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["_self"]);if(null!=r){let e=gn(r);Array.isArray(e)&&(e=e.map(e=>st(e))),s(n,["models"],e)}return n}(e),t=new _e;return Object.assign(t,n),t})}{const n=function(e,n){const t={},o=a(n,["config"]);return null!=o&&function(e,n,t){const o=a(n,["pageSize"]);void 0!==t&&null!=o&&s(t,["_query","pageSize"],o);const r=a(n,["pageToken"]);void 0!==t&&null!=r&&s(t,["_query","pageToken"],r);const i=a(n,["filter"]);void 0!==t&&null!=i&&s(t,["_query","filter"],i);const l=a(n,["queryBase"]);void 0!==t&&null!=l&&s(t,["_url","models_url"],fn(e,l))}(e,o,t),t}(this.apiClient,e);return c=i("{models_url}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["_self"]);if(null!=r){let e=gn(r);Array.isArray(e)&&(e=e.map(e=>it(e))),s(n,["models"],e)}return n}(e),t=new _e;return Object.assign(t,n),t})}}async update(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["displayName"]);void 0!==n&&null!=t&&s(n,["displayName"],t);const o=a(e,["description"]);void 0!==n&&null!=o&&s(n,["description"],o);const r=a(e,["defaultCheckpointId"]);void 0!==n&&null!=r&&s(n,["defaultCheckpointId"],r)}(r,t),t}(this.apiClient,e);return c=i("{model}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>st(e))}{const n=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","name"],$e(e,o));const r=a(n,["config"]);return null!=r&&function(e,n){const t=a(e,["displayName"]);void 0!==n&&null!=t&&s(n,["displayName"],t);const o=a(e,["description"]);void 0!==n&&null!=o&&s(n,["description"],o);const r=a(e,["defaultCheckpointId"]);void 0!==n&&null!=r&&s(n,["defaultCheckpointId"],r)}(r,t),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"PATCH",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>it(e))}}async delete(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);return null!=o&&s(t,["_url","name"],$e(e,o)),t}(this.apiClient,e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new xe;return Object.assign(t,n),t})}{const n=function(e,n){const t={},o=a(n,["model"]);return null!=o&&s(t,["_url","name"],$e(e,o)),t}(this.apiClient,e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"DELETE",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new xe;return Object.assign(t,n),t})}}async countTokens(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["contents"]);if(null!=r){let e=rn(r);Array.isArray(e)&&(e=e.map(e=>e)),s(t,["contents"],e)}const i=a(n,["config"]);return null!=i&&function(e,n){const t=a(e,["systemInstruction"]);void 0!==n&&null!=t&&s(n,["systemInstruction"],tn(t));const o=a(e,["tools"]);if(void 0!==n&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>ct(e))),s(n,["tools"],e)}const r=a(e,["generationConfig"]);void 0!==n&&null!=r&&s(n,["generationConfig"],function(e){const n={},t=a(e,["modelSelectionConfig"]);null!=t&&s(n,["modelConfig"],t);const o=a(e,["responseJsonSchema"]);null!=o&&s(n,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);null!=r&&s(n,["audioTimestamp"],r);const i=a(e,["candidateCount"]);null!=i&&s(n,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);null!=l&&s(n,["enableAffectiveDialog"],l);const c=a(e,["frequencyPenalty"]);null!=c&&s(n,["frequencyPenalty"],c);const u=a(e,["logprobs"]);null!=u&&s(n,["logprobs"],u);const d=a(e,["maxOutputTokens"]);null!=d&&s(n,["maxOutputTokens"],d);const p=a(e,["mediaResolution"]);null!=p&&s(n,["mediaResolution"],p);const A=a(e,["presencePenalty"]);null!=A&&s(n,["presencePenalty"],A);const m=a(e,["responseLogprobs"]);null!=m&&s(n,["responseLogprobs"],m);const h=a(e,["responseMimeType"]);null!=h&&s(n,["responseMimeType"],h);const f=a(e,["responseModalities"]);null!=f&&s(n,["responseModalities"],f);const g=a(e,["responseSchema"]);null!=g&&s(n,["responseSchema"],g);const E=a(e,["routingConfig"]);null!=E&&s(n,["routingConfig"],E);const y=a(e,["seed"]);null!=y&&s(n,["seed"],y);const v=a(e,["speechConfig"]);null!=v&&s(n,["speechConfig"],v);const C=a(e,["stopSequences"]);null!=C&&s(n,["stopSequences"],C);const b=a(e,["temperature"]);null!=b&&s(n,["temperature"],b);const w=a(e,["thinkingConfig"]);null!=w&&s(n,["thinkingConfig"],w);const _=a(e,["topK"]);null!=_&&s(n,["topK"],_);const x=a(e,["topP"]);if(null!=x&&s(n,["topP"],x),void 0!==a(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}(r))}(i,t),t}(this.apiClient,e);return c=i("{model}:countTokens",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["totalTokens"]);return null!=o&&s(n,["totalTokens"],o),n}(e),t=new Be;return Object.assign(t,n),t})}{const n=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["contents"]);if(null!=r){let e=rn(r);Array.isArray(e)&&(e=e.map(e=>Yn(e))),s(t,["contents"],e)}const i=a(n,["config"]);return null!=i&&function(e){if(void 0!==a(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==a(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==a(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),t}(this.apiClient,e);return c=i("{model}:countTokens",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["totalTokens"]);null!=o&&s(n,["totalTokens"],o);const r=a(e,["cachedContentTokenCount"]);return null!=r&&s(n,["cachedContentTokenCount"],r),n}(e),t=new Be;return Object.assign(t,n),t})}}async computeTokens(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["_url","model"],$e(e,o));const r=a(n,["contents"]);if(null!=r){let e=rn(r);Array.isArray(e)&&(e=e.map(e=>e)),s(t,["contents"],e)}return t}(this.apiClient,e);return r=i("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["tokensInfo"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["tokensInfo"],e)}return n}(e),t=new Te;return Object.assign(t,n),t})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=et(this.apiClient,e);return c=i("{model}:predictLongRunning",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l.then(e=>{const n=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["videos"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["_self"]);return null!=t&&s(n,["video"],function(e){const n={},t=a(e,["gcsUri"]);null!=t&&s(n,["uri"],t);const o=a(e,["bytesBase64Encoded"]);null!=o&&s(n,["videoBytes"],mn(o));const r=a(e,["mimeType"]);return null!=r&&s(n,["mimeType"],r),n}(t)),n}(e))),s(n,["generatedVideos"],e)}const o=a(e,["raiMediaFilteredCount"]);null!=o&&s(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return null!=r&&s(n,["raiMediaFilteredReasons"],r),n}(l)),n}(e),t=new Ie;return Object.assign(t,n),t})}{const n=Zn(this.apiClient,e);return c=i("{model}:predictLongRunning",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l.then(e=>{const n=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response","generateVideoResponse"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["generatedSamples"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["video"]);return null!=t&&s(n,["video"],function(e){const n={},t=a(e,["uri"]);null!=t&&s(n,["uri"],t);const o=a(e,["encodedVideo"]);null!=o&&s(n,["videoBytes"],mn(o));const r=a(e,["encoding"]);return null!=r&&s(n,["mimeType"],r),n}(t)),n}(e))),s(n,["generatedVideos"],e)}const o=a(e,["raiMediaFilteredCount"]);null!=o&&s(n,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return null!=r&&s(n,["raiMediaFilteredReasons"],r),n}(l)),n}(e),t=new Ie;return Object.assign(t,n),t})}}}class Rt extends r{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,t=e.config;if(void 0===n.name||""===n.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=n.name.split("/operations/")[0];let o;t&&"httpOptions"in t&&(o=t.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:e,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:n.name,config:t});return n._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const n=e.operation,t=e.config;if(void 0===n.name||""===n.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=n.name.split("/operations/")[0];let o;t&&"httpOptions"in t&&(o=t.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:e,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:n.name,config:t});return n._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["operationName"]);return null!=t&&s(n,["_url","operationName"],t),n}(e);return c=i("{operationName}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),l}{const n=function(e){const n={},t=a(e,["operationName"]);return null!=t&&s(n,["_url","operationName"],t),n}(e);return c=i("{operationName}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json()),l}}async fetchPredictVideosOperationInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e){const n={},t=a(e,["operationName"]);null!=t&&s(n,["operationName"],t);const o=a(e,["resourceName"]);return null!=o&&s(n,["_url","resourceName"],o),n}(e);return r=i("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o}throw new Error("This method is only supported by the Vertex AI.")}}function Nt(e,n,t){const o=a(n,["expireTime"]);void 0!==t&&null!=o&&s(t,["expireTime"],o);const r=a(n,["newSessionExpireTime"]);void 0!==t&&null!=r&&s(t,["newSessionExpireTime"],r);const i=a(n,["uses"]);void 0!==t&&null!=i&&s(t,["uses"],i);const l=a(n,["liveConnectConstraints"]);void 0!==t&&null!=l&&s(t,["bidiGenerateContentSetup"],function(e,n){const t={},o=a(n,["model"]);null!=o&&s(t,["setup","model"],$e(e,o));const r=a(n,["config"]);return null!=r&&s(t,["config"],function(e,n){const t=a(e,["generationConfig"]);void 0!==n&&null!=t&&s(n,["setup","generationConfig"],t);const o=a(e,["responseModalities"]);void 0!==n&&null!=o&&s(n,["setup","generationConfig","responseModalities"],o);const r=a(e,["temperature"]);void 0!==n&&null!=r&&s(n,["setup","generationConfig","temperature"],r);const i=a(e,["topP"]);void 0!==n&&null!=i&&s(n,["setup","generationConfig","topP"],i);const l=a(e,["topK"]);void 0!==n&&null!=l&&s(n,["setup","generationConfig","topK"],l);const c=a(e,["maxOutputTokens"]);void 0!==n&&null!=c&&s(n,["setup","generationConfig","maxOutputTokens"],c);const u=a(e,["mediaResolution"]);void 0!==n&&null!=u&&s(n,["setup","generationConfig","mediaResolution"],u);const d=a(e,["seed"]);void 0!==n&&null!=d&&s(n,["setup","generationConfig","seed"],d);const p=a(e,["speechConfig"]);void 0!==n&&null!=p&&s(n,["setup","generationConfig","speechConfig"],cn(p));const A=a(e,["thinkingConfig"]);void 0!==n&&null!=A&&s(n,["setup","generationConfig","thinkingConfig"],A);const m=a(e,["enableAffectiveDialog"]);void 0!==n&&null!=m&&s(n,["setup","generationConfig","enableAffectiveDialog"],m);const h=a(e,["systemInstruction"]);void 0!==n&&null!=h&&s(n,["setup","systemInstruction"],function(e){const n={},t=a(e,["parts"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>function(e){const n={},t=a(e,["mediaResolution"]);null!=t&&s(n,["mediaResolution"],t);const o=a(e,["codeExecutionResult"]);null!=o&&s(n,["codeExecutionResult"],o);const r=a(e,["executableCode"]);null!=r&&s(n,["executableCode"],r);const i=a(e,["fileData"]);null!=i&&s(n,["fileData"],function(e){const n={};if(void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const t=a(e,["fileUri"]);null!=t&&s(n,["fileUri"],t);const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(i));const l=a(e,["functionCall"]);null!=l&&s(n,["functionCall"],function(e){const n={},t=a(e,["id"]);null!=t&&s(n,["id"],t);const o=a(e,["args"]);null!=o&&s(n,["args"],o);const r=a(e,["name"]);if(null!=r&&s(n,["name"],r),void 0!==a(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==a(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return n}(l));const c=a(e,["functionResponse"]);null!=c&&s(n,["functionResponse"],c);const u=a(e,["inlineData"]);null!=u&&s(n,["inlineData"],function(e){const n={},t=a(e,["data"]);if(null!=t&&s(n,["data"],t),void 0!==a(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return null!=o&&s(n,["mimeType"],o),n}(u));const d=a(e,["text"]);null!=d&&s(n,["text"],d);const p=a(e,["thought"]);null!=p&&s(n,["thought"],p);const A=a(e,["thoughtSignature"]);null!=A&&s(n,["thoughtSignature"],A);const m=a(e,["videoMetadata"]);return null!=m&&s(n,["videoMetadata"],m),n}(e))),s(n,["parts"],e)}const o=a(e,["role"]);return null!=o&&s(n,["role"],o),n}(tn(h)));const f=a(e,["tools"]);if(void 0!==n&&null!=f){let e=dn(f);Array.isArray(e)&&(e=e.map(e=>function(e){const n={};if(void 0!==a(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const t=a(e,["computerUse"]);null!=t&&s(n,["computerUse"],t);const o=a(e,["fileSearch"]);null!=o&&s(n,["fileSearch"],o);const r=a(e,["codeExecution"]);if(null!=r&&s(n,["codeExecution"],r),void 0!==a(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["functionDeclarations"],e)}const l=a(e,["googleMaps"]);null!=l&&s(n,["googleMaps"],function(e){const n={};if(void 0!==a(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const t=a(e,["enableWidget"]);return null!=t&&s(n,["enableWidget"],t),n}(l));const c=a(e,["googleSearch"]);null!=c&&s(n,["googleSearch"],function(e){const n={};if(void 0!==a(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==a(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=a(e,["timeRangeFilter"]);return null!=t&&s(n,["timeRangeFilter"],t),n}(c));const u=a(e,["googleSearchRetrieval"]);null!=u&&s(n,["googleSearchRetrieval"],u);const d=a(e,["urlContext"]);return null!=d&&s(n,["urlContext"],d),n}(un(e)))),s(n,["setup","tools"],e)}const g=a(e,["sessionResumption"]);void 0!==n&&null!=g&&s(n,["setup","sessionResumption"],function(e){const n={},t=a(e,["handle"]);if(null!=t&&s(n,["handle"],t),void 0!==a(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(g));const E=a(e,["inputAudioTranscription"]);void 0!==n&&null!=E&&s(n,["setup","inputAudioTranscription"],E);const y=a(e,["outputAudioTranscription"]);void 0!==n&&null!=y&&s(n,["setup","outputAudioTranscription"],y);const v=a(e,["realtimeInputConfig"]);void 0!==n&&null!=v&&s(n,["setup","realtimeInputConfig"],v);const C=a(e,["contextWindowCompression"]);void 0!==n&&null!=C&&s(n,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(void 0!==n&&null!=b&&s(n,["setup","proactivity"],b),void 0!==a(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(r,t)),t}(e,l));const c=a(n,["lockAdditionalFields"]);return void 0!==t&&null!=c&&s(t,["fieldMask"],c),{}}class Pt extends r{constructor(e){super(),this.apiClient=e}async create(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=function(e,n){const t={},o=a(n,["config"]);return null!=o&&s(t,["config"],Nt(e,o,t)),t}(this.apiClient,e);r=i("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const u=function(e,n){let t=null;const o=e.bidiGenerateContentSetup;if("object"==typeof o&&null!==o&&"setup"in o){const n=o.setup;"object"==typeof n&&null!==n?(e.bidiGenerateContentSetup=n,t=n):delete e.bidiGenerateContentSetup}else void 0!==o&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(t){const o=function(e){const n=[];for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const o=e[t];if("object"==typeof o&&null!=o&&Object.keys(o).length>0){const e=Object.keys(o).map(e=>`${t}.${e}`);n.push(...e)}else n.push(t)}return n.join(",")}(t);if(Array.isArray(null==n?void 0:n.lockAdditionalFields)&&0===(null==n?void 0:n.lockAdditionalFields.length))o?e.fieldMask=o:delete e.fieldMask;else if((null==n?void 0:n.lockAdditionalFields)&&n.lockAdditionalFields.length>0&&null!==r&&Array.isArray(r)&&r.length>0){const n=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let t=[];r.length>0&&(t=r.map(e=>n.includes(e)?`generationConfig.${e}`:e));const i=[];o&&i.push(o),t.length>0&&i.push(...t),i.length>0?e.fieldMask=i.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==r&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}(c,e.config);return o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>e)}}}class Dt extends r{constructor(e){super(),this.apiClient=e,this.list=async e=>new Sn(he.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:e.parent,config:n.config}),await this.listInternal(e),e)}async get(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return r=i("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>e)}}async delete(e){var n,t;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["_url","name"],t);const o=a(e,["config"]);return null!=o&&function(e,n){const t=a(e,["force"]);void 0!==n&&null!=t&&s(n,["_query","force"],t)}(o,n),n}(e);o=i("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal})}}async listInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["parent"]);null!=t&&s(n,["_url","parent"],t);const o=a(e,["config"]);return null!=o&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o)}(o,n),n}(e);return r=i("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["documents"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["documents"],e)}return n}(e),t=new Ne;return Object.assign(t,n),t})}}}class Mt extends r{constructor(e,n=new Dt(e)){super(),this.apiClient=e,this.documents=n,this.list=async(e={})=>new Sn(he.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["displayName"]);void 0!==n&&null!=t&&s(n,["displayName"],t)}(t,n),n}(e);return r=i("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>e)}}async get(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return r=i("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>e)}}async delete(e){var n,t;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["_url","name"],t);const o=a(e,["config"]);return null!=o&&function(e,n){const t=a(e,["force"]);void 0!==n&&null!=t&&s(n,["_query","force"],t)}(o,n),n}(e);o=i("{name}",l._url),r=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal})}}async listInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o)}(t,n),n}(e);return r=i("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["fileSearchStores"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["fileSearchStores"],e)}return n}(e),t=new Pe;return Object.assign(t,n),t})}}async uploadToFileSearchStoreInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["fileSearchStoreName"]);null!=t&&s(n,["_url","file_search_store_name"],t);const o=a(e,["config"]);return null!=o&&pt(o,n),n}(e);return r=i("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new De;return Object.assign(t,n),t})}}async importFile(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["fileSearchStoreName"]);null!=t&&s(n,["_url","file_search_store_name"],t);const o=a(e,["fileName"]);null!=o&&s(n,["fileName"],o);const r=a(e,["config"]);return null!=r&&function(e,n){const t=a(e,["customMetadata"]);if(void 0!==n&&null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["customMetadata"],e)}const o=a(e,["chunkingConfig"]);void 0!==n&&null!=o&&s(n,["chunkingConfig"],o)}(r,n),n}(e);return r=i("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json()),o.then(e=>{const n=function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["name"],t);const o=a(e,["metadata"]);null!=o&&s(n,["metadata"],o);const r=a(e,["done"]);null!=r&&s(n,["done"],r);const i=a(e,["error"]);null!=i&&s(n,["error"],i);const l=a(e,["response"]);return null!=l&&s(n,["response"],function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["parent"]);null!=o&&s(n,["parent"],o);const r=a(e,["documentName"]);return null!=r&&s(n,["documentName"],r),n}(l)),n}(e),t=new Me;return Object.assign(t,n),t})}}}let Lt=function(){const{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return Lt=e.randomUUID.bind(e),e.randomUUID();const n=new Uint8Array(1),t=e?()=>e.getRandomValues(n)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^t()&15>>+e/4).toString(16))};function Ut(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const qt=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const n=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(n.stack=e.stack),e.cause&&!n.cause&&(n.cause=e.cause),e.name&&(n.name=e.name),n}}catch(e){}try{return new Error(JSON.stringify(e))}catch(e){}}return new Error(e)};class Gt extends Error{}class jt extends Gt{constructor(e,n,t,o){super(`${jt.makeMessage(e,n,t)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,t){const o=(null==n?void 0:n.message)?"string"==typeof n.message?n.message:JSON.stringify(n.message):n?JSON.stringify(n):t;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,t,o){if(!e||!o)return new Ht({message:t,cause:qt(n)});const r=n;return 400===e?new $t(e,r,t,o):401===e?new Wt(e,r,t,o):403===e?new Jt(e,r,t,o):404===e?new Yt(e,r,t,o):409===e?new zt(e,r,t,o):422===e?new Kt(e,r,t,o):429===e?new Xt(e,r,t,o):e>=500?new Qt(e,r,t,o):new jt(e,r,t,o)}}class Ft extends jt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ht extends jt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Vt extends Ht{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class $t extends jt{}class Wt extends jt{}class Jt extends jt{}class Yt extends jt{}class zt extends jt{}class Kt extends jt{}class Xt extends jt{}class Qt extends jt{}const Zt=/^[a-z][a-z0-9+.-]*:/i;let eo=e=>(eo=Array.isArray,eo(e));const no=eo,to="0.0.1",oo=()=>{var e,n,t,o,r;const i="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":io(Deno.build.os),"X-Stainless-Arch":ro(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(n=null===(e=Deno.version)||void 0===e?void 0:e.deno)&&void 0!==n?n:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":io(null!==(t=globalThis.process.platform)&&void 0!==t?t:"unknown"),"X-Stainless-Arch":ro(null!==(o=globalThis.process.arch)&&void 0!==o?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(r=globalThis.process.version)&&void 0!==r?r:"unknown"};const s=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:n,pattern:t}of e){const e=t.exec(navigator.userAgent);if(e)return{browser:n,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":to,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},ro=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",io=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let so;function ao(...e){const n=globalThis.ReadableStream;if(void 0===n)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new n(...e)}function lo(e){let n=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return ao({start(){},async pull(e){const{done:t,value:o}=await n.next();t?e.close():e.enqueue(o)},async cancel(){var e;await(null===(e=n.return)||void 0===e?void 0:e.call(n))}})}function co(e){if(e[Symbol.asyncIterator])return e;const n=e.getReader();return{async next(){try{const e=await n.read();return(null==e?void 0:e.done)&&n.releaseLock(),e}catch(e){throw n.releaseLock(),e}},async return(){const e=n.cancel();return n.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const uo=({headers:e,body:n})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(n)}),po=()=>{var e;if("undefined"==typeof File){const{process:n}=globalThis,t="string"==typeof(null===(e=null==n?void 0:n.versions)||void 0===e?void 0:e.node)&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ao(e,n,t){return po(),new File(e,null!=n?n:"unknown_file",t)}const mo=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function ho(e){var n,t,o,r,i;let s=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(mo(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!(e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator])(e)){const n=null===(i=null==e?void 0:e.constructor)||void 0===i?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}try{for(var a,l=!0,c=Mn(e);!(n=(a=await c.next()).done);l=!0){r=a.value,l=!1;const e=r;s.push(...await ho(e))}}catch(e){t={error:e}}finally{try{l||n||!(o=c.return)||await o.call(c)}finally{if(t)throw t.error}}}return s}class fo{constructor(e){this._client=e}}function go(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}fo._key=[];const Eo=Object.freeze(Object.create(null)),yo=(e=go)=>function(n,...t){if(1===n.length)return n[0];let o=!1;const r=[],i=n.reduce((n,i,s)=>{var a,l,c;/[?#]/.test(i)&&(o=!0);const u=t[s];let d=(o?encodeURIComponent:e)(""+u);return s!==t.length&&(null==u||"object"==typeof u&&u.toString===(null===(c=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(a=u.hasOwnProperty)&&void 0!==a?a:Eo))&&void 0!==l?l:Eo))||void 0===c?void 0:c.toString))&&(d=u+"",r.push({start:n.length+i.length,length:d.length,error:`Value of type ${Object.prototype.toString.call(u).slice(8,-1)} is not a valid path parameter`})),n+i+(s===t.length?"":d)},""),s=i.split(/[?#]/,1)[0],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let l;for(;null!==(l=a.exec(s));)r.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(r.sort((e,n)=>e.start-n.start),r.length>0){let e=0;const n=r.reduce((n,t)=>{const o=" ".repeat(t.start-e),r="^".repeat(t.length);return e=t.start+t.length,n+o+r},"");throw new Gt(`Path parameters result in path with invalid segments:\n${r.map(e=>e.error).join("\n")}\n${i}\n${n}`)}return i},vo=yo(go);class Co extends fo{create(e,n){var t;const{api_version:o=this._client.apiVersion}=e,r=Nn(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new Gt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Gt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(vo`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:null!==(t=e.stream)&&void 0!==t&&t}))}delete(e,n={},t){const{api_version:o=this._client.apiVersion}=null!=n?n:{};return this._client.delete(vo`/${o}/interactions/${e}`,t)}cancel(e,n={},t){const{api_version:o=this._client.apiVersion}=null!=n?n:{};return this._client.post(vo`/${o}/interactions/${e}/cancel`,t)}get(e,n={},t){var o;const r=null!=n?n:{},{api_version:i=this._client.apiVersion}=r,s=Nn(r,["api_version"]);return this._client.get(vo`/${i}/interactions/${e}`,Object.assign(Object.assign({query:s},t),{stream:null!==(o=null==n?void 0:n.stream)&&void 0!==o&&o}))}}Co._key=Object.freeze(["interactions"]);class bo extends Co{}let wo,_o;function xo(e){let n;return(null!=wo?wo:(n=new globalThis.TextEncoder,wo=n.encode.bind(n)))(e)}function Bo(e){let n;return(null!=_o?_o:(n=new globalThis.TextDecoder,_o=n.decode.bind(n)))(e)}class To{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(null==e)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?xo(e):e;this.buffer=function(e){let n=0;for(const t of e)n+=t.length;const t=new Uint8Array(n);let o=0;for(const n of e)t.set(n,o),o+=n.length;return t}([this.buffer,n]);const t=[];let o;for(;null!=(o=Io(this.buffer,this.carriageReturnIndex));){if(o.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=o.index;continue}if(null!=this.carriageReturnIndex&&(o.index!==this.carriageReturnIndex+1||o.carriage)){t.push(Bo(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const e=null!==this.carriageReturnIndex?o.preceding-1:o.preceding,n=Bo(this.buffer.subarray(0,e));t.push(n),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return t}flush(){return this.buffer.length?this.decode("\n"):[]}}function Io(e,n){for(let t=null!=n?n:0;t<e.length;t++){if(10===e[t])return{preceding:t,index:t+1,carriage:!1};if(13===e[t])return{preceding:t,index:t+1,carriage:!0}}return null}function So(e){for(let n=0;n<e.length-1;n++){if(10===e[n]&&10===e[n+1])return n+2;if(13===e[n]&&13===e[n+1])return n+2;if(13===e[n]&&10===e[n+1]&&n+3<e.length&&13===e[n+2]&&10===e[n+3])return n+4}return-1}To.NEWLINE_CHARS=new Set(["\n","\r"]),To.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const Oo={off:0,error:200,warn:300,info:400,debug:500},ko=(e,n,t)=>{var o,r;if(e)return o=Oo,r=e,Object.prototype.hasOwnProperty.call(o,r)?e:void Mo(t).warn(`${n} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Oo))}`)};function Ro(){}function No(e,n,t){return!n||Oo[e]>Oo[t]?Ro:n[e].bind(n)}const Po={error:Ro,warn:Ro,info:Ro,debug:Ro};let Do=new WeakMap;function Mo(e){var n;const t=e.logger,o=null!==(n=e.logLevel)&&void 0!==n?n:"off";if(!t)return Po;const r=Do.get(t);if(r&&r[0]===o)return r[1];const i={error:No("error",t,o),warn:No("warn",t,o),info:No("info",t,o),debug:No("debug",t,o)};return Do.set(t,[o,i]),i}const Lo=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,n])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class Uo{constructor(e,n,t){this.iterator=e,this.controller=n,this.client=t}static fromSSEResponse(e,n,t){let o=!1;const r=t?Mo(t):console;return new Uo(function(){return Dn(this,arguments,function*(){var t,i,s,a;if(o)throw new Gt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{try{for(var c,u=!0,d=Mn(function(e,n){return Dn(this,arguments,function*(){var t,o,r,i;if(!e.body){if(n.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new Gt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new Gt("Attempted to iterate over a response with no body")}const s=new qo,a=new To,l=co(e.body);try{for(var c,u=!0,d=Mn(function(e){return Dn(this,arguments,function*(){var n,t,o,r;let i=new Uint8Array;try{for(var s,a=!0,l=Mn(e);!(n=(s=yield Pn(l.next())).done);a=!0){r=s.value,a=!1;const e=r;if(null==e)continue;const n=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?xo(e):e;let t,o=new Uint8Array(i.length+n.length);for(o.set(i),o.set(n,i.length),i=o;-1!==(t=So(i));)yield yield Pn(i.slice(0,t)),i=i.slice(t)}}catch(e){t={error:e}}finally{try{a||n||!(o=l.return)||(yield Pn(o.call(l)))}finally{if(t)throw t.error}}i.length>0&&(yield yield Pn(i))})}(l));!(t=(c=yield Pn(d.next())).done);u=!0){i=c.value,u=!1;const e=i;for(const n of a.decode(e)){const e=s.decode(n);e&&(yield yield Pn(e))}}}catch(e){o={error:e}}finally{try{u||t||!(r=d.return)||(yield Pn(r.call(d)))}finally{if(o)throw o.error}}for(const e of a.flush()){const n=s.decode(e);n&&(yield yield Pn(n))}})}(e,n));!(t=(c=yield Pn(d.next())).done);u=!0){a=c.value,u=!1;const e=a;if(!l)if(e.data.startsWith("[DONE]"))l=!0;else try{yield yield Pn(JSON.parse(e.data))}catch(n){throw r.error("Could not parse message into JSON:",e.data),r.error("From chunk:",e.raw),n}}}catch(e){i={error:e}}finally{try{u||t||!(s=d.return)||(yield Pn(s.call(d)))}finally{if(i)throw i.error}}l=!0}catch(e){if(Ut(e))return yield Pn(void 0);throw e}finally{l||n.abort()}})},n,t)}static fromReadableStream(e,n,t){let o=!1;return new Uo(function(){return Dn(this,arguments,function*(){var t,r,i,s;if(o)throw new Gt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{try{for(var l,c=!0,u=Mn(function(){return Dn(this,arguments,function*(){var n,t,o,r;const i=new To,s=co(e);try{for(var a,l=!0,c=Mn(s);!(n=(a=yield Pn(c.next())).done);l=!0){r=a.value,l=!1;const e=r;for(const n of i.decode(e))yield yield Pn(n)}}catch(e){t={error:e}}finally{try{l||n||!(o=c.return)||(yield Pn(o.call(c)))}finally{if(t)throw t.error}}for(const e of i.flush())yield yield Pn(e)})}());!(t=(l=yield Pn(u.next())).done);c=!0){s=l.value,c=!1;const e=s;a||e&&(yield yield Pn(JSON.parse(e)))}}catch(e){r={error:e}}finally{try{c||t||!(i=u.return)||(yield Pn(i.call(u)))}finally{if(r)throw r.error}}a=!0}catch(e){if(Ut(e))return yield Pn(void 0);throw e}finally{a||n.abort()}})},n,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],t=this.iterator(),o=o=>({next:()=>{if(0===o.length){const o=t.next();e.push(o),n.push(o)}return o.shift()}});return[new Uo(()=>o(e),this.controller,this.client),new Uo(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ao({async start(){n=e[Symbol.asyncIterator]()},async pull(e){try{const{value:t,done:o}=await n.next();if(o)return e.close();const r=xo(JSON.stringify(t)+"\n");e.enqueue(r)}catch(n){e.error(n)}},async cancel(){var e;await(null===(e=n.return)||void 0===e?void 0:e.call(n))}})}}class qo{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,t,o]=function(e){const n=e.indexOf(":");return-1!==n?[e.substring(0,n),":",e.substring(n+1)]:[e,"",""]}(e);return o.startsWith(" ")&&(o=o.substring(1)),"event"===n?this.event=o:"data"===n&&this.data.push(o),null}}async function Go(e,n){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:i}=n,s=await(async()=>{var o;if(n.options.stream)return Mo(e).debug("response",t.status,t.url,t.headers,t.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(t,n.controller,e):Uo.fromSSEResponse(t,n.controller,e);if(204===t.status)return null;if(n.options.__binaryResponse)return t;const r=t.headers.get("content-type"),i=null===(o=null==r?void 0:r.split(";")[0])||void 0===o?void 0:o.trim();if((null==i?void 0:i.includes("application/json"))||(null==i?void 0:i.endsWith("+json"))){if("0"===t.headers.get("content-length"))return;return await t.json()}return await t.text()})();return Mo(e).debug(`[${o}] response parsed`,Lo({retryOfRequestLogID:r,url:t.url,status:t.status,body:s,durationMs:Date.now()-i})),s}class jo extends Promise{constructor(e,n,t=Go){super(e=>{e(null)}),this.responsePromise=n,this.parseResponse=t,this.client=e}_thenUnwrap(e){return new jo(this.client,this.responsePromise,async(n,t)=>e(await this.parseResponse(n,t),t))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Fo=Symbol("brand.privateNullableHeaders");function*Ho(e){if(!e)return;if(Fo in e){const{values:n,nulls:t}=e;yield*n.entries();for(const e of t)yield[e,null];return}let n,t=!1;e instanceof Headers?n=e.entries():no(e)?n=e:(t=!0,n=Object.entries(null!=e?e:{}));for(let e of n){const n=e[0];if("string"!=typeof n)throw new TypeError("expected header name to be a string");const o=no(e[1])?e[1]:[e[1]];let r=!1;for(const e of o)void 0!==e&&(t&&!r&&(r=!0,yield[n,null]),yield[n,e])}}const Vo=e=>{const n=new Headers,t=new Set;for(const o of e){const e=new Set;for(const[r,i]of Ho(o)){const o=r.toLowerCase();e.has(o)||(n.delete(r),e.add(o)),null===i?(n.delete(r),t.add(o)):(n.append(r,i),t.delete(o))}}return{[Fo]:!0,values:n,nulls:t}},$o=e=>{var n,t,o,r,i,s;return void 0!==globalThis.process?null!==(o=null===(t=null===(n=globalThis.process.env)||void 0===n?void 0:n[e])||void 0===t?void 0:t.trim())&&void 0!==o?o:void 0:void 0!==globalThis.Deno?null===(s=null===(i=null===(r=globalThis.Deno.env)||void 0===r?void 0:r.get)||void 0===i?void 0:i.call(r,e))||void 0===s?void 0:s.trim():void 0};var Wo;class Jo{constructor(e){var n,t,o,r,i,s,a,{baseURL:l=$o("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(null!==(n=$o("GEMINI_API_KEY"))&&void 0!==n?n:null),apiVersion:u="v1beta"}=e,d=Nn(e,["baseURL","apiKey","apiVersion"]);const p=Object.assign(Object.assign({apiKey:c,apiVersion:u},d),{baseURL:l||"https://generativelanguage.googleapis.com"});this.baseURL=p.baseURL,this.timeout=null!==(t=p.timeout)&&void 0!==t?t:Jo.DEFAULT_TIMEOUT,this.logger=null!==(o=p.logger)&&void 0!==o?o:console;const A="warn";this.logLevel=A,this.logLevel=null!==(i=null!==(r=ko(p.logLevel,"ClientOptions.logLevel",this))&&void 0!==r?r:ko($o("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))&&void 0!==i?i:A,this.fetchOptions=p.fetchOptions,this.maxRetries=null!==(s=p.maxRetries)&&void 0!==s?s:2,this.fetch=null!==(a=p.fetch)&&void 0!==a?a:function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=uo,this._options=p,this.apiKey=c,this.apiVersion=u,this.clientAdapter=p.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!e.has("authorization")&&!e.has("x-goog-api-key")&&!(this.apiKey&&e.get("x-goog-api-key")||n.has("x-goog-api-key")))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Vo([e.headers]);if(!n.values.has("authorization")&&!n.values.has("x-goog-api-key"))return this.apiKey?Vo([{"x-goog-api-key":this.apiKey}]):this.clientAdapter.isVertexAI()?Vo([await this.clientAdapter.getAuthHeaders()]):void 0}stringifyQuery(e){return Object.entries(e).filter(([e,n])=>void 0!==n).map(([e,n])=>{if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(null===n)return`${encodeURIComponent(e)}=`;throw new Gt(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${to}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lt()}`}makeStatusError(e,n,t,o){return jt.generate(e,n,t,o)}buildURL(e,n,t){const o=!this.baseURLOverridden()&&t||this.baseURL,r=(e=>Zt.test(e))(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return function(e){if(!e)return!0;for(const n in e)return!1;return!0}(i)||(n=Object.assign(Object.assign({},i),n)),"object"==typeof n&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:t}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,t){return this.request(Promise.resolve(t).then(t=>Object.assign({method:e,path:n},t)))}request(e,n=null){return new jo(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,t){var o,r,i;const s=await e,a=null!==(o=s.maxRetries)&&void 0!==o?o:this.maxRetries;null==n&&(n=a),await this.prepareOptions(s);const{req:l,url:c,timeout:u}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=void 0===t?"":`, retryOf: ${t}`,A=Date.now();if(Mo(this).debug(`[${d}] sending request`,Lo({retryOfRequestLogID:t,method:s.method,url:c,options:s,headers:l.headers})),null===(r=s.signal)||void 0===r?void 0:r.aborted)throw new Ft;const m=new AbortController,h=await this.fetchWithTimeout(c,l,u,m).catch(qt),f=Date.now();if(h instanceof globalThis.Error){const e=`retrying, ${n} attempts remaining`;if(null===(i=s.signal)||void 0===i?void 0:i.aborted)throw new Ft;const o=Ut(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(n)return Mo(this).info(`[${d}] connection ${o?"timed out":"failed"} - ${e}`),Mo(this).debug(`[${d}] connection ${o?"timed out":"failed"} (${e})`,Lo({retryOfRequestLogID:t,url:c,durationMs:f-A,message:h.message})),this.retryRequest(s,n,null!=t?t:d);if(Mo(this).info(`[${d}] connection ${o?"timed out":"failed"} - error; no more retries left`),Mo(this).debug(`[${d}] connection ${o?"timed out":"failed"} (error; no more retries left)`,Lo({retryOfRequestLogID:t,url:c,durationMs:f-A,message:h.message})),o)throw new Vt;throw new Ht({cause:h})}const g=`[${d}${p}] ${l.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${f-A}ms`;if(!h.ok){const e=await this.shouldRetry(h);if(n&&e){const e=`retrying, ${n} attempts remaining`;return await async function(e){var n,t;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await(null===(t=(n=e[Symbol.asyncIterator]()).return)||void 0===t?void 0:t.call(n));const o=e.getReader(),r=o.cancel();o.releaseLock(),await r}(h.body),Mo(this).info(`${g} - ${e}`),Mo(this).debug(`[${d}] response error (${e})`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,durationMs:f-A})),this.retryRequest(s,n,null!=t?t:d,h.headers)}const o=e?"error; no more retries left":"error; not retryable";Mo(this).info(`${g} - ${o}`);const r=await h.text().catch(e=>qt(e).message),i=(e=>{try{return JSON.parse(e)}catch(e){return}})(r),a=i?void 0:r;throw Mo(this).debug(`[${d}] response error (${o})`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,message:a,durationMs:Date.now()-A})),this.makeStatusError(h.status,i,a,h.headers)}return Mo(this).info(g),Mo(this).debug(`[${d}] response start`,Lo({retryOfRequestLogID:t,url:h.url,status:h.status,headers:h.headers,durationMs:f-A})),{response:h,options:s,controller:m,requestLogID:d,retryOfRequestLogID:t,startTime:A}}async fetchWithTimeout(e,n,t,o){const r=n||{},{signal:i,method:s}=r,a=Nn(r,["signal","method"]),l=this._makeAbort(o);i&&i.addEventListener("abort",l,{once:!0});const c=setTimeout(l,t),u=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||"object"==typeof a.body&&null!==a.body&&Symbol.asyncIterator in a.body,d=Object.assign(Object.assign(Object.assign({signal:o.signal},u?{duplex:"half"}:{}),{method:"GET"}),a);s&&(d.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return"true"===n||"false"!==n&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,n,t,o){var r;let i;const s=null==o?void 0:o.get("retry-after-ms");if(s){const e=parseFloat(s);Number.isNaN(e)||(i=e)}const a=null==o?void 0:o.get("retry-after");if(a&&!i){const e=parseFloat(a);i=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){const t=null!==(r=e.maxRetries)&&void 0!==r?r:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,t)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,n-1,t)}calculateDefaultRetryTimeoutMillis(e,n){const t=n-e;return Math.min(.5*Math.pow(2,t),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:n=0}={}){var t,o,r;const i=Object.assign({},e),{method:s,path:a,query:l,defaultBaseURL:c}=i,u=this.buildURL(a,l,c);"timeout"in i&&((e,n)=>{if("number"!=typeof n||!Number.isInteger(n))throw new Gt(`${e} must be an integer`);if(n<0)throw new Gt(`${e} must be a positive integer`)})("timeout",i.timeout),i.timeout=null!==(t=i.timeout)&&void 0!==t?t:this.timeout;const{bodyHeaders:d,body:p}=this.buildBody({options:i}),A=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:A},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!==(o=this.fetchOptions)&&void 0!==o?o:{}),null!==(r=i.fetchOptions)&&void 0!==r?r:{}),url:u,timeout:i.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:t,retryCount:o}){let r={};this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const i=await this.authHeaders(e);let s=Vo([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=so?so:so=oo()),this._options.defaultHeaders,t,e.headers,i]);return this.validateHeaders(s),s.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const t=Vo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&t.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:lo(e)}:"object"==typeof e&&"application/x-www-form-urlencoded"===t.values.get("content-type")?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:t})}}Jo.DEFAULT_TIMEOUT=6e4;class Yo extends Jo{constructor(){super(...arguments),this.interactions=new bo(this)}}function zo(e,n){const t={},o=a(e,["sdkHttpResponse"]);null!=o&&s(t,["sdkHttpResponse"],o);const r=a(e,["name"]);null!=r&&s(t,["name"],r);const i=a(e,["state"]);null!=i&&s(t,["state"],An(i));const l=a(e,["createTime"]);null!=l&&s(t,["createTime"],l);const c=a(e,["tuningTask","startTime"]);null!=c&&s(t,["startTime"],c);const u=a(e,["tuningTask","completeTime"]);null!=u&&s(t,["endTime"],u);const d=a(e,["updateTime"]);null!=d&&s(t,["updateTime"],d);const p=a(e,["description"]);null!=p&&s(t,["description"],p);const A=a(e,["baseModel"]);null!=A&&s(t,["baseModel"],A);const m=a(e,["_self"]);return null!=m&&s(t,["tunedModel"],function(e){const n={},t=a(e,["name"]);null!=t&&s(n,["model"],t);const o=a(e,["name"]);return null!=o&&s(n,["endpoint"],o),n}(m)),t}function Ko(e,n){const t={},o=a(e,["sdkHttpResponse"]);null!=o&&s(t,["sdkHttpResponse"],o);const r=a(e,["name"]);null!=r&&s(t,["name"],r);const i=a(e,["state"]);null!=i&&s(t,["state"],An(i));const l=a(e,["createTime"]);null!=l&&s(t,["createTime"],l);const c=a(e,["startTime"]);null!=c&&s(t,["startTime"],c);const u=a(e,["endTime"]);null!=u&&s(t,["endTime"],u);const d=a(e,["updateTime"]);null!=d&&s(t,["updateTime"],d);const p=a(e,["error"]);null!=p&&s(t,["error"],p);const A=a(e,["description"]);null!=A&&s(t,["description"],A);const m=a(e,["baseModel"]);null!=m&&s(t,["baseModel"],m);const h=a(e,["tunedModel"]);null!=h&&s(t,["tunedModel"],h);const f=a(e,["preTunedModel"]);null!=f&&s(t,["preTunedModel"],f);const g=a(e,["supervisedTuningSpec"]);null!=g&&s(t,["supervisedTuningSpec"],g);const E=a(e,["preferenceOptimizationSpec"]);null!=E&&s(t,["preferenceOptimizationSpec"],E);const y=a(e,["distillationSpec"]);null!=y&&s(t,["distillationSpec"],y);const v=a(e,["tuningDataStats"]);null!=v&&s(t,["tuningDataStats"],v);const C=a(e,["encryptionSpec"]);null!=C&&s(t,["encryptionSpec"],C);const b=a(e,["partnerModelTuningSpec"]);null!=b&&s(t,["partnerModelTuningSpec"],b);const w=a(e,["customBaseModel"]);null!=w&&s(t,["customBaseModel"],w);const _=a(e,["experiment"]);null!=_&&s(t,["experiment"],_);const x=a(e,["labels"]);null!=x&&s(t,["labels"],x);const B=a(e,["outputUri"]);null!=B&&s(t,["outputUri"],B);const T=a(e,["pipelineJob"]);null!=T&&s(t,["pipelineJob"],T);const I=a(e,["serviceAccount"]);null!=I&&s(t,["serviceAccount"],I);const S=a(e,["tunedModelDisplayName"]);null!=S&&s(t,["tunedModelDisplayName"],S);const O=a(e,["veoTuningSpec"]);return null!=O&&s(t,["veoTuningSpec"],O),t}function Xo(e,n){const t={},o=a(e,["gcsUri"]);null!=o&&s(t,["validationDatasetUri"],o);const r=a(e,["vertexDatasetResource"]);return null!=r&&s(t,["validationDatasetUri"],r),t}Wo=Yo,Yo.GeminiNextGenAPIClient=Wo,Yo.GeminiNextGenAPIClientError=Gt,Yo.APIError=jt,Yo.APIConnectionError=Ht,Yo.APIConnectionTimeoutError=Vt,Yo.APIUserAbortError=Ft,Yo.NotFoundError=Yt,Yo.ConflictError=zt,Yo.RateLimitError=Xt,Yo.BadRequestError=$t,Yo.AuthenticationError=Wt,Yo.InternalServerError=Qt,Yo.PermissionDeniedError=Jt,Yo.UnprocessableEntityError=Kt,Yo.toFile=async function(e,n,t){if(po(),(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&mo(e))(e=await e))return e instanceof File?e:Ao([await e.arrayBuffer()],e.name);if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const o=await e.blob();return n||(n=new URL(e.url).pathname.split(/[\\/]/).pop()),Ao(await ho(o),n,t)}const o=await ho(e);if(n||(n=function(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}(e)),!(null==t?void 0:t.type)){const e=o.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(t=Object.assign(Object.assign({},t),{type:e}))}return Ao(o,n,t)},Yo.Interactions=bo;class Qo extends r{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new Sn(he.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var n;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const t={tunedModelName:e.baseModel};(null===(n=e.config)||void 0===n?void 0:n.preTunedModelCheckpointId)&&(t.checkpointId=e.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},e),{preTunedModel:t});return o.baseModel=void 0,await this.tuneInternal(o)}{const n=Object.assign({},e);return await this.tuneInternal(n)}}{const n=Object.assign({},e),t=await this.tuneMldevInternal(n);let o="";return void 0!==t.metadata&&void 0!==t.metadata.tunedModel?o=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(o=t.name.split("/operations/")[0]),{name:o,state:M.JOB_STATE_QUEUED}}}}async getInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return c=i("{name}",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>Ko(e))}{const n=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return c=i("{name}",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>zo(e))}}async listInternal(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o);const r=a(e,["filter"]);void 0!==n&&null!=r&&s(n,["_query","filter"],r)}(t,n),n}(e);return c=i("tuningJobs",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["tuningJobs"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Ko(e))),s(n,["tuningJobs"],e)}return n}(e),t=new Se;return Object.assign(t,n),t})}{const n=function(e){const n={},t=a(e,["config"]);return null!=t&&function(e,n){const t=a(e,["pageSize"]);void 0!==n&&null!=t&&s(n,["_query","pageSize"],t);const o=a(e,["pageToken"]);void 0!==n&&null!=o&&s(n,["_query","pageToken"],o);const r=a(e,["filter"]);void 0!==n&&null!=r&&s(n,["_query","filter"],r)}(t,n),n}(e);return c=i("tunedModels",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["nextPageToken"]);null!=o&&s(n,["nextPageToken"],o);const r=a(e,["tunedModels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>zo(e))),s(n,["tuningJobs"],e)}return n}(e),t=new Se;return Object.assign(t,n),t})}}async cancel(e){var n,t,o,r;let l,c="",u={};if(this.apiClient.isVertexAI()){const o=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return c=i("{name}:cancel",o._url),u=o._query,delete o._url,delete o._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new Oe;return Object.assign(t,n),t})}{const n=function(e){const n={},t=a(e,["name"]);return null!=t&&s(n,["_url","name"],t),n}(e);return c=i("{name}:cancel",n._url),u=n._query,delete n._url,delete n._query,l=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(n),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(r=e.config)||void 0===r?void 0:r.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),l.then(e=>{const n=function(e){const n={},t=a(e,["sdkHttpResponse"]);return null!=t&&s(n,["sdkHttpResponse"],t),n}(e),t=new Oe;return Object.assign(t,n),t})}}async tuneInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI()){const c=function(e,n){const t={},o=a(e,["baseModel"]);null!=o&&s(t,["baseModel"],o);const r=a(e,["preTunedModel"]);null!=r&&s(t,["preTunedModel"],r);const i=a(e,["trainingDataset"]);null!=i&&function(e,n,t){let o=a(t,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const t=a(e,["gcsUri"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","trainingDatasetUri"],t)}else if("PREFERENCE_TUNING"===o){const t=a(e,["gcsUri"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","trainingDatasetUri"],t)}else if("DISTILLATION"===o){const t=a(e,["gcsUri"]);void 0!==n&&null!=t&&s(n,["distillationSpec","promptDatasetUri"],t)}let r=a(t,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const t=a(e,["vertexDatasetResource"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","trainingDatasetUri"],t)}else if("PREFERENCE_TUNING"===r){const t=a(e,["vertexDatasetResource"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","trainingDatasetUri"],t)}else if("DISTILLATION"===r){const t=a(e,["vertexDatasetResource"]);void 0!==n&&null!=t&&s(n,["distillationSpec","promptDatasetUri"],t)}if(void 0!==a(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,t,n);const l=a(e,["config"]);return null!=l&&function(e,n,t){let o=a(t,["config","method"]);if(void 0===o&&(o="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===o){const t=a(e,["validationDataset"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec"],Xo(t))}else if("PREFERENCE_TUNING"===o){const t=a(e,["validationDataset"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec"],Xo(t))}else if("DISTILLATION"===o){const t=a(e,["validationDataset"]);void 0!==n&&null!=t&&s(n,["distillationSpec"],Xo(t))}const r=a(e,["tunedModelDisplayName"]);void 0!==n&&null!=r&&s(n,["tunedModelDisplayName"],r);const i=a(e,["description"]);void 0!==n&&null!=i&&s(n,["description"],i);let l=a(t,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const t=a(e,["epochCount"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","hyperParameters","epochCount"],t)}else if("PREFERENCE_TUNING"===l){const t=a(e,["epochCount"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","hyperParameters","epochCount"],t)}else if("DISTILLATION"===l){const t=a(e,["epochCount"]);void 0!==n&&null!=t&&s(n,["distillationSpec","hyperParameters","epochCount"],t)}let c=a(t,["config","method"]);if(void 0===c&&(c="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===c){const t=a(e,["learningRateMultiplier"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],t)}else if("PREFERENCE_TUNING"===c){const t=a(e,["learningRateMultiplier"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],t)}else if("DISTILLATION"===c){const t=a(e,["learningRateMultiplier"]);void 0!==n&&null!=t&&s(n,["distillationSpec","hyperParameters","learningRateMultiplier"],t)}let u=a(t,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const t=a(e,["exportLastCheckpointOnly"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","exportLastCheckpointOnly"],t)}else if("PREFERENCE_TUNING"===u){const t=a(e,["exportLastCheckpointOnly"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","exportLastCheckpointOnly"],t)}else if("DISTILLATION"===u){const t=a(e,["exportLastCheckpointOnly"]);void 0!==n&&null!=t&&s(n,["distillationSpec","exportLastCheckpointOnly"],t)}let d=a(t,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){const t=a(e,["adapterSize"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","hyperParameters","adapterSize"],t)}else if("PREFERENCE_TUNING"===d){const t=a(e,["adapterSize"]);void 0!==n&&null!=t&&s(n,["preferenceOptimizationSpec","hyperParameters","adapterSize"],t)}else if("DISTILLATION"===d){const t=a(e,["adapterSize"]);void 0!==n&&null!=t&&s(n,["distillationSpec","hyperParameters","adapterSize"],t)}let p=a(t,["config","method"]);if(void 0===p&&(p="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===p){const t=a(e,["tuningMode"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","tuningMode"],t)}const A=a(e,["customBaseModel"]);void 0!==n&&null!=A&&s(n,["customBaseModel"],A);let m=a(t,["config","method"]);if(void 0===m&&(m="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===m){const t=a(e,["batchSize"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","hyperParameters","batchSize"],t)}let h=a(t,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){const t=a(e,["learningRate"]);void 0!==n&&null!=t&&s(n,["supervisedTuningSpec","hyperParameters","learningRate"],t)}const f=a(e,["labels"]);void 0!==n&&null!=f&&s(n,["labels"],f);const g=a(e,["beta"]);void 0!==n&&null!=g&&s(n,["preferenceOptimizationSpec","hyperParameters","beta"],g);const E=a(e,["baseTeacherModel"]);void 0!==n&&null!=E&&s(n,["distillationSpec","baseTeacherModel"],E);const y=a(e,["tunedTeacherModelSource"]);void 0!==n&&null!=y&&s(n,["distillationSpec","tunedTeacherModelSource"],y);const v=a(e,["sftLossWeightMultiplier"]);void 0!==n&&null!=v&&s(n,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],v);const C=a(e,["outputUri"]);void 0!==n&&null!=C&&s(n,["outputUri"],C);const b=a(e,["encryptionSpec"]);void 0!==n&&null!=b&&s(n,["encryptionSpec"],b)}(l,t,n),t}(e,e);return r=i("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>Ko(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,t;let o,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=function(e){const n={},t=a(e,["baseModel"]);null!=t&&s(n,["baseModel"],t);const o=a(e,["preTunedModel"]);null!=o&&s(n,["preTunedModel"],o);const r=a(e,["trainingDataset"]);null!=r&&function(e){const n={};if(void 0!==a(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==a(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=a(e,["examples"]);if(null!=t){let e=t;Array.isArray(e)&&(e=e.map(e=>e)),s(n,["examples","examples"],e)}}(r);const i=a(e,["config"]);return null!=i&&function(e,n){if(void 0!==a(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const t=a(e,["tunedModelDisplayName"]);if(void 0!==n&&null!=t&&s(n,["displayName"],t),void 0!==a(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const o=a(e,["epochCount"]);void 0!==n&&null!=o&&s(n,["tuningTask","hyperparameters","epochCount"],o);const r=a(e,["learningRateMultiplier"]);if(null!=r&&s({},["tuningTask","hyperparameters","learningRateMultiplier"],r),void 0!==a(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==a(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==a(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");if(void 0!==a(e,["tuningMode"]))throw new Error("tuningMode parameter is not supported in Gemini API.");if(void 0!==a(e,["customBaseModel"]))throw new Error("customBaseModel parameter is not supported in Gemini API.");const i=a(e,["batchSize"]);void 0!==n&&null!=i&&s(n,["tuningTask","hyperparameters","batchSize"],i);const l=a(e,["learningRate"]);if(void 0!==n&&null!=l&&s(n,["tuningTask","hyperparameters","learningRate"],l),void 0!==a(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==a(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.");if(void 0!==a(e,["baseTeacherModel"]))throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(void 0!==a(e,["tunedTeacherModelSource"]))throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(void 0!==a(e,["sftLossWeightMultiplier"]))throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(void 0!==a(e,["outputUri"]))throw new Error("outputUri parameter is not supported in Gemini API.");if(void 0!==a(e,["encryptionSpec"]))throw new Error("encryptionSpec parameter is not supported in Gemini API.")}(i,n),n}(e);return r=i("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:null===(n=e.config)||void 0===n?void 0:n.httpOptions,abortSignal:null===(t=e.config)||void 0===t?void 0:t.abortSignal}).then(e=>e.json().then(n=>{const t=n;return t.sdkHttpResponse={headers:e.headers},t})),o.then(e=>function(e){const n={},t=a(e,["sdkHttpResponse"]);null!=t&&s(n,["sdkHttpResponse"],t);const o=a(e,["name"]);null!=o&&s(n,["name"],o);const r=a(e,["metadata"]);null!=r&&s(n,["metadata"],r);const i=a(e,["done"]);null!=i&&s(n,["done"],i);const l=a(e,["error"]);return null!=l&&s(n,["error"],l),n}(e))}}}class Zo{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const er="x-goog-upload-status";async function nr(e,n,t){var o,r;let i=0,s=0,a=new fe(new Response),l="upload";for(i=e.size;s<i;){const c=Math.min(8388608,i-s),u=e.slice(s,s+c);s+c>=i&&(l+=", finalize");let d=0,p=1e3;for(;d<3&&(a=await t.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(null===(o=null==a?void 0:a.headers)||void 0===o?void 0:o[er]));)d++,await tr(p),p*=2;if(s+=c,"active"!==(null===(r=null==a?void 0:a.headers)||void 0===r?void 0:r[er]))break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function tr(e){return new Promise(n=>setTimeout(n,e))}class or{async upload(e,n,t){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,n,t){var o;const r=await nr(e,n,t),i=await(null==r?void 0:r.json());if("final"!==(null===(o=null==r?void 0:r.headers)||void 0===o?void 0:o[er]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(e,n,t)}async uploadToFileSearchStore(e,n,t){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,n,t){var o;const r=await nr(e,n,t),i=await(null==r?void 0:r.json());if("final"!==(null===(o=null==r?void 0:r.headers)||void 0===o?void 0:o[er]))throw new Error("Failed to upload file: Upload status is not finalized.");const s=u(i),a=new Ve;return Object.assign(a,s),a}(e,n,t)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class rr{create(e,n,t){return new ir(e,n,t)}}class ir{constructor(e,n,t){this.url=e,this.headers=n,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const sr="x-goog-api-key";class ar{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(null===e.get(sr)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sr,this.apiKey)}}}class lr{get interactions(){var e;if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;(null==n?void 0:n.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yo({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==n?void 0:n.timeout,maxRetries:null===(e=null==n?void 0:n.retryOptions)||void 0===e?void 0:e.attempts});return this._interactions=t.interactions,this._interactions}constructor(e){var n;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(n=e.vertexai)&&void 0!==n&&n,this.apiKey=e.apiKey;const t=function(e,n,t,o){var r,i;if(!(null==e?void 0:e.baseUrl)){const e={geminiUrl:void 0,vertexUrl:void 0};return n?null!==(r=e.vertexUrl)&&void 0!==r?r:t:null!==(i=e.geminiUrl)&&void 0!==i?i:o}return e.baseUrl}(e.httpOptions,e.vertexai,void 0,void 0);t&&(e.httpOptions?e.httpOptions.baseUrl=t:e.httpOptions={baseUrl:t}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new ar(this.apiKey);this.apiClient=new ht({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new or,downloader:new Zo}),this.models=new kt(this.apiClient),this.live=new _t(this.apiClient,o,new rr),this.batches=new On(this.apiClient),this.chats=new Gn(this.models,this.apiClient),this.caches=new Rn(this.apiClient),this.files=new Hn(this.apiClient),this.operations=new Rt(this.apiClient),this.authTokens=new Pt(this.apiClient),this.tunings=new Qo(this.apiClient),this.fileSearchStores=new Mt(this.apiClient)}}var cr=t(33422);let ur=function(e){return e.INVALID_API_KEY="INVALID_API_KEY",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.RATE_LIMITED="RATE_LIMITED",e.NETWORK_ERROR="NETWORK_ERROR",e.TIMEOUT="TIMEOUT",e.CONTENT_FILTERED="CONTENT_FILTERED",e.UNKNOWN="UNKNOWN",e}({});class dr extends Error{constructor(e,n,t=!1,o){super(e),this.name="GeminiError",this.code=n,this.retryable=t,this.statusCode=o,Object.setPrototypeOf(this,dr.prototype)}}const pr="gemini-3-flash-preview";let Ar=null;function mr(e){if(!e||0===e.trim().length)throw new dr("API key is required. Please set GEMINI_API_KEY in your .env file.",ur.INVALID_API_KEY);return Ar=new lr({apiKey:e}),Ar}function hr(){if(!Ar)throw new dr("Gemini client not initialised. Call initGeminiClient(apiKey) first.",ur.INVALID_API_KEY);return Ar}async function fr(e,n={}){const t=hr(),o=n.model??(0,cr.getSetting)("defaultModel")??pr;return yr(async()=>{try{const r=(await Er(t.models.generateContent({model:o,contents:e,config:{temperature:n.temperature??1,maxOutputTokens:n.maxOutputTokens??2048,topP:n.topP??.95,topK:n.topK??40}}),3e4)).text;if(!r||0===r.trim().length)throw new dr("The model returned an empty response. The content may have been filtered.",ur.CONTENT_FILTERED);return r}catch(e){throw vr(e)}})}async function gr(e,n={}){const t=hr(),o=n.model??(0,cr.getSetting)("defaultModel")??pr;return yr(async()=>{try{const r=(await Er(t.models.generateContent({model:o,contents:e,config:{temperature:n.temperature??.1,maxOutputTokens:n.maxOutputTokens??1024,responseMimeType:"application/json",responseSchema:n.responseSchema,systemInstruction:n.systemInstruction,thinkingConfig:{thinkingBudget:0}}}),3e4)).text;if(!r||0===r.trim().length)throw new dr("The model returned an empty response.",ur.CONTENT_FILTERED);try{return JSON.parse(r)}catch{const e=r.match(/\{[\s\S]*\}/);if(e)return JSON.parse(e[0]);throw new dr(`Model returned invalid JSON: ${r.slice(0,100)}`,ur.UNKNOWN)}}catch(e){if(e instanceof dr)throw e;throw vr(e)}})}function Er(e,n){return new Promise((t,o)=>{const r=setTimeout(()=>{o(new dr(`Request timed out after ${n/1e3}s. Check your network connection.`,ur.TIMEOUT,!0))},n);e.then(e=>{clearTimeout(r),t(e)}).catch(e=>{clearTimeout(r),o(e)})})}async function yr(e){let n,t=1e3;for(let o=0;o<=3;o++)try{return await e()}catch(e){if(n=e instanceof dr?e:vr(e),!n.retryable||3===o)throw n;const r=.3*Math.random()*t;await Cr(t+r),t*=2}throw n}function vr(e){if(e instanceof dr)return e;const n=e instanceof Error?e.message:String(e),t=function(e){if(e&&"object"==typeof e){const n=e;if("number"==typeof n.status)return n.status;if("number"==typeof n.statusCode)return n.statusCode;if("number"==typeof n.code)return n.code;if(n.response&&"object"==typeof n.response){const e=n.response;if("number"==typeof e.status)return e.status}}}(e);return 401===t||403===t||/api.?key/i.test(n)?new dr("Invalid or expired API key. Please check your GEMINI_API_KEY.",ur.INVALID_API_KEY,!1,t):429===t||/rate.?limit/i.test(n)||/too many requests/i.test(n)?new dr("Rate limited by the Gemini API. Retrying with backoff…",ur.RATE_LIMITED,!0,429):429===t&&/quota/i.test(n)?new dr("API quota exceeded. Check your billing and quota settings in the Google Cloud Console.",ur.QUOTA_EXCEEDED,!1,429):/network/i.test(n)||/fetch failed/i.test(n)||/ECONNREFUSED/i.test(n)||/ENOTFOUND/i.test(n)||/offline/i.test(n)?new dr("Network error — please check your internet connection.",ur.NETWORK_ERROR,!0):/safety/i.test(n)||/blocked/i.test(n)||/filter/i.test(n)?new dr("The response was blocked by content safety filters.",ur.CONTENT_FILTERED,!1):t&&t>=500?new dr(`Server error (${t}). Retrying…`,ur.UNKNOWN,!0,t):new dr(`Unexpected error: ${n}`,ur.UNKNOWN,!1,t)}function Cr(e){return new Promise(n=>setTimeout(n,e))}},89419(e,n,t){"use strict";function o(){const e=Office.context.mailbox.item;return e?"function"==typeof e.body?.getAsync&&"function"==typeof e.body?.setAsync?"compose":"string"==typeof e.subject?"read":"function"==typeof e.subject?.getAsync?"compose":"unknown":"unknown"}function r(){return new Promise((e,n)=>{c().body.getAsync(Office.CoercionType.Text,t=>{t.status===Office.AsyncResultStatus.Succeeded?e(t.value||""):n(new Error(`Failed to read email body: ${t.error?.message||"Unknown error"}`))})})}function i(){return new Promise((e,n)=>{const t=c();if("string"==typeof t.subject)return void e(t.subject);const o=t.subject;"function"!=typeof o?.getAsync?e(""):o.getAsync(t=>{t.status===Office.AsyncResultStatus.Succeeded?e(t.value||""):n(new Error(`Failed to read email subject: ${t.error?.message||"Unknown error"}`))})})}function s(){return new Promise((e,n)=>{const t=c();if(t.from){const n=t.from;return void e({name:n.displayName||"",email:n.emailAddress||""})}const o=t.from;o&&"function"==typeof o.getAsync?o.getAsync(n=>{n.status===Office.AsyncResultStatus.Succeeded&&n.value?e({name:n.value.displayName||"",email:n.value.emailAddress||""}):e(u())}):e(u())})}async function a(){if("read"===o())return s();const e=c(),n=await function(e){return new Promise(n=>{const t=e.to;t&&"function"==typeof t.getAsync?t.getAsync(e=>{e.status===Office.AsyncResultStatus.Succeeded&&e.value?n(e.value.map(e=>({name:e.displayName||"",email:e.emailAddress||""}))):n([])}):n([])})}(e);return n.length>0?n[0]:s()}async function l(){const[e,n,t]=await Promise.all([r(),i(),s()]),o=Office.context.mailbox.item;return[{subject:n,body:e,sender:t,dateTime:o?.dateTimeCreated?.toISOString?.()||void 0}]}function c(){const e=Office.context.mailbox.item;if(!e)throw new Error("No mailbox item is currently open. Make sure the add-in is activated on an email.");return e}function u(){const e=Office.context.mailbox.userProfile;return{name:e?.displayName||"",email:e?.emailAddress||""}}t.d(n,{Ev:()=>l,J5:()=>o,getCurrentEmailSubject:()=>i,getOriginalSender:()=>a,k3:()=>r,mi:()=>s})},21342(e,n,t){"use strict";t.d(n,{A:()=>a});var o=t(71354),r=t.n(o),i=t(76314),s=t.n(i)()(r());s.push([e.id,'/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */\n@layer properties;\n:root, :host {\n  --spacing: 0.25rem;\n  --text-xs: 12px;\n  --text-xs--line-height: calc(1 / 0.75);\n  --text-sm: 13px;\n  --text-sm--line-height: calc(1.25 / 0.875);\n  --text-lg: 15px;\n  --text-lg--line-height: calc(1.75 / 1.125);\n  --text-xl: 16px;\n  --text-xl--line-height: calc(1.75 / 1.25);\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --tracking-wide: 0.025em;\n  --leading-normal: 1.5;\n  --radius-xs: 4px;\n  --radius-sm: 6px;\n  --radius-md: 8px;\n  --default-transition-duration: 150ms;\n  --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  --color-aic-blue: #3b9eff;\n  --color-aic-blue-hover: #2188ed;\n  --color-aic-blue-light: #e8f3ff;\n  --color-aic-blue-glow: rgba(59, 158, 255, 0.15);\n  --color-aic-purple: #7b61db;\n  --color-aic-purple-hover: #6b51c8;\n  --color-aic-green: #22c55e;\n  --color-aic-amber: #f59e0b;\n  --color-aic-teal: #14b8a6;\n  --color-aic-bg: #ffffff;\n  --color-aic-bg-panel: #f8f9fb;\n  --color-aic-bg-elevated: #ffffff;\n  --color-aic-border: #e2e5ea;\n  --color-aic-border-light: #eef0f3;\n  --color-aic-text: #1a1d23;\n  --color-aic-text-secondary: #5e6470;\n  --color-aic-text-tertiary: #8e95a2;\n  --color-aic-text-inverse: #ffffff;\n  --color-aic-error-bg: #fff1f0;\n  --color-aic-error-text: #d1242f;\n  --color-aic-error-border: #ffd2cf;\n  --color-aic-success: #1a7f37;\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 12px;\n  --spacing-lg: 22px;\n  --spacing-xl: 24px;\n  --font-aic: "Poppins", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n  --text-md: 13px;\n  --ease-aic: cubic-bezier(0.25, 0.1, 0.25, 1);\n  --duration-aic: 150ms;\n  --color-dark-bg: #1e1e1e;\n  --color-dark-bg-panel: #252526;\n  --color-dark-bg-elevated: #2d2d2d;\n  --color-dark-border: #3e3e42;\n  --color-dark-border-light: #333337;\n  --color-dark-text: #e0e0e0;\n  --color-dark-text-secondary: #a0a0a0;\n  --color-dark-text-tertiary: #8a8a8a;\n  --color-dark-error-bg: #3a1a1a;\n  --color-dark-error-border: #5c2626;\n}\n.invisible {\n  visibility: hidden;\n}\n.visible {\n  visibility: visible;\n}\n.fixed {\n  position: fixed;\n}\n.relative {\n  position: relative;\n}\n.sticky {\n  position: sticky;\n}\n.top-0 {\n  top: calc(var(--spacing) * 0);\n}\n.z-10 {\n  z-index: 10;\n}\n.container {\n  width: 100%;\n  @media (width >= 40rem) {\n    max-width: 40rem;\n  }\n  @media (width >= 48rem) {\n    max-width: 48rem;\n  }\n  @media (width >= 64rem) {\n    max-width: 64rem;\n  }\n  @media (width >= 80rem) {\n    max-width: 80rem;\n  }\n  @media (width >= 96rem) {\n    max-width: 96rem;\n  }\n}\n.m-0 {\n  margin: calc(var(--spacing) * 0);\n}\n.mt-\\[2px\\] {\n  margin-top: 2px;\n}\n.mt-auto {\n  margin-top: auto;\n}\n.mt-lg {\n  margin-top: var(--spacing-lg);\n}\n.mt-sm {\n  margin-top: var(--spacing-sm);\n}\n.mt-xl {\n  margin-top: var(--spacing-xl);\n}\n.mt-xs {\n  margin-top: var(--spacing-xs);\n}\n.mb-lg {\n  margin-bottom: var(--spacing-lg);\n}\n.mb-md {\n  margin-bottom: var(--spacing-md);\n}\n.mb-sm {\n  margin-bottom: var(--spacing-sm);\n}\n.mb-xs {\n  margin-bottom: var(--spacing-xs);\n}\n.ml-auto {\n  margin-left: auto;\n}\n.block {\n  display: block;\n}\n.contents {\n  display: contents;\n}\n.flex {\n  display: flex;\n}\n.hidden {\n  display: none;\n}\n.inline {\n  display: inline;\n}\n.table {\n  display: table;\n}\n.min-h-\\[50vh\\] {\n  min-height: 50vh;\n}\n.min-h-\\[80px\\] {\n  min-height: 80px;\n}\n.min-h-\\[100px\\] {\n  min-height: 100px;\n}\n.min-h-screen {\n  min-height: 100vh;\n}\n.w-full {\n  width: 100%;\n}\n.min-w-0 {\n  min-width: calc(var(--spacing) * 0);\n}\n.min-w-\\[55px\\] {\n  min-width: 55px;\n}\n.flex-1 {\n  flex: 1;\n}\n.shrink-0 {\n  flex-shrink: 0;\n}\n.transform {\n  transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.resize-y {\n  resize: vertical;\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-center {\n  align-items: center;\n}\n.items-end {\n  align-items: flex-end;\n}\n.items-start {\n  align-items: flex-start;\n}\n.justify-center {\n  justify-content: center;\n}\n.gap-0 {\n  gap: calc(var(--spacing) * 0);\n}\n.gap-sm {\n  gap: var(--spacing-sm);\n}\n.gap-xs {\n  gap: var(--spacing-xs);\n}\n.truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.overflow-x-hidden {\n  overflow-x: hidden;\n}\n.rounded-sm {\n  border-radius: var(--radius-sm);\n}\n.border {\n  border-style: var(--tw-border-style);\n  border-width: 1px;\n}\n.border-t {\n  border-top-style: var(--tw-border-style);\n  border-top-width: 1px;\n}\n.border-b {\n  border-bottom-style: var(--tw-border-style);\n  border-bottom-width: 1px;\n}\n.border-aic-border {\n  border-color: var(--color-aic-border);\n}\n.border-aic-border-light {\n  border-color: var(--color-aic-border-light);\n}\n.bg-aic-bg {\n  background-color: var(--color-aic-bg);\n}\n.p-0 {\n  padding: calc(var(--spacing) * 0);\n}\n.p-lg {\n  padding: var(--spacing-lg);\n}\n.p-sm {\n  padding: var(--spacing-sm);\n}\n.p-xl {\n  padding: var(--spacing-xl);\n}\n.py-sm {\n  padding-block: var(--spacing-sm);\n}\n.pt-lg {\n  padding-top: var(--spacing-lg);\n}\n.pr-lg {\n  padding-right: var(--spacing-lg);\n}\n.pb-\\[7px\\] {\n  padding-bottom: 7px;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.font-aic {\n  font-family: var(--font-aic);\n}\n.text-lg {\n  font-size: var(--text-lg);\n  line-height: var(--tw-leading, var(--text-lg--line-height));\n}\n.text-sm {\n  font-size: var(--text-sm);\n  line-height: var(--tw-leading, var(--text-sm--line-height));\n}\n.text-xl {\n  font-size: var(--text-xl);\n  line-height: var(--tw-leading, var(--text-xl--line-height));\n}\n.text-xs {\n  font-size: var(--text-xs);\n  line-height: var(--tw-leading, var(--text-xs--line-height));\n}\n.text-md {\n  font-size: var(--text-md);\n}\n.leading-normal {\n  --tw-leading: var(--leading-normal);\n  line-height: var(--leading-normal);\n}\n.font-medium {\n  --tw-font-weight: var(--font-weight-medium);\n  font-weight: var(--font-weight-medium);\n}\n.font-normal {\n  --tw-font-weight: var(--font-weight-normal);\n  font-weight: var(--font-weight-normal);\n}\n.font-semibold {\n  --tw-font-weight: var(--font-weight-semibold);\n  font-weight: var(--font-weight-semibold);\n}\n.tracking-wide {\n  --tw-tracking: var(--tracking-wide);\n  letter-spacing: var(--tracking-wide);\n}\n.text-aic-amber {\n  color: var(--color-aic-amber);\n}\n.text-aic-blue {\n  color: var(--color-aic-blue);\n}\n.text-aic-green {\n  color: var(--color-aic-green);\n}\n.text-aic-purple {\n  color: var(--color-aic-purple);\n}\n.text-aic-success {\n  color: var(--color-aic-success);\n}\n.text-aic-teal {\n  color: var(--color-aic-teal);\n}\n.text-aic-text {\n  color: var(--color-aic-text);\n}\n.text-aic-text-secondary {\n  color: var(--color-aic-text-secondary);\n}\n.text-aic-text-tertiary {\n  color: var(--color-aic-text-tertiary);\n}\n.uppercase {\n  text-transform: uppercase;\n}\n.no-underline {\n  text-decoration-line: none;\n}\n.antialiased {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.accent-aic-purple {\n  accent-color: var(--color-aic-purple);\n}\n.opacity-60 {\n  opacity: 60%;\n}\n.blur {\n  --tw-blur: blur(8px);\n  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n}\n.filter {\n  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n}\n.transition-\\[border-color\\,box-shadow\\] {\n  transition-property: border-color,box-shadow;\n  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n  transition-duration: var(--tw-duration, var(--default-transition-duration));\n}\n.duration-\\[var\\(--duration-aic\\)\\] {\n  --tw-duration: var(--duration-aic);\n  transition-duration: var(--duration-aic);\n}\n.outline-none {\n  --tw-outline-style: none;\n  outline-style: none;\n}\n.hover\\:underline {\n  &:hover {\n    @media (hover: hover) {\n      text-decoration-line: underline;\n    }\n  }\n}\n.focus\\:border-aic-blue {\n  &:focus {\n    border-color: var(--color-aic-blue);\n  }\n}\n.focus\\:shadow-\\[0_0_0_2px_var\\(--color-aic-blue-glow\\)\\] {\n  &:focus {\n    --tw-shadow: 0 0 0 2px var(--tw-shadow-color, var(--color-aic-blue-glow));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n}\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n[data-theme="dark"] {\n  --color-aic-bg: var(--color-dark-bg);\n  --color-aic-bg-panel: var(--color-dark-bg-panel);\n  --color-aic-bg-elevated: var(--color-dark-bg-elevated);\n  --color-aic-border: var(--color-dark-border);\n  --color-aic-border-light: var(--color-dark-border-light);\n  --color-aic-text: var(--color-dark-text);\n  --color-aic-text-secondary: var(--color-dark-text-secondary);\n  --color-aic-text-tertiary: var(--color-dark-text-tertiary);\n  --color-aic-error-bg: var(--color-dark-error-bg);\n  --color-aic-error-border: var(--color-dark-error-border);\n}\n@property --tw-rotate-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-z {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-leading {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-tracking {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-drop-shadow-size {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-duration {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-rotate-x: initial;\n      --tw-rotate-y: initial;\n      --tw-rotate-z: initial;\n      --tw-skew-x: initial;\n      --tw-skew-y: initial;\n      --tw-border-style: solid;\n      --tw-leading: initial;\n      --tw-font-weight: initial;\n      --tw-tracking: initial;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-duration: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n    }\n  }\n}\n',"",{version:3,sources:["<no source>","webpack://./node_modules/tailwindcss/utilities.css","webpack://./node_modules/tailwindcss/theme.css","webpack://./src/styles/main.css"],names:[],mappings:"AAAA,kEAAA;ACAA,iBAAmB;ACAnB;EAoRE,kBAAkB;EC5MlB,eAAgB;EDmOhB,sCAAsC;EClOtC,eAAgB;EDoOhB,0CAA0C;EClO1C,eAAgB;EDsOhB,0CAA0C;ECrO1C,eAAgB;EDuOhB,yCAAyC;EAqBzC,yBAAyB;EACzB,yBAAyB;EACzB,2BAA2B;EAQ3B,wBAAwB;EAMxB,qBAAqB;ECtRrB,gBAAiB;EACjB,gBAAiB;EACjB,gBAAiB;EDuXjB,oCAAoC;EACpC,kEAAkE;EClalE,yBAA0B;EAC1B,+BAAgC;EAChC,+BAAgC;EAChC,+CAAgD;EAChD,2BAA4B;EAC5B,iCAAkC;EAClC,0BAA2B;EAC3B,0BAA2B;EAC3B,yBAA0B;EAG1B,uBAAwB;EACxB,6BAA8B;EAC9B,gCAAiC;EAGjC,2BAA4B;EAC5B,iCAAkC;EAIlC,yBAA0B;EAC1B,mCAAoC;EACpC,kCAAmC;EACnC,iCAAkC;EAGlC,6BAA8B;EAC9B,+BAAgC;EAChC,iCAAkC;EAClC,4BAA6B;EAG7B,iBAAkB;EAClB,iBAAkB;EAClB,kBAAmB;EACnB,kBAAmB;EACnB,kBAAmB;EAQnB,+EAAgF;EAGhF,eAAgB;EAKhB,4CAA6C;EAC7C,qBAAsB;EAGtB,wBAAyB;EACzB,8BAA+B;EAC/B,iCAAkC;EAClC,4BAA6B;EAC7B,kCAAmC;EACnC,0BAA2B;EAC3B,oCAAqC;EACrC,mCAAoC;EACpC,8BAA+B;EAC/B,kCAAmC;AD5FtB;ADAf;EAAA,kBAAmB;AAAA;AAAnB;EAAA,mBAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,kBAAmB;AAAA;AAAnB;EAAA,gBAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,WAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB;IAAA,gBAAmB;EAAA;EAAnB;IAAA,gBAAmB;EAAA;EAAnB;IAAA,gBAAmB;EAAA;EAAnB;IAAA,gBAAmB;EAAA;EAAnB;IAAA,gBAAmB;EAAA;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,gBAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,iBAAmB;AAAA;AAAnB;EAAA,cAAmB;AAAA;AAAnB;EAAA,iBAAmB;AAAA;AAAnB;EAAA,aAAmB;AAAA;AAAnB;EAAA,aAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,cAAmB;AAAA;AAAnB;EAAA,gBAAmB;AAAA;AAAnB;EAAA,gBAAmB;AAAA;AAAnB;EAAA,iBAAmB;AAAA;AAAnB;EAAA,iBAAmB;AAAA;AAAnB;EAAA,WAAmB;AAAA;AAAnB;EAAA,mCAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,OAAmB;AAAA;AAAnB;EAAA,cAAmB;AAAA;AAAnB;EAAA,0GAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,gBAAmB;AAAA;AAAnB;EAAA,sBAAmB;AAAA;AAAnB;EAAA,eAAmB;AAAA;AAAnB;EAAA,mBAAmB;AAAA;AAAnB;EAAA,qBAAmB;AAAA;AAAnB;EAAA,uBAAmB;AAAA;AAAnB;EAAA,uBAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,sBAAmB;AAAA;AAAnB;EAAA,sBAAmB;AAAA;AAAnB;EAAA,gBAAmB;EAAnB,uBAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA,kBAAmB;AAAA;AAAnB;EAAA,+BAAmB;AAAA;AAAnB;EAAA,oCAAmB;EAAnB,iBAAmB;AAAA;AAAnB;EAAA,wCAAmB;EAAnB,qBAAmB;AAAA;AAAnB;EAAA,2CAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA,qCAAmB;AAAA;AAAnB;EAAA,2CAAmB;AAAA;AAAnB;EAAA,qCAAmB;AAAA;AAAnB;EAAA,iCAAmB;AAAA;AAAnB;EAAA,0BAAmB;AAAA;AAAnB;EAAA,0BAAmB;AAAA;AAAnB;EAAA,0BAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,8BAAmB;AAAA;AAAnB;EAAA,gCAAmB;AAAA;AAAnB;EAAA,mBAAmB;AAAA;AAAnB;EAAA,kBAAmB;AAAA;AAAnB;EAAA,iBAAmB;AAAA;AAAnB;EAAA,4BAAmB;AAAA;AAAnB;EAAA,yBAAmB;EAAnB,2DAAmB;AAAA;AAAnB;EAAA,yBAAmB;EAAnB,2DAAmB;AAAA;AAAnB;EAAA,yBAAmB;EAAnB,2DAAmB;AAAA;AAAnB;EAAA,yBAAmB;EAAnB,2DAAmB;AAAA;AAAnB;EAAA,yBAAmB;AAAA;AAAnB;EAAA,mCAAmB;EAAnB,kCAAmB;AAAA;AAAnB;EAAA,2CAAmB;EAAnB,sCAAmB;AAAA;AAAnB;EAAA,2CAAmB;EAAnB,sCAAmB;AAAA;AAAnB;EAAA,6CAAmB;EAAnB,wCAAmB;AAAA;AAAnB;EAAA,mCAAmB;EAAnB,oCAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,4BAAmB;AAAA;AAAnB;EAAA,6BAAmB;AAAA;AAAnB;EAAA,8BAAmB;AAAA;AAAnB;EAAA,+BAAmB;AAAA;AAAnB;EAAA,4BAAmB;AAAA;AAAnB;EAAA,4BAAmB;AAAA;AAAnB;EAAA,sCAAmB;AAAA;AAAnB;EAAA,qCAAmB;AAAA;AAAnB;EAAA,yBAAmB;AAAA;AAAnB;EAAA,0BAAmB;AAAA;AAAnB;EAAA,mCAAmB;EAAnB,kCAAmB;AAAA;AAAnB;EAAA,qCAAmB;AAAA;AAAnB;EAAA,YAAmB;AAAA;AAAnB;EAAA,oBAAmB;EAAnB,0LAAmB;AAAA;AAAnB;EAAA,0LAAmB;AAAA;AAAnB;EAAA,4CAAmB;EAAnB,qFAAmB;EAAnB,2EAAmB;AAAA;AAAnB;EAAA,kCAAmB;EAAnB,wCAAmB;AAAA;AAAnB;EAAA,wBAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA;IAAA;MAAA,+BAAmB;IAAA;EAAA;AAAA;AAAnB;EAAA;IAAA,mCAAmB;EAAA;AAAA;AAAnB;EAAA;IAAA,yEAAmB;IAAnB,sIAAmB;EAAA;AAAA;AEcnB;;;EAGE,sBAAuB;AACxB;AAkFD;EACE,oCAAqC;EACrC,gDAAiD;EACjD,sDAAuD;EACvD,4CAA6C;EAC7C,wDAAyD;EACzD,wCAAyC;EACzC,4DAA6D;EAC7D,0DAA2D;EAC3D,gDAAiD;EACjD,wDAAyD;AAC1D;AF/GD;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,oBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,sBAAmB;EAAnB,eAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,sBAAmB;EAAnB,eAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,sBAAmB;EAAnB,eAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;AAAA;AAAnB;EAAA,kBAAmB;EAAnB,eAAmB;EAAnB,kBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,mBAAmB;AAAA;AAAnB;EAAA,WAAmB;EAAnB,eAAmB;EAAnB,wBAAmB;AAAA;AAAnB;EAAA;IAAA;MAAA,sBAAmB;MAAnB,sBAAmB;MAAnB,sBAAmB;MAAnB,oBAAmB;MAAnB,oBAAmB;MAAnB,wBAAmB;MAAnB,qBAAmB;MAAnB,yBAAmB;MAAnB,sBAAmB;MAAnB,kBAAmB;MAAnB,wBAAmB;MAAnB,sBAAmB;MAAnB,uBAAmB;MAAnB,wBAAmB;MAAnB,oBAAmB;MAAnB,qBAAmB;MAAnB,sBAAmB;MAAnB,mBAAmB;MAAnB,yBAAmB;MAAnB,+BAAmB;MAAnB,4BAAmB;MAAnB,8BAAmB;MAAnB,sBAAmB;MAAnB,sBAAmB;MAAnB,0BAAmB;MAAnB,uBAAmB;MAAnB,4BAAmB;MAAnB,gCAAmB;MAAnB,6BAAmB;MAAnB,wBAAmB;MAAnB,2BAAmB;MAAnB,8BAAmB;MAAnB,iCAAmB;MAAnB,wBAAmB;MAAnB,2BAAmB;MAAnB,4BAAmB;MAAnB,kCAAmB;IAAA;EAAA;AAAA",sourcesContent:[null,"@tailwind utilities;\n","@theme default {\n  --font-sans:\n    ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'Noto Color Emoji';\n  --font-serif: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif;\n  --font-mono:\n    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',\n    monospace;\n\n  --color-red-50: oklch(97.1% 0.013 17.38);\n  --color-red-100: oklch(93.6% 0.032 17.717);\n  --color-red-200: oklch(88.5% 0.062 18.334);\n  --color-red-300: oklch(80.8% 0.114 19.571);\n  --color-red-400: oklch(70.4% 0.191 22.216);\n  --color-red-500: oklch(63.7% 0.237 25.331);\n  --color-red-600: oklch(57.7% 0.245 27.325);\n  --color-red-700: oklch(50.5% 0.213 27.518);\n  --color-red-800: oklch(44.4% 0.177 26.899);\n  --color-red-900: oklch(39.6% 0.141 25.723);\n  --color-red-950: oklch(25.8% 0.092 26.042);\n\n  --color-orange-50: oklch(98% 0.016 73.684);\n  --color-orange-100: oklch(95.4% 0.038 75.164);\n  --color-orange-200: oklch(90.1% 0.076 70.697);\n  --color-orange-300: oklch(83.7% 0.128 66.29);\n  --color-orange-400: oklch(75% 0.183 55.934);\n  --color-orange-500: oklch(70.5% 0.213 47.604);\n  --color-orange-600: oklch(64.6% 0.222 41.116);\n  --color-orange-700: oklch(55.3% 0.195 38.402);\n  --color-orange-800: oklch(47% 0.157 37.304);\n  --color-orange-900: oklch(40.8% 0.123 38.172);\n  --color-orange-950: oklch(26.6% 0.079 36.259);\n\n  --color-amber-50: oklch(98.7% 0.022 95.277);\n  --color-amber-100: oklch(96.2% 0.059 95.617);\n  --color-amber-200: oklch(92.4% 0.12 95.746);\n  --color-amber-300: oklch(87.9% 0.169 91.605);\n  --color-amber-400: oklch(82.8% 0.189 84.429);\n  --color-amber-500: oklch(76.9% 0.188 70.08);\n  --color-amber-600: oklch(66.6% 0.179 58.318);\n  --color-amber-700: oklch(55.5% 0.163 48.998);\n  --color-amber-800: oklch(47.3% 0.137 46.201);\n  --color-amber-900: oklch(41.4% 0.112 45.904);\n  --color-amber-950: oklch(27.9% 0.077 45.635);\n\n  --color-yellow-50: oklch(98.7% 0.026 102.212);\n  --color-yellow-100: oklch(97.3% 0.071 103.193);\n  --color-yellow-200: oklch(94.5% 0.129 101.54);\n  --color-yellow-300: oklch(90.5% 0.182 98.111);\n  --color-yellow-400: oklch(85.2% 0.199 91.936);\n  --color-yellow-500: oklch(79.5% 0.184 86.047);\n  --color-yellow-600: oklch(68.1% 0.162 75.834);\n  --color-yellow-700: oklch(55.4% 0.135 66.442);\n  --color-yellow-800: oklch(47.6% 0.114 61.907);\n  --color-yellow-900: oklch(42.1% 0.095 57.708);\n  --color-yellow-950: oklch(28.6% 0.066 53.813);\n\n  --color-lime-50: oklch(98.6% 0.031 120.757);\n  --color-lime-100: oklch(96.7% 0.067 122.328);\n  --color-lime-200: oklch(93.8% 0.127 124.321);\n  --color-lime-300: oklch(89.7% 0.196 126.665);\n  --color-lime-400: oklch(84.1% 0.238 128.85);\n  --color-lime-500: oklch(76.8% 0.233 130.85);\n  --color-lime-600: oklch(64.8% 0.2 131.684);\n  --color-lime-700: oklch(53.2% 0.157 131.589);\n  --color-lime-800: oklch(45.3% 0.124 130.933);\n  --color-lime-900: oklch(40.5% 0.101 131.063);\n  --color-lime-950: oklch(27.4% 0.072 132.109);\n\n  --color-green-50: oklch(98.2% 0.018 155.826);\n  --color-green-100: oklch(96.2% 0.044 156.743);\n  --color-green-200: oklch(92.5% 0.084 155.995);\n  --color-green-300: oklch(87.1% 0.15 154.449);\n  --color-green-400: oklch(79.2% 0.209 151.711);\n  --color-green-500: oklch(72.3% 0.219 149.579);\n  --color-green-600: oklch(62.7% 0.194 149.214);\n  --color-green-700: oklch(52.7% 0.154 150.069);\n  --color-green-800: oklch(44.8% 0.119 151.328);\n  --color-green-900: oklch(39.3% 0.095 152.535);\n  --color-green-950: oklch(26.6% 0.065 152.934);\n\n  --color-emerald-50: oklch(97.9% 0.021 166.113);\n  --color-emerald-100: oklch(95% 0.052 163.051);\n  --color-emerald-200: oklch(90.5% 0.093 164.15);\n  --color-emerald-300: oklch(84.5% 0.143 164.978);\n  --color-emerald-400: oklch(76.5% 0.177 163.223);\n  --color-emerald-500: oklch(69.6% 0.17 162.48);\n  --color-emerald-600: oklch(59.6% 0.145 163.225);\n  --color-emerald-700: oklch(50.8% 0.118 165.612);\n  --color-emerald-800: oklch(43.2% 0.095 166.913);\n  --color-emerald-900: oklch(37.8% 0.077 168.94);\n  --color-emerald-950: oklch(26.2% 0.051 172.552);\n\n  --color-teal-50: oklch(98.4% 0.014 180.72);\n  --color-teal-100: oklch(95.3% 0.051 180.801);\n  --color-teal-200: oklch(91% 0.096 180.426);\n  --color-teal-300: oklch(85.5% 0.138 181.071);\n  --color-teal-400: oklch(77.7% 0.152 181.912);\n  --color-teal-500: oklch(70.4% 0.14 182.503);\n  --color-teal-600: oklch(60% 0.118 184.704);\n  --color-teal-700: oklch(51.1% 0.096 186.391);\n  --color-teal-800: oklch(43.7% 0.078 188.216);\n  --color-teal-900: oklch(38.6% 0.063 188.416);\n  --color-teal-950: oklch(27.7% 0.046 192.524);\n\n  --color-cyan-50: oklch(98.4% 0.019 200.873);\n  --color-cyan-100: oklch(95.6% 0.045 203.388);\n  --color-cyan-200: oklch(91.7% 0.08 205.041);\n  --color-cyan-300: oklch(86.5% 0.127 207.078);\n  --color-cyan-400: oklch(78.9% 0.154 211.53);\n  --color-cyan-500: oklch(71.5% 0.143 215.221);\n  --color-cyan-600: oklch(60.9% 0.126 221.723);\n  --color-cyan-700: oklch(52% 0.105 223.128);\n  --color-cyan-800: oklch(45% 0.085 224.283);\n  --color-cyan-900: oklch(39.8% 0.07 227.392);\n  --color-cyan-950: oklch(30.2% 0.056 229.695);\n\n  --color-sky-50: oklch(97.7% 0.013 236.62);\n  --color-sky-100: oklch(95.1% 0.026 236.824);\n  --color-sky-200: oklch(90.1% 0.058 230.902);\n  --color-sky-300: oklch(82.8% 0.111 230.318);\n  --color-sky-400: oklch(74.6% 0.16 232.661);\n  --color-sky-500: oklch(68.5% 0.169 237.323);\n  --color-sky-600: oklch(58.8% 0.158 241.966);\n  --color-sky-700: oklch(50% 0.134 242.749);\n  --color-sky-800: oklch(44.3% 0.11 240.79);\n  --color-sky-900: oklch(39.1% 0.09 240.876);\n  --color-sky-950: oklch(29.3% 0.066 243.157);\n\n  --color-blue-50: oklch(97% 0.014 254.604);\n  --color-blue-100: oklch(93.2% 0.032 255.585);\n  --color-blue-200: oklch(88.2% 0.059 254.128);\n  --color-blue-300: oklch(80.9% 0.105 251.813);\n  --color-blue-400: oklch(70.7% 0.165 254.624);\n  --color-blue-500: oklch(62.3% 0.214 259.815);\n  --color-blue-600: oklch(54.6% 0.245 262.881);\n  --color-blue-700: oklch(48.8% 0.243 264.376);\n  --color-blue-800: oklch(42.4% 0.199 265.638);\n  --color-blue-900: oklch(37.9% 0.146 265.522);\n  --color-blue-950: oklch(28.2% 0.091 267.935);\n\n  --color-indigo-50: oklch(96.2% 0.018 272.314);\n  --color-indigo-100: oklch(93% 0.034 272.788);\n  --color-indigo-200: oklch(87% 0.065 274.039);\n  --color-indigo-300: oklch(78.5% 0.115 274.713);\n  --color-indigo-400: oklch(67.3% 0.182 276.935);\n  --color-indigo-500: oklch(58.5% 0.233 277.117);\n  --color-indigo-600: oklch(51.1% 0.262 276.966);\n  --color-indigo-700: oklch(45.7% 0.24 277.023);\n  --color-indigo-800: oklch(39.8% 0.195 277.366);\n  --color-indigo-900: oklch(35.9% 0.144 278.697);\n  --color-indigo-950: oklch(25.7% 0.09 281.288);\n\n  --color-violet-50: oklch(96.9% 0.016 293.756);\n  --color-violet-100: oklch(94.3% 0.029 294.588);\n  --color-violet-200: oklch(89.4% 0.057 293.283);\n  --color-violet-300: oklch(81.1% 0.111 293.571);\n  --color-violet-400: oklch(70.2% 0.183 293.541);\n  --color-violet-500: oklch(60.6% 0.25 292.717);\n  --color-violet-600: oklch(54.1% 0.281 293.009);\n  --color-violet-700: oklch(49.1% 0.27 292.581);\n  --color-violet-800: oklch(43.2% 0.232 292.759);\n  --color-violet-900: oklch(38% 0.189 293.745);\n  --color-violet-950: oklch(28.3% 0.141 291.089);\n\n  --color-purple-50: oklch(97.7% 0.014 308.299);\n  --color-purple-100: oklch(94.6% 0.033 307.174);\n  --color-purple-200: oklch(90.2% 0.063 306.703);\n  --color-purple-300: oklch(82.7% 0.119 306.383);\n  --color-purple-400: oklch(71.4% 0.203 305.504);\n  --color-purple-500: oklch(62.7% 0.265 303.9);\n  --color-purple-600: oklch(55.8% 0.288 302.321);\n  --color-purple-700: oklch(49.6% 0.265 301.924);\n  --color-purple-800: oklch(43.8% 0.218 303.724);\n  --color-purple-900: oklch(38.1% 0.176 304.987);\n  --color-purple-950: oklch(29.1% 0.149 302.717);\n\n  --color-fuchsia-50: oklch(97.7% 0.017 320.058);\n  --color-fuchsia-100: oklch(95.2% 0.037 318.852);\n  --color-fuchsia-200: oklch(90.3% 0.076 319.62);\n  --color-fuchsia-300: oklch(83.3% 0.145 321.434);\n  --color-fuchsia-400: oklch(74% 0.238 322.16);\n  --color-fuchsia-500: oklch(66.7% 0.295 322.15);\n  --color-fuchsia-600: oklch(59.1% 0.293 322.896);\n  --color-fuchsia-700: oklch(51.8% 0.253 323.949);\n  --color-fuchsia-800: oklch(45.2% 0.211 324.591);\n  --color-fuchsia-900: oklch(40.1% 0.17 325.612);\n  --color-fuchsia-950: oklch(29.3% 0.136 325.661);\n\n  --color-pink-50: oklch(97.1% 0.014 343.198);\n  --color-pink-100: oklch(94.8% 0.028 342.258);\n  --color-pink-200: oklch(89.9% 0.061 343.231);\n  --color-pink-300: oklch(82.3% 0.12 346.018);\n  --color-pink-400: oklch(71.8% 0.202 349.761);\n  --color-pink-500: oklch(65.6% 0.241 354.308);\n  --color-pink-600: oklch(59.2% 0.249 0.584);\n  --color-pink-700: oklch(52.5% 0.223 3.958);\n  --color-pink-800: oklch(45.9% 0.187 3.815);\n  --color-pink-900: oklch(40.8% 0.153 2.432);\n  --color-pink-950: oklch(28.4% 0.109 3.907);\n\n  --color-rose-50: oklch(96.9% 0.015 12.422);\n  --color-rose-100: oklch(94.1% 0.03 12.58);\n  --color-rose-200: oklch(89.2% 0.058 10.001);\n  --color-rose-300: oklch(81% 0.117 11.638);\n  --color-rose-400: oklch(71.2% 0.194 13.428);\n  --color-rose-500: oklch(64.5% 0.246 16.439);\n  --color-rose-600: oklch(58.6% 0.253 17.585);\n  --color-rose-700: oklch(51.4% 0.222 16.935);\n  --color-rose-800: oklch(45.5% 0.188 13.697);\n  --color-rose-900: oklch(41% 0.159 10.272);\n  --color-rose-950: oklch(27.1% 0.105 12.094);\n\n  --color-slate-50: oklch(98.4% 0.003 247.858);\n  --color-slate-100: oklch(96.8% 0.007 247.896);\n  --color-slate-200: oklch(92.9% 0.013 255.508);\n  --color-slate-300: oklch(86.9% 0.022 252.894);\n  --color-slate-400: oklch(70.4% 0.04 256.788);\n  --color-slate-500: oklch(55.4% 0.046 257.417);\n  --color-slate-600: oklch(44.6% 0.043 257.281);\n  --color-slate-700: oklch(37.2% 0.044 257.287);\n  --color-slate-800: oklch(27.9% 0.041 260.031);\n  --color-slate-900: oklch(20.8% 0.042 265.755);\n  --color-slate-950: oklch(12.9% 0.042 264.695);\n\n  --color-gray-50: oklch(98.5% 0.002 247.839);\n  --color-gray-100: oklch(96.7% 0.003 264.542);\n  --color-gray-200: oklch(92.8% 0.006 264.531);\n  --color-gray-300: oklch(87.2% 0.01 258.338);\n  --color-gray-400: oklch(70.7% 0.022 261.325);\n  --color-gray-500: oklch(55.1% 0.027 264.364);\n  --color-gray-600: oklch(44.6% 0.03 256.802);\n  --color-gray-700: oklch(37.3% 0.034 259.733);\n  --color-gray-800: oklch(27.8% 0.033 256.848);\n  --color-gray-900: oklch(21% 0.034 264.665);\n  --color-gray-950: oklch(13% 0.028 261.692);\n\n  --color-zinc-50: oklch(98.5% 0 0);\n  --color-zinc-100: oklch(96.7% 0.001 286.375);\n  --color-zinc-200: oklch(92% 0.004 286.32);\n  --color-zinc-300: oklch(87.1% 0.006 286.286);\n  --color-zinc-400: oklch(70.5% 0.015 286.067);\n  --color-zinc-500: oklch(55.2% 0.016 285.938);\n  --color-zinc-600: oklch(44.2% 0.017 285.786);\n  --color-zinc-700: oklch(37% 0.013 285.805);\n  --color-zinc-800: oklch(27.4% 0.006 286.033);\n  --color-zinc-900: oklch(21% 0.006 285.885);\n  --color-zinc-950: oklch(14.1% 0.005 285.823);\n\n  --color-neutral-50: oklch(98.5% 0 0);\n  --color-neutral-100: oklch(97% 0 0);\n  --color-neutral-200: oklch(92.2% 0 0);\n  --color-neutral-300: oklch(87% 0 0);\n  --color-neutral-400: oklch(70.8% 0 0);\n  --color-neutral-500: oklch(55.6% 0 0);\n  --color-neutral-600: oklch(43.9% 0 0);\n  --color-neutral-700: oklch(37.1% 0 0);\n  --color-neutral-800: oklch(26.9% 0 0);\n  --color-neutral-900: oklch(20.5% 0 0);\n  --color-neutral-950: oklch(14.5% 0 0);\n\n  --color-stone-50: oklch(98.5% 0.001 106.423);\n  --color-stone-100: oklch(97% 0.001 106.424);\n  --color-stone-200: oklch(92.3% 0.003 48.717);\n  --color-stone-300: oklch(86.9% 0.005 56.366);\n  --color-stone-400: oklch(70.9% 0.01 56.259);\n  --color-stone-500: oklch(55.3% 0.013 58.071);\n  --color-stone-600: oklch(44.4% 0.011 73.639);\n  --color-stone-700: oklch(37.4% 0.01 67.558);\n  --color-stone-800: oklch(26.8% 0.007 34.298);\n  --color-stone-900: oklch(21.6% 0.006 56.043);\n  --color-stone-950: oklch(14.7% 0.004 49.25);\n\n  --color-black: #000;\n  --color-white: #fff;\n\n  --spacing: 0.25rem;\n\n  --breakpoint-sm: 40rem;\n  --breakpoint-md: 48rem;\n  --breakpoint-lg: 64rem;\n  --breakpoint-xl: 80rem;\n  --breakpoint-2xl: 96rem;\n\n  --container-3xs: 16rem;\n  --container-2xs: 18rem;\n  --container-xs: 20rem;\n  --container-sm: 24rem;\n  --container-md: 28rem;\n  --container-lg: 32rem;\n  --container-xl: 36rem;\n  --container-2xl: 42rem;\n  --container-3xl: 48rem;\n  --container-4xl: 56rem;\n  --container-5xl: 64rem;\n  --container-6xl: 72rem;\n  --container-7xl: 80rem;\n\n  --text-xs: 0.75rem;\n  --text-xs--line-height: calc(1 / 0.75);\n  --text-sm: 0.875rem;\n  --text-sm--line-height: calc(1.25 / 0.875);\n  --text-base: 1rem;\n  --text-base--line-height: calc(1.5 / 1);\n  --text-lg: 1.125rem;\n  --text-lg--line-height: calc(1.75 / 1.125);\n  --text-xl: 1.25rem;\n  --text-xl--line-height: calc(1.75 / 1.25);\n  --text-2xl: 1.5rem;\n  --text-2xl--line-height: calc(2 / 1.5);\n  --text-3xl: 1.875rem;\n  --text-3xl--line-height: calc(2.25 / 1.875);\n  --text-4xl: 2.25rem;\n  --text-4xl--line-height: calc(2.5 / 2.25);\n  --text-5xl: 3rem;\n  --text-5xl--line-height: 1;\n  --text-6xl: 3.75rem;\n  --text-6xl--line-height: 1;\n  --text-7xl: 4.5rem;\n  --text-7xl--line-height: 1;\n  --text-8xl: 6rem;\n  --text-8xl--line-height: 1;\n  --text-9xl: 8rem;\n  --text-9xl--line-height: 1;\n\n  --font-weight-thin: 100;\n  --font-weight-extralight: 200;\n  --font-weight-light: 300;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --font-weight-bold: 700;\n  --font-weight-extrabold: 800;\n  --font-weight-black: 900;\n\n  --tracking-tighter: -0.05em;\n  --tracking-tight: -0.025em;\n  --tracking-normal: 0em;\n  --tracking-wide: 0.025em;\n  --tracking-wider: 0.05em;\n  --tracking-widest: 0.1em;\n\n  --leading-tight: 1.25;\n  --leading-snug: 1.375;\n  --leading-normal: 1.5;\n  --leading-relaxed: 1.625;\n  --leading-loose: 2;\n\n  --radius-xs: 0.125rem;\n  --radius-sm: 0.25rem;\n  --radius-md: 0.375rem;\n  --radius-lg: 0.5rem;\n  --radius-xl: 0.75rem;\n  --radius-2xl: 1rem;\n  --radius-3xl: 1.5rem;\n  --radius-4xl: 2rem;\n\n  --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);\n  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n\n  --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);\n  --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);\n  --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);\n\n  --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);\n  --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);\n  --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);\n  --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);\n  --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);\n  --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);\n\n  --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);\n  --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);\n  --text-shadow-sm:\n    0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075), 0px 2px 2px rgb(0 0 0 / 0.075);\n  --text-shadow-md:\n    0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1), 0px 2px 4px rgb(0 0 0 / 0.1);\n  --text-shadow-lg:\n    0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1), 0px 4px 8px rgb(0 0 0 / 0.1);\n\n  --ease-in: cubic-bezier(0.4, 0, 1, 1);\n  --ease-out: cubic-bezier(0, 0, 0.2, 1);\n  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n\n  --animate-spin: spin 1s linear infinite;\n  --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n  --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  --animate-bounce: bounce 1s infinite;\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes ping {\n    75%,\n    100% {\n      transform: scale(2);\n      opacity: 0;\n    }\n  }\n\n  @keyframes pulse {\n    50% {\n      opacity: 0.5;\n    }\n  }\n\n  @keyframes bounce {\n    0%,\n    100% {\n      transform: translateY(-25%);\n      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n    }\n\n    50% {\n      transform: none;\n      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n    }\n  }\n\n  --blur-xs: 4px;\n  --blur-sm: 8px;\n  --blur-md: 12px;\n  --blur-lg: 16px;\n  --blur-xl: 24px;\n  --blur-2xl: 40px;\n  --blur-3xl: 64px;\n\n  --perspective-dramatic: 100px;\n  --perspective-near: 300px;\n  --perspective-normal: 500px;\n  --perspective-midrange: 800px;\n  --perspective-distant: 1200px;\n\n  --aspect-video: 16 / 9;\n\n  --default-transition-duration: 150ms;\n  --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  --default-font-family: --theme(--font-sans, initial);\n  --default-font-feature-settings: --theme(--font-sans--font-feature-settings, initial);\n  --default-font-variation-settings: --theme(--font-sans--font-variation-settings, initial);\n  --default-mono-font-family: --theme(--font-mono, initial);\n  --default-mono-font-feature-settings: --theme(--font-mono--font-feature-settings, initial);\n  --default-mono-font-variation-settings: --theme(--font-mono--font-variation-settings, initial);\n}\n\n/* Deprecated */\n@theme default inline reference {\n  --blur: 8px;\n  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);\n  --drop-shadow: 0 1px 2px rgb(0 0 0 / 0.1), 0 1px 1px rgb(0 0 0 / 0.06);\n  --radius: 0.25rem;\n  --max-width-prose: 65ch;\n}\n",'/* ================================================================\n   AI Compose — Main Stylesheet (Tailwind CSS v4)\n\n   This file bootstraps Tailwind CSS and defines custom design tokens\n   through the CSS-first @theme directive. All values align with the\n   existing AI Compose design system (--aic-* custom properties).\n\n   © Rizonetech (Pty) Ltd. — https://rizonesoft.com\n   ================================================================ */\n\n@import "tailwindcss/theme";\n@import "tailwindcss/utilities";\n\n/* Box-sizing reset (preflight is skipped to preserve existing styles) */\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/* ================================================================\n   Custom Design Tokens\n   ================================================================ */\n\n@theme {\n  /* Brand — AI Compose sparkle icon palette */\n  --color-aic-blue: #3b9eff;\n  --color-aic-blue-hover: #2188ed;\n  --color-aic-blue-light: #e8f3ff;\n  --color-aic-blue-glow: rgba(59, 158, 255, 0.15);\n  --color-aic-purple: #7b61db;\n  --color-aic-purple-hover: #6b51c8;\n  --color-aic-green: #22c55e;\n  --color-aic-amber: #f59e0b;\n  --color-aic-teal: #14b8a6;\n\n  /* Surfaces */\n  --color-aic-bg: #ffffff;\n  --color-aic-bg-panel: #f8f9fb;\n  --color-aic-bg-elevated: #ffffff;\n\n  /* Borders */\n  --color-aic-border: #e2e5ea;\n  --color-aic-border-light: #eef0f3;\n  --color-aic-border-focus: #3b9eff;\n\n  /* Text */\n  --color-aic-text: #1a1d23;\n  --color-aic-text-secondary: #5e6470;\n  --color-aic-text-tertiary: #8e95a2;\n  --color-aic-text-inverse: #ffffff;\n\n  /* Status */\n  --color-aic-error-bg: #fff1f0;\n  --color-aic-error-text: #d1242f;\n  --color-aic-error-border: #ffd2cf;\n  --color-aic-success: #1a7f37;\n\n  /* Spacing (4px grid) */\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 12px;\n  --spacing-lg: 22px;\n  --spacing-xl: 24px;\n\n  /* Border radius */\n  --radius-xs: 4px;\n  --radius-sm: 6px;\n  --radius-md: 8px;\n\n  /* Typography */\n  --font-aic: "Poppins", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n  --text-xs: 12px;\n  --text-sm: 13px;\n  --text-md: 13px;\n  --text-lg: 15px;\n  --text-xl: 16px;\n\n  /* Motion */\n  --ease-aic: cubic-bezier(0.25, 0.1, 0.25, 1);\n  --duration-aic: 150ms;\n\n  /* Dark theme surfaces (used via .dark variant) */\n  --color-dark-bg: #1e1e1e;\n  --color-dark-bg-panel: #252526;\n  --color-dark-bg-elevated: #2d2d2d;\n  --color-dark-border: #3e3e42;\n  --color-dark-border-light: #333337;\n  --color-dark-text: #e0e0e0;\n  --color-dark-text-secondary: #a0a0a0;\n  --color-dark-text-tertiary: #8a8a8a;\n  --color-dark-error-bg: #3a1a1a;\n  --color-dark-error-border: #5c2626;\n}\n\n/* ================================================================\n   Dark theme — activated by adding `data-theme="dark"` to <html>\n   or via Outlook\'s theme detection in taskpane.ts\n   ================================================================ */\n\n[data-theme="dark"] {\n  --color-aic-bg: var(--color-dark-bg);\n  --color-aic-bg-panel: var(--color-dark-bg-panel);\n  --color-aic-bg-elevated: var(--color-dark-bg-elevated);\n  --color-aic-border: var(--color-dark-border);\n  --color-aic-border-light: var(--color-dark-border-light);\n  --color-aic-text: var(--color-dark-text);\n  --color-aic-text-secondary: var(--color-dark-text-secondary);\n  --color-aic-text-tertiary: var(--color-dark-text-tertiary);\n  --color-aic-error-bg: var(--color-dark-error-bg);\n  --color-aic-error-border: var(--color-dark-error-border);\n}\n'],sourceRoot:""}]);const a=s},88969(e,n,t){"use strict";t.d(n,{A:()=>p});var o=t(71354),r=t.n(o),i=t(76314),s=t.n(i),a=t(4417),l=t.n(a),c=new URL(t(23753),t.b),u=s()(r()),d=l()(c);u.push([e.id,`/**\n * AI Compose — Component Styles\n *\n * Component-level CSS for interactive states, dynamic content,\n * and polished UI elements that benefit from semantic class names.\n * Design tokens come from \`src/styles/main.css\` via Tailwind @theme.\n *\n * © Rizonetech (Pty) Ltd. — https://rizonesoft.com\n */\n\n/* ================================================================\n   Utility — hidden (Tailwind v4 may not scan .ts files for this)\n   ================================================================ */\n\n.hidden {\n  display: none !important;\n}\n\n/* ================================================================\n   Scrollbar — slim, theme-aware\n   ================================================================ */\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--color-aic-border);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Tab bar\n   ================================================================ */\n\n.aic-tab {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  color: var(--color-aic-text-secondary);\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid transparent;\n  cursor: pointer;\n  transition:\n    color var(--duration-aic) var(--ease-aic),\n    border-color var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n}\n\n.aic-tab:hover {\n  color: var(--color-aic-text);\n}\n\n.aic-tab--active {\n  color: var(--color-aic-blue);\n  border-bottom-color: var(--color-aic-blue);\n}\n\n.aic-tab--icon {\n  padding: var(--spacing-sm);\n}\n\n/* ================================================================\n   Dropdown menu — proper menu component\n   ================================================================ */\n\n.aic-dropdown {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 4px);\n  min-width: 200px;\n  background: var(--color-aic-bg-elevated);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  box-shadow:\n    0 4px 16px rgba(0, 0, 0, 0.1),\n    0 1px 4px rgba(0, 0, 0, 0.06);\n  padding: var(--spacing-xs) 0;\n  z-index: 20;\n  overflow: hidden;\n}\n\n.aic-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: background var(--duration-aic) var(--ease-aic);\n  text-align: left;\n}\n\n.aic-dropdown__item:hover {\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-dropdown__item:active {\n  background: var(--color-aic-blue-light);\n}\n\n.aic-dropdown__item svg {\n  color: var(--color-aic-text-tertiary);\n  flex-shrink: 0;\n}\n\n.aic-dropdown__item:hover svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-dropdown__item--active {\n  background: var(--color-aic-blue-light);\n  color: var(--color-aic-blue);\n  font-weight: 500;\n}\n\n.aic-dropdown__item--active svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-split--open .aic-tab--icon {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n  border-radius: var(--radius-xs);\n}\n\n/* ================================================================\n   Buttons\n   ================================================================ */\n\n.aic-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-xs);\n  padding: 9px var(--spacing-lg);\n  border-radius: var(--radius-xs);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n  border: 1px solid transparent;\n  line-height: 1;\n}\n\n.aic-btn:active {\n  transform: scale(0.97);\n}\n\n.aic-btn:focus-visible {\n  outline: 2px solid var(--color-aic-blue);\n  outline-offset: 2px;\n}\n\n.aic-btn:disabled,\n.aic-btn[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n/* Loading state — inline spinner replaces content */\n.aic-btn--loading {\n  pointer-events: none;\n  position: relative;\n  color: transparent !important;\n}\n\n.aic-btn--loading::after {\n  content: "";\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 50%;\n  left: 50%;\n  margin: -8px 0 0 -8px;\n  border: 2px solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  opacity: 0.8;\n  animation: spin 0.6s linear infinite;\n}\n\n/* Restore visible colour for the pseudo-element */\n.aic-btn--primary.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n.aic-btn--secondary.aic-btn--loading::after { color: var(--color-aic-text-secondary); }\n.aic-btn--accent.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n\n/* Primary — blue filled */\n.aic-btn--primary {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-btn--primary:hover {\n  background: var(--color-aic-blue-hover);\n  border-color: var(--color-aic-blue-hover);\n  box-shadow: 0 2px 8px rgba(59, 158, 255, 0.25);\n}\n\n/* Secondary — outlined */\n.aic-btn--secondary {\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  border-color: var(--color-aic-border);\n}\n\n.aic-btn--secondary:hover {\n  border-color: var(--color-aic-text-secondary);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n/* Accent — purple filled, icon-only square */\n\n/* Clear / reset button (×) for text inputs */\n.aic-btn-clear {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: none;\n  border-radius: 50%;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  font-size: 14px;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-btn-clear:hover {\n  background: var(--color-aic-error-bg);\n  color: var(--color-aic-error-text);\n}\n\n/* Accent — purple filled, icon-only square */\n.aic-btn--accent {\n  background: var(--color-aic-purple);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-purple);\n  padding: 9px;\n  aspect-ratio: 1;\n  justify-content: center;\n}\n\n.aic-btn--accent:hover {\n  background: var(--color-aic-purple-hover);\n  border-color: var(--color-aic-purple-hover);\n}\n\n/* Success state (JS-toggled after copy actions) */\n.aic-btn--success {\n  background: var(--color-aic-success) !important;\n  border-color: var(--color-aic-success) !important;\n  color: var(--color-aic-text-inverse) !important;\n}\n\n/* Icon-only toggle (e.g. API key show/hide) */\n.aic-btn--icon-toggle {\n  padding: 8px 10px;\n}\n\n/* Danger — destructive action */\n.aic-btn--danger {\n  background: transparent;\n  color: var(--color-aic-error-text);\n  border-color: var(--color-aic-error-border);\n}\n\n.aic-btn--danger:hover {\n  background: var(--color-aic-error-bg);\n  border-color: var(--color-aic-error-text);\n}\n\n.aic-btn--ghost {\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  border: 1px dashed var(--color-aic-border);\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-btn--ghost:hover {\n  color: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n  border-style: solid;\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-btn--ghost:disabled {\n  opacity: 0.6;\n  cursor: wait;\n}\n\n/* Utility — error text colour */\n.aic-text-error {\n  color: var(--color-aic-error-text);\n}\n\n/* ================================================================\n   Scroll-to-top button\n   ================================================================ */\n\n/* ================================================================\n   Template controls — compact select & buttons\n   ================================================================ */\n\n.aic-template-select {\n  flex: 1;\n  min-width: 0;\n  font-size: 11px;\n}\n\n.aic-template-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30px;\n  height: 30px;\n  padding: 0;\n  flex-shrink: 0;\n  border: 1px dashed var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-template-btn:hover {\n  border-style: solid;\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-template-btn--delete {\n  color: var(--color-aic-error-text);\n}\n\n.aic-template-btn--delete:hover {\n  border-color: var(--color-aic-error-text);\n  color: var(--color-aic-error-text);\n  background: var(--color-aic-error-bg);\n}\n\n/* ================================================================\n   Email Score Card\n   ================================================================ */\n\n.aic-score-card {\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-sm);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-score-card__header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-score-card__circle {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 3px solid var(--aic-score-color, var(--color-aic-border));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.aic-score-card__value {\n  font-size: 13px;\n  font-weight: 700;\n  color: var(--aic-score-color, var(--color-aic-text-secondary));\n}\n\n.aic-score-card__label {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-score-card__bars {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-score-bar {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.aic-score-bar__label {\n  font-size: 11px;\n  color: var(--color-aic-text-tertiary);\n  width: 50px;\n  flex-shrink: 0;\n}\n\n.aic-score-bar__track {\n  flex: 1;\n  height: 6px;\n  background: var(--color-aic-border-light);\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.aic-score-bar__fill {\n  height: 100%;\n  border-radius: 3px;\n  background: var(--aic-bar-color, var(--color-aic-blue));\n  width: 0%;\n  transition: width 0.6s ease;\n}\n\n.aic-score-bar__val {\n  font-size: 10px;\n  font-weight: 600;\n  color: var(--color-aic-text-tertiary);\n  width: 16px;\n  text-align: right;\n  flex-shrink: 0;\n}\n\n.aic-scroll-top {\n  position: fixed;\n  bottom: 5px;\n  right: 16px;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 1px solid var(--color-aic-border);\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  transition: all var(--duration-aic) var(--ease-aic);\n  opacity: 1;\n  z-index: 50;\n}\n\n.aic-scroll-top.hidden {\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(8px);\n}\n\n.aic-scroll-top:hover {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Result section separator\n   ================================================================ */\n\n.aic-section--result {\n  margin-top: var(--spacing-sm);\n  border-top: 1px solid var(--color-aic-border);\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);\n  animation: slideIn 0.3s var(--ease-aic) both;\n}\n\n/* Section heading polish */\n.aic-section h2 {\n  letter-spacing: 0.01em;\n}\n\n/* ================================================================\n   Form controls — shared styles for select, input, textarea\n   ================================================================ */\n\n.aic-select {\n  display: block;\n  width: 100%;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  cursor: pointer;\n  appearance: none;\n  background-image: url(${d});\n  background-repeat: no-repeat;\n  background-position: right 8px center;\n  padding-right: 28px;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-select:hover {\n  border-color: var(--color-aic-text-secondary);\n}\n\n.aic-select:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n.aic-input {\n  flex: 1;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-input::placeholder {\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-input:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n/* ================================================================\n   Radio group\n   ================================================================ */\n\n.aic-radio-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n\n.aic-radio-group--vertical {\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-radio {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-radio input[type="radio"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 50%;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-radio input[type="radio"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Checkbox\n   ================================================================ */\n\n.aic-checkbox {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-checkbox input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 3px;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-checkbox input[type="checkbox"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked {\n  background: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  width: 4px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n/* ================================================================\n   Context banner (reply-context)\n   ================================================================ */\n\n.aic-context-banner {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-lg);\n}\n\n/* ================================================================\n   Hint text\n   ================================================================ */\n\n.aic-hint {\n  font-size: var(--text-sm);\n  color: var(--color-aic-text-tertiary);\n  margin-bottom: var(--spacing-lg);\n  font-style: italic;\n}\n\n/* ================================================================\n   Reply suggestion chips\n   ================================================================ */\n\n.aic-suggestion-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border: 1px solid var(--color-aic-border);\n  border-radius: 999px;\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  font-size: var(--text-xs);\n  line-height: 1.4;\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-suggestion-chip:hover {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-suggestion-chip--active {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.08);\n}\n\n/* ================================================================\n   Preview — rendered HTML content area\n   ================================================================ */\n\n.aic-preview {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-md);\n  font-size: var(--text-md);\n  line-height: 1.65;\n  margin-bottom: var(--spacing-lg);\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.aic-preview[contenteditable="true"] {\n  cursor: text;\n  outline: none;\n  transition: border-color var(--duration-aic) ease,\n    box-shadow var(--duration-aic) ease;\n}\n\n.aic-preview[contenteditable="true"]:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n}\n\n.aic-copy-btn {\n  position: absolute;\n  top: var(--spacing-sm);\n  right: var(--spacing-sm);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-xs);\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-tertiary);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) ease,\n    color var(--duration-aic) ease,\n    background var(--duration-aic) ease;\n}\n\n.aic-copy-btn:hover {\n  opacity: 1;\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-copy-btn--success {\n  opacity: 1;\n  color: var(--color-aic-green);\n}\n\n.aic-preview p {\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview p:last-child {\n  margin-bottom: 0;\n}\n\n.aic-preview ul,\n.aic-preview ol {\n  padding-left: 1.5em;\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview li {\n  margin-bottom: var(--spacing-xs);\n}\n\n/* ================================================================\n   Loading overlay\n   ================================================================ */\n\n.aic-loading {\n  position: fixed;\n  inset: 0;\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.85);\n  z-index: 50;\n  backdrop-filter: blur(4px);\n  opacity: 0;\n  transition: opacity var(--duration-aic) ease;\n}\n\n.aic-loading:not(.hidden) {\n  display: flex;\n  opacity: 1;\n}\n\n.aic-loading.aic-loading--fade-out {\n  opacity: 0;\n}\n\n.aic-loading__spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--color-aic-border-light);\n  border-top-color: var(--color-aic-blue);\n  border-radius: 50%;\n  animation: spin 0.7s linear infinite;\n  margin-bottom: var(--spacing-md);\n}\n\n/* ================================================================\n   Error banner\n   ================================================================ */\n\n.aic-error {\n  position: fixed;\n  bottom: var(--spacing-md);\n  left: var(--spacing-md);\n  right: var(--spacing-md);\n  display: none;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  background: var(--color-aic-error-bg);\n  border: 1px solid var(--color-aic-error-border);\n  border-radius: var(--radius-sm);\n  color: var(--color-aic-error-text);\n  font-size: var(--text-sm);\n  z-index: 50;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.aic-error:not(.hidden) {\n  display: flex;\n}\n\n.aic-error__dismiss {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: var(--radius-xs);\n  background: transparent;\n  border: none;\n  color: var(--color-aic-error-text);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) var(--ease-aic);\n}\n\n.aic-error__dismiss:hover {\n  opacity: 1;\n}\n\n/* ================================================================\n   Diff view — dynamically injected by JS\n   ================================================================ */\n\n.aic-diff {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-diff__panel {\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-diff__panel--improved {\n  border-color: rgba(26, 127, 55, 0.2);\n}\n\n.aic-diff__label {\n  font-size: var(--text-xs);\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  padding: 5px 10px;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  border-bottom: 1px solid var(--color-aic-border-light);\n}\n\n.aic-diff__panel--improved .aic-diff__label {\n  background: rgba(26, 127, 55, 0.05);\n  color: var(--color-aic-success);\n}\n\n.aic-diff__content {\n  padding: 10px 12px;\n  font-size: var(--text-sm);\n  line-height: 1.7;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.aic-diff__del {\n  background: #ffeef0;\n  color: #b31d28;\n  text-decoration: line-through;\n  text-decoration-color: rgba(179, 29, 40, 0.4);\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n.aic-diff__ins {\n  background: #e6ffec;\n  color: #22863a;\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n/* ================================================================\n   Checklist — dynamically injected action items\n   ================================================================ */\n\n.aic-task-list {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-task-item {\n  display: flex;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) 10px;\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-task-item:hover {\n  border-color: var(--color-aic-border);\n}\n\n.aic-task-item__check {\n  flex-shrink: 0;\n  display: flex;\n  align-items: flex-start;\n  padding-top: 1px;\n  cursor: pointer;\n}\n\n.aic-task-item__check input[type="checkbox"] {\n  width: 16px;\n  height: 16px;\n  accent-color: var(--color-aic-blue);\n  cursor: pointer;\n}\n\n.aic-task-item__body {\n  flex: 1;\n  min-width: 0;\n}\n\n.aic-task-item__text {\n  font-size: var(--text-md);\n  line-height: 1.5;\n  color: var(--color-aic-text);\n}\n\n.aic-task-item__meta {\n  display: flex;\n  gap: var(--spacing-md);\n  flex-wrap: wrap;\n  margin-top: 2px;\n  font-size: var(--text-xs);\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-task-item__owner strong,\n.aic-task-item__deadline strong {\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-task-item:has(input[type="checkbox"]:checked) .aic-task-item__text {\n  text-decoration: line-through;\n  color: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Translation — dynamically injected side-by-side panels\n   ================================================================ */\n\n.aic-translate-view {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-translate-panel {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-translate-panel__label {\n  padding: 6px 10px;\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n  background: var(--color-aic-bg);\n  border-bottom: 1px solid var(--color-aic-border-light);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.aic-translate-panel__text {\n  padding: 10px;\n  font-size: var(--text-md);\n  line-height: 1.6;\n  color: var(--color-aic-text);\n  max-height: 240px;\n  overflow-y: auto;\n}\n\n.aic-translate-panel--target {\n  border-color: rgba(59, 158, 255, 0.2);\n}\n\n.aic-translate-panel--target .aic-translate-panel__label {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n}\n\n/* ================================================================\n   Spinner keyframes\n   ================================================================ */\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes focusPulse {\n  0%, 100% {\n    box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  }\n  50% {\n    box-shadow: 0 0 0 4px var(--color-aic-blue-glow);\n  }\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-12px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n`,"",{version:3,sources:["webpack://./src/taskpane/taskpane.css"],names:[],mappings:"AAAA;;;;;;;;EAQE;;AAEF;;qEAEqE;;AAErE;EACE,wBAAwB;AAC1B;;AAEA;;qEAEqE;;AAErE;EACE,UAAU;AACZ;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,mCAAmC;EACnC,kBAAkB;AACpB;;AAEA;EACE,0CAA0C;AAC5C;;AAEA;;qEAEqE;;AAErE;EACE,oBAAoB;EACpB,mBAAmB;EACnB,sBAAsB;EACtB,4CAA4C;EAC5C,4BAA4B;EAC5B,yBAAyB;EACzB,gBAAgB;EAChB,sCAAsC;EACtC,uBAAuB;EACvB,YAAY;EACZ,oCAAoC;EACpC,eAAe;EACf;;oDAEkD;EAClD,mBAAmB;AACrB;;AAEA;EACE,4BAA4B;AAC9B;;AAEA;EACE,4BAA4B;EAC5B,0CAA0C;AAC5C;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;;qEAEqE;;AAErE;EACE,kBAAkB;EAClB,QAAQ;EACR,qBAAqB;EACrB,gBAAgB;EAChB,wCAAwC;EACxC,yCAAyC;EACzC,+BAA+B;EAC/B;;iCAE+B;EAC/B,4BAA4B;EAC5B,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,WAAW;EACX,4CAA4C;EAC5C,4BAA4B;EAC5B,yBAAyB;EACzB,4BAA4B;EAC5B,uBAAuB;EACvB,YAAY;EACZ,eAAe;EACf,0DAA0D;EAC1D,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,qCAAqC;EACrC,cAAc;AAChB;;AAEA;EACE,4BAA4B;AAC9B;;AAEA;EACE,uCAAuC;EACvC,4BAA4B;EAC5B,gBAAgB;AAClB;;AAEA;EACE,4BAA4B;AAC9B;;AAEA;EACE,4BAA4B;EAC5B,uCAAuC;EACvC,+BAA+B;AACjC;;AAEA;;qEAEqE;;AAErE;EACE,oBAAoB;EACpB,mBAAmB;EACnB,uBAAuB;EACvB,sBAAsB;EACtB,8BAA8B;EAC9B,+BAA+B;EAC/B,4BAA4B;EAC5B,yBAAyB;EACzB,gBAAgB;EAChB,eAAe;EACf,mDAAmD;EACnD,mBAAmB;EACnB,6BAA6B;EAC7B,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,wCAAwC;EACxC,mBAAmB;AACrB;;AAEA;;EAEE,YAAY;EACZ,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA,oDAAoD;AACpD;EACE,oBAAoB;EACpB,kBAAkB;EAClB,6BAA6B;AAC/B;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,QAAQ;EACR,SAAS;EACT,qBAAqB;EACrB,8BAA8B;EAC9B,+BAA+B;EAC/B,kBAAkB;EAClB,YAAY;EACZ,oCAAoC;AACtC;;AAEA,kDAAkD;AAClD,4CAA4C,oCAAoC,EAAE;AAClF,8CAA8C,sCAAsC,EAAE;AACtF,2CAA2C,oCAAoC,EAAE;;AAEjF,0BAA0B;AAC1B;EACE,iCAAiC;EACjC,oCAAoC;EACpC,mCAAmC;AACrC;;AAEA;EACE,uCAAuC;EACvC,yCAAyC;EACzC,8CAA8C;AAChD;;AAEA,yBAAyB;AACzB;EACE,+BAA+B;EAC/B,sCAAsC;EACtC,qCAAqC;AACvC;;AAEA;EACE,6CAA6C;EAC7C,4BAA4B;EAC5B,qCAAqC;AACvC;;AAEA,6CAA6C;;AAE7C,6CAA6C;AAC7C;EACE,kBAAkB;EAClB,QAAQ;EACR,UAAU;EACV,WAAW;EACX,YAAY;EACZ,UAAU;EACV,YAAY;EACZ,kBAAkB;EAClB,qCAAqC;EACrC,qCAAqC;EACrC,eAAe;EACf,cAAc;EACd,eAAe;EACf,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mDAAmD;AACrD;;AAEA;EACE,qCAAqC;EACrC,kCAAkC;AACpC;;AAEA,6CAA6C;AAC7C;EACE,mCAAmC;EACnC,oCAAoC;EACpC,qCAAqC;EACrC,YAAY;EACZ,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,yCAAyC;EACzC,2CAA2C;AAC7C;;AAEA,kDAAkD;AAClD;EACE,+CAA+C;EAC/C,iDAAiD;EACjD,+CAA+C;AACjD;;AAEA,8CAA8C;AAC9C;EACE,iBAAiB;AACnB;;AAEA,gCAAgC;AAChC;EACE,uBAAuB;EACvB,kCAAkC;EAClC,2CAA2C;AAC7C;;AAEA;EACE,qCAAqC;EACrC,yCAAyC;AAC3C;;AAEA;EACE,uBAAuB;EACvB,sCAAsC;EACtC,0CAA0C;EAC1C,wCAAwC;AAC1C;;AAEA;EACE,4BAA4B;EAC5B,mCAAmC;EACnC,mBAAmB;EACnB,mCAAmC;AACrC;;AAEA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA,gCAAgC;AAChC;EACE,kCAAkC;AACpC;;AAEA;;qEAEqE;;AAErE;;qEAEqE;;AAErE;EACE,OAAO;EACP,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,UAAU;EACV,cAAc;EACd,0CAA0C;EAC1C,+BAA+B;EAC/B,uBAAuB;EACvB,sCAAsC;EACtC,eAAe;EACf,wCAAwC;AAC1C;;AAEA;EACE,mBAAmB;EACnB,mCAAmC;EACnC,4BAA4B;EAC5B,mCAAmC;AACrC;;AAEA;EACE,kCAAkC;AACpC;;AAEA;EACE,yCAAyC;EACzC,kCAAkC;EAClC,qCAAqC;AACvC;;AAEA;;qEAEqE;;AAErE;EACE,yCAAyC;EACzC,+BAA+B;EAC/B,4CAA4C;EAC5C,gCAAgC;EAChC,qCAAqC;AACvC;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,gCAAgC;AAClC;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,iEAAiE;EACjE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,8DAA8D;AAChE;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,sCAAsC;AACxC;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,QAAQ;AACV;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,qCAAqC;EACrC,WAAW;EACX,cAAc;AAChB;;AAEA;EACE,OAAO;EACP,WAAW;EACX,yCAAyC;EACzC,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,YAAY;EACZ,kBAAkB;EAClB,uDAAuD;EACvD,SAAS;EACT,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,qCAAqC;EACrC,WAAW;EACX,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,WAAW;EACX,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,yCAAyC;EACzC,qCAAqC;EACrC,sCAAsC;EACtC,eAAe;EACf,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,yCAAyC;EACzC,mDAAmD;EACnD,UAAU;EACV,WAAW;AACb;;AAEA;EACE,UAAU;EACV,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;EACE,iCAAiC;EACjC,oCAAoC;EACpC,mCAAmC;AACrC;;AAEA;;qEAEqE;;AAErE;EACE,6BAA6B;EAC7B,6CAA6C;EAC7C,+CAA+C;EAC/C,4CAA4C;AAC9C;;AAEA,2BAA2B;AAC3B;EACE,sBAAsB;AACxB;;AAEA;;qEAEqE;;AAErE;EACE,cAAc;EACd,WAAW;EACX,0BAA0B;EAC1B,4BAA4B;EAC5B,yBAAyB;EACzB,4BAA4B;EAC5B,+BAA+B;EAC/B,yCAAyC;EACzC,+BAA+B;EAC/B,aAAa;EACb,eAAe;EACf,gBAAgB;EAChB,yDAA0Q;EAC1Q,4BAA4B;EAC5B,qCAAqC;EACrC,mBAAmB;EACnB;;kDAEgD;AAClD;;AAEA;EACE,6CAA6C;AAC/C;;AAEA;EACE,mCAAmC;EACnC,gDAAgD;EAChD,+CAA+C;AACjD;;AAEA;EACE,OAAO;EACP,0BAA0B;EAC1B,4BAA4B;EAC5B,yBAAyB;EACzB,4BAA4B;EAC5B,+BAA+B;EAC/B,yCAAyC;EACzC,+BAA+B;EAC/B,aAAa;EACb;;kDAEgD;AAClD;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,mCAAmC;EACnC,gDAAgD;EAChD,+CAA+C;AACjD;;AAEA;;qEAEqE;;AAErE;EACE,aAAa;EACb,eAAe;EACf,sBAAsB;AACxB;;AAEA;EACE,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,oBAAoB;EACpB,mBAAmB;EACnB,QAAQ;EACR,eAAe;EACf,yBAAyB;EACzB,4BAA4B;AAC9B;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,WAAW;EACX,YAAY;EACZ,2CAA2C;EAC3C,kBAAkB;EAClB,SAAS;EACT,eAAe;EACf,kBAAkB;EAClB,cAAc;EACd,4DAA4D;AAC9D;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,gCAAgC;EAChC,UAAU;EACV,WAAW;EACX,kBAAkB;EAClB,iCAAiC;AACnC;;AAEA;;qEAEqE;;AAErE;EACE,oBAAoB;EACpB,mBAAmB;EACnB,QAAQ;EACR,eAAe;EACf,yBAAyB;EACzB,4BAA4B;AAC9B;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,WAAW;EACX,YAAY;EACZ,2CAA2C;EAC3C,kBAAkB;EAClB,SAAS;EACT,eAAe;EACf,kBAAkB;EAClB,cAAc;EACd,mDAAmD;AACrD;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,iCAAiC;EACjC,mCAAmC;AACrC;;AAEA;EACE,WAAW;EACX,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,UAAU;EACV,WAAW;EACX,mBAAmB;EACnB,yBAAyB;EACzB,wBAAwB;AAC1B;;AAEA;;qEAEqE;;AAErE;EACE,qCAAqC;EACrC,+CAA+C;EAC/C,+BAA+B;EAC/B,4CAA4C;EAC5C,gCAAgC;AAClC;;AAEA;;qEAEqE;;AAErE;EACE,yBAAyB;EACzB,qCAAqC;EACrC,gCAAgC;EAChC,kBAAkB;AACpB;;AAEA;;qEAEqE;;AAErE;EACE,oBAAoB;EACpB,mBAAmB;EACnB,sBAAsB;EACtB,4CAA4C;EAC5C,yCAAyC;EACzC,oBAAoB;EACpB,+BAA+B;EAC/B,sCAAsC;EACtC,yBAAyB;EACzB,gBAAgB;EAChB,eAAe;EACf,wCAAwC;AAC1C;;AAEA;EACE,mCAAmC;EACnC,4BAA4B;EAC5B,qCAAqC;AACvC;;AAEA;EACE,mCAAmC;EACnC,4BAA4B;EAC5B,mCAAmC;AACrC;;AAEA;;qEAEqE;;AAErE;EACE,qCAAqC;EACrC,+CAA+C;EAC/C,+BAA+B;EAC/B,0BAA0B;EAC1B,yBAAyB;EACzB,iBAAiB;EACjB,gCAAgC;EAChC,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb;uCACqC;AACvC;;AAEA;EACE,mCAAmC;EACnC,gDAAgD;AAClD;;AAEA;EACE,kBAAkB;EAClB,sBAAsB;EACtB,wBAAwB;EACxB,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,+CAA+C;EAC/C,+BAA+B;EAC/B,+BAA+B;EAC/B,qCAAqC;EACrC,eAAe;EACf,YAAY;EACZ;;uCAEqC;AACvC;;AAEA;EACE,UAAU;EACV,4BAA4B;EAC5B,qCAAqC;AACvC;;AAEA;EACE,UAAU;EACV,6BAA6B;AAC/B;;AAEA;EACE,gCAAgC;AAClC;;AAEA;EACE,gBAAgB;AAClB;;AAEA;;EAEE,mBAAmB;EACnB,gCAAgC;AAClC;;AAEA;EACE,gCAAgC;AAClC;;AAEA;;qEAEqE;;AAErE;EACE,eAAe;EACf,QAAQ;EACR,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;EACvB,qCAAqC;EACrC,WAAW;EACX,0BAA0B;EAC1B,UAAU;EACV,4CAA4C;AAC9C;;AAEA;EACE,aAAa;EACb,UAAU;AACZ;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,+CAA+C;EAC/C,uCAAuC;EACvC,kBAAkB;EAClB,oCAAoC;EACpC,gCAAgC;AAClC;;AAEA;;qEAEqE;;AAErE;EACE,eAAe;EACf,yBAAyB;EACzB,uBAAuB;EACvB,wBAAwB;EACxB,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,4CAA4C;EAC5C,qCAAqC;EACrC,+CAA+C;EAC/C,+BAA+B;EAC/B,kCAAkC;EAClC,yBAAyB;EACzB,WAAW;EACX,yCAAyC;AAC3C;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,WAAW;EACX,YAAY;EACZ,+BAA+B;EAC/B,uBAAuB;EACvB,YAAY;EACZ,kCAAkC;EAClC,eAAe;EACf,YAAY;EACZ,uDAAuD;AACzD;;AAEA;EACE,UAAU;AACZ;;AAEA;;qEAEqE;;AAErE;EACE,aAAa;EACb,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,+CAA+C;EAC/C,+BAA+B;EAC/B,gBAAgB;AAClB;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,yBAAyB;EACzB,gBAAgB;EAChB,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;EACjB,qCAAqC;EACrC,qCAAqC;EACrC,sDAAsD;AACxD;;AAEA;EACE,mCAAmC;EACnC,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,qBAAqB;EACrB,qBAAqB;EACrB,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,cAAc;EACd,6BAA6B;EAC7B,6CAA6C;EAC7C,kBAAkB;EAClB,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,cAAc;EACd,kBAAkB;EAClB,cAAc;AAChB;;AAEA;;qEAEqE;;AAErE;EACE,aAAa;EACb,sBAAsB;EACtB,QAAQ;AACV;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,+BAA+B;EAC/B,qCAAqC;EACrC,+CAA+C;EAC/C,+BAA+B;EAC/B,4DAA4D;AAC9D;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,cAAc;EACd,aAAa;EACb,uBAAuB;EACvB,gBAAgB;EAChB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,mCAAmC;EACnC,eAAe;AACjB;;AAEA;EACE,OAAO;EACP,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,gBAAgB;EAChB,4BAA4B;AAC9B;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,eAAe;EACf,eAAe;EACf,yBAAyB;EACzB,qCAAqC;AACvC;;AAEA;;EAEE,gBAAgB;EAChB,sCAAsC;AACxC;;AAEA;EACE,6BAA6B;EAC7B,qCAAqC;AACvC;;AAEA;;qEAEqE;;AAErE;EACE,aAAa;EACb,sBAAsB;EACtB,sBAAsB;AACxB;;AAEA;EACE,qCAAqC;EACrC,+CAA+C;EAC/C,+BAA+B;EAC/B,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,gBAAgB;EAChB,sCAAsC;EACtC,+BAA+B;EAC/B,sDAAsD;EACtD,yBAAyB;EACzB,qBAAqB;AACvB;;AAEA;EACE,aAAa;EACb,yBAAyB;EACzB,gBAAgB;EAChB,4BAA4B;EAC5B,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,4BAA4B;EAC5B,uCAAuC;AACzC;;AAEA;;qEAEqE;;AAErE;EACE;IACE,yBAAyB;EAC3B;AACF;;AAEA;EACE;IACE,gDAAgD;EAClD;EACA;IACE,gDAAgD;EAClD;AACF;;AAEA;EACE;IACE,UAAU;IACV,4BAA4B;EAC9B;EACA;IACE,UAAU;IACV,wBAAwB;EAC1B;AACF",sourcesContent:['/**\n * AI Compose — Component Styles\n *\n * Component-level CSS for interactive states, dynamic content,\n * and polished UI elements that benefit from semantic class names.\n * Design tokens come from `src/styles/main.css` via Tailwind @theme.\n *\n * © Rizonetech (Pty) Ltd. — https://rizonesoft.com\n */\n\n/* ================================================================\n   Utility — hidden (Tailwind v4 may not scan .ts files for this)\n   ================================================================ */\n\n.hidden {\n  display: none !important;\n}\n\n/* ================================================================\n   Scrollbar — slim, theme-aware\n   ================================================================ */\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--color-aic-border);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Tab bar\n   ================================================================ */\n\n.aic-tab {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  color: var(--color-aic-text-secondary);\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid transparent;\n  cursor: pointer;\n  transition:\n    color var(--duration-aic) var(--ease-aic),\n    border-color var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n}\n\n.aic-tab:hover {\n  color: var(--color-aic-text);\n}\n\n.aic-tab--active {\n  color: var(--color-aic-blue);\n  border-bottom-color: var(--color-aic-blue);\n}\n\n.aic-tab--icon {\n  padding: var(--spacing-sm);\n}\n\n/* ================================================================\n   Dropdown menu — proper menu component\n   ================================================================ */\n\n.aic-dropdown {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 4px);\n  min-width: 200px;\n  background: var(--color-aic-bg-elevated);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  box-shadow:\n    0 4px 16px rgba(0, 0, 0, 0.1),\n    0 1px 4px rgba(0, 0, 0, 0.06);\n  padding: var(--spacing-xs) 0;\n  z-index: 20;\n  overflow: hidden;\n}\n\n.aic-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: background var(--duration-aic) var(--ease-aic);\n  text-align: left;\n}\n\n.aic-dropdown__item:hover {\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-dropdown__item:active {\n  background: var(--color-aic-blue-light);\n}\n\n.aic-dropdown__item svg {\n  color: var(--color-aic-text-tertiary);\n  flex-shrink: 0;\n}\n\n.aic-dropdown__item:hover svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-dropdown__item--active {\n  background: var(--color-aic-blue-light);\n  color: var(--color-aic-blue);\n  font-weight: 500;\n}\n\n.aic-dropdown__item--active svg {\n  color: var(--color-aic-blue);\n}\n\n.aic-split--open .aic-tab--icon {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n  border-radius: var(--radius-xs);\n}\n\n/* ================================================================\n   Buttons\n   ================================================================ */\n\n.aic-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-xs);\n  padding: 9px var(--spacing-lg);\n  border-radius: var(--radius-xs);\n  font-family: var(--font-aic);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--duration-aic) var(--ease-aic);\n  white-space: nowrap;\n  border: 1px solid transparent;\n  line-height: 1;\n}\n\n.aic-btn:active {\n  transform: scale(0.97);\n}\n\n.aic-btn:focus-visible {\n  outline: 2px solid var(--color-aic-blue);\n  outline-offset: 2px;\n}\n\n.aic-btn:disabled,\n.aic-btn[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n/* Loading state — inline spinner replaces content */\n.aic-btn--loading {\n  pointer-events: none;\n  position: relative;\n  color: transparent !important;\n}\n\n.aic-btn--loading::after {\n  content: "";\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 50%;\n  left: 50%;\n  margin: -8px 0 0 -8px;\n  border: 2px solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  opacity: 0.8;\n  animation: spin 0.6s linear infinite;\n}\n\n/* Restore visible colour for the pseudo-element */\n.aic-btn--primary.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n.aic-btn--secondary.aic-btn--loading::after { color: var(--color-aic-text-secondary); }\n.aic-btn--accent.aic-btn--loading::after { color: var(--color-aic-text-inverse); }\n\n/* Primary — blue filled */\n.aic-btn--primary {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-btn--primary:hover {\n  background: var(--color-aic-blue-hover);\n  border-color: var(--color-aic-blue-hover);\n  box-shadow: 0 2px 8px rgba(59, 158, 255, 0.25);\n}\n\n/* Secondary — outlined */\n.aic-btn--secondary {\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  border-color: var(--color-aic-border);\n}\n\n.aic-btn--secondary:hover {\n  border-color: var(--color-aic-text-secondary);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n/* Accent — purple filled, icon-only square */\n\n/* Clear / reset button (×) for text inputs */\n.aic-btn-clear {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  border: none;\n  border-radius: 50%;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  font-size: 14px;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-btn-clear:hover {\n  background: var(--color-aic-error-bg);\n  color: var(--color-aic-error-text);\n}\n\n/* Accent — purple filled, icon-only square */\n.aic-btn--accent {\n  background: var(--color-aic-purple);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-purple);\n  padding: 9px;\n  aspect-ratio: 1;\n  justify-content: center;\n}\n\n.aic-btn--accent:hover {\n  background: var(--color-aic-purple-hover);\n  border-color: var(--color-aic-purple-hover);\n}\n\n/* Success state (JS-toggled after copy actions) */\n.aic-btn--success {\n  background: var(--color-aic-success) !important;\n  border-color: var(--color-aic-success) !important;\n  color: var(--color-aic-text-inverse) !important;\n}\n\n/* Icon-only toggle (e.g. API key show/hide) */\n.aic-btn--icon-toggle {\n  padding: 8px 10px;\n}\n\n/* Danger — destructive action */\n.aic-btn--danger {\n  background: transparent;\n  color: var(--color-aic-error-text);\n  border-color: var(--color-aic-error-border);\n}\n\n.aic-btn--danger:hover {\n  background: var(--color-aic-error-bg);\n  border-color: var(--color-aic-error-text);\n}\n\n.aic-btn--ghost {\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  border: 1px dashed var(--color-aic-border);\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-btn--ghost:hover {\n  color: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n  border-style: solid;\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-btn--ghost:disabled {\n  opacity: 0.6;\n  cursor: wait;\n}\n\n/* Utility — error text colour */\n.aic-text-error {\n  color: var(--color-aic-error-text);\n}\n\n/* ================================================================\n   Scroll-to-top button\n   ================================================================ */\n\n/* ================================================================\n   Template controls — compact select & buttons\n   ================================================================ */\n\n.aic-template-select {\n  flex: 1;\n  min-width: 0;\n  font-size: 11px;\n}\n\n.aic-template-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30px;\n  height: 30px;\n  padding: 0;\n  flex-shrink: 0;\n  border: 1px dashed var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  background: transparent;\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-template-btn:hover {\n  border-style: solid;\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.06);\n}\n\n.aic-template-btn--delete {\n  color: var(--color-aic-error-text);\n}\n\n.aic-template-btn--delete:hover {\n  border-color: var(--color-aic-error-text);\n  color: var(--color-aic-error-text);\n  background: var(--color-aic-error-bg);\n}\n\n/* ================================================================\n   Email Score Card\n   ================================================================ */\n\n.aic-score-card {\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-md);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-sm);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-score-card__header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-score-card__circle {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 3px solid var(--aic-score-color, var(--color-aic-border));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.aic-score-card__value {\n  font-size: 13px;\n  font-weight: 700;\n  color: var(--aic-score-color, var(--color-aic-text-secondary));\n}\n\n.aic-score-card__label {\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-score-card__bars {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-score-bar {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.aic-score-bar__label {\n  font-size: 11px;\n  color: var(--color-aic-text-tertiary);\n  width: 50px;\n  flex-shrink: 0;\n}\n\n.aic-score-bar__track {\n  flex: 1;\n  height: 6px;\n  background: var(--color-aic-border-light);\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.aic-score-bar__fill {\n  height: 100%;\n  border-radius: 3px;\n  background: var(--aic-bar-color, var(--color-aic-blue));\n  width: 0%;\n  transition: width 0.6s ease;\n}\n\n.aic-score-bar__val {\n  font-size: 10px;\n  font-weight: 600;\n  color: var(--color-aic-text-tertiary);\n  width: 16px;\n  text-align: right;\n  flex-shrink: 0;\n}\n\n.aic-scroll-top {\n  position: fixed;\n  bottom: 5px;\n  right: 16px;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 1px solid var(--color-aic-border);\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-secondary);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  transition: all var(--duration-aic) var(--ease-aic);\n  opacity: 1;\n  z-index: 50;\n}\n\n.aic-scroll-top.hidden {\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(8px);\n}\n\n.aic-scroll-top:hover {\n  background: var(--color-aic-blue);\n  color: var(--color-aic-text-inverse);\n  border-color: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Result section separator\n   ================================================================ */\n\n.aic-section--result {\n  margin-top: var(--spacing-sm);\n  border-top: 1px solid var(--color-aic-border);\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);\n  animation: slideIn 0.3s var(--ease-aic) both;\n}\n\n/* Section heading polish */\n.aic-section h2 {\n  letter-spacing: 0.01em;\n}\n\n/* ================================================================\n   Form controls — shared styles for select, input, textarea\n   ================================================================ */\n\n.aic-select {\n  display: block;\n  width: 100%;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  cursor: pointer;\n  appearance: none;\n  background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'12\' height=\'12\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%235E6470\' stroke-width=\'2.5\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3E%3Cpath d=\'m6 9 6 6 6-6\'/%3E%3C/svg%3E");\n  background-repeat: no-repeat;\n  background-position: right 8px center;\n  padding-right: 28px;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-select:hover {\n  border-color: var(--color-aic-text-secondary);\n}\n\n.aic-select:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n.aic-input {\n  flex: 1;\n  padding: var(--spacing-sm);\n  font-family: var(--font-aic);\n  font-size: var(--text-md);\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg);\n  border: 1px solid var(--color-aic-border);\n  border-radius: var(--radius-sm);\n  outline: none;\n  transition:\n    border-color var(--duration-aic) var(--ease-aic),\n    box-shadow var(--duration-aic) var(--ease-aic);\n}\n\n.aic-input::placeholder {\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-input:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  animation: focusPulse 1.5s ease-in-out infinite;\n}\n\n/* ================================================================\n   Radio group\n   ================================================================ */\n\n.aic-radio-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n\n.aic-radio-group--vertical {\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-radio {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-radio input[type="radio"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 50%;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-radio input[type="radio"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-radio input[type="radio"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--color-aic-blue);\n}\n\n/* ================================================================\n   Checkbox\n   ================================================================ */\n\n.aic-checkbox {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  font-size: var(--text-sm);\n  color: var(--color-aic-text);\n}\n\n.aic-checkbox input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 14px;\n  height: 14px;\n  border: 1.5px solid var(--color-aic-border);\n  border-radius: 3px;\n  margin: 0;\n  cursor: pointer;\n  position: relative;\n  flex-shrink: 0;\n  transition: all var(--duration-aic) var(--ease-aic);\n}\n\n.aic-checkbox input[type="checkbox"]:hover {\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked {\n  background: var(--color-aic-blue);\n  border-color: var(--color-aic-blue);\n}\n\n.aic-checkbox input[type="checkbox"]:checked::after {\n  content: "";\n  position: absolute;\n  top: 1px;\n  left: 4px;\n  width: 4px;\n  height: 8px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n/* ================================================================\n   Context banner (reply-context)\n   ================================================================ */\n\n.aic-context-banner {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-bottom: var(--spacing-lg);\n}\n\n/* ================================================================\n   Hint text\n   ================================================================ */\n\n.aic-hint {\n  font-size: var(--text-sm);\n  color: var(--color-aic-text-tertiary);\n  margin-bottom: var(--spacing-lg);\n  font-style: italic;\n}\n\n/* ================================================================\n   Reply suggestion chips\n   ================================================================ */\n\n.aic-suggestion-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border: 1px solid var(--color-aic-border);\n  border-radius: 999px;\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-secondary);\n  font-size: var(--text-xs);\n  line-height: 1.4;\n  cursor: pointer;\n  transition: all var(--duration-aic) ease;\n}\n\n.aic-suggestion-chip:hover {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-suggestion-chip--active {\n  border-color: var(--color-aic-blue);\n  color: var(--color-aic-blue);\n  background: rgba(37, 99, 235, 0.08);\n}\n\n/* ================================================================\n   Preview — rendered HTML content area\n   ================================================================ */\n\n.aic-preview {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  padding: var(--spacing-md);\n  font-size: var(--text-md);\n  line-height: 1.65;\n  margin-bottom: var(--spacing-lg);\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.aic-preview[contenteditable="true"] {\n  cursor: text;\n  outline: none;\n  transition: border-color var(--duration-aic) ease,\n    box-shadow var(--duration-aic) ease;\n}\n\n.aic-preview[contenteditable="true"]:focus {\n  border-color: var(--color-aic-blue);\n  box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n}\n\n.aic-copy-btn {\n  position: absolute;\n  top: var(--spacing-sm);\n  right: var(--spacing-sm);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-xs);\n  background: var(--color-aic-bg);\n  color: var(--color-aic-text-tertiary);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) ease,\n    color var(--duration-aic) ease,\n    background var(--duration-aic) ease;\n}\n\n.aic-copy-btn:hover {\n  opacity: 1;\n  color: var(--color-aic-text);\n  background: var(--color-aic-bg-panel);\n}\n\n.aic-copy-btn--success {\n  opacity: 1;\n  color: var(--color-aic-green);\n}\n\n.aic-preview p {\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview p:last-child {\n  margin-bottom: 0;\n}\n\n.aic-preview ul,\n.aic-preview ol {\n  padding-left: 1.5em;\n  margin-bottom: var(--spacing-sm);\n}\n\n.aic-preview li {\n  margin-bottom: var(--spacing-xs);\n}\n\n/* ================================================================\n   Loading overlay\n   ================================================================ */\n\n.aic-loading {\n  position: fixed;\n  inset: 0;\n  display: none;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.85);\n  z-index: 50;\n  backdrop-filter: blur(4px);\n  opacity: 0;\n  transition: opacity var(--duration-aic) ease;\n}\n\n.aic-loading:not(.hidden) {\n  display: flex;\n  opacity: 1;\n}\n\n.aic-loading.aic-loading--fade-out {\n  opacity: 0;\n}\n\n.aic-loading__spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--color-aic-border-light);\n  border-top-color: var(--color-aic-blue);\n  border-radius: 50%;\n  animation: spin 0.7s linear infinite;\n  margin-bottom: var(--spacing-md);\n}\n\n/* ================================================================\n   Error banner\n   ================================================================ */\n\n.aic-error {\n  position: fixed;\n  bottom: var(--spacing-md);\n  left: var(--spacing-md);\n  right: var(--spacing-md);\n  display: none;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) var(--spacing-md);\n  background: var(--color-aic-error-bg);\n  border: 1px solid var(--color-aic-error-border);\n  border-radius: var(--radius-sm);\n  color: var(--color-aic-error-text);\n  font-size: var(--text-sm);\n  z-index: 50;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.aic-error:not(.hidden) {\n  display: flex;\n}\n\n.aic-error__dismiss {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: var(--radius-xs);\n  background: transparent;\n  border: none;\n  color: var(--color-aic-error-text);\n  cursor: pointer;\n  opacity: 0.5;\n  transition: opacity var(--duration-aic) var(--ease-aic);\n}\n\n.aic-error__dismiss:hover {\n  opacity: 1;\n}\n\n/* ================================================================\n   Diff view — dynamically injected by JS\n   ================================================================ */\n\n.aic-diff {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-diff__panel {\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-diff__panel--improved {\n  border-color: rgba(26, 127, 55, 0.2);\n}\n\n.aic-diff__label {\n  font-size: var(--text-xs);\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  padding: 5px 10px;\n  background: var(--color-aic-bg-panel);\n  color: var(--color-aic-text-tertiary);\n  border-bottom: 1px solid var(--color-aic-border-light);\n}\n\n.aic-diff__panel--improved .aic-diff__label {\n  background: rgba(26, 127, 55, 0.05);\n  color: var(--color-aic-success);\n}\n\n.aic-diff__content {\n  padding: 10px 12px;\n  font-size: var(--text-sm);\n  line-height: 1.7;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.aic-diff__del {\n  background: #ffeef0;\n  color: #b31d28;\n  text-decoration: line-through;\n  text-decoration-color: rgba(179, 29, 40, 0.4);\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n.aic-diff__ins {\n  background: #e6ffec;\n  color: #22863a;\n  border-radius: 2px;\n  padding: 0 1px;\n}\n\n/* ================================================================\n   Checklist — dynamically injected action items\n   ================================================================ */\n\n.aic-task-list {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.aic-task-item {\n  display: flex;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) 10px;\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  transition: border-color var(--duration-aic) var(--ease-aic);\n}\n\n.aic-task-item:hover {\n  border-color: var(--color-aic-border);\n}\n\n.aic-task-item__check {\n  flex-shrink: 0;\n  display: flex;\n  align-items: flex-start;\n  padding-top: 1px;\n  cursor: pointer;\n}\n\n.aic-task-item__check input[type="checkbox"] {\n  width: 16px;\n  height: 16px;\n  accent-color: var(--color-aic-blue);\n  cursor: pointer;\n}\n\n.aic-task-item__body {\n  flex: 1;\n  min-width: 0;\n}\n\n.aic-task-item__text {\n  font-size: var(--text-md);\n  line-height: 1.5;\n  color: var(--color-aic-text);\n}\n\n.aic-task-item__meta {\n  display: flex;\n  gap: var(--spacing-md);\n  flex-wrap: wrap;\n  margin-top: 2px;\n  font-size: var(--text-xs);\n  color: var(--color-aic-text-tertiary);\n}\n\n.aic-task-item__owner strong,\n.aic-task-item__deadline strong {\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n}\n\n.aic-task-item:has(input[type="checkbox"]:checked) .aic-task-item__text {\n  text-decoration: line-through;\n  color: var(--color-aic-text-tertiary);\n}\n\n/* ================================================================\n   Translation — dynamically injected side-by-side panels\n   ================================================================ */\n\n.aic-translate-view {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n.aic-translate-panel {\n  background: var(--color-aic-bg-panel);\n  border: 1px solid var(--color-aic-border-light);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n}\n\n.aic-translate-panel__label {\n  padding: 6px 10px;\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: var(--color-aic-text-secondary);\n  background: var(--color-aic-bg);\n  border-bottom: 1px solid var(--color-aic-border-light);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.aic-translate-panel__text {\n  padding: 10px;\n  font-size: var(--text-md);\n  line-height: 1.6;\n  color: var(--color-aic-text);\n  max-height: 240px;\n  overflow-y: auto;\n}\n\n.aic-translate-panel--target {\n  border-color: rgba(59, 158, 255, 0.2);\n}\n\n.aic-translate-panel--target .aic-translate-panel__label {\n  color: var(--color-aic-blue);\n  background: var(--color-aic-blue-light);\n}\n\n/* ================================================================\n   Spinner keyframes\n   ================================================================ */\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes focusPulse {\n  0%, 100% {\n    box-shadow: 0 0 0 2px var(--color-aic-blue-glow);\n  }\n  50% {\n    box-shadow: 0 0 0 4px var(--color-aic-blue-glow);\n  }\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-12px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n'],sourceRoot:""}]);const p=u},76314(e){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),n.push(u))}},n}},4417(e){"use strict";e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},71354(e){"use strict";e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[n].concat([i]).join("\n")}return[n].join("\n")}},85072(e){"use strict";var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var p=t(d),A={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)n[p].references++,n[p].updater(A);else{var m=r(A,o);o.byIndex=a,n.splice(a,0,{identifier:d,updater:m,references:1})}s.push(d)}return s}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=t(i[s]);n[a].references--}for(var l=o(e,r),c=0;c<i.length;c++){var u=t(i[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}i=l}}},77659(e){"use strict";var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},10540(e){"use strict";e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},55056(e,n,t){"use strict";e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},97825(e){"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},41113(e){"use strict";e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},23753(e){"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27%235E6470%27 stroke-width=%272.5%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3E%3Cpath d=%27m6 9 6 6 6-6%27/%3E%3C/svg%3E"}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={id:o,exports:{}};return e[o](i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.b="undefined"!=typeof document&&document.baseURI||self.location.href,t.nc=void 0,(()=>{"use strict";var e=t(85072),n=t.n(e),o=t(97825),r=t.n(o),i=t(77659),s=t.n(i),a=t(55056),l=t.n(a),c=t(10540),u=t.n(c),d=t(41113),p=t.n(d),A=t(21342),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=s().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=u(),n()(A.A,m),A.A&&A.A.locals&&A.A.locals;var h=t(88969),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=s().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=u(),n()(h.A,f),h.A&&h.A.locals&&h.A.locals;var g=t(75260),E=t(89419),y=t(33422),v=t(47336),C=t(43712);let b=null,w="";async function _(e){if(!e.instructions||!e.instructions.trim())throw new Error("Please enter your instructions or bullet points.");const n=function(e){switch(e){case"short":return"Keep it brief — 2-4 sentences maximum.";case"detailed":return"Write a thorough, detailed email covering all points.";default:return"Standard length — a few short paragraphs."}}(e.length),t=(0,v.fn)(C.mR,{INSTRUCTIONS:`${e.instructions}\n\nDesired length: ${n}`,TONE:e.tone||"professional",LANGUAGE:e.language||"English"},!0),o=await(0,g.Df)(t,{temperature:.7,maxOutputTokens:x(e.length)});return b={...e},w=o,o}function x(e){switch(e){case"short":return 512;case"detailed":return 4096;default:return 2048}}function B(e){return e.split("\n\n").map(e=>`<p>${function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(e).replace(/\n/g,"<br>")}</p>`).join("")}var T=t(87473);let I="",S=null;async function O(e){let n;try{n=(await(0,E.Ev)()).map((e,n)=>{let t=`--- Message ${n+1} ---\n`;return t+=`From: ${e.sender.name} <${e.sender.email}>\n`,t+=`Subject: ${e.subject}\n`,e.dateTime&&(t+=`Date: ${e.dateTime}\n`),t+=`\n${e.body}`,t}).join("\n\n")}catch{const[e,t,o]=await Promise.all([(0,E.k3)(),(0,E.getCurrentEmailSubject)(),(0,E.mi)()]);n=`From: ${o.name} <${o.email}>\nSubject: ${t}\n\n${e}`}if(!n.trim())throw new Error("No email content to summarize. Please make sure an email is open.");const t=(o=e.length,r=e.style,`${{brief:"brief (2-3 sentences)",standard:"standard (1 paragraph)",detailed:"detailed (multiple paragraphs)"}[o]}. ${{bullets:"Format the summary as bullet points.",paragraph:"Format the summary as flowing prose paragraphs.",tldr:"Provide a single TL;DR sentence first, followed by key points."}[r]}`);var o,r;const i=(0,v.fn)(C.mH,{EMAIL_THREAD:n,SUMMARY_LENGTH:t}),s=await(0,g.Df)(i,{temperature:.4,maxOutputTokens:k(e.length)});return I=s,S={...e},s}function k(e){switch(e){case"brief":return 256;case"detailed":return 2048;default:return 1024}}let R="",N="",P=null;const D={fix_grammar:"Fix grammar, spelling, and punctuation errors",improve_clarity:"Improve clarity and readability",make_concise:"Make the text more concise — remove unnecessary words",make_professional:"Make the tone more professional and polished"};async function M(e){const n=await async function(){if("compose"===(0,E.J5)())try{const e=await new Promise((e,n)=>{const t=Office.context.mailbox.item;t?"function"==typeof t.getSelectedDataAsync?t.getSelectedDataAsync(Office.CoercionType.Text,t=>{t.status===Office.AsyncResultStatus.Succeeded?e(t.value.data||""):n(new Error(t.error?.message||"Failed to get selected text"))}):e(""):n(new Error("No mailbox item"))});if(e.trim())return e}catch{}return(0,E.k3)()}();if(!n.trim())throw new Error("No text to improve. Select some text or open an email in compose mode.");const t=D[e.focus]||e.focus,o=(0,v.fn)(C.DS,{TEXT:n,IMPROVEMENT_FOCUS:t}),r=await(0,g.Df)(o,{temperature:.3,maxOutputTokens:2048});return R=n,N=r,P={...e},{original:n,improved:r}}function L(e,n){const t=U(e),o=U(n),{added:r,removed:i,unchanged:s}=function(e,n){const t=e.length,o=n.length;if(t>500||o>500)return{removed:new Set(Array.from({length:t},(e,n)=>n)),added:new Set(Array.from({length:o},(e,n)=>n)),unchanged:new Set};const r=Array.from({length:t+1},()=>new Array(o+1).fill(0));for(let i=1;i<=t;i++)for(let t=1;t<=o;t++)e[i-1]===n[t-1]?r[i][t]=r[i-1][t-1]+1:r[i][t]=Math.max(r[i-1][t],r[i][t-1]);const i=new Set,s=new Set;let a=t,l=o;for(;a>0&&l>0;)e[a-1]===n[l-1]?(i.add(a-1),s.add(l-1),a--,l--):r[a-1][l]>r[a][l-1]?a--:l--;const c=new Set,u=new Set,d=new Set;for(let e=0;e<t;e++)i.has(e)?d.add(e):c.add(e);for(let e=0;e<o;e++)s.has(e)||u.add(e);return{added:u,removed:c,unchanged:d}}(t,o);return`\n    <div class="aic-diff">\n      <div class="aic-diff__panel">\n        <div class="aic-diff__label">Original</div>\n        <div class="aic-diff__content">${q(t,i,"aic-diff__del")}</div>\n      </div>\n      <div class="aic-diff__panel aic-diff__panel--improved">\n        <div class="aic-diff__label">Improved</div>\n        <div class="aic-diff__content">${q(o,r,"aic-diff__ins")}</div>\n      </div>\n    </div>`}function U(e){return e.match(/\S+|\s+/g)||[]}function q(e,n,t){return e.map((e,o)=>{const r=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return n.has(o)?`<span class="${t}">${r}</span>`:r}).join("")}let G=[],j="";async function F(){const e=await async function(){try{return(await(0,E.Ev)()).map((e,n)=>{let t=`--- Message ${n+1} ---\n`;return t+=`From: ${e.sender.name} <${e.sender.email}>\n`,t+=`Subject: ${e.subject}\n`,e.dateTime&&(t+=`Date: ${e.dateTime}\n`),t+=`\n${e.body}`,t}).join("\n\n")}catch{const[e,n,t]=await Promise.all([(0,E.k3)(),(0,E.getCurrentEmailSubject)(),(0,E.mi)()]);return`From: ${t.name} <${t.email}>\nSubject: ${n}\n\n${e}`}}();if(!e.trim())throw new Error("No email content found. Please open an email first.");const n=(0,v.fn)(C.fz,{EMAIL_CONTENT:e}),t=await(0,g.Df)(n,{temperature:.2,maxOutputTokens:2048});return j=t,G=function(e){if(/no action items found/i.test(e))return[];const n=[],t=e.split(/(?:^|\n)(?:[-•*]|\d+\.)\s+/);for(const e of t){const t=e.trim();if(!t)continue;const o={task:"",owner:"—",deadline:"—"},r=t.match(/\*\*Task\*\*:\s*(.+?)(?:\n|$)/i),i=t.match(/\*\*Owner\*\*:\s*(.+?)(?:\n|$)/i),s=t.match(/\*\*Deadline\*\*:\s*(.+?)(?:\n|$)/i);r?(o.task=r[1].trim(),i&&(o.owner=i[1].trim()),s&&(o.deadline=s[1].trim())):o.task=t.replace(/\*\*/g,"").replace(/\n/g," ").trim(),o.task&&o.task.length>2&&n.push(o)}return n}(t),G}function H(e){return 0===e.length?'<p class="aic-hint">No action items found in this email.</p>':`<div class="aic-task-list">${e.map((e,n)=>`\n      <div class="aic-task-item">\n        <label class="aic-task-item__check">\n          <input type="checkbox" data-index="${n}" />\n          <span class="aic-task-item__checkmark"></span>\n        </label>\n        <div class="aic-task-item__body">\n          <div class="aic-task-item__text">${V(e.task)}</div>\n          <div class="aic-task-item__meta">\n            ${e.owner&&"—"!==e.owner?`<span class="aic-task-item__owner"><strong>Owner:</strong> ${V(e.owner)}</span>`:""}\n            ${e.deadline&&"—"!==e.deadline?`<span class="aic-task-item__deadline"><strong>Due:</strong> ${V(e.deadline)}</span>`:""}\n          </div>\n        </div>\n      </div>`).join("")}</div>`}function V(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $=null;async function W(e){const n=await(0,E.k3)();if(!n.trim())throw new Error("No email content found. Please open an email first.");const t=(0,v.fn)(C.uC,{TEXT:n,TARGET_LANGUAGE:e}),o=await(0,g.Df)(t,{temperature:.3,maxOutputTokens:4096});return $={original:n,translated:o,targetLanguage:e},$}function J(e){return`\n    <div class="aic-translate-view">\n      <div class="aic-translate-panel">\n        <div class="aic-translate-panel__label">Original</div>\n        <div class="aic-translate-panel__text">${Y(e.original)}</div>\n      </div>\n      <div class="aic-translate-panel aic-translate-panel--target">\n        <div class="aic-translate-panel__label">${Y(e.targetLanguage)}</div>\n        <div class="aic-translate-panel__text">${Y(e.translated)}</div>\n      </div>\n    </div>`}function Y(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")}const z=e=>document.getElementById(e);function K(e){return/^AIza[0-9A-Za-z_-]{35}$/.test(e)}function X(e){const n=z(e);n&&n.classList.remove("hidden")}function Q(e){const n=z(e);n&&n.classList.add("hidden")}function Z(e,n){const t=z("loading-overlay");if(!t)return;const o=t.querySelector(".aic-loading__text");o&&e&&(o.textContent=e);const r=t.querySelector(".aic-loading__estimate");if(r)if(n&&n>0){const e=Math.min(30,Math.round(8+n/100));r.textContent=`Estimated time: ~${e}s`,r.classList.remove("hidden")}else r.classList.add("hidden");t.classList.remove("aic-loading--fade-out"),X("loading-overlay")}function ee(){const e=z("loading-overlay");if(!e||e.classList.contains("hidden"))return;e.classList.add("aic-loading--fade-out");const n=()=>{e.classList.remove("aic-loading--fade-out"),Q("loading-overlay")};e.addEventListener("transitionend",n,{once:!0}),setTimeout(n,350)}function ne(e){const n=z("error-message");n&&(n.textContent=e),X("error-banner")}function te(){Q("error-banner")}function oe(e,n){const t=z(e);if(!t)return;const o=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").split("\n").map(e=>e.toLowerCase().startsWith("subject:")?`<div class="aic-preview__subject">${e}</div>`:""===e.trim()?"<br>":`<div>${e}</div>`).join("");t.innerHTML=o,re(e)}function re(e){const n=z(e),t=e.replace("-preview","-stats"),o=z(t);if(!n||!o)return;const r=(n.innerText||n.textContent||"").trim();if(!r)return void o.classList.add("hidden");const i=r.split(/\s+/).filter(e=>e.length>0).length,s=Math.max(1,Math.round(i/200));o.textContent=`${i} words · ${s} min read`,o.classList.remove("hidden")}async function ie(e,n){const t=z(n);if(!t)return;t.classList.remove("hidden");const o=t.querySelector(".aic-score-card__value");o&&(o.textContent="..."),await new Promise(e=>setTimeout(e,500));try{console.log("[Score] Requesting score...");const n=await(0,g.mm)(`Score this email:\n\n${e.slice(0,1500)}`,{model:"gemini-2.5-flash",systemInstruction:"You are an email quality scorer. Score emails on clarity, tone, conciseness, and call-to-action, each from 1 to 10.",temperature:.1,maxOutputTokens:100,responseSchema:{type:g.ZU.OBJECT,properties:{clarity:{type:g.ZU.NUMBER},tone:{type:g.ZU.NUMBER},conciseness:{type:g.ZU.NUMBER},cta:{type:g.ZU.NUMBER}},required:["clarity","tone","conciseness","cta"]}});console.log("[Score] Parsed:",n);const r=e=>Math.min(10,Math.max(1,Math.round(e))),i={clarity:r(Number(n.clarity)||7),tone:r(Number(n.tone)||7),conciseness:r(Number(n.conciseness)||7),cta:r(Number(n.cta)||7)},s=Math.round((i.clarity+i.tone+i.conciseness+i.cta)/4),a=e=>e>=7?"#22c55e":e>=5?"#eab308":"#ef4444",l=a(s);t.style.setProperty("--aic-score-color",l),o&&(o.textContent=`${s}`);const c=i;t.querySelectorAll(".aic-score-bar").forEach(e=>{const n=e.dataset.dim||"",t=c[n];if(void 0===t)return;const o=e.querySelector(".aic-score-bar__fill"),r=e.querySelector(".aic-score-bar__val");o&&(o.style.width=10*t+"%",o.style.background=a(t)),r&&(r.textContent=`${t}`)})}catch(e){console.warn("[Score] Failed:",e),o&&(o.textContent="—")}}const se={draft:["draft-section","result-section"],reply:["reply-section","reply-result-section"],summarize:["summarize-section","summarize-result-section"],improve:["improve-section","improve-result-section"],extract:["extract-section","extract-result-section"],translate:["translate-section","translate-result-section"],settings:["settings-section"],rules:["rules-section"]};function ae(e){document.querySelectorAll(".aic-tab").forEach(n=>{n.classList.toggle("aic-tab--active",n.dataset.tab===e)});for(const[n,t]of Object.entries(se)){const o=n===e;for(const e of t){const n=z(e);n&&(o?e.includes("result")||n.classList.remove("hidden"):n.classList.add("hidden"))}}te(),"reply"===e&&le()}async function le(){const e=z("reply-sender"),n=z("reply-subject");try{(0,T.jt)();const t=await(0,T.qP)();e&&(e.textContent=t.sender.name?`${t.sender.name} <${t.sender.email}>`:t.sender.email||"Unknown sender"),n&&(n.textContent=t.subject||"(no subject)")}catch{e&&(e.textContent="Could not read email"),n&&(n.textContent="—")}}async function ce(){const e=z("draft-instructions")?.value||"",n=z("draft-tone")?.value||"professional",t=z("draft-length")?.value||"medium",o=z("draft-language")?.value||"English",r=z("draft-goal")?.value||"none",i=z("draft-goal-custom")?.value||"",s={instructions:e+(0,y.buildGoalText)(r,i),tone:n,length:t,language:o};te(),Z("Generating with Gemini...",e.length);try{const e=await _(s);oe("draft-preview",e),ie(e,"draft-score"),X("result-section"),z("result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){ne(e.message||"Failed to generate draft. Please try again.")}finally{ee()}}async function ue(){te(),Z("Regenerating...");try{const e=await async function(){if(!b)throw new Error("No previous draft to regenerate. Please generate a draft first.");return _(b)}();oe("draft-preview",e),ie(e,"draft-score")}catch(e){ne(e.message||"Failed to regenerate. Please try again.")}finally{ee()}}async function de(){const e=z("refine-input"),n=e?.value||"";if(n.trim()){te(),Z("Refining...");try{const t=await async function(e){if(!w)throw new Error("No draft to refine. Please generate a draft first.");if(!e||!e.trim())throw new Error("Please enter your refinement instructions.");const n=`You are a professional email assistant.\n\nHere is the current draft email:\n\n---\n${w}\n---\n\nPlease revise the draft based on these instructions: ${e}\n\nRequirements:\n- Keep the same general format (Subject line on first line, greeting, body, sign-off)\n- Apply the requested changes while maintaining quality\n- Return only the revised email, no explanations`,t=await(0,g.Df)(n,{temperature:.6,maxOutputTokens:2048});return w=t,t}(n);oe("draft-preview",t),ie(t,"draft-score"),e&&(e.value="")}catch(e){ne(e.message||"Failed to refine. Please try again.")}finally{ee()}}else ne("Please enter refinement instructions.")}function pe(){const e=z("draft-preview");if(!e)return;const n=e.innerText||e.textContent||"";if(n.trim())try{!function(e){const{subject:n,body:t}=function(e){const n=e.split("\n");let t="",o=0;return n.length>0&&n[0].toLowerCase().startsWith("subject:")&&(t=n[0].replace(/^subject:\s*/i,"").trim(),o=1,o<n.length&&""===n[o].trim()&&o++),{subject:t,body:n.slice(o).join("\n").trim()}}(e);if("compose"===(0,E.J5)()){const e=Office.context.mailbox.item;e&&e.body&&"function"==typeof e.body.prependAsync&&e.body.prependAsync(B(t),{coercionType:Office.CoercionType.Html}),n&&e&&e.subject&&"function"==typeof e.subject.setAsync&&e.subject.setAsync(n)}else Office.context.mailbox.displayNewMessageForm({subject:n,htmlBody:B(t)})}(n)}catch(e){ne(e.message||"Failed to open compose window.")}else ne("No draft to copy. Please generate one first.")}async function Ae(){const e=z("reply-instructions")?.value||"",n=z("reply-tone")?.value||"professional",t=z("reply-include-original")?.checked??!0,o=z("reply-language")?.value||"auto",r=z("reply-goal")?.value||"none",i=z("reply-goal-custom")?.value||"",s={instructions:e+(0,y.buildGoalText)(r,i),tone:n,includeOriginal:t,language:o};te(),Z("Generating reply with Gemini...",e.length);try{const e=await(0,T.yd)(s);oe("reply-preview",e),ie(e,"reply-score"),X("reply-result-section"),z("reply-result-section")?.scrollIntoView({behavior:"smooth",block:"start"}),"compose"===(0,E.J5)()&&Q("btn-insert-reply-all")}catch(e){ne(e.message||"Failed to generate reply. Please try again.")}finally{ee()}}async function me(){te(),Z("Regenerating reply...");try{const e=await(0,T.FA)();oe("reply-preview",e),ie(e,"reply-score")}catch(e){ne(e.message||"Failed to regenerate reply. Please try again.")}finally{ee()}}async function he(){const e=z("reply-refine-input"),n=e?.value||"";if(n.trim()){te(),Z("Refining reply...");try{const t=await(0,T.Q$)(n);oe("reply-preview",t),ie(t,"reply-score"),e&&(e.value="")}catch(e){ne(e.message||"Failed to refine reply. Please try again.")}finally{ee()}}else ne("Please enter refinement instructions.")}async function fe(){const e=z("btn-suggest-replies"),n=z("suggest-replies-text"),o=z("reply-suggestions");if(e&&o){e.disabled=!0,n&&(n.textContent="Thinking..."),o.classList.add("hidden"),o.innerHTML="";try{const{getEmailContext:e}=await Promise.resolve().then(t.bind(t,87473)),n=await e(),r=`Read this email and suggest exactly 3 short reply sentences (5-12 words each) that the user could send back as a response.\nEach suggestion should be an actual reply message, NOT an email client action like archiving or unsubscribing.\nReturn ONLY 3 lines, one suggestion per line. No numbering, no bullets, no quotes, no extra text.\n\nEmail:\n${`From: ${n.sender.name} <${n.sender.email}>\nSubject: ${n.subject}\n\n${n.body}`.slice(0,2e3)}`,i=await(0,g.Df)(r,{temperature:.9,maxOutputTokens:1024});console.log("[Suggest replies] Raw response:",i);const s=i.split("\n").map(e=>e.replace(/^\d+[\.\)\-]\s*/,"").replace(/^[-•*]\s*/,"").replace(/^["']|["']$/g,"").trim()).filter(e=>e.length>5&&e.length<120).slice(0,3);if(0===s.length)throw new Error("No suggestions returned. Please try again.");s.slice(0,3).forEach(e=>{const n=document.createElement("button");n.type="button",n.className="aic-suggestion-chip",n.textContent=e,n.addEventListener("click",()=>{const t=z("reply-instructions");t&&(t.value=e,t.focus(),t.dispatchEvent(new Event("input",{bubbles:!0}))),o.querySelectorAll(".aic-suggestion-chip").forEach(e=>e.classList.remove("aic-suggestion-chip--active")),n.classList.add("aic-suggestion-chip--active")}),o.appendChild(n)}),o.classList.remove("hidden")}catch(e){ne(e.message||"Failed to generate suggestions.")}finally{e.disabled=!1,n&&(n.textContent="Suggest replies")}}}function ge(){const e=z("reply-preview");if(!e)return;const n=e.innerText||e.textContent||"";if(n.trim())try{(0,T.Vx)(n)}catch(e){ne(e.message||"Failed to open reply window.")}else ne("No reply to insert. Please generate one first.")}function Ee(){const e=z("reply-preview");if(!e)return;const n=e.innerText||e.textContent||"";if(n.trim())try{(0,T.aR)(n)}catch(e){ne(e.message||"Failed to open Reply All window.")}else ne("No reply to insert. Please generate one first.")}async function ye(){const e={style:function(){const e=document.querySelector('input[name="summary-style"]:checked');return e?.value||"bullets"}(),length:z("summary-length")?.value||"standard"};te(),Z("Summarizing with Gemini...");try{oe("summary-preview",await O(e)),X("summarize-result-section"),z("summarize-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){ne(e.message||"Failed to summarize. Please try again.")}finally{ee()}}async function ve(){te(),Z("Regenerating summary...");try{oe("summary-preview",await async function(){if(!S)throw new Error("No previous summary to regenerate. Please summarize first.");return O(S)}())}catch(e){ne(e.message||"Failed to regenerate summary. Please try again.")}finally{ee()}}async function Ce(){const e=z("summary-preview");if(!e)return;const n=e.innerText||e.textContent||"";if(n.trim())try{await async function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(e);const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}(n);const e=z("btn-copy-summary");if(e){const n=e.innerHTML;e.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',e.classList.add("aic-btn--success"),setTimeout(()=>{e.innerHTML=n,e.classList.remove("aic-btn--success")},1500)}}catch(e){ne(e.message||"Failed to copy to clipboard.")}else ne("No summary to copy.")}async function be(){const e={focus:function(){const e=document.querySelector('input[name="improve-focus"]:checked');return e?.value||"fix_grammar"}()};te(),Z("Improving with Gemini...");try{const n=await M(e),t=z("improve-diff");t&&(t.innerHTML=L(n.original,n.improved)),X("improve-result-section"),z("improve-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){ne(e.message||"Failed to improve text. Please try again.")}finally{ee()}}async function we(){te(),Z("Regenerating improvement...");try{const e=await async function(){if(!P)throw new Error("No previous improvement to regenerate.");return M(P)}(),n=z("improve-diff");n&&(n.innerHTML=L(e.original,e.improved))}catch(e){ne(e.message||"Failed to regenerate. Please try again.")}finally{ee()}}async function _e(){te();try{const e=await async function(){if(!N)throw new Error("No improved text to accept.");return"compose"===(0,E.J5)()?(await(e=N,new Promise((n,t)=>{const o=Office.context.mailbox.item;o&&"body"in o?o.body.setAsync(e,{coercionType:Office.CoercionType.Text},e=>{e.status===Office.AsyncResultStatus.Succeeded?n():t(new Error(e.error?.message||"Failed to replace body"))}):t(new Error("Cannot access compose body"))})),"replaced"):(await async function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(e);const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}(N),"copied");var e}(),n=z("btn-accept-changes");if(n){const t=n.innerHTML,o="replaced"===e?'<i class="ms-Icon ms-Icon--CheckMark"></i> Replaced!':'<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!';n.innerHTML=o,n.classList.add("aic-btn--success"),setTimeout(()=>{n.innerHTML=t,n.classList.remove("aic-btn--success")},1500)}}catch(e){ne(e.message||"Failed to accept changes.")}}async function xe(){te(),Z("Scanning for action items...");try{const e=await F(),n=z("extract-checklist");n&&(n.innerHTML=H(e)),X("extract-result-section"),z("extract-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){ne(e.message||"Failed to extract action items.")}finally{ee()}}async function Be(){te(),Z("Re-scanning for action items...");try{const e=await async function(){return F()}(),n=z("extract-checklist");n&&(n.innerHTML=H(e))}catch(e){ne(e.message||"Failed to re-extract.")}finally{ee()}}async function Te(){const e=G;if(0!==e.length)try{const n=function(e){return 0===e.length?"No action items found.":e.map((e,n)=>{let t=`${n+1}. ${e.task}`;return e.owner&&"—"!==e.owner&&(t+=` (Owner: ${e.owner})`),e.deadline&&"—"!==e.deadline&&(t+=` [Due: ${e.deadline}]`),t}).join("\n")}(e);await async function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(e);const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}(n);const t=z("btn-copy-tasks");if(t){const e=t.innerHTML;t.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',t.classList.add("aic-btn--success"),setTimeout(()=>{t.innerHTML=e,t.classList.remove("aic-btn--success")},1500)}}catch(e){ne(e.message||"Failed to copy tasks.")}else ne("No action items to copy.")}async function Ie(){const e=z("translate-language");if(e){te(),Z("Translating email...");try{const n=await W(e.value),t=z("translate-output");t&&(t.innerHTML=J(n)),X("translate-result-section"),z("translate-result-section")?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){ne(e.message||"Failed to translate.")}finally{ee()}}}async function Se(){const e=z("translate-language");if(e){te(),Z("Re-translating email...");try{const n=await async function(e){return W(e)}(e.value),t=z("translate-output");t&&(t.innerHTML=J(n))}catch(e){ne(e.message||"Failed to re-translate.")}finally{ee()}}}async function Oe(){const e=$;if(e)try{await async function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return void await navigator.clipboard.writeText(e);const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}(e.translated);const n=z("btn-copy-translation");if(n){const e=n.innerHTML;n.innerHTML='<i class="ms-Icon ms-Icon--CheckMark"></i> Copied!',n.classList.add("aic-btn--success"),setTimeout(()=>{n.innerHTML=e,n.classList.remove("aic-btn--success")},1500)}}catch(e){ne(e.message||"Failed to copy translation.")}else ne("No translation to copy.")}Office.onReady(e=>{if(e.host===Office.HostType.Outlook){Q("sideload-msg"),X("app-body");const e=(0,E.J5)();if(function(e){if("compose"===e){const e=z("btn-copy-compose");e&&(e.innerHTML='<i class="ms-Icon ms-Icon--Edit"></i> Insert into Email',e.title="Insert the draft into the current email");const n=z("btn-insert-reply");n&&(n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg> Insert Reply',n.title="Insert the reply into the current email");const o=z("btn-insert-reply-all");o&&o.classList.add("hidden");const r=z("reply-sender"),i=z("reply-subject");r&&(r.textContent="Loading…"),Promise.resolve().then(t.bind(t,89419)).then(async({getOriginalSender:e,getCurrentEmailSubject:n})=>{try{const[n,t]=await Promise.all([e(),(async()=>{const e=Office.context.mailbox.item;return e&&e.subject&&"function"==typeof e.subject.getAsync?new Promise(n=>{e.subject.getAsync(e=>{n(e.status===Office.AsyncResultStatus.Succeeded&&e.value||"(new email)")})}):"(new email)"})()]);r&&(r.textContent=n.name?`${n.name} <${n.email}>`:n.email||"Unknown sender"),i&&(i.textContent=t)}catch{r&&(r.textContent="Could not read email"),i&&(i.textContent="—")}})}}(e),"read"===e)le();else if("compose"===e){const e=Office.context.mailbox.item;e&&e.to&&"function"==typeof e.to.getAsync?e.to.getAsync(e=>{e.status===Office.AsyncResultStatus.Succeeded&&e.value&&e.value.length>0?ae("reply"):ae("draft")}):ae("draft")}Office.context.mailbox&&Office.context.mailbox.addHandlerAsync(Office.EventType.ItemChanged,()=>{le()});const n=(0,y.loadSettings)();try{const e=n.apiKey||window.__AICompose_API_KEY__||"";e&&(0,g.HW)(e)}catch{}const o=e=>{const n=z("draft-tone"),t=z("reply-tone");n&&(n.value=e.defaultTone),t&&(t.value=e.defaultTone);const o=document.querySelector(`input[name="summary-style"][value="${e.defaultSummaryStyle}"]`);o&&(o.checked=!0);const r=z("translate-language");r&&(r.value=e.defaultLanguage);const i=z("settings-api-key"),s=z("settings-model"),a=z("settings-tone"),l=z("settings-summary-style"),c=z("settings-language");i&&(i.value=e.apiKey),s&&(s.value=e.defaultModel),a&&(a.value=e.defaultTone),l&&(l.value=e.defaultSummaryStyle),c&&(c.value=e.defaultLanguage);for(const[n,t]of Object.entries(e.presetRules)){const e=z(`rule-${n}`);e&&(e.checked=t)}const u=z("custom-rules");u&&(u.value=e.customRules)};o(n);try{const e=Office.context.officeTheme;if(e?.bodyBackgroundColor){const n=e.bodyBackgroundColor.replace("#",""),t=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16);.299*t+.587*o+.114*parseInt(n.substring(4,6),16)<128&&document.documentElement.setAttribute("data-theme","dark")}}catch{}new Set(["summarize","improve","extract"]);const r=z("tab-more"),i=z("more-dropdown"),s=r?.closest(".aic-split"),a=e=>{if(!i||!s)return;const n=void 0!==e?e:i.classList.contains("hidden");i.classList.toggle("hidden",!n),s.classList.toggle("aic-split--open",n)};document.querySelectorAll(".aic-tabs > .aic-tab").forEach(e=>{e.addEventListener("click",()=>{const n=e.dataset.tab;n&&"more"!==n&&(ae(n),r?.classList.remove("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(e=>e.classList.remove("aic-dropdown__item--active")),a(!1))})}),r?.addEventListener("click",e=>{e.stopPropagation(),a()}),document.querySelectorAll(".aic-dropdown__item").forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const t=e.dataset.tab;t&&(ae(t),document.querySelectorAll(".aic-tab").forEach(e=>e.classList.remove("aic-tab--active")),r?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(e=>e.classList.remove("aic-dropdown__item--active")),e.classList.add("aic-dropdown__item--active"),a(!1))})}),document.addEventListener("click",()=>a(!1)),document.querySelectorAll(".aic-char-count[data-for]").forEach(e=>{const n=e.getAttribute("data-for");if(!n)return;const t=z(n);if(!t)return;const o=t.maxLength||1e3,r=document.querySelector(`.aic-btn-clear[data-clear="${n}"]`);t.addEventListener("input",()=>{e.textContent=`${t.value.length} / ${o}`,t.style.height="auto",t.style.height=t.scrollHeight+"px",r&&(t.value.length>0?r.classList.remove("hidden"):r.classList.add("hidden"))})}),document.querySelectorAll(".aic-btn-clear[data-clear]").forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-clear");if(!n)return;const t=z(n);t&&(t.value="",t.style.height="",t.dispatchEvent(new Event("input")),t.focus())})}),z("btn-generate")?.addEventListener("click",ce),z("btn-regenerate")?.addEventListener("click",ue),z("btn-refine")?.addEventListener("click",de),z("btn-copy-compose")?.addEventListener("click",pe),z("refine-input")?.addEventListener("keydown",e=>{"Enter"===e.key&&de()}),z("btn-generate-reply")?.addEventListener("click",Ae),z("btn-suggest-replies")?.addEventListener("click",fe),z("btn-regenerate-reply")?.addEventListener("click",me),z("btn-refine-reply")?.addEventListener("click",he),z("btn-insert-reply")?.addEventListener("click",ge),z("btn-insert-reply-all")?.addEventListener("click",Ee),z("reply-refine-input")?.addEventListener("keydown",e=>{"Enter"===e.key&&he()}),z("btn-summarize")?.addEventListener("click",ye),z("btn-regenerate-summary")?.addEventListener("click",ve),z("btn-copy-summary")?.addEventListener("click",Ce),z("btn-improve")?.addEventListener("click",be),z("btn-regenerate-improve")?.addEventListener("click",we),z("btn-accept-changes")?.addEventListener("click",_e),z("btn-extract")?.addEventListener("click",xe),z("btn-regenerate-extract")?.addEventListener("click",Be),z("btn-copy-tasks")?.addEventListener("click",Te),z("btn-translate")?.addEventListener("click",Ie),z("btn-regenerate-translate")?.addEventListener("click",Se),z("btn-copy-translation")?.addEventListener("click",Oe),z("tab-settings")?.addEventListener("click",()=>{ae("settings"),document.querySelectorAll(".aic-tab").forEach(e=>e.classList.remove("aic-tab--active")),z("tab-settings")?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(e=>e.classList.remove("aic-dropdown__item--active")),a(!1)}),z("tab-rules")?.addEventListener("click",()=>{ae("rules"),document.querySelectorAll(".aic-tab").forEach(e=>e.classList.remove("aic-tab--active")),z("tab-rules")?.classList.add("aic-tab--active"),document.querySelectorAll(".aic-dropdown__item").forEach(e=>e.classList.remove("aic-dropdown__item--active")),a(!1)}),z("btn-save-rules")?.addEventListener("click",()=>{const e=(0,y.loadSettings)(),n={};for(const t of Object.keys(e.presetRules)){const e=z(`rule-${t}`);n[t]=e?.checked??!1}const t=z("custom-rules")?.value||"";(0,y.saveSettings)({...e,presetRules:n,customRules:t});const o=z("rules-saved-msg");o&&(o.classList.remove("hidden"),setTimeout(()=>{o.classList.add("hidden")},2500))}),z("btn-toggle-api-key")?.addEventListener("click",()=>{const e=z("settings-api-key"),n=z("icon-eye-show"),t=z("icon-eye-hide");e&&("password"===e.type?(e.type="text",n&&n.classList.add("hidden"),t&&t.classList.remove("hidden")):(e.type="password",n&&n.classList.remove("hidden"),t&&t.classList.add("hidden")))}),z("btn-save-settings")?.addEventListener("click",()=>{const e=z("settings-api-key")?.value?.trim()||"",n=z("settings-model")?.value||"gemini-3-flash-preview",t=z("settings-tone")?.value||"professional",r=z("settings-summary-style")?.value||"bullets",i=z("settings-language")?.value||"English",s=z("api-key-error");if(e&&!K(e))return void(s&&(s.textContent='Invalid API key format. Keys typically start with "AIza" and are 39 characters long.',s.classList.remove("hidden")));s&&s.classList.add("hidden");const a={...(0,y.loadSettings)(),apiKey:e,defaultModel:n,defaultTone:t,defaultSummaryStyle:r,defaultLanguage:i};(0,y.saveSettings)(a),o(a);const l=z("settings-saved-msg");l&&(l.classList.remove("hidden"),setTimeout(()=>{l.classList.add("hidden")},2e3));const c=z("btn-save-settings");c&&(c.classList.add("aic-btn--success"),setTimeout(()=>c.classList.remove("aic-btn--success"),1500))}),z("btn-test-connection")?.addEventListener("click",async()=>{const e=z("settings-api-key")?.value?.trim()||"",n=z("test-connection-result"),t=z("api-key-error"),o=z("btn-test-connection");if(n)if(e)if(K(e)){t&&t.classList.add("hidden"),n.classList.remove("hidden"),n.style.color="var(--color-aic-text-secondary)",n.textContent="Testing connection…",o&&o.setAttribute("disabled","true");try{(0,g.HW)(e);try{await(0,g.Df)("Say hello in one word.",{maxOutputTokens:20,temperature:.5})}catch(e){if("CONTENT_FILTERED"!==e?.code)throw e}n.style.color="var(--color-aic-success)",n.textContent="✓ Connection successful! API key is valid.",o&&(o.classList.add("aic-btn--success"),setTimeout(()=>o.classList.remove("aic-btn--success"),2e3))}catch(e){n.style.color="var(--color-aic-error-text)",n.textContent=`✗ ${e.message||"Connection failed. Please check your API key."}`}finally{o&&o.removeAttribute("disabled")}}else t&&(t.textContent='Invalid API key format. Keys typically start with "AIza" and are 39 characters long.',t.classList.remove("hidden"));else t&&(t.textContent="Please enter an API key first.",t.classList.remove("hidden"))}),z("btn-clear-all-data")?.addEventListener("click",()=>{(0,y.resetSettings)();const e=(0,y.loadSettings)();o(e);const n=z("clear-data-msg");n&&(n.classList.remove("hidden"),setTimeout(()=>{n.classList.add("hidden")},2500))});const l=z("btn-scroll-top");l&&(window.addEventListener("scroll",()=>{window.scrollY>300?l.classList.remove("hidden"):l.classList.add("hidden")}),l.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));const c=()=>{const e=(0,y.getTemplates)();["draft","reply"].forEach(n=>{const t=z(`${n}-template`);if(!t)return;const o=t.value;t.innerHTML='<option value="">Templates...</option>';const r=n;e.filter(e=>e.type===r||"both"===e.type).forEach(e=>{const n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)}),t.value=o})};c(),["draft","reply"].forEach(e=>{const n=z(`${e}-template`),t=z(`${e}-instructions`),o=z(`btn-delete-${e}-template`);n?.addEventListener("change",()=>{const e=n.value;if(!e)return void o?.classList.add("hidden");const r=(0,y.getTemplates)().find(n=>n.id===e);r&&t&&(t.value=r.instructions,t.dispatchEvent(new Event("input",{bubbles:!0}))),o?.classList.remove("hidden")}),z(`btn-save-${e}-template`)?.addEventListener("click",()=>{const o=t?.value?.trim();if(!o)return void ne("Write some instructions first before saving as a template.");const r=n?.parentElement;if(!r)return;if(r.querySelector(".aic-template-name-input"))return;const i=document.createElement("input");i.type="text",i.className="aic-select aic-template-select flex-1 aic-template-name-input",i.placeholder="Template name...",i.maxLength=50,n.classList.add("hidden"),r.insertBefore(i,n),i.focus();const s=t=>{const r=i.value.trim();i.remove(),n.classList.remove("hidden"),t&&r&&((0,y.saveTemplate)({name:r,instructions:o,type:e}),c())};i.addEventListener("keydown",e=>{"Enter"===e.key&&s(!0),"Escape"===e.key&&s(!1)}),i.addEventListener("blur",()=>s(!0))}),z(`btn-delete-${e}-template`)?.addEventListener("click",()=>{const e=n?.value;e&&((0,y.deleteTemplate)(e),n.value="",o?.classList.add("hidden"),c())})}),["draft","reply"].forEach(e=>{const n=z(`${e}-goal`),t=z(`${e}-goal-custom`);n&&t&&n.addEventListener("change",()=>{"custom"===n.value?(t.classList.remove("hidden"),t.focus()):(t.classList.add("hidden"),t.value="")})}),["draft-preview","reply-preview"].forEach(e=>{z(e)?.addEventListener("input",()=>re(e))}),document.querySelectorAll(".aic-copy-btn").forEach(e=>{e.addEventListener("click",async()=>{const n=e.dataset.copyTarget;if(!n)return;const t=z(n);if(!t)return;const o=t.innerText||t.textContent||"";if(o.trim())try{await navigator.clipboard.writeText(o);const n=e.innerHTML;e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>',e.classList.add("aic-copy-btn--success"),setTimeout(()=>{e.innerHTML=n,e.classList.remove("aic-copy-btn--success")},1500)}catch{ne("Failed to copy to clipboard.")}})}),z("btn-dismiss-error")?.addEventListener("click",te)}})})()})();
//# sourceMappingURL=taskpane.js.map